var geoJSONFormat=new ol.format.GeoJSON({defaultDataProjection:"EPSG:4326"}),styleCache={},bing=new ol.layer.Tile({visible:!0,source:new ol.source.BingMaps({key:"Ak2Gq8VUfICsPpuf7LRANXmXt2sHWmSLPhohmVLFtFIEwYjs_5MCyAhAFwRSVpLj",imagerySet:"Aerial"}),maxZoom:19,crossOrigin:"anonymous",preload:1/0,nameEl:"Δορυφορική εικόνα",nameEn:"Satellite Image",id:"bing"}),mapbox=new ol.layer.Tile({source:new ol.source.XYZ({attributions:new ol.Attribution({html:'<a href="https://www.mapbox.com/about/maps/" target="_blank">&copy; Mapbox &copy; OpenStreetMap</a>'}),url:"https://api.mapbox.com/v4/mapbox.streets/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiZmlydmFpbiIsImEiOiJlOWYyYTM0NThiNWM0YjJjODJjNDE4ODQzNzA2MGQyNiJ9.-NVDO27Hzt-w_nQosUPfLA"})}),propertyStyleFunction=function(e,o){console.log(e.get("features"));var t=e.get("features").length,r=styleCache[t];return r||(r=[new ol.style.Style({image:new ol.style.Circle({radius:15,stroke:new ol.style.Stroke({color:[156,39,176,.8],width:5}),fill:new ol.style.Fill({color:[68,138,255,1]})}),text:new ol.style.Text({text:t.toString(),fill:new ol.style.Fill({color:"#FFFFFF"})}),zIndex:101})],styleCache[t]=r),r},propertySource=new ol.source.Vector({format:geoJSONFormat,loader:function(e,o,t){var r=ol.proj.transformExtent(e,"EPSG:3857","EPSG:4326"),l="http://localhost:3000/db/property?bbox[x1]="+r[0]+"&bbox[y1]="+r[1]+"&bbox[x2]="+r[2]+"&bbox[y2]="+r[3],a=this;this.clear(),$.ajax({url:l,type:"GET",dataType:"json"}).done(function(e){var o=geoJSONFormat.readFeatures(e,{featureProjection:"EPSG:3857"});a.addFeatures(o)}).fail(function(){console.log("error")})},strategy:ol.loadingstrategy.bbox}),propertyClusterSource=new ol.source.Cluster({distance:40,source:propertySource,attributions:[new ol.Attribution({html:'All maps © <a href="http://www.terracognita.gr/">Terra Cognita</a>'})]}),property=new ol.layer.Vector({source:propertyClusterSource,nameEl:"Ιδιοκτησίες",nameEn:"Estates",id:"estates",visible:!0,style:propertyStyleFunction}),map=new ol.Map({target:"map",layers:[mapbox,property],loadTilesWhileAnimating:!0,loadTilesWhileInteracting:!0,renderer:"canvas",controls:ol.control.defaults({attributionOptions:{collapsible:!1,collapsed:!1}}).extend([new ol.control.ScaleLine({units:"metric"}),new ol.control.OverviewMap({className:"ol-overviewmap ol-custom-overviewmap",collapsible:!0,collapsed:!0,layers:[new ol.layer.Tile({source:new ol.source.OSM,visible:!0,preload:1/0,crossOrigin:"anonymous",nameEl:"Μικρός Χάρτης",nameEn:"MiniMap",id:"overviewOsm"})]})]),view:new ol.View({center:[3713616,4181258],extent:[3590094,4102833,3855483,4261211],projection:"EPSG:3857",zoom:14,maxZoom:19,minZoom:10})});
!function(){var e=new ol.Geolocation({projection:map.getView().getProjection(),trackingOptions:{maximumAge:1e4,enableHighAccuracy:!0,timeout:6e5}}),o=new ol.Feature;e.on("change:accuracyGeometry",function(){o.setGeometry(e.getAccuracyGeometry())});var t=new ol.Feature;t.setStyle(new ol.style.Style({image:new ol.style.Circle({radius:6,fill:new ol.style.Fill({color:"#3399CC"}),stroke:new ol.style.Stroke({color:"#fff",width:2})})})),e.on("change:position",function(){var o=e.getPosition();t.setGeometry(o?new ol.geom.Point(o):null)}),featuresOverlaySource=new ol.source.Vector({});new ol.layer.Vector({map:map,source:featuresOverlaySource});$(".geolocation").on("change",function(r){r.preventDefault(),$(this).prop("checked")===!0?(e.setTracking(!0),featuresOverlaySource.addFeatures([t,o])):(e.setTracking(!1),featuresOverlaySource.clear())})}();
!function(){function e(e){e.preventDefault();var n=e.coordinate;o.innerHTML="<p>You clicked here:</p><code>"+n+"</code>",c.setPosition(n)}var n=document.getElementById("popup"),o=document.getElementById("popup-content"),t=document.getElementById("popup-closer");t.onclick=function(){return c.setPosition(void 0),t.blur(),!1};var c=new ol.Overlay({element:n,autoPan:!0,autoPanAnimation:{duration:250}});map.addOverlay(c),$(".info").on("change",function(n){n.preventDefault(),$(this).prop("checked")===!0?map.on("singleclick",e):map.un("singleclick",e)})}();
!function(){function e(e){e.preventDefault();var r=n.getSource().getFeatures().length,a=e.coordinate;if(0===r)t.setGeometry(new ol.geom.Point(a)),t.setId("first"),n.getSource().addFeature(t),c[0]=a[0],c[1]=a[1];else if(1===r){var i=t.clone();i.setGeometry(new ol.geom.Point(a)),i.setId("second"),n.getSource().addFeature(i),c[2]=a[0],c[3]=a[1],o(c)}else n.getSource().clear()}function o(e){var o=ol.proj.transform([e[0],e[1]],"EPSG:3857","EPSG:4326"),t=ol.proj.transform([e[2],e[3]],"EPSG:3857","EPSG:4326"),r=o[0],a=o[1],c=t[0],i=t[1];$.ajax({url:"https://api.mapbox.com/v4/directions/mapbox.driving/"+r+","+a+";"+c+","+i+".json?alternatives=false&access_token=pk.eyJ1IjoiZmlydmFpbiIsImEiOiJlOWYyYTM0NThiNWM0YjJjODJjNDE4ODQzNzA2MGQyNiJ9.-NVDO27Hzt-w_nQosUPfLA",type:"GET",dataType:"json"}).done(function(e){var o={};o.type="Feature",o.geometry=e.routes[0].geometry,n.getSource().addFeatures(geoJSONFormat.readFeatures(o,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"})),map.getView().fit(n.getSource().getExtent(),map.getSize())}).fail(function(){console.log("error")}).always(function(){console.log("complete")})}var t=new ol.Feature,r=new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",opacity:1,scale:1,src:"../images/map-icons/pins/24/pin1.png",snapToPixel:!1}),zIndex:100});t.setStyle(r);var a=new ol.style.Style({stroke:new ol.style.Stroke({color:"#408080",width:5,lineDash:[4,4]})}),n=new ol.layer.Vector({map:map,source:new ol.source.Vector,style:a,id:"route",nameEl:"Διαδρομή",NameEn:"Route"}),c=[];geoJSONFormat=new ol.format.GeoJSON({defaultDataProjection:"EPSG:4326",geometryName:"geometry"}),$(".marker").on("change",function(o){o.preventDefault(),$(this).prop("checked")===!0?map.on("singleclick",e):(map.un("singleclick",e),n.getSource().clear())})}();
!function(){$(".weather").change(function(){if($(this).prop("checked")===!0){map.getOverlays().forEach(function(e){"weather"===e.get("name")&&($(e.getElement()).parent().remove(),$(e.getElement()).remove())});var e=ol.proj.transform(map.getView().getCenter(),"EPSG:3857","EPSG:4326"),t=e[1],a=e[0];$.ajax({url:"http://api.openweathermap.org/data/2.5/find?lat="+t+"&lon="+a+"&cnt=5&cluster=no&units=metric&type=accurate&APPID=f9cd9fa2c427c3b115e87e4862619c5c",type:"GET",dataType:"json"}).done(function(e){function t(e,t){var a=document.createElement("div");return a.setAttribute("class","weather-popup default-primary-color  paper-shadow-bottom-z-4"),a.setAttribute("id",t),a.setAttribute("data-name","weather"),new ol.Overlay({element:a,position:e})}var a,r,n=e.list;$.each(n,function(e,n){r=ol.proj.transform([n.coord.lon,n.coord.lat],"EPSG:4326","EPSG:3857"),a=t(r,e),map.addOverlay(a),a.set("name","weather"),weatherData={name:n.name,temp:n.main.temp,pressure:n.main.pressure,humidity:n.main.humidity},dust.render("weatherPopup.dust",weatherData,function(t,a){$("#"+e).html(a)})})}).fail(function(){})}else $(this).prop("checked")===!1&&map.getOverlays().forEach(function(e){"weather"===e.get("name")&&($(e.getElement()).parent().remove(),$(e.getElement()).remove())})})}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hcC5qcyIsImdlb2xvY2F0aW9uLmpzIiwiaW5mby5qcyIsInJvdXRpbmcuanMiLCJ3ZWF0aGVyLmpzIl0sIm5hbWVzIjpbImdlb0pTT05Gb3JtYXQiLCJvbCIsImZvcm1hdCIsIkdlb0pTT04iLCJkZWZhdWx0RGF0YVByb2plY3Rpb24iLCJzdHlsZUNhY2hlIiwiYmluZyIsImxheWVyIiwiVGlsZSIsInZpc2libGUiLCJzb3VyY2UiLCJCaW5nTWFwcyIsImtleSIsImltYWdlcnlTZXQiLCJtYXhab29tIiwiY3Jvc3NPcmlnaW4iLCJwcmVsb2FkIiwiSW5maW5pdHkiLCJuYW1lRWwiLCJuYW1lRW4iLCJpZCIsIm1hcGJveCIsIlhZWiIsImF0dHJpYnV0aW9ucyIsIkF0dHJpYnV0aW9uIiwiaHRtbCIsInVybCIsInByb3BlcnR5U3R5bGVGdW5jdGlvbiIsImZlYXR1cmUiLCJyZXNvbHV0aW9uIiwiY29uc29sZSIsImxvZyIsImdldCIsInNpemUiLCJsZW5ndGgiLCJzdHlsZSIsIlN0eWxlIiwiaW1hZ2UiLCJDaXJjbGUiLCJyYWRpdXMiLCJzdHJva2UiLCJTdHJva2UiLCJjb2xvciIsIndpZHRoIiwiZmlsbCIsIkZpbGwiLCJ0ZXh0IiwiVGV4dCIsInRvU3RyaW5nIiwiekluZGV4IiwicHJvcGVydHlTb3VyY2UiLCJWZWN0b3IiLCJsb2FkZXIiLCJleHRlbnQiLCJwcm9qZWN0aW9uIiwiZXBzZzQzMjZFeHRlbnQiLCJwcm9qIiwidHJhbnNmb3JtRXh0ZW50IiwidGhhdCIsInRoaXMiLCJjbGVhciIsIiQiLCJhamF4IiwidHlwZSIsImRhdGFUeXBlIiwiZG9uZSIsInJlc3BvbnNlIiwiZmVhdHVyZXMiLCJyZWFkRmVhdHVyZXMiLCJmZWF0dXJlUHJvamVjdGlvbiIsImFkZEZlYXR1cmVzIiwiZmFpbCIsInN0cmF0ZWd5IiwibG9hZGluZ3N0cmF0ZWd5IiwiYmJveCIsInByb3BlcnR5Q2x1c3RlclNvdXJjZSIsIkNsdXN0ZXIiLCJkaXN0YW5jZSIsInByb3BlcnR5IiwibWFwIiwiTWFwIiwidGFyZ2V0IiwibGF5ZXJzIiwibG9hZFRpbGVzV2hpbGVBbmltYXRpbmciLCJsb2FkVGlsZXNXaGlsZUludGVyYWN0aW5nIiwicmVuZGVyZXIiLCJjb250cm9scyIsImNvbnRyb2wiLCJkZWZhdWx0cyIsImF0dHJpYnV0aW9uT3B0aW9ucyIsImNvbGxhcHNpYmxlIiwiY29sbGFwc2VkIiwiZXh0ZW5kIiwiU2NhbGVMaW5lIiwidW5pdHMiLCJPdmVydmlld01hcCIsImNsYXNzTmFtZSIsIk9TTSIsInZpZXciLCJWaWV3IiwiY2VudGVyIiwiem9vbSIsIm1pblpvb20iLCJnZW9sb2NhdGlvbiIsIkdlb2xvY2F0aW9uIiwiZ2V0VmlldyIsImdldFByb2plY3Rpb24iLCJ0cmFja2luZ09wdGlvbnMiLCJtYXhpbXVtQWdlIiwiZW5hYmxlSGlnaEFjY3VyYWN5IiwidGltZW91dCIsImFjY3VyYWN5RmVhdHVyZSIsIkZlYXR1cmUiLCJvbiIsInNldEdlb21ldHJ5IiwiZ2V0QWNjdXJhY3lHZW9tZXRyeSIsInBvc2l0aW9uRmVhdHVyZSIsInNldFN0eWxlIiwiY29vcmRpbmF0ZXMiLCJnZXRQb3NpdGlvbiIsImdlb20iLCJQb2ludCIsImZlYXR1cmVzT3ZlcmxheVNvdXJjZSIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInByb3AiLCJzZXRUcmFja2luZyIsImhhbmRsZUluZm8iLCJldnQiLCJjb29yZGluYXRlIiwiY29udGVudCIsImlubmVySFRNTCIsImluZm8iLCJzZXRQb3NpdGlvbiIsImNvbnRhaW5lciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJjbG9zZXIiLCJvbmNsaWNrIiwidW5kZWZpbmVkIiwiYmx1ciIsIk92ZXJsYXkiLCJlbGVtZW50IiwiYXV0b1BhbiIsImF1dG9QYW5BbmltYXRpb24iLCJkdXJhdGlvbiIsImFkZE92ZXJsYXkiLCJ1biIsImhhbmRsZU1hcmtlciIsImV2ZW50IiwiZmVhdHVyZUNvdW50IiwiZmVhdHVyZXNPdmVybGF5IiwiZ2V0U291cmNlIiwiZ2V0RmVhdHVyZXMiLCJtYXJrZXIiLCJzZXRJZCIsImFkZEZlYXR1cmUiLCJyb3V0ZUNvb3JkcyIsImNsb25lIiwiY2FsbFJvdXRlIiwiZmlyc3QiLCJ0cmFuc2Zvcm0iLCJzZWNvbmQiLCJ4MSIsInkxIiwieDIiLCJ5MiIsImRhdGEiLCJyb3V0ZSIsImdlb21ldHJ5Iiwicm91dGVzIiwiZGF0YVByb2plY3Rpb24iLCJmaXQiLCJnZXRFeHRlbnQiLCJnZXRTaXplIiwiYWx3YXlzIiwiaWNvblN0eWxlIiwiSWNvbiIsImFuY2hvciIsImFuY2hvclhVbml0cyIsImFuY2hvcllVbml0cyIsIm9wYWNpdHkiLCJzY2FsZSIsInNyYyIsInNuYXBUb1BpeGVsIiwiZmVhdHVyZXNPdmVybGF5U3R5bGUiLCJsaW5lRGFzaCIsIk5hbWVFbiIsImdlb21ldHJ5TmFtZSIsImNoYW5nZSIsImdldE92ZXJsYXlzIiwiZm9yRWFjaCIsIm92bCIsImdldEVsZW1lbnQiLCJwYXJlbnQiLCJyZW1vdmUiLCJnZXRDZW50ZXIiLCJsYXQiLCJsb24iLCJjcmVhdGVXZWF0aGVyT3ZlcmxheSIsInBvc2l0aW9uIiwiaW5kZXgiLCJlbGVtIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsIm92ZXJsYXkiLCJvYmpzIiwibGlzdCIsImVhY2giLCJ2YWwiLCJjb29yZCIsInNldCIsIndlYXRoZXJEYXRhIiwibmFtZSIsInRlbXAiLCJtYWluIiwicHJlc3N1cmUiLCJodW1pZGl0eSIsImR1c3QiLCJyZW5kZXIiLCJlcnIiLCJvdXQiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUlBLGVBQWdCLEdBQUlDLElBQUdDLE9BQU9DLFNBQ2hDQyxzQkFBdUIsY0FFckJDLGNBQ0FDLEtBQU8sR0FBSUwsSUFBR00sTUFBTUMsTUFDdEJDLFNBQVMsRUFDVEMsT0FBUSxHQUFJVCxJQUFHUyxPQUFPQyxVQUNwQkMsSUFBSyxtRUFDTEMsV0FBWSxXQUVkQyxRQUFTLEdBQ1RDLFlBQWEsWUFDYkMsUUFBU0MsRUFBQUEsRUFDVEMsT0FBUSxvQkFD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TWIsS0FBTSxZQUFhLGFBQzdFUSxFQUFVTixFQUFxQmpGLEVBQWFtRixHQUM1QzFILElBQUltRSxXQUFXMkQsR0FDZkEsRUFBUU0sSUFBSSxPQUFRLFdBQ3BCQyxhQUNFQyxLQUFRSixFQUFJSSxLQUNaQyxLQUFRTCxFQUFJTSxLQUFLRCxLQUNqQkUsU0FBWVAsRUFBSU0sS0FBS0MsU0FDckJDLFNBQVlSLEVBQUlNLEtBQUtFLFVBRXZCQyxLQUFLQyxPQUFPLG9CQUFxQlAsWUFBYSxTQUFTUSxFQUFLQyxHQUMxRGhLLEVBQUUsSUFBTTRJLEdBQU9oTCxLQUFLb00sU0FHdkJ0SixLQUFLLGtCQUdDVixHQUFFRixNQUFNa0UsS0FBSyxjQUFlLEdBQ3JDOUMsSUFBSStHLGNBQWNDLFFBQVEsU0FBU0MsR0FDVCxZQUFwQkEsRUFBSWhLLElBQUksVUFDVDZCLEVBQUVtSSxFQUFJQyxjQUFjQyxTQUFVQyxTQUMvQnRJLEVBQUVtSSxFQUFJQyxjQUFjRSIsImZpbGUiOiJzY3JpcHRzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBnZW9KU09ORm9ybWF0ID0gbmV3IG9sLmZvcm1hdC5HZW9KU09OKHtcclxuICBkZWZhdWx0RGF0YVByb2plY3Rpb246ICdFUFNHOjQzMjYnXHJcbn0pO1xyXG52YXIgc3R5bGVDYWNoZSA9IHt9O1xyXG52YXIgYmluZyA9IG5ldyBvbC5sYXllci5UaWxlKHtcclxuICB2aXNpYmxlOiB0cnVlLFxyXG4gIHNvdXJjZTogbmV3IG9sLnNvdXJjZS5CaW5nTWFwcyh7XHJcbiAgICBrZXk6ICdBazJHcThWVWZJQ3NQcHVmN0xSQU5YbVh0MnNIV21TTFBob2htVkxGdEZJRXdZanNfNU1DeUFoQUZ3UlNWcExqJyxcclxuICAgIGltYWdlcnlTZXQ6ICdBZXJpYWwnXHJcbiAgfSksXHJcbiAgbWF4Wm9vbTogMTksXHJcbiAgY3Jvc3NPcmlnaW46ICdhbm9ueW1vdXMnLFxyXG4gIHByZWxvYWQ6IEluZmluaXR5LFxyXG4gIG5hbWVFbDogJ86Uzr/Pgc+Fz4bOv8+BzrnOus6uIM61zrnOus+Mzr3OsScsXHJcbiAgbmFtZUVuOiAnU2F0ZWxsaXRlIEltYWdlJyxcclxuICBpZDogJ2JpbmcnXHJcbn0pO1xyXG52YXIgbWFwYm94ID0gbmV3IG9sLmxheWVyLlRpbGUoe1xyXG4gIHNvdXJjZTogbmV3IG9sLnNvdXJjZS5YWVooe1xyXG4gICAgYXR0cmlidXRpb25zOiBuZXcgb2wuQXR0cmlidXRpb24oe1xyXG4gICAgICBodG1sOiAnPGEgaHJlZj1cXFwiaHR0cHM6Ly93d3cubWFwYm94LmNvbS9hYm91dC9tYXBzL1xcXCIgdGFyZ2V0PVxcXCJfYmxhbmtcXFwiPiZjb3B5OyBNYXBib3ggJmNvcHk7IE9wZW5TdHJlZXRNYXA8L2E+J1xyXG4gICAgfSksXHJcbiAgICB1cmw6ICdodHRwczovL2FwaS5tYXBib3guY29tL3Y0L21hcGJveC5zdHJlZXRzL3t6fS97eH0ve3l9LnBuZz9hY2Nlc3NfdG9rZW49cGsuZXlKMUlqb2labWx5ZG1GcGJpSXNJbUVpT2lKbE9XWXlZVE0wTlRoaU5XTTBZakpqT0RKak5ERTRPRFF6TnpBMk1HUXlOaUo5Li1OVkRPMjdIenQtd19uUW9zVVBmTEEnXHJcbiAgfSlcclxufSk7XHJcbnZhciBwcm9wZXJ0eVN0eWxlRnVuY3Rpb24gPSBmdW5jdGlvbihmZWF0dXJlLCByZXNvbHV0aW9uKSB7XHJcbiAgY29uc29sZS5sb2coZmVhdHVyZS5nZXQoJ2ZlYXR1cmVzJykpO1xyXG4gIHZhciBzaXplID0gZmVhdHVyZS5nZXQoJ2ZlYXR1cmVzJykubGVuZ3RoO1xyXG4gIHZhciBzdHlsZSA9IHN0eWxlQ2FjaGVbc2l6ZV07XHJcbiAgaWYgKCFzdHlsZSkge1xyXG4gICAgc3R5bGUgPSBbbmV3IG9sLnN0eWxlLlN0eWxlKHtcclxuICAgICAgaW1hZ2U6IG5ldyBvbC5zdHlsZS5DaXJjbGUoe1xyXG4gICAgICAgIHJhZGl1czogMTUsXHJcbiAgICAgICAgc3Ryb2tlOiBuZXcgb2wuc3R5bGUuU3Ryb2tlKHtcclxuICAgICAgICAgIGNvbG9yOiBbMTU2LCAzOSwgMTc2LCAwLjhdLFxyXG4gICAgICAgICAgd2lkdGggOiA1XHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgZmlsbDogbmV3IG9sLnN0eWxlLkZpbGwoe1xyXG4gICAgICAgICAgY29sb3I6IFs2OCwgMTM4LCAyNTUsIDEuMF1cclxuICAgICAgICB9KVxyXG4gICAgICB9KSxcclxuICAgICAgdGV4dDogbmV3IG9sLnN0eWxlLlRleHQoe1xyXG4gICAgICAgIHRleHQ6IHNpemUudG9TdHJpbmcoKSxcclxuICAgICAgICBmaWxsOiBuZXcgb2wuc3R5bGUuRmlsbCh7XHJcbiAgICAgICAgICBjb2xvcjogJyNGRkZGRkYnXHJcbiAgICAgICAgfSlcclxuICAgICAgfSksXHJcbiAgICAgIHpJbmRleDogMTAxXHJcbiAgICB9KV07XHJcbiAgICBzdHlsZUNhY2hlW3NpemVdID0gc3R5bGU7XHJcbiAgfVxyXG4gIHJldHVybiBzdHlsZTtcclxufTtcclxudmFyIHByb3BlcnR5U291cmNlID0gbmV3IG9sLnNvdXJjZS5WZWN0b3Ioe1xyXG4gIGZvcm1hdDogZ2VvSlNPTkZvcm1hdCxcclxuICBsb2FkZXI6IGZ1bmN0aW9uKGV4dGVudCwgcmVzb2x1dGlvbiwgcHJvamVjdGlvbikge1xyXG4gICAgdmFyIGVwc2c0MzI2RXh0ZW50ID0gb2wucHJvai50cmFuc2Zvcm1FeHRlbnQoZXh0ZW50LCAnRVBTRzozODU3JywgJ0VQU0c6NDMyNicpO1xyXG4gICAgdmFyIHVybCA9ICdodHRwOi8vbG9jYWxob3N0OjMwMDAvZGIvcHJvcGVydHk/YmJveFt4MV09JyArIGVwc2c0MzI2RXh0ZW50WzBdICsgJyZiYm94W3kxXT0nICsgZXBzZzQzMjZFeHRlbnRbMV0gKyAnJmJib3hbeDJdPScgKyBlcHNnNDMyNkV4dGVudFsyXSArICcmYmJveFt5Ml09JyArIGVwc2c0MzI2RXh0ZW50WzNdO1xyXG4gICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgdGhpcy5jbGVhcigpO1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgdXJsOiB1cmwsXHJcbiAgICAgIHR5cGU6ICdHRVQnLFxyXG4gICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgfSkuZG9uZShmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICB2YXIgZmVhdHVyZXMgPSBnZW9KU09ORm9ybWF0LnJlYWRGZWF0dXJlcyhyZXNwb25zZSwge1xyXG4gICAgICAgIGZlYXR1cmVQcm9qZWN0aW9uOiAnRVBTRzozODU3J1xyXG4gICAgICB9KTtcclxuICAgICAgLy8gdGhhdC5jbGVhcigpO1xyXG4gICAgICB0aGF0LmFkZEZlYXR1cmVzKGZlYXR1cmVzKTtcclxuICAgIH0pLmZhaWwoZnVuY3Rpb24oKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiZXJyb3JcIik7XHJcbiAgICB9KTtcclxuICB9LFxyXG4gIHN0cmF0ZWd5OiBvbC5sb2FkaW5nc3RyYXRlZ3kuYmJveFxyXG59KTtcclxudmFyIHByb3BlcnR5Q2x1c3RlclNvdXJjZSA9IG5ldyBvbC5zb3VyY2UuQ2x1c3Rlcih7XHJcbiAgZGlzdGFuY2U6IDQwLFxyXG4gIHNvdXJjZTogcHJvcGVydHlTb3VyY2UsXHJcbiAgYXR0cmlidXRpb25zOiBbbmV3IG9sLkF0dHJpYnV0aW9uKHtcclxuICAgIGh0bWw6ICdBbGwgbWFwcyDCqSAnICsgJzxhIGhyZWY9XCJodHRwOi8vd3d3LnRlcnJhY29nbml0YS5nci9cIj5UZXJyYSBDb2duaXRhPC9hPidcclxuICB9KV1cclxufSk7XHJcbnZhciBwcm9wZXJ0eSA9IG5ldyBvbC5sYXllci5WZWN0b3Ioe1xyXG4gIHNvdXJjZTogcHJvcGVydHlDbHVzdGVyU291cmNlLFxyXG4gIG5hbWVFbDogJ86ZzrTOuc6/zrrPhM63z4POr861z4InLFxyXG4gIG5hbWVFbjogJ0VzdGF0ZXMnLFxyXG4gIGlkOiAnZXN0YXRlcycsXHJcbiAgdmlzaWJsZTogdHJ1ZSxcclxuICBzdHlsZTogcHJvcGVydHlTdHlsZUZ1bmN0aW9uXHJcbn0pO1xyXG4vLyB2YXIgYWRtaW5pc3RyYXRpdmVTb3VyY2UgPSBuZXcgb2wuc291cmNlLlZlY3Rvcih7XHJcbi8vICAgZm9ybWF0OiBnZW9KU09ORm9ybWF0LFxyXG4vLyAgIGxvYWRlcjogZnVuY3Rpb24oZXh0ZW50LCByZXNvbHV0aW9uLCBwcm9qZWN0aW9uKSB7XHJcbi8vICAgICB2YXIgZXBzZzQzMjZFeHRlbnQgPSBvbC5wcm9qLnRyYW5zZm9ybUV4dGVudChleHRlbnQsICdFUFNHOjM4NTcnLCAnRVBTRzo0MzI2Jyk7XHJcbi8vICAgICB2YXIgdXJsID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9kYi9hZG1pbmlzdHJhdGl2ZT9iYm94W3gxXT0nICsgZXBzZzQzMjZFeHRlbnRbMF0gKyAnJmJib3hbeTFdPScgKyBlcHNnNDMyNkV4dGVudFsxXSArICcmYmJveFt4Ml09JyArIGVwc2c0MzI2RXh0ZW50WzJdICsgJyZiYm94W3kyXT0nICsgZXBzZzQzMjZFeHRlbnRbM107XHJcbi8vICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbi8vICAgICB0aGlzLmNsZWFyKCk7XHJcbi8vICAgICAkLmFqYXgoe1xyXG4vLyAgICAgICB1cmw6IHVybCxcclxuLy8gICAgICAgdHlwZTogJ0dFVCcsXHJcbi8vICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbi8vICAgICB9KS5kb25lKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbi8vICAgICAgIHZhciBmZWF0dXJlcyA9IGdlb0pTT05Gb3JtYXQucmVhZEZlYXR1cmVzKHJlc3BvbnNlLCB7XHJcbi8vICAgICAgICAgZmVhdHVyZVByb2plY3Rpb246ICdFUFNHOjM4NTcnXHJcbi8vICAgICAgIH0pO1xyXG4vLyAgICAgICAvLyB0aGF0LmNsZWFyKCk7XHJcbi8vICAgICAgIHRoYXQuYWRkRmVhdHVyZXMoZmVhdHVyZXMpO1xyXG4vLyAgICAgfSkuZmFpbChmdW5jdGlvbigpIHtcclxuLy8gICAgICAgY29uc29sZS5sb2coXCJlcnJvclwiKTtcclxuLy8gICAgIH0pO1xyXG4vLyAgIH0sXHJcbi8vICAgc3RyYXRlZ3k6IG9sLmxvYWRpbmdzdHJhdGVneS5iYm94XHJcbi8vIH0pO1xyXG4vLyB2YXIgYWRtaW5pc3RyYXRpdmUgPSBuZXcgb2wubGF5ZXIuVmVjdG9yKHtcclxuLy8gICBzb3VyY2U6IGFkbWluaXN0cmF0aXZlU291cmNlLFxyXG4vLyAgIG5hbWVFbDogJ86dzr/Pg86/zrrOv868zq3Ouc6xJyxcclxuLy8gICBuYW1lRW46ICdIb3NwaXRhbHMnLFxyXG4vLyAgIGlkOiAnaG9zcGl0YWxzJyxcclxuLy8gICB2aXNpYmxlOiB0cnVlXHJcbi8vIH0pO1xyXG52YXIgbWFwID0gbmV3IG9sLk1hcCh7XHJcbiAgdGFyZ2V0OiAnbWFwJyxcclxuICBsYXllcnM6IFttYXBib3gsIHByb3BlcnR5XSxcclxuICBsb2FkVGlsZXNXaGlsZUFuaW1hdGluZzogdHJ1ZSxcclxuICBsb2FkVGlsZXNXaGlsZUludGVyYWN0aW5nOiB0cnVlLFxyXG4gIHJlbmRlcmVyOiAnY2FudmFzJyxcclxuICBjb250cm9sczogb2wuY29udHJvbC5kZWZhdWx0cyh7XHJcbiAgICBhdHRyaWJ1dGlvbk9wdGlvbnM6IHtcclxuICAgICAgY29sbGFwc2libGU6IGZhbHNlLFxyXG4gICAgICBjb2xsYXBzZWQ6IGZhbHNlXHJcbiAgICB9XHJcbiAgfSkuZXh0ZW5kKFtcclxuICAgIG5ldyBvbC5jb250cm9sLlNjYWxlTGluZSh7XHJcbiAgICAgIHVuaXRzOiAnbWV0cmljJ1xyXG4gICAgfSksIG5ldyBvbC5jb250cm9sLk92ZXJ2aWV3TWFwKHtcclxuICAgICAgY2xhc3NOYW1lOiAnb2wtb3ZlcnZpZXdtYXAgb2wtY3VzdG9tLW92ZXJ2aWV3bWFwJyxcclxuICAgICAgY29sbGFwc2libGU6IHRydWUsXHJcbiAgICAgIGNvbGxhcHNlZDogdHJ1ZSxcclxuICAgICAgbGF5ZXJzOiBbbmV3IG9sLmxheWVyLlRpbGUoe1xyXG4gICAgICAgIHNvdXJjZTogbmV3IG9sLnNvdXJjZS5PU00oKSxcclxuICAgICAgICB2aXNpYmxlOiB0cnVlLFxyXG4gICAgICAgIHByZWxvYWQ6IEluZmluaXR5LFxyXG4gICAgICAgIGNyb3NzT3JpZ2luOiAnYW5vbnltb3VzJyxcclxuICAgICAgICBuYW1lRWw6ICfOnM65zrrPgc+Mz4IgzqfOrM+Bz4TOt8+CJyxcclxuICAgICAgICBuYW1lRW46ICdNaW5pTWFwJyxcclxuICAgICAgICBpZDogJ292ZXJ2aWV3T3NtJ1xyXG4gICAgICB9KV1cclxuICAgIH0pXHJcbiAgXSksXHJcbiAgdmlldzogbmV3IG9sLlZpZXcoe1xyXG4gICAgY2VudGVyOiBbMzcxMzYxNiwgNDE4MTI1OF0sXHJcbiAgICBleHRlbnQ6IFszNTkwMDk0LCA0MTAyODMzLCAzODU1NDgzLCA0MjYxMjExXSxcclxuICAgIHByb2plY3Rpb246ICdFUFNHOjM4NTcnLFxyXG4gICAgem9vbTogMTQsXHJcbiAgICBtYXhab29tOiAxOSxcclxuICAgIG1pblpvb206IDEwXHJcbiAgfSksXHJcbn0pO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgdmFyIGdlb2xvY2F0aW9uID0gbmV3IG9sLkdlb2xvY2F0aW9uKHtcclxuICAgIC8vIHRha2UgdGhlIHByb2plY3Rpb24gdG8gdXNlIGZyb20gdGhlIG1hcCdzIHZpZXdcclxuICAgIHByb2plY3Rpb246IG1hcC5nZXRWaWV3KCkuZ2V0UHJvamVjdGlvbigpLFxyXG4gICAgdHJhY2tpbmdPcHRpb25zOiB7XHJcbiAgICAgIG1heGltdW1BZ2U6IDEwMDAwLFxyXG4gICAgICBlbmFibGVIaWdoQWNjdXJhY3k6IHRydWUsXHJcbiAgICAgIHRpbWVvdXQ6IDYwMDAwMFxyXG4gICAgfVxyXG4gIH0pO1xyXG4gIHZhciBhY2N1cmFjeUZlYXR1cmUgPSBuZXcgb2wuRmVhdHVyZSgpO1xyXG4gIGdlb2xvY2F0aW9uLm9uKCdjaGFuZ2U6YWNjdXJhY3lHZW9tZXRyeScsIGZ1bmN0aW9uKCkge1xyXG4gICAgYWNjdXJhY3lGZWF0dXJlLnNldEdlb21ldHJ5KGdlb2xvY2F0aW9uLmdldEFjY3VyYWN5R2VvbWV0cnkoKSk7XHJcbiAgfSk7XHJcbiAgdmFyIHBvc2l0aW9uRmVhdHVyZSA9IG5ldyBvbC5GZWF0dXJlKCk7XHJcbiAgcG9zaXRpb25GZWF0dXJlLnNldFN0eWxlKG5ldyBvbC5zdHlsZS5TdHlsZSh7XHJcbiAgICBpbWFnZTogbmV3IG9sLnN0eWxlLkNpcmNsZSh7XHJcbiAgICAgIHJhZGl1czogNixcclxuICAgICAgZmlsbDogbmV3IG9sLnN0eWxlLkZpbGwoe1xyXG4gICAgICAgIGNvbG9yOiAnIzMzOTlDQydcclxuICAgICAgfSksXHJcbiAgICAgIHN0cm9rZTogbmV3IG9sLnN0eWxlLlN0cm9rZSh7XHJcbiAgICAgICAgY29sb3I6ICcjZmZmJyxcclxuICAgICAgICB3aWR0aDogMlxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICB9KSk7XHJcbiAgLy8gbGlzdGVuIHRvIGNoYW5nZXMgaW4gcG9zaXRpb25cclxuICBnZW9sb2NhdGlvbi5vbignY2hhbmdlOnBvc2l0aW9uJywgZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgY29vcmRpbmF0ZXMgPSBnZW9sb2NhdGlvbi5nZXRQb3NpdGlvbigpO1xyXG4gICAgcG9zaXRpb25GZWF0dXJlLnNldEdlb21ldHJ5KGNvb3JkaW5hdGVzID8gbmV3IG9sLmdlb20uUG9pbnQoY29vcmRpbmF0ZXMpIDogbnVsbCk7XHJcbiAgfSk7XHJcbiAgZmVhdHVyZXNPdmVybGF5U291cmNlID0gbmV3IG9sLnNvdXJjZS5WZWN0b3Ioe30pO1xyXG4gIHZhciBmZWF0dXJlc092ZXJsYXkgPSBuZXcgb2wubGF5ZXIuVmVjdG9yKHtcclxuICAgIG1hcDogbWFwLFxyXG4gICAgc291cmNlOiBmZWF0dXJlc092ZXJsYXlTb3VyY2VcclxuICB9KTtcclxuICAkKCcuZ2VvbG9jYXRpb24nKS5vbignY2hhbmdlJywgZnVuY3Rpb24oZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgaWYgKCQodGhpcykucHJvcCgnY2hlY2tlZCcpID09PSB0cnVlKSB7XHJcbiAgICAgIGdlb2xvY2F0aW9uLnNldFRyYWNraW5nKHRydWUpO1xyXG4gICAgICBmZWF0dXJlc092ZXJsYXlTb3VyY2UuYWRkRmVhdHVyZXMoW3Bvc2l0aW9uRmVhdHVyZSxhY2N1cmFjeUZlYXR1cmVdKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGdlb2xvY2F0aW9uLnNldFRyYWNraW5nKGZhbHNlKTtcclxuICAgICAgZmVhdHVyZXNPdmVybGF5U291cmNlLmNsZWFyKCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn0oKSk7XHJcbiIsIihmdW5jdGlvbigpIHtcclxuICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcHVwJyk7XHJcbiAgdmFyIGNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9wdXAtY29udGVudCcpO1xyXG4gIHZhciBjbG9zZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9wdXAtY2xvc2VyJyk7XHJcbiAgY2xvc2VyLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcclxuICAgIGluZm8uc2V0UG9zaXRpb24odW5kZWZpbmVkKTtcclxuICAgIGNsb3Nlci5ibHVyKCk7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfTtcclxuICB2YXIgaW5mbyA9IG5ldyBvbC5PdmVybGF5KCAvKiogQHR5cGUge29seC5PdmVybGF5T3B0aW9uc30gKi8gKHtcclxuICAgIGVsZW1lbnQ6IGNvbnRhaW5lcixcclxuICAgIGF1dG9QYW46IHRydWUsXHJcbiAgICBhdXRvUGFuQW5pbWF0aW9uOiB7XHJcbiAgICAgIGR1cmF0aW9uOiAyNTBcclxuICAgIH1cclxuICB9KSk7XHJcbiAgbWFwLmFkZE92ZXJsYXkoaW5mbyk7XHJcblxyXG4gIGZ1bmN0aW9uIGhhbmRsZUluZm8oZXZ0KSB7XHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIHZhciBjb29yZGluYXRlID0gZXZ0LmNvb3JkaW5hdGU7XHJcbiAgICBjb250ZW50LmlubmVySFRNTCA9ICc8cD5Zb3UgY2xpY2tlZCBoZXJlOjwvcD48Y29kZT4nICsgY29vcmRpbmF0ZSArICc8L2NvZGU+JztcclxuICAgIGluZm8uc2V0UG9zaXRpb24oY29vcmRpbmF0ZSk7XHJcbiAgfVxyXG4gICQoJy5pbmZvJykub24oJ2NoYW5nZScsIGZ1bmN0aW9uKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGlmICgkKHRoaXMpLnByb3AoJ2NoZWNrZWQnKSA9PT0gdHJ1ZSkge1xyXG4gICAgICBtYXAub24oJ3NpbmdsZWNsaWNrJywgaGFuZGxlSW5mbyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBtYXAudW4oJ3NpbmdsZWNsaWNrJywgaGFuZGxlSW5mbyk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn0oKSk7XHJcbiIsIihmdW5jdGlvbigpIHtcclxuICB2YXIgbWFya2VyID0gbmV3IG9sLkZlYXR1cmUoKTtcclxuICB2YXIgaWNvblN0eWxlID0gbmV3IG9sLnN0eWxlLlN0eWxlKHtcclxuICAgIGltYWdlOiBuZXcgb2wuc3R5bGUuSWNvbiggLyoqIEB0eXBlIHtvbHguc3R5bGUuSWNvbk9wdGlvbnN9ICovICh7XHJcbiAgICAgIGFuY2hvcjogWzAuNSwgMV0sXHJcbiAgICAgIGFuY2hvclhVbml0czogJ2ZyYWN0aW9uJyxcclxuICAgICAgYW5jaG9yWVVuaXRzOiAnZnJhY3Rpb24nLFxyXG4gICAgICBvcGFjaXR5OiAxLFxyXG4gICAgICBzY2FsZTogMSxcclxuICAgICAgc3JjOiAnLi4vaW1hZ2VzL21hcC1pY29ucy9waW5zLzI0L3BpbjEucG5nJyxcclxuICAgICAgc25hcFRvUGl4ZWw6IGZhbHNlXHJcbiAgICB9KSksXHJcbiAgICB6SW5kZXg6IDEwMFxyXG4gIH0pO1xyXG4gIG1hcmtlci5zZXRTdHlsZShpY29uU3R5bGUpO1xyXG4gIHZhciBmZWF0dXJlc092ZXJsYXlTdHlsZSA9IG5ldyBvbC5zdHlsZS5TdHlsZSh7XHJcbiAgICBzdHJva2U6IG5ldyBvbC5zdHlsZS5TdHJva2Uoe1xyXG4gICAgICBjb2xvcjogJyM0MDgwODAnLFxyXG4gICAgICB3aWR0aDogNSxcclxuICAgICAgbGluZURhc2g6IFs0LCA0XVxyXG4gICAgfSlcclxuICB9KTtcclxuICB2YXIgZmVhdHVyZXNPdmVybGF5ID0gbmV3IG9sLmxheWVyLlZlY3Rvcih7XHJcbiAgICBtYXA6IG1hcCxcclxuICAgIHNvdXJjZTogbmV3IG9sLnNvdXJjZS5WZWN0b3IoKSxcclxuICAgIHN0eWxlOiBmZWF0dXJlc092ZXJsYXlTdHlsZSxcclxuICAgIGlkOiAncm91dGUnLFxyXG4gICAgbmFtZUVsOiAnzpTOuc6xzrTPgc6/zrzOricsXHJcbiAgICBOYW1lRW46ICdSb3V0ZSdcclxuICB9KTtcclxuICB2YXIgcm91dGVDb29yZHMgPSBbXTtcclxuXHJcbiAgZnVuY3Rpb24gaGFuZGxlTWFya2VyKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdmFyIGZlYXR1cmVDb3VudCA9IGZlYXR1cmVzT3ZlcmxheS5nZXRTb3VyY2UoKS5nZXRGZWF0dXJlcygpLmxlbmd0aDtcclxuICAgIHZhciBjb29yZGluYXRlcyA9IGV2ZW50LmNvb3JkaW5hdGU7XHJcbiAgICBpZiAoZmVhdHVyZUNvdW50ID09PSAwKSB7XHJcbiAgICAgIG1hcmtlci5zZXRHZW9tZXRyeShuZXcgb2wuZ2VvbS5Qb2ludChjb29yZGluYXRlcykpO1xyXG4gICAgICBtYXJrZXIuc2V0SWQoJ2ZpcnN0Jyk7XHJcbiAgICAgIGZlYXR1cmVzT3ZlcmxheS5nZXRTb3VyY2UoKS5hZGRGZWF0dXJlKG1hcmtlcik7XHJcbiAgICAgIHJvdXRlQ29vcmRzWzBdID0gY29vcmRpbmF0ZXNbMF07XHJcbiAgICAgIHJvdXRlQ29vcmRzWzFdID0gY29vcmRpbmF0ZXNbMV07XHJcbiAgICB9IGVsc2UgaWYgKGZlYXR1cmVDb3VudCA9PT0gMSkge1xyXG4gICAgICB2YXIgY2xvbmUgPSBtYXJrZXIuY2xvbmUoKTtcclxuICAgICAgY2xvbmUuc2V0R2VvbWV0cnkobmV3IG9sLmdlb20uUG9pbnQoY29vcmRpbmF0ZXMpKTtcclxuICAgICAgY2xvbmUuc2V0SWQoJ3NlY29uZCcpO1xyXG4gICAgICBmZWF0dXJlc092ZXJsYXkuZ2V0U291cmNlKCkuYWRkRmVhdHVyZShjbG9uZSk7XHJcbiAgICAgIHJvdXRlQ29vcmRzWzJdID0gY29vcmRpbmF0ZXNbMF07XHJcbiAgICAgIHJvdXRlQ29vcmRzWzNdID0gY29vcmRpbmF0ZXNbMV07XHJcbiAgICAgIGNhbGxSb3V0ZShyb3V0ZUNvb3Jkcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBmZWF0dXJlc092ZXJsYXkuZ2V0U291cmNlKCkuY2xlYXIoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdlb0pTT05Gb3JtYXQgPSBuZXcgb2wuZm9ybWF0Lkdlb0pTT04oe1xyXG4gICAgZGVmYXVsdERhdGFQcm9qZWN0aW9uOiAnRVBTRzo0MzI2JyxcclxuICAgIGdlb21ldHJ5TmFtZTogJ2dlb21ldHJ5J1xyXG4gIH0pO1xyXG5cclxuICBmdW5jdGlvbiBjYWxsUm91dGUocm91dGVDb29yZHMpIHtcclxuICAgIHZhciBmaXJzdCA9IG9sLnByb2oudHJhbnNmb3JtKFtyb3V0ZUNvb3Jkc1swXSwgcm91dGVDb29yZHNbMV1dLCAnRVBTRzozODU3JywgJ0VQU0c6NDMyNicpO1xyXG4gICAgdmFyIHNlY29uZCA9IG9sLnByb2oudHJhbnNmb3JtKFtyb3V0ZUNvb3Jkc1syXSwgcm91dGVDb29yZHNbM11dLCAnRVBTRzozODU3JywgJ0VQU0c6NDMyNicpO1xyXG4gICAgdmFyIHgxID0gZmlyc3RbMF07XHJcbiAgICB2YXIgeTEgPSBmaXJzdFsxXTtcclxuICAgIHZhciB4MiA9IHNlY29uZFswXTtcclxuICAgIHZhciB5MiA9IHNlY29uZFsxXTtcclxuICAgICQuYWpheCh7XHJcbiAgICAgIHVybDogJ2h0dHBzOi8vYXBpLm1hcGJveC5jb20vdjQvZGlyZWN0aW9ucy9tYXBib3guZHJpdmluZy8nICsgeDEgKyAnLCcgKyB5MSArICc7JyArIHgyICsgJywnICsgeTIgKyAnLmpzb24/YWx0ZXJuYXRpdmVzPWZhbHNlJmFjY2Vzc190b2tlbj1way5leUoxSWpvaVptbHlkbUZwYmlJc0ltRWlPaUpsT1dZeVlUTTBOVGhpTldNMFlqSmpPREpqTkRFNE9EUXpOekEyTUdReU5pSjkuLU5WRE8yN0h6dC13X25Rb3NVUGZMQScsXHJcbiAgICAgIHR5cGU6ICdHRVQnLFxyXG4gICAgICBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICB9KS5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgdmFyIHJvdXRlPXt9O1xyXG4gICAgICByb3V0ZS50eXBlID1cIkZlYXR1cmVcIjtcclxuICAgICAgcm91dGUuZ2VvbWV0cnkgPSBkYXRhLnJvdXRlc1swXS5nZW9tZXRyeTtcclxuICAgICAgZmVhdHVyZXNPdmVybGF5LmdldFNvdXJjZSgpLmFkZEZlYXR1cmVzKGdlb0pTT05Gb3JtYXQucmVhZEZlYXR1cmVzKHJvdXRlLCB7XHJcbiAgICAgICAgZGF0YVByb2plY3Rpb246ICdFUFNHOjQzMjYnLFxyXG4gICAgICAgIGZlYXR1cmVQcm9qZWN0aW9uOiAnRVBTRzozODU3J1xyXG4gICAgICB9KSk7XHJcbiAgICAgIG1hcC5nZXRWaWV3KCkuZml0KGZlYXR1cmVzT3ZlcmxheS5nZXRTb3VyY2UoKS5nZXRFeHRlbnQoKSwgbWFwLmdldFNpemUoKSk7XHJcbiAgICB9KS5mYWlsKGZ1bmN0aW9uKCkge1xyXG4gICAgICBjb25zb2xlLmxvZyhcImVycm9yXCIpO1xyXG4gICAgfSkuYWx3YXlzKGZ1bmN0aW9uKCkge1xyXG4gICAgICBjb25zb2xlLmxvZyhcImNvbXBsZXRlXCIpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gICQoJy5tYXJrZXInKS5vbignY2hhbmdlJywgZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAvKiBBY3Qgb24gdGhlIGV2ZW50ICovXHJcbiAgICBpZiAoJCh0aGlzKS5wcm9wKCdjaGVja2VkJykgPT09IHRydWUpIHtcclxuICAgICAgbWFwLm9uKCdzaW5nbGVjbGljaycsIGhhbmRsZU1hcmtlcik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBtYXAudW4oJ3NpbmdsZWNsaWNrJywgaGFuZGxlTWFya2VyKTtcclxuICAgICAgZmVhdHVyZXNPdmVybGF5LmdldFNvdXJjZSgpLmNsZWFyKCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn0oKSk7XHJcbiIsIihmdW5jdGlvbigpIHtcclxuICAkKCcud2VhdGhlcicpLmNoYW5nZShmdW5jdGlvbigpIHtcclxuICAgIGlmICgkKHRoaXMpLnByb3AoJ2NoZWNrZWQnKSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgIG1hcC5nZXRPdmVybGF5cygpLmZvckVhY2goZnVuY3Rpb24ob3ZsKSB7XHJcbiAgICAgICAgaWYgKG92bC5nZXQoJ25hbWUnKSA9PT0gJ3dlYXRoZXInKSB7XHJcbiAgICAgICAgICAoJChvdmwuZ2V0RWxlbWVudCgpKS5wYXJlbnQoKSkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAkKG92bC5nZXRFbGVtZW50KCkpLnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIHZhciBjZW50ZXIgPSBvbC5wcm9qLnRyYW5zZm9ybShtYXAuZ2V0VmlldygpLmdldENlbnRlcigpLCAnRVBTRzozODU3JywgJ0VQU0c6NDMyNicpO1xyXG4gICAgICB2YXIgbGF0ID0gY2VudGVyWzFdO1xyXG4gICAgICB2YXIgbG9uID0gY2VudGVyWzBdO1xyXG4gICAgICAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogJ2h0dHA6Ly9hcGkub3BlbndlYXRoZXJtYXAub3JnL2RhdGEvMi41L2ZpbmQ/bGF0PScgKyBsYXQgKyAnJmxvbj0nICsgbG9uICsgJyZjbnQ9NSZjbHVzdGVyPW5vJnVuaXRzPW1ldHJpYyZ0eXBlPWFjY3VyYXRlJkFQUElEPWY5Y2Q5ZmEyYzQyN2MzYjExNWU4N2U0ODYyNjE5YzVjJyxcclxuICAgICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICB9KS5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVXZWF0aGVyT3ZlcmxheShwb3NpdGlvbiwgaW5kZXgpIHtcclxuICAgICAgICAgIHZhciBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICBlbGVtLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnd2VhdGhlci1wb3B1cCBkZWZhdWx0LXByaW1hcnktY29sb3IgIHBhcGVyLXNoYWRvdy1ib3R0b20tei00Jyk7XHJcbiAgICAgICAgICBlbGVtLnNldEF0dHJpYnV0ZSgnaWQnLCBpbmRleCk7XHJcbiAgICAgICAgICBlbGVtLnNldEF0dHJpYnV0ZSgnZGF0YS1uYW1lJywgJ3dlYXRoZXInKTtcclxuICAgICAgICAgIHJldHVybiBuZXcgb2wuT3ZlcmxheSh7XHJcbiAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW0sXHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBwb3NpdGlvbixcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgb2JqcyA9IGRhdGEubGlzdDtcclxuICAgICAgICB2YXIgb3ZlcmxheSwgY29vcmRpbmF0ZXM7XHJcbiAgICAgICAgJC5lYWNoKG9ianMsIGZ1bmN0aW9uKGluZGV4LCB2YWwpIHtcclxuICAgICAgICAgIGNvb3JkaW5hdGVzID0gb2wucHJvai50cmFuc2Zvcm0oW3ZhbC5jb29yZC5sb24sIHZhbC5jb29yZC5sYXRdLCAnRVBTRzo0MzI2JywgJ0VQU0c6Mzg1NycpO1xyXG4gICAgICAgICAgb3ZlcmxheSA9IGNyZWF0ZVdlYXRoZXJPdmVybGF5KGNvb3JkaW5hdGVzLCBpbmRleCk7XHJcbiAgICAgICAgICBtYXAuYWRkT3ZlcmxheShvdmVybGF5KTtcclxuICAgICAgICAgIG92ZXJsYXkuc2V0KCduYW1lJywgJ3dlYXRoZXInKTtcclxuICAgICAgICAgIHdlYXRoZXJEYXRhID0ge1xyXG4gICAgICAgICAgICAnbmFtZSc6IHZhbC5uYW1lLFxyXG4gICAgICAgICAgICAndGVtcCc6IHZhbC5tYWluLnRlbXAsXHJcbiAgICAgICAgICAgICdwcmVzc3VyZSc6IHZhbC5tYWluLnByZXNzdXJlLFxyXG4gICAgICAgICAgICAnaHVtaWRpdHknOiB2YWwubWFpbi5odW1pZGl0eVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIGR1c3QucmVuZGVyKCd3ZWF0aGVyUG9wdXAuZHVzdCcsIHdlYXRoZXJEYXRhLCBmdW5jdGlvbihlcnIsIG91dCkge1xyXG4gICAgICAgICAgICAkKFwiI1wiICsgaW5kZXgpLmh0bWwob3V0KTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KS5mYWlsKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vIHRvYXN0ci5lcnJvcihcIs6UzrXOvSDOss+Bzq3OuM63zrrOsc69IM+AzrvOt8+Bzr/Phs6/z4HOr861z4IgzrPOuc6xIM+EzrnPgiDOus6xzrnPgc65zrrOrc+CIM+Dz4XOvc64zq7Ous61z4IhXCIpO1xyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSBpZiAoJCh0aGlzKS5wcm9wKCdjaGVja2VkJykgPT09IGZhbHNlKSB7XHJcbiAgICAgIG1hcC5nZXRPdmVybGF5cygpLmZvckVhY2goZnVuY3Rpb24ob3ZsKSB7XHJcbiAgICAgICAgaWYgKG92bC5nZXQoJ25hbWUnKSA9PT0gJ3dlYXRoZXInKSB7XHJcbiAgICAgICAgICAoJChvdmwuZ2V0RWxlbWVudCgpKS5wYXJlbnQoKSkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAkKG92bC5nZXRFbGVtZW50KCkpLnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn0oKSk7XHJcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==