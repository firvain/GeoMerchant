var bing=new ol.layer.Tile({visible:!0,source:new ol.source.BingMaps({key:"Ak2Gq8VUfICsPpuf7LRANXmXt2sHWmSLPhohmVLFtFIEwYjs_5MCyAhAFwRSVpLj",imagerySet:"Aerial"}),maxZoom:19,crossOrigin:"anonymous",preload:1/0,nameEl:"Δορυφορική εικόνα",nameEn:"Satellite Image",id:"bing"}),mapbox=new ol.layer.Tile({source:new ol.source.XYZ({attributions:new ol.Attribution({html:'<a href="https://www.mapbox.com/about/maps/" target="_blank">&copy; Mapbox &copy; OpenStreetMap</a>'}),url:"https://api.mapbox.com/v4/mapbox.streets/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiZmlydmFpbiIsImEiOiJlOWYyYTM0NThiNWM0YjJjODJjNDE4ODQzNzA2MGQyNiJ9.-NVDO27Hzt-w_nQosUPfLA"})}),map=new ol.Map({target:"map",layers:[mapbox],loadTilesWhileAnimating:!0,loadTilesWhileInteracting:!0,renderer:"canvas",controls:ol.control.defaults({attributionOptions:{collapsible:!1,collapsed:!1}}).extend([new ol.control.ScaleLine({units:"metric"}),new ol.control.OverviewMap({className:"ol-overviewmap ol-custom-overviewmap",collapsible:!0,collapsed:!1,layers:[new ol.layer.Tile({source:new ol.source.OSM,visible:!0,preload:1/0,crossOrigin:"anonymous",nameEl:"Μικρός Χάρτης",nameEn:"MiniMap",id:"overviewOsm"})]})]),view:new ol.View({center:[3713616,4181258],projection:"EPSG:3857",zoom:14,maxZoom:19,minZoom:10})});
!function(){function e(e){e.preventDefault(),o.getSource().clear();var r=e.coordinate;n.setGeometry(new ol.geom.Point(r)),o.getSource().addFeature(n)}var n=new ol.Feature,r=new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",opacity:1,scale:1,src:"../images/maki/renders/marker-24.png"})});n.setStyle(r);var o=new ol.layer.Vector({map:map,source:new ol.source.Vector});$(".marker").on("change",function(n){n.preventDefault(),$(this).prop("checked")===!0?map.on("singleclick",e):(map.un("singleclick",e),o.getSource().clear())})}();
!function(){var e=new ol.Geolocation({projection:map.getView().getProjection(),trackingOptions:{maximumAge:1e4,enableHighAccuracy:!0,timeout:6e5}}),o=new ol.Feature;e.on("change:accuracyGeometry",function(){o.setGeometry(e.getAccuracyGeometry())});var t=new ol.Feature;t.setStyle(new ol.style.Style({image:new ol.style.Circle({radius:6,fill:new ol.style.Fill({color:"#3399CC"}),stroke:new ol.style.Stroke({color:"#fff",width:2})})})),e.on("change:position",function(){var o=e.getPosition();t.setGeometry(o?new ol.geom.Point(o):null)}),featuresOverlaySource=new ol.source.Vector({});new ol.layer.Vector({map:map,source:featuresOverlaySource});$(".geolocation").on("change",function(r){r.preventDefault(),$(this).prop("checked")===!0?(e.setTracking(!0),featuresOverlaySource.addFeatures([t,o])):(e.setTracking(!1),featuresOverlaySource.clear())})}();
!function(){function e(e){e.preventDefault();var n=e.coordinate;o.innerHTML="<p>You clicked here:</p><code>"+n+"</code>",c.setPosition(n)}var n=document.getElementById("popup"),o=document.getElementById("popup-content"),t=document.getElementById("popup-closer");t.onclick=function(){return c.setPosition(void 0),t.blur(),!1};var c=new ol.Overlay({element:n,autoPan:!0,autoPanAnimation:{duration:250}});map.addOverlay(c),$(".info").on("change",function(n){n.preventDefault(),$(this).prop("checked")===!0?map.on("singleclick",e):map.un("singleclick",e)})}();
!function(){$(".weather").change(function(){var t=ol.proj.transform(map.getView().getCenter(),"EPSG:3857","EPSG:4326"),e=t[1],a=t[0];$.ajax({url:"http://api.openweathermap.org/data/2.5/find?lat="+e+"&lon="+a+"&cnt=5&cluster=no&units=metric&type=accurate&APPID=f9cd9fa2c427c3b115e87e4862619c5c",type:"GET",dataType:"json"}).done(function(t){function e(t,e){var a=document.createElement("div");return a.setAttribute("class","weather-popup default-primary-color  paper-shadow-bottom-z-4"),a.setAttribute("id",e),new ol.Overlay({element:a,position:t})}var a,r,n=t.list;$.each(n,function(t,n){r=ol.proj.transform([n.coord.lon,n.coord.lat],"EPSG:4326","EPSG:3857"),a=e(r,t),map.addOverlay(a),weatherData={name:n.name,temp:n.main.temp,pressure:n.main.pressure,humidity:n.main.humidity},dust.render("weatherPopup.dust",weatherData,function(e,a){$("#"+t).html(a)})})}).fail(function(){})})}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hcC5qcyIsImFkZC1tYXJrZXIuanMiLCJnZW9sb2NhdGlvbi5qcyIsImluZm8uanMiLCJ3ZWF0aGVyLmpzIl0sIm5hbWVzIjpbImJpbmciLCJvbCIsImxheWVyIiwiVGlsZSIsInZpc2libGUiLCJzb3VyY2UiLCJCaW5nTWFwcyIsImtleSIsImltYWdlcnlTZXQiLCJtYXhab29tIiwiY3Jvc3NPcmlnaW4iLCJwcmVsb2FkIiwiSW5maW5pdHkiLCJuYW1lRWwiLCJuYW1lRW4iLCJpZCIsIm1hcGJveCIsIlhZWiIsImF0dHJpYnV0aW9ucyIsIkF0dHJpYnV0aW9uIiwiaHRtbCIsInVybCIsIm1hcCIsIk1hcCIsInRhcmdldCIsImxheWVycyIsImxvYWRUaWxlc1doaWxlQW5pbWF0aW5nIiwibG9hZFRpbGVzV2hpbGVJbnRlcmFjdGluZyIsInJlbmRlcmVyIiwiY29udHJvbHMiLCJjb250cm9sIiwiZGVmYXVsdHMiLCJhdHRyaWJ1dGlvbk9wdGlvbnMiLCJjb2xsYXBzaWJsZSIsImNvbGxhcHNlZCIsImV4dGVuZCIsIlNjYWxlTGluZSIsInVuaXRzIiwiT3ZlcnZpZXdNYXAiLCJjbGFzc05hbWUiLCJPU00iLCJ2aWV3IiwiVmlldyIsImNlbnRlciIsInByb2plY3Rpb24iLCJ6b29tIiwibWluWm9vbSIsImhhbmRsZU1hcmtlciIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJmZWF0dXJlc092ZXJsYXkiLCJnZXRTb3VyY2UiLCJjbGVhciIsImNvb3JkaW5hdGVzIiwiY29vcmRpbmF0ZSIsIm1hcmtlciIsInNldEdlb21ldHJ5IiwiZ2VvbSIsIlBvaW50IiwiYWRkRmVhdHVyZSIsIkZlYXR1cmUiLCJpY29uU3R5bGUiLCJzdHlsZSIsIlN0eWxlIiwiaW1hZ2UiLCJJY29uIiwiYW5jaG9yIiwiYW5jaG9yWFVuaXRzIiwiYW5jaG9yWVVuaXRzIiwib3BhY2l0eSIsInNjYWxlIiwic3JjIiwic2V0U3R5bGUiLCJWZWN0b3IiLCIkIiwib24iLCJ0aGlzIiwicHJvcCIsInVuIiwiZ2VvbG9jYXRpb24iLCJHZW9sb2NhdGlvbiIsImdldFZpZXciLCJnZXRQcm9qZWN0aW9uIiwidHJhY2tpbmdPcHRpb25zIiwibWF4aW11bUFnZSIsImVuYWJsZUhpZ2hBY2N1cmFjeSIsInRpbWVvdXQiLCJhY2N1cmFjeUZlYXR1cmUiLCJnZXRBY2N1cmFjeUdlb21ldHJ5IiwicG9zaXRpb25GZWF0dXJlIiwiQ2lyY2xlIiwicmFkaXVzIiwiZmlsbCIsIkZpbGwiLCJjb2xvciIsInN0cm9rZSIsIlN0cm9rZSIsIndpZHRoIiwiZ2V0UG9zaXRpb24iLCJmZWF0dXJlc092ZXJsYXlTb3VyY2UiLCJlIiwic2V0VHJhY2tpbmciLCJhZGRGZWF0dXJlcyIsImhhbmRsZUluZm8iLCJldnQiLCJjb250ZW50IiwiaW5uZXJIVE1MIiwiaW5mbyIsInNldFBvc2l0aW9uIiwiY29udGFpbmVyIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNsb3NlciIsIm9uY2xpY2siLCJ1bmRlZmluZWQiLCJibHVyIiwiT3ZlcmxheSIsImVsZW1lbnQiLCJhdXRvUGFuIiwiYXV0b1BhbkFuaW1hdGlvbiIsImR1cmF0aW9uIiwiYWRkT3ZlcmxheSIsImNoYW5nZSIsInByb2oiLCJ0cmFuc2Zvcm0iLCJnZXRDZW50ZXIiLCJsYXQiLCJsb24iLCJhamF4IiwidHlwZSIsImRhdGFUeXBlIiwiZG9uZSIsImRhdGEiLCJjcmVhdGVXZWF0aGVyT3ZlcmxheSIsInBvc2l0aW9uIiwiaW5kZXgiLCJlbGVtIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsIm92ZXJsYXkiLCJvYmpzIiwibGlzdCIsImVhY2giLCJ2YWwiLCJjb29yZCIsIndlYXRoZXJEYXRhIiwibmFtZSIsInRlbXAiLCJtYWluIiwicHJlc3N1cmUiLCJodW1pZGl0eSIsImR1c3QiLCJyZW5kZXIiLCJlcnIiLCJvdXQiLCJmYWlsIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFJQSxNQUFPLEdBQUlDLElBQUdDLE1BQU1DLE1BQ3RCQyxTQUFTLEVB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QUFxRHlHLEVBQU0sUUFBVUMsRUFBTSxzRkFDaEZFLEtBQU0sTUFDTkMsU0FBVSxTQUNUQyxLQUFLLFNBQVNDLEdBQ2YsUUFBU0MsR0FBcUJDLEVBQVVDLEdBQ3RDLEdBQUlDLEdBQU8xQixTQUFTMkIsY0FBYyxNQUdsQyxPQUZBRCxHQUFLRSxhQUFhLFFBQVMsZ0VBQzNCRixFQUFLRSxhQUFhLEtBQU1ILEdBQ2pCLEdBQUl0SSxJQUFHbUgsU0FDWkMsUUFBU21CLEVBQ1RGLFNBQVVBLElBR2QsR0FDSUssR0FBU3RGLEVBRFR1RixFQUFPUixFQUFLUyxJQUVoQm5FLEdBQUVvRSxLQUFLRixFQUFNLFNBQVNMLEVBQU9RLEdBQzNCMUYsRUFBY3BELEdBQUcwSCxLQUFLQyxXQUFXbUIsRUFBSUMsTUFBTWpCLElBQUtnQixFQUFJQyxNQUFNbEIsS0FBTSxZQUFhLGFBQzdFYSxFQUFVTixFQUFxQmhGLEVBQWFrRixHQUM1Q2pILElBQUltRyxXQUFXa0IsR0FDZk0sYUFDRUMsS0FBUUgsRUFBSUcsS0FDWkMsS0FBUUosRUFBSUssS0FBS0QsS0FDakJFLFNBQVlOLEVBQUlLLEtBQUtDLFNBQ3JCQyxTQUFZUCxFQUFJSyxLQUFLRSxVQUV2QkMsS0FBS0MsT0FBTyxvQkFBcUJQLFlBQWEsU0FBU1EsRUFBS0MsR0FDMURoRixFQUFFLElBQUk2RCxHQUFPbkgsS0FBS3NJLFNBR3JCQyxLQUFLIiwiZmlsZSI6InNjcmlwdHMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGJpbmcgPSBuZXcgb2wubGF5ZXIuVGlsZSh7XHJcbiAgdmlzaWJsZTogdHJ1ZSxcclxuICBzb3VyY2U6IG5ldyBvbC5zb3VyY2UuQmluZ01hcHMoe1xyXG4gICAga2V5OiAnQWsyR3E4VlVmSUNzUHB1ZjdMUkFOWG1YdDJzSFdtU0xQaG9obVZMRnRGSUV3WWpzXzVNQ3lBaEFGd1JTVnBMaicsXHJcbiAgICBpbWFnZXJ5U2V0OiAnQWVyaWFsJ1xyXG4gIH0pLFxyXG4gIG1heFpvb206IDE5LFxyXG4gIGNyb3NzT3JpZ2luOiAnYW5vbnltb3VzJyxcclxuICBwcmVsb2FkOiBJbmZpbml0eSxcclxuICBuYW1lRWw6ICfOlM6/z4HPhc+Gzr/Pgc65zrrOriDOtc65zrrPjM69zrEnLFxyXG4gIG5hbWVFbjogJ1NhdGVsbGl0ZSBJbWFnZScsXHJcbiAgaWQ6ICdiaW5nJ1xyXG59KTtcclxudmFyIG1hcGJveCA9IG5ldyBvbC5sYXllci5UaWxlKHtcclxuICBzb3VyY2U6IG5ldyBvbC5zb3VyY2UuWFlaKHtcclxuICAgIGF0dHJpYnV0aW9uczogbmV3IG9sLkF0dHJpYnV0aW9uKHtcclxuICAgICAgaHRtbDogJzxhIGhyZWY9XFxcImh0dHBzOi8vd3d3Lm1hcGJveC5jb20vYWJvdXQvbWFwcy9cXFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIj4mY29weTsgTWFwYm94ICZjb3B5OyBPcGVuU3RyZWV0TWFwPC9hPidcclxuICAgIH0pLFxyXG4gICAgdXJsOiAnaHR0cHM6Ly9hcGkubWFwYm94LmNvbS92NC9tYXBib3guc3RyZWV0cy97en0ve3h9L3t5fS5wbmc/YWNjZXNzX3Rva2VuPXBrLmV5SjFJam9pWm1seWRtRnBiaUlzSW1FaU9pSmxPV1l5WVRNME5UaGlOV00wWWpKak9ESmpOREU0T0RRek56QTJNR1F5TmlKOS4tTlZETzI3SHp0LXdfblFvc1VQZkxBJ1xyXG4gIH0pXHJcbn0pO1xyXG52YXIgbWFwID0gbmV3IG9sLk1hcCh7XHJcbiAgdGFyZ2V0OiAnbWFwJyxcclxuICBsYXllcnM6IFttYXBib3hdLFxyXG4gIGxvYWRUaWxlc1doaWxlQW5pbWF0aW5nOiB0cnVlLFxyXG4gIGxvYWRUaWxlc1doaWxlSW50ZXJhY3Rpbmc6IHRydWUsXHJcbiAgcmVuZGVyZXI6ICdjYW52YXMnLFxyXG4gIGNvbnRyb2xzOiBvbC5jb250cm9sLmRlZmF1bHRzKHtcclxuICAgIGF0dHJpYnV0aW9uT3B0aW9uczoge1xyXG4gICAgICBjb2xsYXBzaWJsZTogZmFsc2UsXHJcbiAgICAgIGNvbGxhcHNlZDogZmFsc2VcclxuICAgIH1cclxuICB9KS5leHRlbmQoW1xyXG4gICAgbmV3IG9sLmNvbnRyb2wuU2NhbGVMaW5lKHtcclxuICAgICAgdW5pdHM6ICdtZXRyaWMnXHJcbiAgICB9KSwgbmV3IG9sLmNvbnRyb2wuT3ZlcnZpZXdNYXAoe1xyXG4gICAgICBjbGFzc05hbWU6ICdvbC1vdmVydmlld21hcCBvbC1jdXN0b20tb3ZlcnZpZXdtYXAnLFxyXG4gICAgICBjb2xsYXBzaWJsZTogdHJ1ZSxcclxuICAgICAgY29sbGFwc2VkOiBmYWxzZSxcclxuICAgICAgbGF5ZXJzOiBbbmV3IG9sLmxheWVyLlRpbGUoe1xyXG4gICAgICAgIHNvdXJjZTogbmV3IG9sLnNvdXJjZS5PU00oKSxcclxuICAgICAgICB2aXNpYmxlOiB0cnVlLFxyXG4gICAgICAgIHByZWxvYWQ6IEluZmluaXR5LFxyXG4gICAgICAgIGNyb3NzT3JpZ2luOiAnYW5vbnltb3VzJyxcclxuICAgICAgICBuYW1lRWw6ICfOnM65zrrPgc+Mz4IgzqfOrM+Bz4TOt8+CJyxcclxuICAgICAgICBuYW1lRW46ICdNaW5pTWFwJyxcclxuICAgICAgICBpZDogJ292ZXJ2aWV3T3NtJ1xyXG4gICAgICB9KV1cclxuICAgIH0pXHJcbiAgXSksXHJcbiAgdmlldzogbmV3IG9sLlZpZXcoe1xyXG4gICAgY2VudGVyOiBbMzcxMzYxNiwgNDE4MTI1OF0sXHJcbiAgICBwcm9qZWN0aW9uOiAnRVBTRzozODU3JyxcclxuICAgIHpvb206IDE0LFxyXG4gICAgbWF4Wm9vbTogMTksXHJcbiAgICBtaW5ab29tOiAxMFxyXG4gIH0pLFxyXG59KTtcclxuIiwiKGZ1bmN0aW9uKCkge1xyXG4gIHZhciBtYXJrZXIgPSBuZXcgb2wuRmVhdHVyZSgpO1xyXG4gIHZhciBpY29uU3R5bGUgPSBuZXcgb2wuc3R5bGUuU3R5bGUoe1xyXG4gICAgaW1hZ2U6IG5ldyBvbC5zdHlsZS5JY29uKCAvKiogQHR5cGUge29seC5zdHlsZS5JY29uT3B0aW9uc30gKi8gKHtcclxuICAgICAgYW5jaG9yOiBbMC41LCAxXSxcclxuICAgICAgYW5jaG9yWFVuaXRzOiAnZnJhY3Rpb24nLFxyXG4gICAgICBhbmNob3JZVW5pdHM6ICdmcmFjdGlvbicsXHJcbiAgICAgIG9wYWNpdHk6IDEsXHJcbiAgICAgIHNjYWxlOiAxLFxyXG4gICAgICBzcmM6ICcuLi9pbWFnZXMvbWFraS9yZW5kZXJzL21hcmtlci0yNC5wbmcnXHJcbiAgICB9KSlcclxuICB9KTtcclxuICBtYXJrZXIuc2V0U3R5bGUoaWNvblN0eWxlKTtcclxuICB2YXIgZmVhdHVyZXNPdmVybGF5ID0gbmV3IG9sLmxheWVyLlZlY3Rvcih7XHJcbiAgICBtYXA6IG1hcCxcclxuICAgIHNvdXJjZTogbmV3IG9sLnNvdXJjZS5WZWN0b3IoKVxyXG4gIH0pO1xyXG5cclxuICBmdW5jdGlvbiBoYW5kbGVNYXJrZXIoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBmZWF0dXJlc092ZXJsYXkuZ2V0U291cmNlKCkuY2xlYXIoKTtcclxuICAgIHZhciBjb29yZGluYXRlcyA9IGV2ZW50LmNvb3JkaW5hdGU7XHJcbiAgICBtYXJrZXIuc2V0R2VvbWV0cnkobmV3IG9sLmdlb20uUG9pbnQoY29vcmRpbmF0ZXMpKTtcclxuICAgIGZlYXR1cmVzT3ZlcmxheS5nZXRTb3VyY2UoKS5hZGRGZWF0dXJlKG1hcmtlcik7XHJcbiAgfVxyXG4gICQoJy5tYXJrZXInKS5vbignY2hhbmdlJywgZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAvKiBBY3Qgb24gdGhlIGV2ZW50ICovXHJcbiAgICBpZiAoJCh0aGlzKS5wcm9wKCdjaGVja2VkJykgPT09IHRydWUpIHtcclxuICAgICAgbWFwLm9uKCdzaW5nbGVjbGljaycsIGhhbmRsZU1hcmtlcik7XHJcbiAgICAgIFxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbWFwLnVuKCdzaW5nbGVjbGljaycsIGhhbmRsZU1hcmtlcik7XHJcbiAgICAgIGZlYXR1cmVzT3ZlcmxheS5nZXRTb3VyY2UoKS5jbGVhcigpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59KCkpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgdmFyIGdlb2xvY2F0aW9uID0gbmV3IG9sLkdlb2xvY2F0aW9uKHtcclxuICAgIC8vIHRha2UgdGhlIHByb2plY3Rpb24gdG8gdXNlIGZyb20gdGhlIG1hcCdzIHZpZXdcclxuICAgIHByb2plY3Rpb246IG1hcC5nZXRWaWV3KCkuZ2V0UHJvamVjdGlvbigpLFxyXG4gICAgdHJhY2tpbmdPcHRpb25zOiB7XHJcbiAgICAgIG1heGltdW1BZ2U6IDEwMDAwLFxyXG4gICAgICBlbmFibGVIaWdoQWNjdXJhY3k6IHRydWUsXHJcbiAgICAgIHRpbWVvdXQ6IDYwMDAwMFxyXG4gICAgfVxyXG4gIH0pO1xyXG4gIHZhciBhY2N1cmFjeUZlYXR1cmUgPSBuZXcgb2wuRmVhdHVyZSgpO1xyXG4gIGdlb2xvY2F0aW9uLm9uKCdjaGFuZ2U6YWNjdXJhY3lHZW9tZXRyeScsIGZ1bmN0aW9uKCkge1xyXG4gICAgYWNjdXJhY3lGZWF0dXJlLnNldEdlb21ldHJ5KGdlb2xvY2F0aW9uLmdldEFjY3VyYWN5R2VvbWV0cnkoKSk7XHJcbiAgfSk7XHJcbiAgdmFyIHBvc2l0aW9uRmVhdHVyZSA9IG5ldyBvbC5GZWF0dXJlKCk7XHJcbiAgcG9zaXRpb25GZWF0dXJlLnNldFN0eWxlKG5ldyBvbC5zdHlsZS5TdHlsZSh7XHJcbiAgICBpbWFnZTogbmV3IG9sLnN0eWxlLkNpcmNsZSh7XHJcbiAgICAgIHJhZGl1czogNixcclxuICAgICAgZmlsbDogbmV3IG9sLnN0eWxlLkZpbGwoe1xyXG4gICAgICAgIGNvbG9yOiAnIzMzOTlDQydcclxuICAgICAgfSksXHJcbiAgICAgIHN0cm9rZTogbmV3IG9sLnN0eWxlLlN0cm9rZSh7XHJcbiAgICAgICAgY29sb3I6ICcjZmZmJyxcclxuICAgICAgICB3aWR0aDogMlxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICB9KSk7XHJcbiAgLy8gbGlzdGVuIHRvIGNoYW5nZXMgaW4gcG9zaXRpb25cclxuICBnZW9sb2NhdGlvbi5vbignY2hhbmdlOnBvc2l0aW9uJywgZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgY29vcmRpbmF0ZXMgPSBnZW9sb2NhdGlvbi5nZXRQb3NpdGlvbigpO1xyXG4gICAgcG9zaXRpb25GZWF0dXJlLnNldEdlb21ldHJ5KGNvb3JkaW5hdGVzID8gbmV3IG9sLmdlb20uUG9pbnQoY29vcmRpbmF0ZXMpIDogbnVsbCk7XHJcbiAgfSk7XHJcbiAgZmVhdHVyZXNPdmVybGF5U291cmNlID0gbmV3IG9sLnNvdXJjZS5WZWN0b3Ioe30pO1xyXG4gIHZhciBmZWF0dXJlc092ZXJsYXkgPSBuZXcgb2wubGF5ZXIuVmVjdG9yKHtcclxuICAgIG1hcDogbWFwLFxyXG4gICAgc291cmNlOiBmZWF0dXJlc092ZXJsYXlTb3VyY2VcclxuICB9KTtcclxuICAkKCcuZ2VvbG9jYXRpb24nKS5vbignY2hhbmdlJywgZnVuY3Rpb24oZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgaWYgKCQodGhpcykucHJvcCgnY2hlY2tlZCcpID09PSB0cnVlKSB7XHJcbiAgICAgIGdlb2xvY2F0aW9uLnNldFRyYWNraW5nKHRydWUpO1xyXG4gICAgICBmZWF0dXJlc092ZXJsYXlTb3VyY2UuYWRkRmVhdHVyZXMoW3Bvc2l0aW9uRmVhdHVyZSxhY2N1cmFjeUZlYXR1cmVdKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGdlb2xvY2F0aW9uLnNldFRyYWNraW5nKGZhbHNlKTtcclxuICAgICAgZmVhdHVyZXNPdmVybGF5U291cmNlLmNsZWFyKCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn0oKSk7XHJcbiIsIihmdW5jdGlvbigpIHtcclxuICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcHVwJyk7XHJcbiAgdmFyIGNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9wdXAtY29udGVudCcpO1xyXG4gIHZhciBjbG9zZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9wdXAtY2xvc2VyJyk7XHJcbiAgY2xvc2VyLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcclxuICAgIGluZm8uc2V0UG9zaXRpb24odW5kZWZpbmVkKTtcclxuICAgIGNsb3Nlci5ibHVyKCk7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfTtcclxuICB2YXIgaW5mbyA9IG5ldyBvbC5PdmVybGF5KCAvKiogQHR5cGUge29seC5PdmVybGF5T3B0aW9uc30gKi8gKHtcclxuICAgIGVsZW1lbnQ6IGNvbnRhaW5lcixcclxuICAgIGF1dG9QYW46IHRydWUsXHJcbiAgICBhdXRvUGFuQW5pbWF0aW9uOiB7XHJcbiAgICAgIGR1cmF0aW9uOiAyNTBcclxuICAgIH1cclxuICB9KSk7XHJcbiAgbWFwLmFkZE92ZXJsYXkoaW5mbyk7XHJcblxyXG4gIGZ1bmN0aW9uIGhhbmRsZUluZm8oZXZ0KSB7XHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIHZhciBjb29yZGluYXRlID0gZXZ0LmNvb3JkaW5hdGU7XHJcbiAgICBjb250ZW50LmlubmVySFRNTCA9ICc8cD5Zb3UgY2xpY2tlZCBoZXJlOjwvcD48Y29kZT4nICsgY29vcmRpbmF0ZSArICc8L2NvZGU+JztcclxuICAgIGluZm8uc2V0UG9zaXRpb24oY29vcmRpbmF0ZSk7XHJcbiAgfVxyXG4gICQoJy5pbmZvJykub24oJ2NoYW5nZScsIGZ1bmN0aW9uKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGlmICgkKHRoaXMpLnByb3AoJ2NoZWNrZWQnKSA9PT0gdHJ1ZSkge1xyXG4gICAgICBtYXAub24oJ3NpbmdsZWNsaWNrJywgaGFuZGxlSW5mbyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBtYXAudW4oJ3NpbmdsZWNsaWNrJywgaGFuZGxlSW5mbyk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn0oKSk7XHJcbiIsIihmdW5jdGlvbigpIHtcclxuICAkKCcud2VhdGhlcicpLmNoYW5nZShmdW5jdGlvbigpIHtcclxuICAgIHZhciBjZW50ZXIgPSBvbC5wcm9qLnRyYW5zZm9ybShtYXAuZ2V0VmlldygpLmdldENlbnRlcigpLCAnRVBTRzozODU3JywgJ0VQU0c6NDMyNicpO1xyXG4gICAgdmFyIGxhdCA9IGNlbnRlclsxXTtcclxuICAgIHZhciBsb24gPSBjZW50ZXJbMF07XHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICB1cmw6ICdodHRwOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9kYXRhLzIuNS9maW5kP2xhdD0nICsgbGF0ICsgJyZsb249JyArIGxvbiArICcmY250PTUmY2x1c3Rlcj1ubyZ1bml0cz1tZXRyaWMmdHlwZT1hY2N1cmF0ZSZBUFBJRD1mOWNkOWZhMmM0MjdjM2IxMTVlODdlNDg2MjYxOWM1YycsXHJcbiAgICAgIHR5cGU6ICdHRVQnLFxyXG4gICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgfSkuZG9uZShmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgIGZ1bmN0aW9uIGNyZWF0ZVdlYXRoZXJPdmVybGF5KHBvc2l0aW9uLCBpbmRleCkge1xyXG4gICAgICAgIHZhciBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgZWxlbS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3dlYXRoZXItcG9wdXAgZGVmYXVsdC1wcmltYXJ5LWNvbG9yICBwYXBlci1zaGFkb3ctYm90dG9tLXotNCcpO1xyXG4gICAgICAgIGVsZW0uc2V0QXR0cmlidXRlKCdpZCcsIGluZGV4KTtcclxuICAgICAgICByZXR1cm4gbmV3IG9sLk92ZXJsYXkoe1xyXG4gICAgICAgICAgZWxlbWVudDogZWxlbSxcclxuICAgICAgICAgIHBvc2l0aW9uOiBwb3NpdGlvblxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciBvYmpzID0gZGF0YS5saXN0O1xyXG4gICAgICB2YXIgb3ZlcmxheSwgY29vcmRpbmF0ZXM7XHJcbiAgICAgICQuZWFjaChvYmpzLCBmdW5jdGlvbihpbmRleCwgdmFsKSB7XHJcbiAgICAgICAgY29vcmRpbmF0ZXMgPSBvbC5wcm9qLnRyYW5zZm9ybShbdmFsLmNvb3JkLmxvbiwgdmFsLmNvb3JkLmxhdF0sICdFUFNHOjQzMjYnLCAnRVBTRzozODU3Jyk7XHJcbiAgICAgICAgb3ZlcmxheSA9IGNyZWF0ZVdlYXRoZXJPdmVybGF5KGNvb3JkaW5hdGVzLCBpbmRleCk7XHJcbiAgICAgICAgbWFwLmFkZE92ZXJsYXkob3ZlcmxheSk7XHJcbiAgICAgICAgd2VhdGhlckRhdGEgPSB7XHJcbiAgICAgICAgICAnbmFtZSc6IHZhbC5uYW1lLFxyXG4gICAgICAgICAgJ3RlbXAnOiB2YWwubWFpbi50ZW1wLFxyXG4gICAgICAgICAgJ3ByZXNzdXJlJzogdmFsLm1haW4ucHJlc3N1cmUsXHJcbiAgICAgICAgICAnaHVtaWRpdHknOiB2YWwubWFpbi5odW1pZGl0eVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgZHVzdC5yZW5kZXIoJ3dlYXRoZXJQb3B1cC5kdXN0Jywgd2VhdGhlckRhdGEsIGZ1bmN0aW9uKGVyciwgb3V0KSB7XHJcbiAgICAgICAgICAkKFwiI1wiK2luZGV4KS5odG1sKG91dCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSkuZmFpbChmdW5jdGlvbigpIHtcclxuICAgICAgLy8gdG9hc3RyLmVycm9yKFwizpTOtc69IM6yz4HOrc64zrfOus6xzr0gz4DOu863z4HOv8+Gzr/Pgc6vzrXPgiDOs865zrEgz4TOuc+CIM66zrHOuc+BzrnOus6tz4Igz4PPhc69zrjOrs66zrXPgiFcIik7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSgpKTtcclxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9