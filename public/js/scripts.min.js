var center=[3677385,4120949],extent=[3590094,4102833,3855483,4261211],lang=document.documentElement.lang,styleCache={},geoJSONFormat=new ol.format.GeoJSON({defaultDataProjection:"EPSG:4326"}),bing=new ol.layer.Tile({visible:!0,source:new ol.source.BingMaps({key:"Ak2Gq8VUfICsPpuf7LRANXmXt2sHWmSLPhohmVLFtFIEwYjs_5MCyAhAFwRSVpLj",imagerySet:"Aerial"}),maxZoom:19,crossOrigin:"anonymous",preload:1/0,id:"bing"}),mapbox=new ol.layer.Tile({source:new ol.source.XYZ({attributions:[new ol.Attribution({html:'<a href="https://www.mapbox.com/about/maps/" target="_blank">&copy; Mapbox &copy; OpenStreetMap</a>'})],url:"https://api.mapbox.com/v4/mapbox.streets/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiZmlydmFpbiIsImEiOiJlOWYyYTM0NThiNWM0YjJjODJjNDE4ODQzNzA2MGQyNiJ9.-NVDO27Hzt-w_nQosUPfLA"}),id:"mapbox"}),propertyStyleFunction=function(e,t){var o=e.get("features").length,l=(propertySource.getFeatures().length,20),r=styleCache[o];return r||(r=o>1?[new ol.style.Style({image:new ol.style.Circle({radius:l,stroke:new ol.style.Stroke({color:[156,39,176,1],width:5}),fill:new ol.style.Fill({color:[68,138,255,.8]})}),text:new ol.style.Text({text:o.toString(),fill:new ol.style.Fill({color:"#FFFFFF"})}),zIndex:101})]:[new ol.style.Style({image:new ol.style.Icon({src:"../images/map-icons/pins/48/pin5.png",anchorOrigin:"bottom-left",anchor:[0,0],scale:.7})})],styleCache[o]=r),r},propertySource=new ol.source.Vector({format:geoJSONFormat,loader:function(e,t,o){var l=ol.proj.transformExtent(e,"EPSG:3857","EPSG:4326"),r="http://localhost:3000/db/property?bbox[x1]="+l[0]+"&bbox[y1]="+l[1]+"&bbox[x2]="+l[2]+"&bbox[y2]="+l[3],n=this;this.clear(),$.ajax({url:r,type:"GET",dataType:"json"}).done(function(e){var t=geoJSONFormat.readFeatures(e,{featureProjection:"EPSG:3857"});n.addFeatures(t)}).fail(function(){console.log("error")})},strategy:ol.loadingstrategy.bbox}),propertyClusterSource=new ol.source.Cluster({distance:40,source:propertySource,attributions:[new ol.Attribution({html:'All maps © <a href="http://www.terracognita.gr/">Terra Cognita</a>'})]}),property=new ol.layer.Vector({source:propertyClusterSource,id:"estates",visible:!0,style:propertyStyleFunction});property.setZIndex(2);var PSAStyleFunction=function(e,t){var o,l=e.get("style");return o="el"===lang?e.get("name_el"):e.get("name_en"),styleCache[l]||(styleCache=[new ol.style.Style({image:new ol.style.Icon({src:"../images/maki/renders/"+l+"-24.png",anchorOrigin:"bottom-left",anchor:[.5,.5],scale:1}),text:new ol.style.Text({text:o,stroke:new ol.style.Stroke({color:[156,39,176,.8],width:1}),offsetY:12})})]),styleCache},PSA=new ol.layer.Vector({style:PSAStyleFunction,maxResolution:3});PSA.setZIndex(1);var filteredEstates=new ol.layer.Vector({source:new ol.source.Vector,id:"filteredEstates",visible:!1,style:filteredEsateStyle}),map=new ol.Map({target:"map",layers:[mapbox,property,PSA,filteredEstates],loadTilesWhileAnimating:!0,loadTilesWhileInteracting:!0,renderer:"canvas",controls:ol.control.defaults({attributionOptions:{collapsible:!1,collapsed:!1}}).extend([new ol.control.ScaleLine({units:"metric"}),new ol.control.OverviewMap({className:"ol-overviewmap ol-custom-overviewmap",collapsible:!0,collapsed:!0,layers:[bing]}),new ol.control.ZoomToExtent({extent:extent})]),view:new ol.View({center:center,extent:extent,projection:"EPSG:3857",zoom:14,maxZoom:19,minZoom:10})});"el"===lang?(bing.set("name","Δορυφορική εικόνα"),mapbox.set("name","Χάρτης"),property.set("name","Ακίνητα")):(bing.set("name","Sattelite Image"),mapbox.set("name","Map"),property.set("name","Properties"));
function filteredEsateStyle(e,t){return styleCache=[new ol.style.Style({image:new ol.style.Icon({src:"../images/map-icons/pins/48/pin4.png",anchorOrigin:"bottom-left",anchor:[.5,.5],scale:.7})})],styleCache}function selectByFilters(){var e={};if(e.leaseType=$("input[name=options]:checked").val(),e.startPrice=$("#startPrice").val(),e.endPrice=$("#endPrice").val(),features=getFilteredEstates(e),features.length>0){filteredEstates.getSource().clear(),filteredEstates.getSource().addFeatures(features),filteredEstates.setVisible(!0),property.setVisible(!1);filteredEstates.getSource().getExtent()}else filteredEstates.setVisible(!1),property.setVisible(!0)}function getFilteredEstates(e){var t=[],r={Rent:function(e){return propertySource.getFeatures().forEach(function(r){var s=r.get("price"),i=r.get("type_en");if("Rent"===i&&s>=e.startPrice&&s<=e.endPrice){var a=r.clone();t.push(a)}}),t},Sale:function(e){return propertySource.getFeatures().forEach(function(r){var s=r.get("price"),i=r.get("type_en");if("Sale"===i&&s>=e.startPrice&&s<=e.endPrice){var a=r.clone();t.push(a)}}),t}};return r[e.leaseType]?r[e.leaseType](e):void 0}$("#clearFilters").click(function(){filteredEstates.getSource().clear(),filteredEstates.setVisible(!1),property.setVisible(!0)});
!function(){var e=new ol.Geolocation({projection:map.getView().getProjection(),trackingOptions:{maximumAge:1e4,enableHighAccuracy:!0,timeout:6e5}}),o=new ol.Feature;e.on("change:accuracyGeometry",function(){o.setGeometry(e.getAccuracyGeometry())});var t=new ol.Feature;t.setStyle(new ol.style.Style({image:new ol.style.Circle({radius:6,fill:new ol.style.Fill({color:"#3399CC"}),stroke:new ol.style.Stroke({color:"#fff",width:2})})})),e.on("change:position",function(){var o=e.getPosition();t.setGeometry(o?new ol.geom.Point(o):null)}),featuresOverlaySource=new ol.source.Vector({});new ol.layer.Vector({map:map,source:featuresOverlaySource});$(".geolocation").on("change",function(r){r.preventDefault(),$(this).prop("checked")===!0?(e.setTracking(!0),featuresOverlaySource.addFeatures([t,o])):(e.setTracking(!1),featuresOverlaySource.clear())})}();
!function(){function e(e){e.preventDefault();var t=e.coordinate;if(map.getView().getResolution()>4)map.getView().setResolution(2.388657133911758),map.getView().setCenter(t);else{var a={},n={},r=[];if(a.title=n,"el"===lang?(n.estateCode="Κωδικός Ιδιοκτησίας",n.type="Τύπος",n.area="Εμβαδό",n.address="Διευθυνση",n.bedrooms="Υπνοδωμάτια",n.price="Τιμή",n["new"]="Νεόδμητο",n.parking="Στάθμεση",n.furnished="Επιπλωμένο",n.pets="Κατοικίδια",n.view="Θέα",n.heating="Θέρμανση",n.cooling="Ψύξη",n.contactInfo="Στοιχεία Επικοινωνίας",n.name="Όνομα",n.lastname="Επίθετο",n.phone="Τηλέφωνο",n.email="Ηλεκτρονική Διεύθυνση"):(n.estateCode="Estate Code",n.type="Type",n.area="Size",n.address="Address",n.bedrooms="Bedrooms",n.price="Price",n["new"]="Newly Build",n.parking="Parking",n.furnished="Furnished",n.pets="Pets Allowed",n.view="View",n.heating="Heating",n.cooling="Cooling",n.contactInfo="Contact Info",n.name="Name",n.lastname="Last Name",n.phone="Telephone",n.email="Email"),clickedFeature=map.forEachFeatureAtPixel(e.pixel,function(e,t){return{feature:e,layer:t}},this,function(e){return console.log(e.get("id")),"estates"===e.get("id")||"filteredEstates"===e.get("id")?!0:void 0},this),clickedFeature){if("filteredEstates"===clickedFeature.layer.get("id")){var o=clickedFeature.feature,i={};i.gid=o.get("gid"),i.type=o.get("estatetype"),i.area=o.get("estatearea"),"el"===lang?i.address=o.get("street_el")+" "+o.get("h_num_el"):i.address=o.get("street_en")+" "+o.get("h_num_en"),i.bedrooms=o.get("bedrooms"),i.price=o.get("price"),i["new"]=o.get("new"),i.parking=o.get("parking"),i.furnished=o.get("furnished"),i.pets=o.get("pets"),i.view=o.get("view"),i.heating=o.get("heating"),i.cooling=o.get("cooling"),"el"===lang?(i.name=o.get("name_el"),i.lastname=o.get("lastname_el")):(i.name=o.get("name_en"),i.lastname=o.get("lastname_en")),i.phone=o.get("phone1"),i.email=o.get("email"),r.push({feature:i}),featureCoordinate=o.get("geometry").getCoordinates(),a.features=r;var s=new ol.source.Vector({attributions:[new ol.Attribution({html:'POI by <a href="http://www.terracognita.gr/">Terra Cognita</a>'})],format:geoJSONFormat,loader:function(e,t,a){var n="http://localhost:3000/db/uses/"+i.gid,r=this;$.ajax({url:n,type:"GET",dataType:"json"}).done(function(e){var t=geoJSONFormat.readFeatures(e.property_services_analysis,{featureProjection:"EPSG:3857"}),a=new ol.style.Style({fill:new ol.style.Fill({color:[156,39,176,.1]})});t[0].setStyle(a),r.addFeatures(t)}).fail(function(){console.log("error")})},strategy:ol.loadingstrategy.all});PSA.setSource(s)}else clickedFeature.feature.get("features").forEach(function(e){var t={};t.gid=e.get("gid"),t.type=e.get("estatetype"),t.area=e.get("estatearea"),"el"===lang?t.address=e.get("street_el")+" "+e.get("h_num_el"):t.address=e.get("street_en")+" "+e.get("h_num_en"),t.bedrooms=e.get("bedrooms"),t.price=e.get("price"),t["new"]=e.get("new"),t.parking=e.get("parking"),t.furnished=e.get("furnished"),t.pets=e.get("pets"),t.view=e.get("view"),t.heating=e.get("heating"),t.cooling=e.get("cooling"),"el"===lang?(t.name=e.get("name_el"),t.lastname=e.get("lastname_el")):(t.name=e.get("name_en"),t.lastname=e.get("lastname_en")),t.phone=e.get("phone1"),t.email=e.get("email"),r.push({feature:t}),featureCoordinate=e.get("geometry").getCoordinates(),a.features=r;var n=new ol.source.Vector({attributions:[new ol.Attribution({html:'POI by <a href="http://www.terracognita.gr/">Terra Cognita</a>'})],format:geoJSONFormat,loader:function(e,a,n){var r="http://localhost:3000/db/uses/"+t.gid,o=this;$.ajax({url:r,type:"GET",dataType:"json"}).done(function(e){var t=geoJSONFormat.readFeatures(e.property_services_analysis,{featureProjection:"EPSG:3857"}),a=new ol.style.Style({fill:new ol.style.Fill({color:[156,39,176,.1]})});t[0].setStyle(a),o.addFeatures(t)}).fail(function(){console.log("error")})},strategy:ol.loadingstrategy.all});PSA.setSource(n)});dust.render("estateCards.dust",a,function(e,t){$(".estate-cards").html(t),$(".estate-cards").removeClass("visuallyhidden")}),$('a[href="#openModal"]').click(function(){dust.render("modalInfo.dust",a,function(e,t){$(".modal-content").html(t)})}),map.getView().setCenter(featureCoordinate)}}}$(".info").on("change",function(t){t.preventDefault(),$(this).prop("checked")===!0?map.on("click",e):map.un("click",e)})}();
!function(){function e(e){e.preventDefault();var r=n.getSource().getFeatures().length,a=e.coordinate;if(0===r)t.setGeometry(new ol.geom.Point(a)),t.setId("first"),n.getSource().addFeature(t),c[0]=a[0],c[1]=a[1];else if(1===r){var i=t.clone();i.setGeometry(new ol.geom.Point(a)),i.setId("second"),n.getSource().addFeature(i),c[2]=a[0],c[3]=a[1],o(c)}else n.getSource().clear()}function o(e){var o=ol.proj.transform([e[0],e[1]],"EPSG:3857","EPSG:4326"),t=ol.proj.transform([e[2],e[3]],"EPSG:3857","EPSG:4326"),r=o[0],a=o[1],c=t[0],i=t[1];$.ajax({url:"https://api.mapbox.com/v4/directions/mapbox.driving/"+r+","+a+";"+c+","+i+".json?alternatives=false&access_token=pk.eyJ1IjoiZmlydmFpbiIsImEiOiJlOWYyYTM0NThiNWM0YjJjODJjNDE4ODQzNzA2MGQyNiJ9.-NVDO27Hzt-w_nQosUPfLA",type:"GET",dataType:"json"}).done(function(e){var o={};o.type="Feature",o.geometry=e.routes[0].geometry,n.getSource().addFeatures(geoJSONFormat.readFeatures(o,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"})),map.getView().fit(n.getSource().getExtent(),map.getSize())}).fail(function(){console.log("error")}).always(function(){console.log("complete")})}var t=new ol.Feature,r=new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",opacity:1,scale:1,src:"../images/map-icons/pins/24/pin1.png",snapToPixel:!1}),zIndex:100});t.setStyle(r);var a=new ol.style.Style({stroke:new ol.style.Stroke({color:"#408080",width:5,lineDash:[4,4]})}),n=new ol.layer.Vector({map:map,source:new ol.source.Vector,style:a,id:"route",nameEl:"Διαδρομή",NameEn:"Route"}),c=[];geoJSONFormat=new ol.format.GeoJSON({defaultDataProjection:"EPSG:4326",geometryName:"geometry"}),$(".marker").on("change",function(o){o.preventDefault(),$(this).prop("checked")===!0?map.on("singleclick",e):(map.un("singleclick",e),n.getSource().clear())})}();
!function(){$(".weather").change(function(){if($(this).prop("checked")===!0){map.getOverlays().forEach(function(e){"weather"===e.get("name")&&($(e.getElement()).parent().remove(),$(e.getElement()).remove())});var e=ol.proj.transform(map.getView().getCenter(),"EPSG:3857","EPSG:4326"),t=e[1],a=e[0];$.ajax({url:"http://api.openweathermap.org/data/2.5/find?lat="+t+"&lon="+a+"&cnt=5&cluster=no&units=metric&type=accurate&APPID=f9cd9fa2c427c3b115e87e4862619c5c",type:"GET",dataType:"json"}).done(function(e){function t(e,t){var a=document.createElement("div");return a.setAttribute("class","weather-popup default-primary-color mdl-shadow--6dp"),a.setAttribute("id",t),a.setAttribute("data-name","weather"),new ol.Overlay({element:a,position:e})}var a,r,n=e.list;$.each(n,function(e,n){r=ol.proj.transform([n.coord.lon,n.coord.lat],"EPSG:4326","EPSG:3857"),a=t(r,e),map.addOverlay(a),a.set("name","weather"),weatherData={name:n.name,temp:n.main.temp,pressure:n.main.pressure,humidity:n.main.humidity},dust.render("weatherPopup.dust",weatherData,function(t,a){$("#"+e).html(a)})})}).fail(function(){})}else $(this).prop("checked")===!1&&map.getOverlays().forEach(function(e){"weather"===e.get("name")&&($(e.getElement()).parent().remove(),$(e.getElement()).remove())})})}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hcC5qcyIsImZpbHRlcnMuanMiLCJnZW9sb2NhdGlvbi5qcyIsImluZm8uanMiLCJyb3V0aW5nLmpzIiwid2VhdGhlci5qcyJdLCJuYW1lcyI6WyJjZW50ZXIiLCJleHRlbnQiLCJsYW5nIiwiZG9jdW1lbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJzdHlsZUNhY2hlIiwiZ2VvSlNPTkZvcm1hdCIsIm9sIiwiZm9ybWF0IiwiR2VvSlNPTiIsImRlZmF1bHREYXRhUHJvamVjdGlvbiIsImJpbmciLCJsYXllciIsIlRpbGUiLCJ2aXNpYmxlIiwic291cmNlIiwiQmluZ01hcHMiLCJrZXkiLCJpbWFnZXJ5U2V0IiwibWF4Wm9vbSIsImNyb3NzT3JpZ2luIiwicHJlbG9hZCIsIkluZmluaXR5IiwiaWQiLCJtYXBib3giLCJYWVoiLCJhdHRyaWJ1dGlvbnMiLCJBdHRyaWJ1dGlvbiIsImh0bWwiLCJ1cmwiLCJwcm9wZXJ0eVN0eWxlRnVuY3Rpb24iLCJmZWF0dXJlIiwicmVzb2x1dGlvbiIsInNpemUiLCJnZXQiLCJsZW5ndGgiLCJyYWRpdXMiLCJwcm9wZXJ0eVNvdXJjZSIsImdldEZlYXR1cmVzIiwic3R5bGUiLCJTdHlsZSIsImltYWdlIiwiQ2lyY2xlIiwic3Ryb2tlIiwiU3Ryb2tlIiwiY29sb3IiLCJ3aWR0aCIsImZpbGwiLCJGaWxsIiwidGV4dCIsIlRleHQiLCJ0b1N0cmluZyIsInpJbmRleCIsIkljb24iLCJzcmMiLCJhbmNob3JPcmlnaW4iLCJhbmNob3IiLCJzY2FsZSIsIlZlY3RvciIsImxvYWRlciIsInByb2plY3Rpb24iLCJlcHNnNDMyNkV4dGVudCIsInByb2oiLCJ0cmFuc2Zvcm1FeHRlbnQiLCJ0aGF0IiwidGhpcyIsImNsZWFyIiwiJCIsImFqYXgiLCJ0eXBlIiwiZGF0YVR5cGUiLCJkb25lIiwicmVzcG9uc2UiLCJmZWF0dXJlcyIsInJlYWRGZWF0dXJlcyIsImZlYXR1cmVQcm9qZWN0aW9uIiwiYWRkRmVhdHVyZXMiLCJmYWlsIiwiY29uc29sZSIsImxvZyIsInN0cmF0ZWd5IiwibG9hZGluZ3N0cmF0ZWd5IiwiYmJveCIsInByb3BlcnR5Q2x1c3RlclNvdXJjZSIsIkNsdXN0ZXIiLCJkaXN0YW5jZSIsInByb3BlcnR5Iiwic2V0WkluZGV4IiwiUFNBU3R5bGVGdW5jdGlvbiIsInN5bWJvbCIsIm9mZnNldFkiLCJQU0EiLCJtYXhSZXNvbHV0aW9uIiwiZmlsdGVyZWRFc3RhdGVzIiwiZmlsdGVyZWRFc2F0ZVN0eWxlIiwibWFwIiwiTWFwIiwidGFyZ2V0IiwibGF5ZXJzIiwibG9hZFRpbGVzV2hpbGVBbmltYXRpbmciLCJsb2FkVGlsZXNXaGlsZUludGVyYWN0aW5nIiwicmVuZGVyZXIiLCJjb250cm9scyIsImNvbnRyb2wiLCJkZWZhdWx0cyIsImF0dHJpYnV0aW9uT3B0aW9ucyIsImNvbGxhcHNpYmxlIiwiY29sbGFwc2VkIiwiZXh0ZW5kIiwiU2NhbGVMaW5lIiwidW5pdHMiLCJPdmVydmlld01hcCIsImNsYXNzTmFtZSIsIlpvb21Ub0V4dGVudCIsInZpZXciLCJWaWV3Iiwiem9vbSIsIm1pblpvb20iLCJzZXQiLCJzZWxlY3RCeUZpbHRlcnMiLCJwYXJhbXMiLCJsZWFzZVR5cGUiLCJ2YWwiLCJzdGFydFByaWNlIiwiZW5kUHJpY2UiLCJnZXRGaWx0ZXJlZEVzdGF0ZXMiLCJnZXRTb3VyY2UiLCJzZXRWaXNpYmxlIiwiZ2V0RXh0ZW50Iiwid2hpY2hPbmUiLCJSZW50IiwiZm9yRWFjaCIsImYiLCJmcHJpY2UiLCJmdHlwZSIsImNsb25lIiwicHVzaCIsIlNhbGUiLCJjbGljayIsImdlb2xvY2F0aW9uIiwiR2VvbG9jYXRpb24iLCJnZXRWaWV3IiwiZ2V0UHJvamVjdGlvbiIsInRyYWNraW5nT3B0aW9ucyIsIm1heGltdW1BZ2UiLCJlbmFibGVIaWdoQWNjdXJhY3kiLCJ0aW1lb3V0IiwiYWNjdXJhY3lGZWF0dXJlIiwiRmVhdHVyZSIsIm9uIiwic2V0R2VvbWV0cnkiLCJnZXRBY2N1cmFjeUdlb21ldHJ5IiwicG9zaXRpb25GZWF0dXJlIiwic2V0U3R5bGUiLCJjb29yZGluYXRlcyIsImdldFBvc2l0aW9uIiwiZ2VvbSIsIlBvaW50IiwiZmVhdHVyZXNPdmVybGF5U291cmNlIiwiZSIsInByZXZlbnREZWZhdWx0IiwicHJvcCIsInNldFRyYWNraW5nIiwiaGFuZGxlSW5mbyIsImV2dCIsImNvb3JkaW5hdGUiLCJnZXRSZXNvbHV0aW9uIiwic2V0UmVzb2x1dGlvbiIsInNldENlbnRlciIsIm9iaiIsInRpdGxlIiwiZXN0YXRlQ29kZSIsImFyZWEiLCJhZGRyZXNzIiwiYmVkcm9vbXMiLCJwcmljZSIsInBhcmtpbmciLCJmdXJuaXNoZWQiLCJwZXRzIiwiaGVhdGluZyIsImNvb2xpbmciLCJjb250YWN0SW5mbyIsIm5hbWUiLCJsYXN0bmFtZSIsInBob25lIiwiZW1haWwiLCJjbGlja2VkRmVhdHVyZSIsImZvckVhY2hGZWF0dXJlQXRQaXhlbCIsInBpeGVsIiwiZ2lkIiwiZmVhdHVyZUNvb3JkaW5hdGUiLCJnZXRDb29yZGluYXRlcyIsIlBTQVNvdXJjZSIsInByb3BlcnR5X3NlcnZpY2VzX2FuYWx5c2lzIiwiYWxsIiwic2V0U291cmNlIiwiZHVzdCIsInJlbmRlciIsImVyciIsIm91dCIsInJlbW92ZUNsYXNzIiwidW4iLCJoYW5kbGVNYXJrZXIiLCJldmVudCIsImZlYXR1cmVDb3VudCIsImZlYXR1cmVzT3ZlcmxheSIsIm1hcmtlciIsInNldElkIiwiYWRkRmVhdHVyZSIsInJvdXRlQ29vcmRzIiwiY2FsbFJvdXRlIiwiZmlyc3QiLCJ0cmFuc2Zvcm0iLCJzZWNvbmQiLCJ4MSIsInkxIiwieDIiLCJ5MiIsImRhdGEiLCJyb3V0ZSIsImdlb21ldHJ5Iiwicm91dGVzIiwiZGF0YVByb2plY3Rpb24iLCJmaXQiLCJnZXRTaXplIiwiYWx3YXlzIiwiaWNvblN0eWxlIiwiYW5jaG9yWFVuaXRzIiwiYW5jaG9yWVVuaXRzIiwib3BhY2l0eSIsInNuYXBUb1BpeGVsIiwiZmVhdHVyZXNPdmVybGF5U3R5bGUiLCJsaW5lRGFzaCIsIm5hbWVFbCIsIk5hbWVFbiIsImdlb21ldHJ5TmFtZSIsImNoYW5nZSIsImdldE92ZXJsYXlzIiwib3ZsIiwiZ2V0RWxlbWVudCIsInBhcmVudCIsInJlbW92ZSIsImdldENlbnRlciIsImxhdCIsImxvbiIsImNyZWF0ZVdlYXRoZXJPdmVybGF5IiwicG9zaXRpb24iLCJpbmRleCIsImVsZW0iLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiT3ZlcmxheSIsImVsZW1lbnQiLCJvdmVybGF5Iiwib2JqcyIsImxpc3QiLCJlYWNoIiwiY29vcmQiLCJhZGRPdmVybGF5Iiwid2VhdGhlckRhdGEiLCJ0ZW1wIiwibWFpbiIsInByZXNzdXJlIiwiaHVtaWRpdHkiXSwibWFwcGluZ3MiOiJBQUFDLEdBQUlBLFNBQVUsUUFBUyxTQUNyQkMsUUFBVSxRQUFTLFFBQVMsUUFBUyxTQUNyQ0MsS0FBT0MsU0FBU0MsZ0JBQWdCRixLQUNoQ0csY0FDQUMsY0FBZ0IsR0FBSUMsSUFBR0MsT0FBT0MsU0FDNUJDLHNCQUF1QixjQUV2QkMsS0FBTyxHQUFJSixJQUFHSyxNQUFNQyxNQUN0QkMsU0FBUyxFQUNUQyxPQUFRLEdBQUlSLElBQUdRLE9BQU9DLFVBQ3BCQyxJQUFLLG1FQUNMQyxXQUFZLFdBRWRDLFFBQVMsR0FDVEMsWUFBYSxZQUNiQyxRQUFTQyxFQUFBQSxFQUNUQyxHQUFJLFNBRUZDLE9BQVMsR0FBSWpCLElBQUdLLE1BQU1DLE1BQ3hCRSxPQUFRLEdBQUlSLElBQUdRLE9BQU9VLEtBQ3BCQyxjQUFlLEdBQUluQixJQUFHb0IsYUFDcEJDLEtBQU0seUdBRVJDLElBQUssNktBRVBOLEdBQUksV0FFRk8sc0JBQXdCLFNBQVNDLEVBQVNDLEdBQzVDLEdBQUlDLEdBQU9GLEVBQVFHLElBQUksWUFBWUMsT0FFL0JDLEdBRGtCQyxlQUFlQyxjQUFjSCxPQUN0QyxJQUNUSSxFQUFRbEMsV0FBVzRCLEVBa0N2QixPQWpDS00sS0FFREEsRUFERU4sRUFBTyxHQUNBLEdBQUkxQixJQUFHZ0MsTUFBTUMsT0FDcEJDLE1B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QUM3RVUsRUFBVVIsRUFBcUIzRixFQUFhNkYsR0FDNUN4SixJQUFJbUssV0FBV0wsR0FDZkEsRUFBUXZJLElBQUksT0FBUSxXQUNwQjZJLGFBQ0U3RSxLQUFRNUQsRUFBSTRELEtBQ1o4RSxLQUFRMUksRUFBSTJJLEtBQUtELEtBQ2pCRSxTQUFZNUksRUFBSTJJLEtBQUtDLFNBQ3JCQyxTQUFZN0ksRUFBSTJJLEtBQUtFLFVBRXZCbkUsS0FBS0MsT0FBTyxvQkFBcUI4RCxZQUFhLFNBQVM3RCxFQUFLQyxHQUMxRHBJLEVBQUUsSUFBTW9MLEdBQU8zTixLQUFLMkssU0FHdkIxSCxLQUFLLGtCQUdDVixHQUFFRixNQUFNZ0csS0FBSyxjQUFlLEdBQ3JDbEUsSUFBSThJLGNBQWMxRyxRQUFRLFNBQVMyRyxHQUNULFlBQXBCQSxFQUFJNU0sSUFBSSxVQUNUaUMsRUFBRTJLLEVBQUlDLGNBQWNDLFNBQVVDLFNBQy9COUssRUFBRTJLLEVBQUlDLGNBQWNFIiwiZmlsZSI6InNjcmlwdHMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIHZhciBjZW50ZXIgPSBbMzY3NzM4NSwgNDEyMDk0OV0sXHJcbiAgIGV4dGVudCA9IFszNTkwMDk0LCA0MTAyODMzLCAzODU1NDgzLCA0MjYxMjExXSxcclxuICAgbGFuZyA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5sYW5nLFxyXG4gICBzdHlsZUNhY2hlID0ge30sXHJcbiAgIGdlb0pTT05Gb3JtYXQgPSBuZXcgb2wuZm9ybWF0Lkdlb0pTT04oe1xyXG4gICAgIGRlZmF1bHREYXRhUHJvamVjdGlvbjogJ0VQU0c6NDMyNidcclxuICAgfSk7XHJcbiB2YXIgYmluZyA9IG5ldyBvbC5sYXllci5UaWxlKHtcclxuICAgdmlzaWJsZTogdHJ1ZSxcclxuICAgc291cmNlOiBuZXcgb2wuc291cmNlLkJpbmdNYXBzKHtcclxuICAgICBrZXk6ICdBazJHcThWVWZJQ3NQcHVmN0xSQU5YbVh0MnNIV21TTFBob2htVkxGdEZJRXdZanNfNU1DeUFoQUZ3UlNWcExqJyxcclxuICAgICBpbWFnZXJ5U2V0OiAnQWVyaWFsJ1xyXG4gICB9KSxcclxuICAgbWF4Wm9vbTogMTksXHJcbiAgIGNyb3NzT3JpZ2luOiAnYW5vbnltb3VzJyxcclxuICAgcHJlbG9hZDogSW5maW5pdHksXHJcbiAgIGlkOiAnYmluZydcclxuIH0pO1xyXG4gdmFyIG1hcGJveCA9IG5ldyBvbC5sYXllci5UaWxlKHtcclxuICAgc291cmNlOiBuZXcgb2wuc291cmNlLlhZWih7XHJcbiAgICAgYXR0cmlidXRpb25zOiBbbmV3IG9sLkF0dHJpYnV0aW9uKHtcclxuICAgICAgIGh0bWw6ICc8YSBocmVmPVxcXCJodHRwczovL3d3dy5tYXBib3guY29tL2Fib3V0L21hcHMvXFxcIiB0YXJnZXQ9XFxcIl9ibGFua1xcXCI+JmNvcHk7IE1hcGJveCAmY29weTsgT3BlblN0cmVldE1hcDwvYT4nXHJcbiAgICAgfSldLFxyXG4gICAgIHVybDogJ2h0dHBzOi8vYXBpLm1hcGJveC5jb20vdjQvbWFwYm94LnN0cmVldHMve3p9L3t4fS97eX0ucG5nP2FjY2Vzc190b2tlbj1way5leUoxSWpvaVptbHlkbUZwYmlJc0ltRWlPaUpsT1dZeVlUTTBOVGhpTldNMFlqSmpPREpqTkRFNE9EUXpOekEyTUdReU5pSjkuLU5WRE8yN0h6dC13X25Rb3NVUGZMQSdcclxuICAgfSksXHJcbiAgIGlkOiAnbWFwYm94J1xyXG4gfSk7XHJcbiB2YXIgcHJvcGVydHlTdHlsZUZ1bmN0aW9uID0gZnVuY3Rpb24oZmVhdHVyZSwgcmVzb2x1dGlvbikge1xyXG4gICB2YXIgc2l6ZSA9IGZlYXR1cmUuZ2V0KCdmZWF0dXJlcycpLmxlbmd0aDtcclxuICAgdmFyIG1heEZlYXR1cmVDb3VudCA9IHByb3BlcnR5U291cmNlLmdldEZlYXR1cmVzKCkubGVuZ3RoO1xyXG4gICB2YXIgcmFkaXVzID0gMjA7XHJcbiAgIHZhciBzdHlsZSA9IHN0eWxlQ2FjaGVbc2l6ZV07XHJcbiAgIGlmICghc3R5bGUpIHtcclxuICAgICBpZiAoc2l6ZSA+IDEpIHtcclxuICAgICAgIHN0eWxlID0gW25ldyBvbC5zdHlsZS5TdHlsZSh7XHJcbiAgICAgICAgIGltYWdlOiBuZXcgb2wuc3R5bGUuQ2lyY2xlKHtcclxuICAgICAgICAgICByYWRpdXM6IHJhZGl1cyxcclxuICAgICAgICAgICBzdHJva2U6IG5ldyBvbC5zdHlsZS5TdHJva2Uoe1xyXG4gICAgICAgICAgICAgY29sb3I6IFsxNTYsIDM5LCAxNzYsIDFdLFxyXG4gICAgICAgICAgICAgd2lkdGg6IDVcclxuICAgICAgICAgICB9KSxcclxuICAgICAgICAgICBmaWxsOiBuZXcgb2wuc3R5bGUuRmlsbCh7XHJcbiAgICAgICAgICAgICBjb2xvcjogWzY4LCAxMzgsIDI1NSwgMC44XVxyXG4gICAgICAgICAgIH0pXHJcbiAgICAgICAgIH0pLFxyXG4gICAgICAgICB0ZXh0OiBuZXcgb2wuc3R5bGUuVGV4dCh7XHJcbiAgICAgICAgICAgdGV4dDogc2l6ZS50b1N0cmluZygpLFxyXG4gICAgICAgICAgIGZpbGw6IG5ldyBvbC5zdHlsZS5GaWxsKHtcclxuICAgICAgICAgICAgIGNvbG9yOiAnI0ZGRkZGRidcclxuICAgICAgICAgICB9KVxyXG4gICAgICAgICB9KSxcclxuICAgICAgICAgekluZGV4OiAxMDFcclxuICAgICAgIH0pXTtcclxuICAgICB9IGVsc2Uge1xyXG4gICAgICAgc3R5bGUgPSBbbmV3IG9sLnN0eWxlLlN0eWxlKHtcclxuICAgICAgICAgaW1hZ2U6IG5ldyBvbC5zdHlsZS5JY29uKCh7XHJcbiAgICAgICAgICAgc3JjOiAnLi4vaW1hZ2VzL21hcC1pY29ucy9waW5zLzQ4L3BpbjUucG5nJyxcclxuICAgICAgICAgICBhbmNob3JPcmlnaW46ICdib3R0b20tbGVmdCcsXHJcbiAgICAgICAgICAgYW5jaG9yOiBbMCwgMF0sXHJcbiAgICAgICAgICAgc2NhbGU6IDAuNyxcclxuICAgICAgICAgfSkpXHJcbiAgICAgICB9KV07XHJcbiAgICAgfVxyXG4gICAgIHN0eWxlQ2FjaGVbc2l6ZV0gPSBzdHlsZTtcclxuICAgfVxyXG4gICByZXR1cm4gc3R5bGU7XHJcbiB9O1xyXG4gdmFyIHByb3BlcnR5U291cmNlID0gbmV3IG9sLnNvdXJjZS5WZWN0b3Ioe1xyXG4gICBmb3JtYXQ6IGdlb0pTT05Gb3JtYXQsXHJcbiAgIGxvYWRlcjogZnVuY3Rpb24oZXh0ZW50LCByZXNvbHV0aW9uLCBwcm9qZWN0aW9uKSB7XHJcbiAgICAgdmFyIGVwc2c0MzI2RXh0ZW50ID0gb2wucHJvai50cmFuc2Zvcm1FeHRlbnQoZXh0ZW50LCAnRVBTRzozODU3JywgJ0VQU0c6NDMyNicpO1xyXG4gICAgIHZhciB1cmwgPSAnaHR0cDovL2xvY2FsaG9zdDozMDAwL2RiL3Byb3BlcnR5P2Jib3hbeDFdPScgKyBlcHNnNDMyNkV4dGVudFswXSArICcmYmJveFt5MV09JyArIGVwc2c0MzI2RXh0ZW50WzFdICsgJyZiYm94W3gyXT0nICsgZXBzZzQzMjZFeHRlbnRbMl0gKyAnJmJib3hbeTJdPScgKyBlcHNnNDMyNkV4dGVudFszXTtcclxuICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgdGhpcy5jbGVhcigpO1xyXG4gICAgICQuYWpheCh7XHJcbiAgICAgICB1cmw6IHVybCxcclxuICAgICAgIHR5cGU6ICdHRVQnLFxyXG4gICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICB9KS5kb25lKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICB2YXIgZmVhdHVyZXMgPSBnZW9KU09ORm9ybWF0LnJlYWRGZWF0dXJlcyhyZXNwb25zZSwge1xyXG4gICAgICAgICBmZWF0dXJlUHJvamVjdGlvbjogJ0VQU0c6Mzg1NydcclxuICAgICAgIH0pO1xyXG4gICAgICAgLy8gdGhhdC5jbGVhcigpO1xyXG4gICAgICAgdGhhdC5hZGRGZWF0dXJlcyhmZWF0dXJlcyk7XHJcbiAgICAgfSkuZmFpbChmdW5jdGlvbigpIHtcclxuICAgICAgIGNvbnNvbGUubG9nKFwiZXJyb3JcIik7XHJcbiAgICAgfSk7XHJcbiAgIH0sXHJcbiAgIHN0cmF0ZWd5OiBvbC5sb2FkaW5nc3RyYXRlZ3kuYmJveFxyXG4gfSk7XHJcbiB2YXIgcHJvcGVydHlDbHVzdGVyU291cmNlID0gbmV3IG9sLnNvdXJjZS5DbHVzdGVyKHtcclxuICAgZGlzdGFuY2U6IDQwLFxyXG4gICBzb3VyY2U6IHByb3BlcnR5U291cmNlLFxyXG4gICBhdHRyaWJ1dGlvbnM6IFtuZXcgb2wuQXR0cmlidXRpb24oe1xyXG4gICAgIGh0bWw6ICdBbGwgbWFwcyDCqSAnICsgJzxhIGhyZWY9XCJodHRwOi8vd3d3LnRlcnJhY29nbml0YS5nci9cIj5UZXJyYSBDb2duaXRhPC9hPidcclxuICAgfSldXHJcbiB9KTtcclxuIHZhciBwcm9wZXJ0eSA9IG5ldyBvbC5sYXllci5WZWN0b3Ioe1xyXG4gICBzb3VyY2U6IHByb3BlcnR5Q2x1c3RlclNvdXJjZSxcclxuICAgaWQ6ICdlc3RhdGVzJyxcclxuICAgdmlzaWJsZTogdHJ1ZSxcclxuICAgc3R5bGU6IHByb3BlcnR5U3R5bGVGdW5jdGlvblxyXG4gfSk7XHJcbiBwcm9wZXJ0eS5zZXRaSW5kZXgoMik7XHJcbiB2YXIgUFNBU3R5bGVGdW5jdGlvbiA9IGZ1bmN0aW9uKGZlYXR1cmUsIHJlc29sdXRpb24pIHtcclxuICAgdmFyIHN5bWJvbCA9IGZlYXR1cmUuZ2V0KCdzdHlsZScpO1xyXG4gICB2YXIgdGV4dDtcclxuICAgaWYgKGxhbmcgPT09ICdlbCcpIHtcclxuICAgICB0ZXh0ID0gZmVhdHVyZS5nZXQoJ25hbWVfZWwnKTtcclxuICAgfSBlbHNlIHtcclxuICAgICB0ZXh0ID0gZmVhdHVyZS5nZXQoJ25hbWVfZW4nKTtcclxuICAgfVxyXG4gICBpZiAoIXN0eWxlQ2FjaGVbc3ltYm9sXSkge1xyXG4gICAgIHN0eWxlQ2FjaGUgPSBbbmV3IG9sLnN0eWxlLlN0eWxlKHtcclxuICAgICAgIGltYWdlOiBuZXcgb2wuc3R5bGUuSWNvbigoe1xyXG4gICAgICAgICBzcmM6ICcuLi9pbWFnZXMvbWFraS9yZW5kZXJzLycgKyBzeW1ib2wgKyAnLTI0LnBuZycsXHJcbiAgICAgICAgIGFuY2hvck9yaWdpbjogJ2JvdHRvbS1sZWZ0JyxcclxuICAgICAgICAgYW5jaG9yOiBbMC41LCAwLjVdLFxyXG4gICAgICAgICBzY2FsZTogMSxcclxuICAgICAgIH0pKSxcclxuICAgICAgIHRleHQ6IG5ldyBvbC5zdHlsZS5UZXh0KHtcclxuICAgICAgICAgdGV4dDogdGV4dCxcclxuICAgICAgICAgc3Ryb2tlOiBuZXcgb2wuc3R5bGUuU3Ryb2tlKHtcclxuICAgICAgICAgICBjb2xvcjogWzE1NiwgMzksIDE3NiwgMC44XSxcclxuICAgICAgICAgICB3aWR0aDogMVxyXG4gICAgICAgICB9KSxcclxuICAgICAgICAgb2Zmc2V0WTogMTJcclxuICAgICAgIH0pXHJcbiAgICAgfSldO1xyXG4gICB9XHJcbiAgIHJldHVybiBzdHlsZUNhY2hlO1xyXG4gfTtcclxuIHZhciBQU0EgPSBuZXcgb2wubGF5ZXIuVmVjdG9yKHtcclxuICAgc3R5bGU6IFBTQVN0eWxlRnVuY3Rpb24sXHJcbiAgIG1heFJlc29sdXRpb246IDNcclxuIH0pO1xyXG4gUFNBLnNldFpJbmRleCgxKTtcclxuICB2YXIgZmlsdGVyZWRFc3RhdGVzID0gbmV3IG9sLmxheWVyLlZlY3Rvcih7XHJcbiAgIHNvdXJjZTogbmV3IG9sLnNvdXJjZS5WZWN0b3IoKSxcclxuICAgaWQ6ICdmaWx0ZXJlZEVzdGF0ZXMnLFxyXG4gICB2aXNpYmxlOiBmYWxzZSxcclxuICAgc3R5bGU6IGZpbHRlcmVkRXNhdGVTdHlsZVxyXG4gfSk7XHJcblxyXG4gdmFyIG1hcCA9IG5ldyBvbC5NYXAoe1xyXG4gICB0YXJnZXQ6ICdtYXAnLFxyXG4gICBsYXllcnM6IFttYXBib3gsIHByb3BlcnR5LCBQU0EsIGZpbHRlcmVkRXN0YXRlc10sXHJcbiAgIGxvYWRUaWxlc1doaWxlQW5pbWF0aW5nOiB0cnVlLFxyXG4gICBsb2FkVGlsZXNXaGlsZUludGVyYWN0aW5nOiB0cnVlLFxyXG4gICByZW5kZXJlcjogJ2NhbnZhcycsXHJcbiAgIGNvbnRyb2xzOiBvbC5jb250cm9sLmRlZmF1bHRzKHtcclxuICAgICBhdHRyaWJ1dGlvbk9wdGlvbnM6IHtcclxuICAgICAgIGNvbGxhcHNpYmxlOiBmYWxzZSxcclxuICAgICAgIGNvbGxhcHNlZDogZmFsc2VcclxuICAgICB9XHJcbiAgIH0pLmV4dGVuZChbXHJcbiAgICAgbmV3IG9sLmNvbnRyb2wuU2NhbGVMaW5lKHtcclxuICAgICAgIHVuaXRzOiAnbWV0cmljJ1xyXG4gICAgIH0pLCBuZXcgb2wuY29udHJvbC5PdmVydmlld01hcCh7XHJcbiAgICAgICBjbGFzc05hbWU6ICdvbC1vdmVydmlld21hcCBvbC1jdXN0b20tb3ZlcnZpZXdtYXAnLFxyXG4gICAgICAgY29sbGFwc2libGU6IHRydWUsXHJcbiAgICAgICBjb2xsYXBzZWQ6IHRydWUsXHJcbiAgICAgICBsYXllcnM6IFtiaW5nXVxyXG4gICAgIH0pLFxyXG4gICAgIG5ldyBvbC5jb250cm9sLlpvb21Ub0V4dGVudCh7XHJcbiAgICAgICBleHRlbnQ6IGV4dGVudFxyXG4gICAgIH0pXHJcbiAgIF0pLFxyXG4gICB2aWV3OiBuZXcgb2wuVmlldyh7XHJcbiAgICAgY2VudGVyOiBjZW50ZXIsXHJcbiAgICAgZXh0ZW50OiBleHRlbnQsXHJcbiAgICAgcHJvamVjdGlvbjogJ0VQU0c6Mzg1NycsXHJcbiAgICAgem9vbTogMTQsXHJcbiAgICAgbWF4Wm9vbTogMTksXHJcbiAgICAgbWluWm9vbTogMTBcclxuICAgfSksXHJcbiB9KTtcclxuIGlmIChsYW5nID09PSAnZWwnKSB7XHJcbiAgIGJpbmcuc2V0KCduYW1lJywgJ86Uzr/Pgc+Fz4bOv8+BzrnOus6uIM61zrnOus+Mzr3OsScpO1xyXG4gICBtYXBib3guc2V0KCduYW1lJywgJ86nzqzPgc+EzrfPgicpO1xyXG4gICBwcm9wZXJ0eS5zZXQoJ25hbWUnLCAnzpHOus6vzr3Ot8+EzrEnKTtcclxuIH0gZWxzZSB7XHJcbiAgIGJpbmcuc2V0KCduYW1lJywgJ1NhdHRlbGl0ZSBJbWFnZScpO1xyXG4gICBtYXBib3guc2V0KCduYW1lJywgJ01hcCcpO1xyXG4gICBwcm9wZXJ0eS5zZXQoJ25hbWUnLCAnUHJvcGVydGllcycpO1xyXG4gfVxyXG5cclxuXHJcbiIsIiBmdW5jdGlvbiBmaWx0ZXJlZEVzYXRlU3R5bGUoZmVhdHVyZSwgcmVzb2x1dGlvbikge1xyXG4gICBzdHlsZUNhY2hlID0gW25ldyBvbC5zdHlsZS5TdHlsZSh7XHJcbiAgICAgaW1hZ2U6IG5ldyBvbC5zdHlsZS5JY29uKCh7XHJcbiAgICAgICBzcmM6ICcuLi9pbWFnZXMvbWFwLWljb25zL3BpbnMvNDgvcGluNC5wbmcnLFxyXG4gICAgICAgYW5jaG9yT3JpZ2luOiAnYm90dG9tLWxlZnQnLFxyXG4gICAgICAgYW5jaG9yOiBbMC41LCAwLjVdLFxyXG4gICAgICAgc2NhbGU6IDAuNyxcclxuICAgICB9KSlcclxuICAgfSldO1xyXG4gICByZXR1cm4gc3R5bGVDYWNoZTtcclxuIH1cclxuXHJcblxyXG4gZnVuY3Rpb24gc2VsZWN0QnlGaWx0ZXJzKCkge1xyXG4gICB2YXIgcGFyYW1zID0ge307XHJcbiAgIHBhcmFtcy5sZWFzZVR5cGUgPSAkKFwiaW5wdXRbbmFtZT1vcHRpb25zXTpjaGVja2VkXCIpLnZhbCgpO1xyXG4gICBwYXJhbXMuc3RhcnRQcmljZSA9ICQoJyNzdGFydFByaWNlJykudmFsKCk7XHJcbiAgIHBhcmFtcy5lbmRQcmljZSA9ICQoJyNlbmRQcmljZScpLnZhbCgpO1xyXG4gICBmZWF0dXJlcyA9IGdldEZpbHRlcmVkRXN0YXRlcyhwYXJhbXMpO1xyXG4gICBpZiAoZmVhdHVyZXMubGVuZ3RoID4gMCkge1xyXG4gICAgIGZpbHRlcmVkRXN0YXRlcy5nZXRTb3VyY2UoKS5jbGVhcigpO1xyXG4gICAgIGZpbHRlcmVkRXN0YXRlcy5nZXRTb3VyY2UoKS5hZGRGZWF0dXJlcyhmZWF0dXJlcyk7XHJcbiAgICAgZmlsdGVyZWRFc3RhdGVzLnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICAgcHJvcGVydHkuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgdmFyIGV4dGVudCA9IGZpbHRlcmVkRXN0YXRlcy5nZXRTb3VyY2UoKS5nZXRFeHRlbnQoKTtcclxuICAgICB2YXIgY2VudGVyID0gW107XHJcbiAgIH0gZWxzZSB7XHJcbiAgICAgZmlsdGVyZWRFc3RhdGVzLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgIHByb3BlcnR5LnNldFZpc2libGUodHJ1ZSk7XHJcbiAgIH1cclxuIH1cclxuXHJcbiBmdW5jdGlvbiBnZXRGaWx0ZXJlZEVzdGF0ZXMocGFyYW1zKSB7XHJcbiAgIHZhciBmZWF0dXJlcyA9IFtdO1xyXG4gICB2YXIgd2hpY2hPbmUgPSB7XHJcbiAgICAgJ1JlbnQnOiBmdW5jdGlvbihwYXJhbXMpIHtcclxuICAgICAgIHByb3BlcnR5U291cmNlLmdldEZlYXR1cmVzKCkuZm9yRWFjaChmdW5jdGlvbihmKSB7XHJcbiAgICAgICAgIHZhciBmcHJpY2UgPSBmLmdldCgncHJpY2UnKTtcclxuICAgICAgICAgdmFyIGZ0eXBlID0gZi5nZXQoJ3R5cGVfZW4nKTtcclxuICAgICAgICAgaWYgKGZ0eXBlID09PSAnUmVudCcgJiYgZnByaWNlID49IHBhcmFtcy5zdGFydFByaWNlICYmIGZwcmljZSA8PSBwYXJhbXMuZW5kUHJpY2UpIHtcclxuICAgICAgICAgICB2YXIgZmVhdHVyZSA9IGYuY2xvbmUoKTtcclxuICAgICAgICAgICBmZWF0dXJlcy5wdXNoKGZlYXR1cmUpO1xyXG4gICAgICAgICB9XHJcbiAgICAgICB9KTtcclxuICAgICAgIHJldHVybiBmZWF0dXJlcztcclxuICAgICB9LFxyXG4gICAgICdTYWxlJzogZnVuY3Rpb24ocGFyYW1zKSB7XHJcbiAgICAgICBwcm9wZXJ0eVNvdXJjZS5nZXRGZWF0dXJlcygpLmZvckVhY2goZnVuY3Rpb24oZikge1xyXG4gICAgICAgICB2YXIgZnByaWNlID0gZi5nZXQoJ3ByaWNlJyk7XHJcbiAgICAgICAgIHZhciBmdHlwZSA9IGYuZ2V0KCd0eXBlX2VuJyk7XHJcbiAgICAgICAgIGlmIChmdHlwZSA9PT0gJ1NhbGUnICYmIGZwcmljZSA+PSBwYXJhbXMuc3RhcnRQcmljZSAmJiBmcHJpY2UgPD0gcGFyYW1zLmVuZFByaWNlKSB7XHJcbiAgICAgICAgICAgdmFyIGZlYXR1cmUgPSBmLmNsb25lKCk7XHJcbiAgICAgICAgICAgZmVhdHVyZXMucHVzaChmZWF0dXJlKTtcclxuICAgICAgICAgfVxyXG4gICAgICAgfSk7XHJcbiAgICAgICByZXR1cm4gZmVhdHVyZXM7XHJcbiAgICAgfVxyXG4gICB9O1xyXG4gICBpZiAod2hpY2hPbmVbcGFyYW1zLmxlYXNlVHlwZV0pIHJldHVybiB3aGljaE9uZVtwYXJhbXMubGVhc2VUeXBlXShwYXJhbXMpO1xyXG4gfVxyXG4kKFwiI2NsZWFyRmlsdGVyc1wiKS5jbGljayhmdW5jdGlvbigpIHtcclxuZmlsdGVyZWRFc3RhdGVzLmdldFNvdXJjZSgpLmNsZWFyKCk7XHJcbmZpbHRlcmVkRXN0YXRlcy5zZXRWaXNpYmxlKGZhbHNlKTtcclxucHJvcGVydHkuc2V0VmlzaWJsZSh0cnVlKTtcclxuXHJcbn0pOyIsIihmdW5jdGlvbigpIHtcclxuICB2YXIgZ2VvbG9jYXRpb24gPSBuZXcgb2wuR2VvbG9jYXRpb24oe1xyXG4gICAgLy8gdGFrZSB0aGUgcHJvamVjdGlvbiB0byB1c2UgZnJvbSB0aGUgbWFwJ3Mgdmlld1xyXG4gICAgcHJvamVjdGlvbjogbWFwLmdldFZpZXcoKS5nZXRQcm9qZWN0aW9uKCksXHJcbiAgICB0cmFja2luZ09wdGlvbnM6IHtcclxuICAgICAgbWF4aW11bUFnZTogMTAwMDAsXHJcbiAgICAgIGVuYWJsZUhpZ2hBY2N1cmFjeTogdHJ1ZSxcclxuICAgICAgdGltZW91dDogNjAwMDAwXHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgdmFyIGFjY3VyYWN5RmVhdHVyZSA9IG5ldyBvbC5GZWF0dXJlKCk7XHJcbiAgZ2VvbG9jYXRpb24ub24oJ2NoYW5nZTphY2N1cmFjeUdlb21ldHJ5JywgZnVuY3Rpb24oKSB7XHJcbiAgICBhY2N1cmFjeUZlYXR1cmUuc2V0R2VvbWV0cnkoZ2VvbG9jYXRpb24uZ2V0QWNjdXJhY3lHZW9tZXRyeSgpKTtcclxuICB9KTtcclxuICB2YXIgcG9zaXRpb25GZWF0dXJlID0gbmV3IG9sLkZlYXR1cmUoKTtcclxuICBwb3NpdGlvbkZlYXR1cmUuc2V0U3R5bGUobmV3IG9sLnN0eWxlLlN0eWxlKHtcclxuICAgIGltYWdlOiBuZXcgb2wuc3R5bGUuQ2lyY2xlKHtcclxuICAgICAgcmFkaXVzOiA2LFxyXG4gICAgICBmaWxsOiBuZXcgb2wuc3R5bGUuRmlsbCh7XHJcbiAgICAgICAgY29sb3I6ICcjMzM5OUNDJ1xyXG4gICAgICB9KSxcclxuICAgICAgc3Ryb2tlOiBuZXcgb2wuc3R5bGUuU3Ryb2tlKHtcclxuICAgICAgICBjb2xvcjogJyNmZmYnLFxyXG4gICAgICAgIHdpZHRoOiAyXHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gIH0pKTtcclxuICAvLyBsaXN0ZW4gdG8gY2hhbmdlcyBpbiBwb3NpdGlvblxyXG4gIGdlb2xvY2F0aW9uLm9uKCdjaGFuZ2U6cG9zaXRpb24nLCBmdW5jdGlvbigpIHtcclxuICAgIHZhciBjb29yZGluYXRlcyA9IGdlb2xvY2F0aW9uLmdldFBvc2l0aW9uKCk7XHJcbiAgICBwb3NpdGlvbkZlYXR1cmUuc2V0R2VvbWV0cnkoY29vcmRpbmF0ZXMgPyBuZXcgb2wuZ2VvbS5Qb2ludChjb29yZGluYXRlcykgOiBudWxsKTtcclxuICB9KTtcclxuICBmZWF0dXJlc092ZXJsYXlTb3VyY2UgPSBuZXcgb2wuc291cmNlLlZlY3Rvcih7fSk7XHJcbiAgdmFyIGZlYXR1cmVzT3ZlcmxheSA9IG5ldyBvbC5sYXllci5WZWN0b3Ioe1xyXG4gICAgbWFwOiBtYXAsXHJcbiAgICBzb3VyY2U6IGZlYXR1cmVzT3ZlcmxheVNvdXJjZVxyXG4gIH0pO1xyXG4gICQoJy5nZW9sb2NhdGlvbicpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbihlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBpZiAoJCh0aGlzKS5wcm9wKCdjaGVja2VkJykgPT09IHRydWUpIHtcclxuICAgICAgZ2VvbG9jYXRpb24uc2V0VHJhY2tpbmcodHJ1ZSk7XHJcbiAgICAgIGZlYXR1cmVzT3ZlcmxheVNvdXJjZS5hZGRGZWF0dXJlcyhbcG9zaXRpb25GZWF0dXJlLGFjY3VyYWN5RmVhdHVyZV0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZ2VvbG9jYXRpb24uc2V0VHJhY2tpbmcoZmFsc2UpO1xyXG4gICAgICBmZWF0dXJlc092ZXJsYXlTb3VyY2UuY2xlYXIoKTtcclxuICAgIH1cclxuICB9KTtcclxufSgpKTtcclxuIiwiKGZ1bmN0aW9uKCkge1xyXG4gIGZ1bmN0aW9uIGhhbmRsZUluZm8oZXZ0KSB7XHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIHZhciBjb29yZGluYXRlID0gZXZ0LmNvb3JkaW5hdGU7XHJcbiAgICBpZiAobWFwLmdldFZpZXcoKS5nZXRSZXNvbHV0aW9uKCkgPiA0KSB7XHJcbiAgICAgIG1hcC5nZXRWaWV3KCkuc2V0UmVzb2x1dGlvbigyLjM4ODY1NzEzMzkxMTc1OCk7XHJcbiAgICAgIG1hcC5nZXRWaWV3KCkuc2V0Q2VudGVyKGNvb3JkaW5hdGUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdmFyIG9iaiA9IHt9O1xyXG4gICAgICB2YXIgdGl0bGUgPSB7fTtcclxuICAgICAgdmFyIG93bmVyID0ge307XHJcbiAgICAgIHZhciBmZWF0dXJlcyA9IFtdO1xyXG4gICAgICBvYmoudGl0bGUgPSB0aXRsZTtcclxuICAgICAgaWYgKGxhbmcgPT09ICdlbCcpIHtcclxuICAgICAgICB0aXRsZS5lc3RhdGVDb2RlID0gJ86az4nOtM65zrrPjM+CIM6ZzrTOuc6/zrrPhM63z4POr86xz4InO1xyXG4gICAgICAgIHRpdGxlLnR5cGUgPSAnzqTPjc+Azr/Pgic7XHJcbiAgICAgICAgdGl0bGUuYXJlYSA9ICfOlc68zrLOsc60z4wnO1xyXG4gICAgICAgIHRpdGxlLmFkZHJlc3MgPSAnzpTOuc61z4XOuM+Fzr3Pg863JztcclxuICAgICAgICB0aXRsZS5iZWRyb29tcyA9ICfOpc+Azr3Ov860z4nOvM6sz4TOuc6xJztcclxuICAgICAgICB0aXRsZS5wcmljZSA9ICfOpM65zrzOric7XHJcbiAgICAgICAgdGl0bGUubmV3ID0gJ86dzrXPjM60zrzOt8+Ezr8nO1xyXG4gICAgICAgIHRpdGxlLnBhcmtpbmcgPSAnzqPPhM6szrjOvM61z4POtyc7XHJcbiAgICAgICAgdGl0bGUuZnVybmlzaGVkID0gJ86Vz4DOuc+AzrvPic68zq3Ovc6/JztcclxuICAgICAgICB0aXRsZS5wZXRzID0gJ86azrHPhM6/zrnOus6vzrTOuc6xJztcclxuICAgICAgICB0aXRsZS52aWV3ID0gJ86Yzq3OsSc7XHJcbiAgICAgICAgdGl0bGUuaGVhdGluZyA9ICfOmM6tz4HOvM6xzr3Pg863JztcclxuICAgICAgICB0aXRsZS5jb29saW5nID0gJ86oz43Ovs63JztcclxuICAgICAgICB0aXRsZS5jb250YWN0SW5mbyA9ICfOo8+Ezr/Ouc+HzrXOr86xIM6Vz4DOuc66zr/Ouc69z4nOvc6vzrHPgic7XHJcbiAgICAgICAgdGl0bGUubmFtZSA9ICfOjM69zr/OvM6xJztcclxuICAgICAgICB0aXRsZS5sYXN0bmFtZSA9ICfOlc+Azq/OuM61z4TOvyc7XHJcbiAgICAgICAgdGl0bGUucGhvbmUgPSAnzqTOt867zq3Phs+Jzr3Ovyc7XHJcbiAgICAgICAgdGl0bGUuZW1haWwgPSAnzpfOu861zrrPhM+Bzr/Ovc65zrrOriDOlM65zrXPjc64z4XOvc+DzrcnO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRpdGxlLmVzdGF0ZUNvZGUgPSAnRXN0YXRlIENvZGUnO1xyXG4gICAgICAgIHRpdGxlLnR5cGUgPSAnVHlwZSc7XHJcbiAgICAgICAgdGl0bGUuYXJlYSA9ICdTaXplJztcclxuICAgICAgICB0aXRsZS5hZGRyZXNzID0gJ0FkZHJlc3MnO1xyXG4gICAgICAgIHRpdGxlLmJlZHJvb21zID0gJ0JlZHJvb21zJztcclxuICAgICAgICB0aXRsZS5wcmljZSA9ICdQcmljZSc7XHJcbiAgICAgICAgdGl0bGUubmV3ID0gJ05ld2x5IEJ1aWxkJztcclxuICAgICAgICB0aXRsZS5wYXJraW5nID0gJ1BhcmtpbmcnO1xyXG4gICAgICAgIHRpdGxlLmZ1cm5pc2hlZCA9ICdGdXJuaXNoZWQnO1xyXG4gICAgICAgIHRpdGxlLnBldHMgPSAnUGV0cyBBbGxvd2VkJztcclxuICAgICAgICB0aXRsZS52aWV3ID0gJ1ZpZXcnO1xyXG4gICAgICAgIHRpdGxlLmhlYXRpbmcgPSAnSGVhdGluZyc7XHJcbiAgICAgICAgdGl0bGUuY29vbGluZyA9ICdDb29saW5nJztcclxuICAgICAgICB0aXRsZS5jb250YWN0SW5mbyA9ICdDb250YWN0IEluZm8nO1xyXG4gICAgICAgIHRpdGxlLm5hbWUgPSAnTmFtZSc7XHJcbiAgICAgICAgdGl0bGUubGFzdG5hbWUgPSAnTGFzdCBOYW1lJztcclxuICAgICAgICB0aXRsZS5waG9uZSA9ICdUZWxlcGhvbmUnO1xyXG4gICAgICAgIHRpdGxlLmVtYWlsID0gJ0VtYWlsJztcclxuICAgICAgfVxyXG4gICAgICBjbGlja2VkRmVhdHVyZSA9IG1hcC5mb3JFYWNoRmVhdHVyZUF0UGl4ZWwoZXZ0LnBpeGVsLCBmdW5jdGlvbihmZWF0dXJlLCBsYXllcikge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBmZWF0dXJlOiBmZWF0dXJlLFxyXG4gICAgICAgICAgbGF5ZXI6IGxheWVyXHJcbiAgICAgICAgfTtcclxuICAgICAgfSwgdGhpcywgZnVuY3Rpb24obGF5ZXIpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhsYXllci5nZXQoJ2lkJykpO1xyXG4gICAgICAgIGlmIChsYXllci5nZXQoJ2lkJykgPT09ICdlc3RhdGVzJyB8fCBsYXllci5nZXQoJ2lkJykgPT09ICdmaWx0ZXJlZEVzdGF0ZXMnKSB7XHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sIHRoaXMpO1xyXG4gICAgICBpZiAoY2xpY2tlZEZlYXR1cmUpIHtcclxuICAgICAgICBpZiAoY2xpY2tlZEZlYXR1cmUubGF5ZXIuZ2V0KCdpZCcpID09PSAnZmlsdGVyZWRFc3RhdGVzJykge1xyXG4gICAgICAgICAgdmFyIGYgPSBjbGlja2VkRmVhdHVyZS5mZWF0dXJlO1xyXG4gICAgICAgICAgdmFyIGZlYXR1cmUgPSB7fTtcclxuICAgICAgICAgIGZlYXR1cmUuZ2lkID0gZi5nZXQoJ2dpZCcpO1xyXG4gICAgICAgICAgZmVhdHVyZS50eXBlID0gZi5nZXQoJ2VzdGF0ZXR5cGUnKTtcclxuICAgICAgICAgIGZlYXR1cmUuYXJlYSA9IGYuZ2V0KCdlc3RhdGVhcmVhJyk7XHJcbiAgICAgICAgICBpZiAobGFuZyA9PT0gJ2VsJykge1xyXG4gICAgICAgICAgICBmZWF0dXJlLmFkZHJlc3MgPSBmLmdldCgnc3RyZWV0X2VsJykgKyAnICcgKyBmLmdldCgnaF9udW1fZWwnKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZlYXR1cmUuYWRkcmVzcyA9IGYuZ2V0KCdzdHJlZXRfZW4nKSArICcgJyArIGYuZ2V0KCdoX251bV9lbicpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZmVhdHVyZS5iZWRyb29tcyA9IGYuZ2V0KCdiZWRyb29tcycpO1xyXG4gICAgICAgICAgZmVhdHVyZS5wcmljZSA9IGYuZ2V0KCdwcmljZScpO1xyXG4gICAgICAgICAgZmVhdHVyZS5uZXcgPSBmLmdldCgnbmV3Jyk7XHJcbiAgICAgICAgICBmZWF0dXJlLnBhcmtpbmcgPSBmLmdldCgncGFya2luZycpO1xyXG4gICAgICAgICAgZmVhdHVyZS5mdXJuaXNoZWQgPSBmLmdldCgnZnVybmlzaGVkJyk7XHJcbiAgICAgICAgICBmZWF0dXJlLnBldHMgPSBmLmdldCgncGV0cycpO1xyXG4gICAgICAgICAgZmVhdHVyZS52aWV3ID0gZi5nZXQoJ3ZpZXcnKTtcclxuICAgICAgICAgIGZlYXR1cmUuaGVhdGluZyA9IGYuZ2V0KCdoZWF0aW5nJyk7XHJcbiAgICAgICAgICBmZWF0dXJlLmNvb2xpbmcgPSBmLmdldCgnY29vbGluZycpO1xyXG4gICAgICAgICAgaWYgKGxhbmcgPT09ICdlbCcpIHtcclxuICAgICAgICAgICAgZmVhdHVyZS5uYW1lID0gZi5nZXQoJ25hbWVfZWwnKTtcclxuICAgICAgICAgICAgZmVhdHVyZS5sYXN0bmFtZSA9IGYuZ2V0KCdsYXN0bmFtZV9lbCcpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZmVhdHVyZS5uYW1lID0gZi5nZXQoJ25hbWVfZW4nKTtcclxuICAgICAgICAgICAgZmVhdHVyZS5sYXN0bmFtZSA9IGYuZ2V0KCdsYXN0bmFtZV9lbicpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZmVhdHVyZS5waG9uZSA9IGYuZ2V0KCdwaG9uZTEnKTtcclxuICAgICAgICAgIGZlYXR1cmUuZW1haWwgPSBmLmdldCgnZW1haWwnKTtcclxuICAgICAgICAgIGZlYXR1cmVzLnB1c2goe1xyXG4gICAgICAgICAgICBmZWF0dXJlOiBmZWF0dXJlXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGZlYXR1cmVDb29yZGluYXRlID0gZi5nZXQoJ2dlb21ldHJ5JykuZ2V0Q29vcmRpbmF0ZXMoKTtcclxuICAgICAgICAgIG9iai5mZWF0dXJlcyA9IGZlYXR1cmVzO1xyXG4gICAgICAgICAgdmFyIFBTQVNvdXJjZSA9IG5ldyBvbC5zb3VyY2UuVmVjdG9yKHtcclxuICAgICAgICAgICAgYXR0cmlidXRpb25zOiBbbmV3IG9sLkF0dHJpYnV0aW9uKHtcclxuICAgICAgICAgICAgICBodG1sOiAnUE9JIGJ5ICcgKyAnPGEgaHJlZj1cImh0dHA6Ly93d3cudGVycmFjb2duaXRhLmdyL1wiPlRlcnJhIENvZ25pdGE8L2E+J1xyXG4gICAgICAgICAgICB9KV0sXHJcbiAgICAgICAgICAgIGZvcm1hdDogZ2VvSlNPTkZvcm1hdCxcclxuICAgICAgICAgICAgbG9hZGVyOiBmdW5jdGlvbihleHRlbnQsIHJlc29sdXRpb24sIHByb2plY3Rpb24pIHtcclxuICAgICAgICAgICAgICB2YXIgdXJsID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9kYi91c2VzLycgKyBmZWF0dXJlLmdpZDtcclxuICAgICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgICAgICAgIH0pLmRvbmUoZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIHZhciBmZWF0dXJlcyA9IGdlb0pTT05Gb3JtYXQucmVhZEZlYXR1cmVzKHJlc3BvbnNlLnByb3BlcnR5X3NlcnZpY2VzX2FuYWx5c2lzLCB7XHJcbiAgICAgICAgICAgICAgICAgIGZlYXR1cmVQcm9qZWN0aW9uOiAnRVBTRzozODU3J1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJlYSA9IG5ldyBvbC5zdHlsZS5TdHlsZSh7XHJcbiAgICAgICAgICAgICAgICAgIGZpbGw6IG5ldyBvbC5zdHlsZS5GaWxsKHtcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogWzE1NiwgMzksIDE3NiwgMC4xXVxyXG4gICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBmZWF0dXJlc1swXS5zZXRTdHlsZShhcmVhKTtcclxuICAgICAgICAgICAgICAgIHRoYXQuYWRkRmVhdHVyZXMoZmVhdHVyZXMpO1xyXG4gICAgICAgICAgICAgIH0pLmZhaWwoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yXCIpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzdHJhdGVneTogb2wubG9hZGluZ3N0cmF0ZWd5LmFsbFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBQU0Euc2V0U291cmNlKFBTQVNvdXJjZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNsaWNrZWRGZWF0dXJlLmZlYXR1cmUuZ2V0KCdmZWF0dXJlcycpLmZvckVhY2goZnVuY3Rpb24oZikge1xyXG4gICAgICAgICAgICB2YXIgZmVhdHVyZSA9IHt9O1xyXG4gICAgICAgICAgICBmZWF0dXJlLmdpZCA9IGYuZ2V0KCdnaWQnKTtcclxuICAgICAgICAgICAgZmVhdHVyZS50eXBlID0gZi5nZXQoJ2VzdGF0ZXR5cGUnKTtcclxuICAgICAgICAgICAgZmVhdHVyZS5hcmVhID0gZi5nZXQoJ2VzdGF0ZWFyZWEnKTtcclxuICAgICAgICAgICAgaWYgKGxhbmcgPT09ICdlbCcpIHtcclxuICAgICAgICAgICAgICBmZWF0dXJlLmFkZHJlc3MgPSBmLmdldCgnc3RyZWV0X2VsJykgKyAnICcgKyBmLmdldCgnaF9udW1fZWwnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBmZWF0dXJlLmFkZHJlc3MgPSBmLmdldCgnc3RyZWV0X2VuJykgKyAnICcgKyBmLmdldCgnaF9udW1fZW4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmZWF0dXJlLmJlZHJvb21zID0gZi5nZXQoJ2JlZHJvb21zJyk7XHJcbiAgICAgICAgICAgIGZlYXR1cmUucHJpY2UgPSBmLmdldCgncHJpY2UnKTtcclxuICAgICAgICAgICAgZmVhdHVyZS5uZXcgPSBmLmdldCgnbmV3Jyk7XHJcbiAgICAgICAgICAgIGZlYXR1cmUucGFya2luZyA9IGYuZ2V0KCdwYXJraW5nJyk7XHJcbiAgICAgICAgICAgIGZlYXR1cmUuZnVybmlzaGVkID0gZi5nZXQoJ2Z1cm5pc2hlZCcpO1xyXG4gICAgICAgICAgICBmZWF0dXJlLnBldHMgPSBmLmdldCgncGV0cycpO1xyXG4gICAgICAgICAgICBmZWF0dXJlLnZpZXcgPSBmLmdldCgndmlldycpO1xyXG4gICAgICAgICAgICBmZWF0dXJlLmhlYXRpbmcgPSBmLmdldCgnaGVhdGluZycpO1xyXG4gICAgICAgICAgICBmZWF0dXJlLmNvb2xpbmcgPSBmLmdldCgnY29vbGluZycpO1xyXG4gICAgICAgICAgICBpZiAobGFuZyA9PT0gJ2VsJykge1xyXG4gICAgICAgICAgICAgIGZlYXR1cmUubmFtZSA9IGYuZ2V0KCduYW1lX2VsJyk7XHJcbiAgICAgICAgICAgICAgZmVhdHVyZS5sYXN0bmFtZSA9IGYuZ2V0KCdsYXN0bmFtZV9lbCcpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGZlYXR1cmUubmFtZSA9IGYuZ2V0KCduYW1lX2VuJyk7XHJcbiAgICAgICAgICAgICAgZmVhdHVyZS5sYXN0bmFtZSA9IGYuZ2V0KCdsYXN0bmFtZV9lbicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZlYXR1cmUucGhvbmUgPSBmLmdldCgncGhvbmUxJyk7XHJcbiAgICAgICAgICAgIGZlYXR1cmUuZW1haWwgPSBmLmdldCgnZW1haWwnKTtcclxuICAgICAgICAgICAgZmVhdHVyZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgZmVhdHVyZTogZmVhdHVyZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZmVhdHVyZUNvb3JkaW5hdGUgPSBmLmdldCgnZ2VvbWV0cnknKS5nZXRDb29yZGluYXRlcygpO1xyXG4gICAgICAgICAgICBvYmouZmVhdHVyZXMgPSBmZWF0dXJlcztcclxuICAgICAgICAgICAgdmFyIFBTQVNvdXJjZSA9IG5ldyBvbC5zb3VyY2UuVmVjdG9yKHtcclxuICAgICAgICAgICAgICBhdHRyaWJ1dGlvbnM6IFtuZXcgb2wuQXR0cmlidXRpb24oe1xyXG4gICAgICAgICAgICAgICAgaHRtbDogJ1BPSSBieSAnICsgJzxhIGhyZWY9XCJodHRwOi8vd3d3LnRlcnJhY29nbml0YS5nci9cIj5UZXJyYSBDb2duaXRhPC9hPidcclxuICAgICAgICAgICAgICB9KV0sXHJcbiAgICAgICAgICAgICAgZm9ybWF0OiBnZW9KU09ORm9ybWF0LFxyXG4gICAgICAgICAgICAgIGxvYWRlcjogZnVuY3Rpb24oZXh0ZW50LCByZXNvbHV0aW9uLCBwcm9qZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdXJsID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9kYi91c2VzLycgKyBmZWF0dXJlLmdpZDtcclxuICAgICAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICAgICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgICAgIH0pLmRvbmUoZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgdmFyIGZlYXR1cmVzID0gZ2VvSlNPTkZvcm1hdC5yZWFkRmVhdHVyZXMocmVzcG9uc2UucHJvcGVydHlfc2VydmljZXNfYW5hbHlzaXMsIHtcclxuICAgICAgICAgICAgICAgICAgICBmZWF0dXJlUHJvamVjdGlvbjogJ0VQU0c6Mzg1NydcclxuICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgIHZhciBhcmVhID0gbmV3IG9sLnN0eWxlLlN0eWxlKHtcclxuICAgICAgICAgICAgICAgICAgICBmaWxsOiBuZXcgb2wuc3R5bGUuRmlsbCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogWzE1NiwgMzksIDE3NiwgMC4xXVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICBmZWF0dXJlc1swXS5zZXRTdHlsZShhcmVhKTtcclxuICAgICAgICAgICAgICAgICAgdGhhdC5hZGRGZWF0dXJlcyhmZWF0dXJlcyk7XHJcbiAgICAgICAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yXCIpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICBzdHJhdGVneTogb2wubG9hZGluZ3N0cmF0ZWd5LmFsbFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgUFNBLnNldFNvdXJjZShQU0FTb3VyY2UpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGR1c3QucmVuZGVyKCdlc3RhdGVDYXJkcy5kdXN0Jywgb2JqLCBmdW5jdGlvbihlcnIsIG91dCkge1xyXG4gICAgICAgICAgJCgnLmVzdGF0ZS1jYXJkcycpLmh0bWwob3V0KTtcclxuICAgICAgICAgICQoJy5lc3RhdGUtY2FyZHMnKS5yZW1vdmVDbGFzcygndmlzdWFsbHloaWRkZW4nKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKCdhW2hyZWY9XCIjb3Blbk1vZGFsXCJdJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBkdXN0LnJlbmRlcignbW9kYWxJbmZvLmR1c3QnLCBvYmosIGZ1bmN0aW9uKGVyciwgb3V0KSB7XHJcbiAgICAgICAgICAgICQoJy5tb2RhbC1jb250ZW50JykuaHRtbChvdXQpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbWFwLmdldFZpZXcoKS5zZXRDZW50ZXIoZmVhdHVyZUNvb3JkaW5hdGUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gICQoJy5pbmZvJykub24oJ2NoYW5nZScsIGZ1bmN0aW9uKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGlmICgkKHRoaXMpLnByb3AoJ2NoZWNrZWQnKSA9PT0gdHJ1ZSkge1xyXG4gICAgICBtYXAub24oJ2NsaWNrJywgaGFuZGxlSW5mbyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBtYXAudW4oJ2NsaWNrJywgaGFuZGxlSW5mbyk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn0oKSk7XHJcbiIsIihmdW5jdGlvbigpIHtcclxuICB2YXIgbWFya2VyID0gbmV3IG9sLkZlYXR1cmUoKTtcclxuICB2YXIgaWNvblN0eWxlID0gbmV3IG9sLnN0eWxlLlN0eWxlKHtcclxuICAgIGltYWdlOiBuZXcgb2wuc3R5bGUuSWNvbiggLyoqIEB0eXBlIHtvbHguc3R5bGUuSWNvbk9wdGlvbnN9ICovICh7XHJcbiAgICAgIGFuY2hvcjogWzAuNSwgMV0sXHJcbiAgICAgIGFuY2hvclhVbml0czogJ2ZyYWN0aW9uJyxcclxuICAgICAgYW5jaG9yWVVuaXRzOiAnZnJhY3Rpb24nLFxyXG4gICAgICBvcGFjaXR5OiAxLFxyXG4gICAgICBzY2FsZTogMSxcclxuICAgICAgc3JjOiAnLi4vaW1hZ2VzL21hcC1pY29ucy9waW5zLzI0L3BpbjEucG5nJyxcclxuICAgICAgc25hcFRvUGl4ZWw6IGZhbHNlXHJcbiAgICB9KSksXHJcbiAgICB6SW5kZXg6IDEwMFxyXG4gIH0pO1xyXG4gIG1hcmtlci5zZXRTdHlsZShpY29uU3R5bGUpO1xyXG4gIHZhciBmZWF0dXJlc092ZXJsYXlTdHlsZSA9IG5ldyBvbC5zdHlsZS5TdHlsZSh7XHJcbiAgICBzdHJva2U6IG5ldyBvbC5zdHlsZS5TdHJva2Uoe1xyXG4gICAgICBjb2xvcjogJyM0MDgwODAnLFxyXG4gICAgICB3aWR0aDogNSxcclxuICAgICAgbGluZURhc2g6IFs0LCA0XVxyXG4gICAgfSlcclxuICB9KTtcclxuICB2YXIgZmVhdHVyZXNPdmVybGF5ID0gbmV3IG9sLmxheWVyLlZlY3Rvcih7XHJcbiAgICBtYXA6IG1hcCxcclxuICAgIHNvdXJjZTogbmV3IG9sLnNvdXJjZS5WZWN0b3IoKSxcclxuICAgIHN0eWxlOiBmZWF0dXJlc092ZXJsYXlTdHlsZSxcclxuICAgIGlkOiAncm91dGUnLFxyXG4gICAgbmFtZUVsOiAnzpTOuc6xzrTPgc6/zrzOricsXHJcbiAgICBOYW1lRW46ICdSb3V0ZSdcclxuICB9KTtcclxuICB2YXIgcm91dGVDb29yZHMgPSBbXTtcclxuXHJcbiAgZnVuY3Rpb24gaGFuZGxlTWFya2VyKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdmFyIGZlYXR1cmVDb3VudCA9IGZlYXR1cmVzT3ZlcmxheS5nZXRTb3VyY2UoKS5nZXRGZWF0dXJlcygpLmxlbmd0aDtcclxuICAgIHZhciBjb29yZGluYXRlcyA9IGV2ZW50LmNvb3JkaW5hdGU7XHJcbiAgICBpZiAoZmVhdHVyZUNvdW50ID09PSAwKSB7XHJcbiAgICAgIG1hcmtlci5zZXRHZW9tZXRyeShuZXcgb2wuZ2VvbS5Qb2ludChjb29yZGluYXRlcykpO1xyXG4gICAgICBtYXJrZXIuc2V0SWQoJ2ZpcnN0Jyk7XHJcbiAgICAgIGZlYXR1cmVzT3ZlcmxheS5nZXRTb3VyY2UoKS5hZGRGZWF0dXJlKG1hcmtlcik7XHJcbiAgICAgIHJvdXRlQ29vcmRzWzBdID0gY29vcmRpbmF0ZXNbMF07XHJcbiAgICAgIHJvdXRlQ29vcmRzWzFdID0gY29vcmRpbmF0ZXNbMV07XHJcbiAgICB9IGVsc2UgaWYgKGZlYXR1cmVDb3VudCA9PT0gMSkge1xyXG4gICAgICB2YXIgY2xvbmUgPSBtYXJrZXIuY2xvbmUoKTtcclxuICAgICAgY2xvbmUuc2V0R2VvbWV0cnkobmV3IG9sLmdlb20uUG9pbnQoY29vcmRpbmF0ZXMpKTtcclxuICAgICAgY2xvbmUuc2V0SWQoJ3NlY29uZCcpO1xyXG4gICAgICBmZWF0dXJlc092ZXJsYXkuZ2V0U291cmNlKCkuYWRkRmVhdHVyZShjbG9uZSk7XHJcbiAgICAgIHJvdXRlQ29vcmRzWzJdID0gY29vcmRpbmF0ZXNbMF07XHJcbiAgICAgIHJvdXRlQ29vcmRzWzNdID0gY29vcmRpbmF0ZXNbMV07XHJcbiAgICAgIGNhbGxSb3V0ZShyb3V0ZUNvb3Jkcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBmZWF0dXJlc092ZXJsYXkuZ2V0U291cmNlKCkuY2xlYXIoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdlb0pTT05Gb3JtYXQgPSBuZXcgb2wuZm9ybWF0Lkdlb0pTT04oe1xyXG4gICAgZGVmYXVsdERhdGFQcm9qZWN0aW9uOiAnRVBTRzo0MzI2JyxcclxuICAgIGdlb21ldHJ5TmFtZTogJ2dlb21ldHJ5J1xyXG4gIH0pO1xyXG5cclxuICBmdW5jdGlvbiBjYWxsUm91dGUocm91dGVDb29yZHMpIHtcclxuICAgIHZhciBmaXJzdCA9IG9sLnByb2oudHJhbnNmb3JtKFtyb3V0ZUNvb3Jkc1swXSwgcm91dGVDb29yZHNbMV1dLCAnRVBTRzozODU3JywgJ0VQU0c6NDMyNicpO1xyXG4gICAgdmFyIHNlY29uZCA9IG9sLnByb2oudHJhbnNmb3JtKFtyb3V0ZUNvb3Jkc1syXSwgcm91dGVDb29yZHNbM11dLCAnRVBTRzozODU3JywgJ0VQU0c6NDMyNicpO1xyXG4gICAgdmFyIHgxID0gZmlyc3RbMF07XHJcbiAgICB2YXIgeTEgPSBmaXJzdFsxXTtcclxuICAgIHZhciB4MiA9IHNlY29uZFswXTtcclxuICAgIHZhciB5MiA9IHNlY29uZFsxXTtcclxuICAgICQuYWpheCh7XHJcbiAgICAgIHVybDogJ2h0dHBzOi8vYXBpLm1hcGJveC5jb20vdjQvZGlyZWN0aW9ucy9tYXBib3guZHJpdmluZy8nICsgeDEgKyAnLCcgKyB5MSArICc7JyArIHgyICsgJywnICsgeTIgKyAnLmpzb24/YWx0ZXJuYXRpdmVzPWZhbHNlJmFjY2Vzc190b2tlbj1way5leUoxSWpvaVptbHlkbUZwYmlJc0ltRWlPaUpsT1dZeVlUTTBOVGhpTldNMFlqSmpPREpqTkRFNE9EUXpOekEyTUdReU5pSjkuLU5WRE8yN0h6dC13X25Rb3NVUGZMQScsXHJcbiAgICAgIHR5cGU6ICdHRVQnLFxyXG4gICAgICBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICB9KS5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgdmFyIHJvdXRlPXt9O1xyXG4gICAgICByb3V0ZS50eXBlID1cIkZlYXR1cmVcIjtcclxuICAgICAgcm91dGUuZ2VvbWV0cnkgPSBkYXRhLnJvdXRlc1swXS5nZW9tZXRyeTtcclxuICAgICAgZmVhdHVyZXNPdmVybGF5LmdldFNvdXJjZSgpLmFkZEZlYXR1cmVzKGdlb0pTT05Gb3JtYXQucmVhZEZlYXR1cmVzKHJvdXRlLCB7XHJcbiAgICAgICAgZGF0YVByb2plY3Rpb246ICdFUFNHOjQzMjYnLFxyXG4gICAgICAgIGZlYXR1cmVQcm9qZWN0aW9uOiAnRVBTRzozODU3J1xyXG4gICAgICB9KSk7XHJcbiAgICAgIG1hcC5nZXRWaWV3KCkuZml0KGZlYXR1cmVzT3ZlcmxheS5nZXRTb3VyY2UoKS5nZXRFeHRlbnQoKSwgbWFwLmdldFNpemUoKSk7XHJcbiAgICB9KS5mYWlsKGZ1bmN0aW9uKCkge1xyXG4gICAgICBjb25zb2xlLmxvZyhcImVycm9yXCIpO1xyXG4gICAgfSkuYWx3YXlzKGZ1bmN0aW9uKCkge1xyXG4gICAgICBjb25zb2xlLmxvZyhcImNvbXBsZXRlXCIpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gICQoJy5tYXJrZXInKS5vbignY2hhbmdlJywgZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAvKiBBY3Qgb24gdGhlIGV2ZW50ICovXHJcbiAgICBpZiAoJCh0aGlzKS5wcm9wKCdjaGVja2VkJykgPT09IHRydWUpIHtcclxuICAgICAgbWFwLm9uKCdzaW5nbGVjbGljaycsIGhhbmRsZU1hcmtlcik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBtYXAudW4oJ3NpbmdsZWNsaWNrJywgaGFuZGxlTWFya2VyKTtcclxuICAgICAgZmVhdHVyZXNPdmVybGF5LmdldFNvdXJjZSgpLmNsZWFyKCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn0oKSk7XHJcbiIsIihmdW5jdGlvbigpIHtcclxuICAkKCcud2VhdGhlcicpLmNoYW5nZShmdW5jdGlvbigpIHtcclxuICAgIGlmICgkKHRoaXMpLnByb3AoJ2NoZWNrZWQnKSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgIG1hcC5nZXRPdmVybGF5cygpLmZvckVhY2goZnVuY3Rpb24ob3ZsKSB7XHJcbiAgICAgICAgaWYgKG92bC5nZXQoJ25hbWUnKSA9PT0gJ3dlYXRoZXInKSB7XHJcbiAgICAgICAgICAoJChvdmwuZ2V0RWxlbWVudCgpKS5wYXJlbnQoKSkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAkKG92bC5nZXRFbGVtZW50KCkpLnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIHZhciBjZW50ZXIgPSBvbC5wcm9qLnRyYW5zZm9ybShtYXAuZ2V0VmlldygpLmdldENlbnRlcigpLCAnRVBTRzozODU3JywgJ0VQU0c6NDMyNicpO1xyXG4gICAgICB2YXIgbGF0ID0gY2VudGVyWzFdO1xyXG4gICAgICB2YXIgbG9uID0gY2VudGVyWzBdO1xyXG4gICAgICAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogJ2h0dHA6Ly9hcGkub3BlbndlYXRoZXJtYXAub3JnL2RhdGEvMi41L2ZpbmQ/bGF0PScgKyBsYXQgKyAnJmxvbj0nICsgbG9uICsgJyZjbnQ9NSZjbHVzdGVyPW5vJnVuaXRzPW1ldHJpYyZ0eXBlPWFjY3VyYXRlJkFQUElEPWY5Y2Q5ZmEyYzQyN2MzYjExNWU4N2U0ODYyNjE5YzVjJyxcclxuICAgICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICB9KS5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVXZWF0aGVyT3ZlcmxheShwb3NpdGlvbiwgaW5kZXgpIHtcclxuICAgICAgICAgIHZhciBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICBlbGVtLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnd2VhdGhlci1wb3B1cCBkZWZhdWx0LXByaW1hcnktY29sb3IgbWRsLXNoYWRvdy0tNmRwJyk7XHJcbiAgICAgICAgICBlbGVtLnNldEF0dHJpYnV0ZSgnaWQnLCBpbmRleCk7XHJcbiAgICAgICAgICBlbGVtLnNldEF0dHJpYnV0ZSgnZGF0YS1uYW1lJywgJ3dlYXRoZXInKTtcclxuICAgICAgICAgIHJldHVybiBuZXcgb2wuT3ZlcmxheSh7XHJcbiAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW0sXHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBwb3NpdGlvbixcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgb2JqcyA9IGRhdGEubGlzdDtcclxuICAgICAgICB2YXIgb3ZlcmxheSwgY29vcmRpbmF0ZXM7XHJcbiAgICAgICAgJC5lYWNoKG9ianMsIGZ1bmN0aW9uKGluZGV4LCB2YWwpIHtcclxuICAgICAgICAgIGNvb3JkaW5hdGVzID0gb2wucHJvai50cmFuc2Zvcm0oW3ZhbC5jb29yZC5sb24sIHZhbC5jb29yZC5sYXRdLCAnRVBTRzo0MzI2JywgJ0VQU0c6Mzg1NycpO1xyXG4gICAgICAgICAgb3ZlcmxheSA9IGNyZWF0ZVdlYXRoZXJPdmVybGF5KGNvb3JkaW5hdGVzLCBpbmRleCk7XHJcbiAgICAgICAgICBtYXAuYWRkT3ZlcmxheShvdmVybGF5KTtcclxuICAgICAgICAgIG92ZXJsYXkuc2V0KCduYW1lJywgJ3dlYXRoZXInKTtcclxuICAgICAgICAgIHdlYXRoZXJEYXRhID0ge1xyXG4gICAgICAgICAgICAnbmFtZSc6IHZhbC5uYW1lLFxyXG4gICAgICAgICAgICAndGVtcCc6IHZhbC5tYWluLnRlbXAsXHJcbiAgICAgICAgICAgICdwcmVzc3VyZSc6IHZhbC5tYWluLnByZXNzdXJlLFxyXG4gICAgICAgICAgICAnaHVtaWRpdHknOiB2YWwubWFpbi5odW1pZGl0eVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIGR1c3QucmVuZGVyKCd3ZWF0aGVyUG9wdXAuZHVzdCcsIHdlYXRoZXJEYXRhLCBmdW5jdGlvbihlcnIsIG91dCkge1xyXG4gICAgICAgICAgICAkKFwiI1wiICsgaW5kZXgpLmh0bWwob3V0KTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KS5mYWlsKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vIHRvYXN0ci5lcnJvcihcIs6UzrXOvSDOss+Bzq3OuM63zrrOsc69IM+AzrvOt8+Bzr/Phs6/z4HOr861z4IgzrPOuc6xIM+EzrnPgiDOus6xzrnPgc65zrrOrc+CIM+Dz4XOvc64zq7Ous61z4IhXCIpO1xyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSBpZiAoJCh0aGlzKS5wcm9wKCdjaGVja2VkJykgPT09IGZhbHNlKSB7XHJcbiAgICAgIG1hcC5nZXRPdmVybGF5cygpLmZvckVhY2goZnVuY3Rpb24ob3ZsKSB7XHJcbiAgICAgICAgaWYgKG92bC5nZXQoJ25hbWUnKSA9PT0gJ3dlYXRoZXInKSB7XHJcbiAgICAgICAgICAoJChvdmwuZ2V0RWxlbWVudCgpKS5wYXJlbnQoKSkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAkKG92bC5nZXRFbGVtZW50KCkpLnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn0oKSk7XHJcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==