!function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}return"function"==typeof window.CustomEvent?!1:(e.prototype=window.Event.prototype,void(window.CustomEvent=e))}(),function(){Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(e){e=0===arguments.length?!0:!!e;var t=this.parentNode,n=window.getComputedStyle(t,null),o=parseInt(n.getPropertyValue("border-top-width")),r=parseInt(n.getPropertyValue("border-left-width")),i=this.offsetTop-t.offsetTop<t.scrollTop,a=this.offsetTop-t.offsetTop+this.clientHeight-o>t.scrollTop+t.clientHeight,s=this.offsetLeft-t.offsetLeft<t.scrollLeft,c=this.offsetLeft-t.offsetLeft+this.clientWidth-r>t.scrollLeft+t.clientWidth,l=i&&!a;(i||a)&&e&&(t.scrollTop=this.offsetTop-t.offsetTop-t.clientHeight/2-o+this.clientHeight/2),(s||c)&&e&&(t.scrollLeft=this.offsetLeft-t.offsetLeft-t.clientWidth/2-r+this.clientWidth/2),(i||a||s||c)&&!e&&this.scrollIntoView(l)})}(),window.App||(window.App={}),window.App.config={promises:{dustBluebird:Promise.promisifyAll(dust),cloudinaryBird:Promise.promisifyAll($.cloudinary)},commons:{map:{},trans:{}},cache:{activeEstate:{},activeEstateListing:{}},modules:{map:{},info:{},edit:{},"delete":{},insert:{},filters:{}}},window.App.utils={},$.cloudinary.config({cloud_name:"firvain",api_key:"375138932689591"}),App.utils={findById:function(e,t){for(var n=e.getLayers(),o=n.getLength(),r=0;o>r;r++)if(t===n.item(r).get("id"))return n.item(r);return null},findByName:function(e,t){for(var n=e.getLayers(),o=n.getLength(),r=0;o>r;r++)if(t===n.item(r).get("name"))return n.item(r);return null},preventDotAndSpace:function(e){var t=e.charCode?e.charCode:e.keyCode;return this.innerHTML=t,46!==t&&32!==t},geometryFunction:function(e,t){var n,o,r=t;return r||(r=new ol.geom.Polygon(null)),n=e[0],o=e[1],r.setCoordinates([[n,[n[0],o[1]],o,[o[0],n[1]],n]]),r},hasClass:function(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)},removeClass:function(e,t){var n=e;n.classList?n.classList.remove(t):n.className=n.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")},addClass:function(e,t){var n=e;n.classList?n.classList.add(t):n.className+=" "+t},toggleClass:function(e,t){var n,o,r=e;r.classList?r.classList.toggle(t):(n=r.className.split(" "),o=n.indexOf(t),o>=0?n.splice(o,1):n.push(t),r.className=n.join(" "))},requestFullScreen:function(e){var t,n=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullScreen;n?n.call(e):"undefined"!=typeof window.ActiveXObject&&(t=new ActiveXObject("WScript.Shell"),null!==t&&t.SendKeys("{F11}"))},exitFullsreen:function(e){var t,n=e.exitFullScreen||e.webkitExitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen;n?n.call(e):"undefined"!=typeof window.ActiveXObject&&(t=new ActiveXObject("WScript.Shell"),null!==t&&t.SendKeys("{Esc}"))},elToEn:function(e){for(var t,n=e,o=new Array("α","ά","Ά","Α","β","Β","γ","Γ","δ","Δ","ε","έ","Ε","Έ","ζ","Ζ","η","ή","Η","θ","Θ","ι","ί","ϊ","ΐ","Ι","Ί","κ","Κ","λ","Λ","μ","Μ","ν","Ν","ξ","Ξ","ο","ό","Ο","Ό","π","Π","ρ","Ρ","σ","ς","Σ","τ","Τ","υ","ύ","Υ","Ύ","φ","Φ","χ","Χ","ψ","Ψ","ω","ώ","Ω","Ώ"," ","'","'",","),r=new Array("a","a","A","A","v","V","g","G","d","D","e","e","E","E","z","Z","i","i","I","th","Th","i","i","i","i","I","I","k","K","l","L","m","M","n","N","x","X","o","o","O","O","p","P","r","R","s","s","S","t","T","u","u","Y","Y","f","F","ch","Ch","ps","Ps","o","o","O","O"," ","_","_","_"),i=0;i<o.length;i++)n=n.replace(new RegExp(o[i],"g"),r[i]);return t=n},handleDate:function(e,t){var n,o=[];return"string"==typeof e&&"el"!==t?(n=_.split(e,"-",3),o=[n[1],n[0],n[2]],_.join(o,"-")):e},sanitize:function(e){var t,n=e.value;t=n.replace(/[^a-z0-9A-ZA-zΑ-Ωα-ωίϊΐόάέύϋΰήώ]/gi,""),e.value=t,console.log(e),console.log(e.value),console.log(t)}},App.config.modules.map=function(e,t,n,o,r){"use strict";var i=t.documentElement.lang,a=[3677385,4120949],s=[3652772,4112808,37e5,4132797],c=new o.format.GeoJSON({defaultDataProjection:"EPSG:4326"}),l={iconType:function(e){var t={Apartment:function(){return"apartment"},"Detached House":function(){return"detached"},Villa:function(){return"villa"},Maisonette:function(){return"villa"}};return t[e]()},iconPath:function(e){var t={"true":function(){return"./images/pins/sale/"},"false":function(){return"./images/pins/rent/"}};return t[e]()},estates:function(e){var t=l.iconPath(e.get("sale"))+l.iconType(e.get("estatetype_en"))+"-48.png";return new o.style.Style({geometry:e.getGeometry(),image:new o.style.Icon({src:t,anchorOrigin:"bottom-left",anchor:[.5,0],scale:1})})},cluster:function(e){var t,n,r=e.get("features").length;return r>1?t=[new o.style.Style({image:new o.style.Circle({radius:20,stroke:new o.style.Stroke({color:[156,39,176,1],width:5}),fill:new o.style.Fill({color:[68,138,255,.8]})}),text:new o.style.Text({text:r.toString(),fill:new o.style.Fill({color:"#FFFFFF"})}),zIndex:101})]:(n=e.get("features")[0],t=[l.estates(n)]),t},poi:function(e){var t,n={},r=e.get("style");return t="el"===i?e.get("name_el"):e.get("name_en"),n[r]||(n=[new o.style.Style({image:new o.style.Icon({src:"../images/maki/renders/"+r+"-24.png",anchorOrigin:"bottom-left",anchor:[.5,.5],scale:1}),text:new o.style.Text({text:t,stroke:new o.style.Stroke({color:[156,39,176,.8],width:1}),offsetY:12})})]),n},filteredEstates:function(e){var t=l.iconPath(e.get("sale"))+l.iconType(e.get("estatetype_en"))+"-48.png";return new o.style.Style({image:new o.style.Icon({src:t,anchorOrigin:"bottom-left",anchor:[.5,0],scale:1})})}},u={bing:function(){return new o.source.BingMaps({key:"Ak2Gq8VUfICsPpuf7LRANXmXt2sHWmSLPhohmVLFtFIEwYjs_5MCyAhAFwRSVpLj",imagerySet:"AerialWithLabels"})},mapBox:function(){return new o.source.XYZ({attributions:[new o.Attribution({html:'<a href="https://www.mapbox.com/about/maps/" target="_blank">&copy; Mapbox &copy; OpenStreetMap</a>'})],url:"https://api.mapbox.com/v4/mapbox.streets/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiZmlydmFpbiIsImEiOiJlOWYyYTM0NThiNWM0YjJjODJjNDE4ODQzNzA2MGQyNiJ9.-NVDO27Hzt-w_nQosUPfLA"})},estates:function(){return new o.source.Vector({format:c,loader:function(){var e=this;this.clear(),$.ajax({url:"http://www.geomerchant.eu/api/listing/all",type:"GET",dataType:"json"}).done(function(t){var n=c.readFeatures(t,{featureProjection:"EPSG:3857"});e.addFeatures(n)}).fail(function(e){toastr.clear(),404===e.status?toastr.error("Sorry, we cannot find any properties!"):503===e.status?toastr.error("Service Unavailable"):toastr.error("Internal Server Error")})}})},cluster:function(){return new o.source.Cluster({distance:40,source:u.estates(),attributions:[new o.Attribution({html:'All maps © <a href="http://www.terracognita.gr/">Terra Cognita</a>'})]})},select:function(){return new o.source.Vector({})},poi:function(){return new o.source.Vector({attributions:[new o.Attribution({html:'POI by <a href="http://www.terracognita.gr/">Terra Cognita</a>'})],format:c})}},d={bing:function(e){return new o.layer.Tile({visible:!0,source:u.bing(),maxZoom:19,crossOrigin:"anonymous",preload:1/0,id:"bing",name:e.layers.bing})},mapBox:function(e){return new o.layer.Tile({source:u.mapBox(),id:"mapbox",name:e.layers.mapBox})},estates:function(e){return new o.layer.Vector({source:u.cluster(),id:"estates",visible:!0,style:l.cluster,zIndex:2,name:e.layers.estates})},poi:function(e){return new o.layer.Vector({source:u.poi(),style:l.poi,maxResolution:3,zIndex:1,id:"poi"})},filteredEstates:function(e){return new o.layer.Vector({source:new o.source.Vector({format:c}),id:"filteredEstates",visible:!0,style:l.filteredEstates,zIndex:2})},select:function(){return new o.layer.Vector({source:u.select(),style:new o.style.Style({fill:new o.style.Fill({color:"rgba(227, 72, 27, 0.2)"}),stroke:new o.style.Stroke({color:"#E3481B",width:2}),image:new o.style.Circle({radius:7,fill:new o.style.Fill({color:"#E3481B"})})}),zIndex:3,id:"select"})}},p=function(){var e=_.cloneDeep(r.config.commons.trans),t=Object.keys(d).map(function(t){return"bing"!==t?d[t](e):null});return new o.Map({target:"map",layers:_.compact(t),loadTilesWhileAnimating:!0,loadTilesWhileInteracting:!0,renderer:"canvas",controls:o.control.defaults({attributionOptions:{collapsible:!1,collapsed:!1}}).extend([new o.control.ScaleLine({units:"metric"}),new o.control.OverviewMap({className:"ol-overviewmap ol-custom-overviewmap",collapsible:!0,collapsed:!0,layers:[d.bing(e)]}),new o.control.ZoomToExtent({extent:s})]),view:new o.View({center:a,extent:s,projection:"EPSG:3857",zoom:14,maxZoom:19,minZoom:14})})};return{initialize:p}}(window,document,Promise,ol,App),App.config.modules.info=function(e,t,n,o,r){"use strict";function i(e){var t=_.cloneDeep(r.config.commons.trans),i={};e.get("rent")?i.listing_type=t.listing.rent:i.listing_type=t.listing.sale,i.gid=e.get("gid"),"el"===u?(i.type=e.get("estatetype"),i.address=e.get("street_el")+""+e.get("street_number"),i.contact={name:e.getProperties().name_el,lastname:e.getProperties().lastname_el}):(i.type=e.get("estatetype_en"),i.address=e.get("street_en")+""+e.get("street_number"),i.contact={name:e.getProperties().name_en,lastname:e.getProperties().lastname_en}),i.area=e.get("estatearea"),i.bedrooms=e.get("bedrooms"),i.price=e.get("price"),i.titles={gid:t.estate.gid,listing_type:t.listing.type,address:t.estate.address,area:t.estate.area,bedrooms:t.estate.amenities.bedrooms,price:t.listing.price,isnew:t.estate.amenities.isnew,parking:t.estate.amenities.parking,furnished:t.estate.amenities.furnished,pets:t.estate.amenities.pets,view:t.estate.amenities.view,heating:t.estate.amenities.heating,cooling:t.estate.amenities.cooling,contactInfo:t.contact.contactInfo,name:t.contact.name,lastname:t.contact.lastname,phone:t.contact.phone,email:t.contact.email,title:t.estate.amenities.title},i.furnished=e.get("furnished"),i.heating=e.get("heating"),i.cooling=e.get("cooling"),i.isnew=e.get("isnew"),i.view=e.get("view"),i.parking=e.get("parking"),i.title=e.get("title"),i.pets=e.get("pets"),i.btns={info:t.btns.info,close:t.btns.close},null!==e.getProperties().phone2?i.contact.phone=e.getProperties().phone1+" "+e.getProperties().phone2:i.contact.phone=e.getProperties().phone1,i.contact.email=e.getProperties().email,d.renderAsync("modalInfo",i).then(function(e){o("#modal").removeClass("visuallyhidden"),o(".modal-content").html(e)}).then(function(){var t=o.cloudinary.url(e.get("gid").toString(),{format:"json",type:"list"});n.resolve(o.get(t)).then(function(e){o(".big-image").css("background-image","url(http://res.cloudinary.com/firvain/image/upload/v"+e.resources[0].version+"/"+e.resources[0].public_id+"."+e.resources[0].format)})["catch"](function(e){404===e.status&&o(".big-image").css("background-image","url(/images/no_image_available.png)")})})["catch"](function(e){console.log(e.status)}),o("#modal-close").click(function(){o("#modal").addClass("visuallyhidden")})}function a(e){var t=_.cloneDeep(r.config.commons.trans),a={};e.get("rent")?a.listing_type=t.listing.rent:a.listing_type=t.listing.sale,a.gid=e.get("gid"),"el"===u?(a.type=e.get("estatetype"),a.address=e.get("street_el")+""+e.get("street_number")):(a.type=e.get("estatetype_en"),a.address=e.get("street_en")+""+e.get("street_number")),a.area=e.get("estatearea"),a.bedrooms=e.get("bedrooms"),a.price=e.get("price"),a.title={listing_type:t.listing.type,address:t.estate.address,area:t.estate.area,bedrooms:t.estate.amenities.bedrooms,price:t.listing.price,isnew:t.estate.amenities.isnew,furnished:t.estate.amenities.furnished,pets:t.estate.amenities.pets},a.isnew=e.get("isnew"),a.furnished=e.get("furnished"),a.pets=e.get("pets"),a.btns={info:t.btns.info,close:t.btns.close},d.renderAsync("estateCards",a).then(function(e){o(".estate-cards").html(e)}).then(function(){var t=o.cloudinary.url(e.get("gid").toString(),{format:"json",type:"list"});n.resolve(o.get(t)).then(function(e){o(".estate-image").css("background-image","url(http://res.cloudinary.com/firvain/image/upload/v"+e.resources[0].version+"/"+e.resources[0].public_id+"."+e.resources[0].format)})["catch"](function(e){404===e.status&&o(".estate-image").css("background-image","url(/images/no_image_available.png)")})}).then(function(){o(".estate-image").css("background-image","url(http://res.cloudinary.com/firvain/image/upload/h_222,c_scale/"+e.get("gid")+".jpg)"),o(".estate-cards").addClass("estate-cards-active"),o("#estate-card-square-close").click(function(){o(".estate-cards").removeClass("estate-cards-active")}),o("#estate-card-square-extra-info").click(function(){i(e)})})["catch"](function(e){console.log(e),404===e.status&&o(".big-image").css("background-image","url(/images/no_image_available.png)")})}function s(e){var t,r=e.map,i=r.forEachFeatureAtPixel(e.pixel,function(e,t){return{feature:e,layer:t}},this,function(e){return"estates"===e.get("id")||"filteredEstates"===e.get("id")},this);i?"estates"===i.layer.get("id")&&1===i.feature.get("features").length?(t=i.feature.getProperties().features[0],a(t),r.getView().setCenter(t.getGeometry().getCoordinates()),r.getView().setZoom(16),n.resolve(o.ajax({url:"http://www.geomerchant.eu/api/uses/"+t.getProperties().gid,type:"GET",dataType:"json"})).then(function(e){var t;p.findById(r,"poi").getSource().clear(),t=f.readFeatures(e.property_services_analysis,{featureProjection:"EPSG:3857"}),t.forEach(function(e){"Polygon"===e.getGeometry().getType()&&t.splice(t.indexOf(e),1)}),p.findById(r,"poi").getSource().addFeatures(t),toastr.info("Found "+t.length+" Points of Interest in 8 minute distance!")})["catch"](function(e){p.findById(r,"poi").getSource().clear(),404===e.status?toastr.error("Sorry, we cannot find any Points of Interest in 8 minute distance!"):(console.log(e),toastr.error(e.responseText))})):"filteredEstates"===i.layer.get("id")&&(t=i.feature,a(t),n.resolve(o.ajax({url:"http://www.geomerchant.eu/db/uses/"+t.getProperties().gid,type:"GET",dataType:"json"})).then(function(e){var t;0!==p.findById(r,"poi").getSource().getFeatures().length&&p.findById(r,"poi").getSource().clear(),t=f.readFeatures(e.property_services_analysis,{featureProjection:"EPSG:3857"}),t.forEach(function(e){"Polygon"===e.getGeometry().getType()&&t.splice(t.indexOf(e),1)}),p.findById(r,"poi").getSource().addFeatures(t),r.getView().fit(p.findById(r,"poi").getSource().getExtent(),r.getSize()),toastr.info("Found "+t.length+" Points of Interest in 8 minute distance!")})["catch"](function(e){404===e.status?toastr.error("Sorry, we cannot find any Points of Interest in 8 minute distance!"):(console.log(e),toastr.error(e.responseText))})):p.findById(r,"poi").getSource().clear()}function c(){var e=r.config.commons.map;e.on("click",s)}function l(){var e=r.config.commons.map;e.un("click",s)}var u=t.documentElement.lang,d=r.config.promises.dustBluebird,p=r.utils,f=new ol.format.GeoJSON({defaultDataProjection:"EPSG:4326"});return{init:c,disable:l}}(window,document,Promise,jQuery,App),App.config.modules.filters=function(e,t,n,o,r,i,a){"use strict";function s(){var e=t.getElementById("infobox-content"),n=e.querySelectorAll("input[type=text]");[].forEach.call(n,function(e){e.addEventListener("blur",function(){var e,t=this.value;"number"===this.dataset.type?e=t.replace(/[\/\D\/ ]/gi,""):"alphanum"===this.dataset.type?e=t.replace(/[^a-z0-9A-ZA-zΑ-Ωα-ωίϊΐόάέύϋΰήώ ]/gi,""):"special"===this.dataset.type?e=t.replace(/[^0-9 \/]/gi,""):"date"===this.dataset.type&&(e=t.replace(/[^0-9 \-]/gi,"")),this.value=e,h.removeClass(this.parentNode,"is-invalid")})})}function c(e){var t=a.config.commons.map,n=new ol.format.GeoJSON({defaultDataProjection:"EPSG:4326"}),o=n.readFeatures(e,{featureProjection:"EPSG:3857"});o.forEach(function(e){e.setId(e.getProperties().gid)}),h.findById(t,"filteredEstates").getSource().addFeatures(o),"el"===g?toastr.info("Βρέθηκαν "+o.length+" ιδιοκτησίες!"):toastr.info("Found "+o.length+" estates!")}function l(){var e=a.config.commons.map;h.findById(e,"filteredEstates").getSource().clear(),h.findById(e,"select").getSource().clear(),e.getInteractions().forEach(function(e){"draw"===e.getProperties().id&&e.setActive(!1)}),o(e.getViewport()).off("mouseleave"),o(e.getViewport()).off("mouseenter"),b=w,h.findById(e,"estates").setVisible(!0),a.config.modules.info.init(),o("#results").addClass("visuallyhidden").removeAttr("style").empty()}function u(){var e={};return e.estateType=o("#estateType").val(),e.leaseType=void 0!==o("input[name=options]:checked").val()?o("input[name=options]:checked").val():"Rent",e.startPrice=""!==o("#startPrice").val()?o("#startPrice").val():0,e.endPrice=""!==o("#endPrice").val()?o("#endPrice").val():2147483647,e.areaStart=""!==o("#area-start").val()?o("#area-start").val():0,e.areaEnd=""!==o("#area-end").val()?o("#area-end").val():2147483647,e.parking=void 0!==o("#checkbox-1").prop("checked")?o("#checkbox-1").prop("checked"):!1,e.furnished=void 0!==o("#checkbox-2").prop("checked")?o("#checkbox-2").prop("checked"):!1,e.heating=void 0!==o("#checkbox-3").prop("checked")?o("#checkbox-3").prop("checked"):!1,e.cooling=void 0!==o("#checkbox-4").prop("checked")?o("#checkbox-4").prop("checked"):!1,e.view=void 0!==o("#checkbox-5").prop("checked")?o("#checkbox-5").prop("checked"):!1,e.bbox=b,e}function d(e){var r=a.config.commons.map,s=_.cloneDeep(a.config.commons.trans);n.resolve(o.ajax({url:"http://www.geomerchant.eu/api/listing/filters",type:"GET",dataType:"json",data:e})).then(function(e){var t={},n=[];return h.findById(r,"estates").setVisible(!1),h.findById(r,"poi").getSource().clear(),h.findById(r,"filteredEstates").getSource().clear(),c(e),_.forEach(e.features,function(e){var t,o,r,a=ol.proj.transform(e.geometry.coordinates,"EPSG:3857","EPSG:4326");"el"===g?(t=e.properties.street_el+" "+e.properties.street_number,o=i(e.properties.date_start).format("DD-MM-YYYY"),r=i(e.properties.end).format("DD-MM-YYYY")):(t=e.properties.street_en+" "+e.properties.street_number,o=i(e.properties.date_start).format("MM-DD-YYYY"),r=i(e.properties.end).format("MM-DD-YYYY")),n.push({gid:e.properties.gid,price:e.properties.price,area:e.properties.estatearea,address:t,dateStart:o,dateEnd:r,title:{price:s.listing.price,area:s.estate.area,areaUnits:s.estate.areaUnits},coordinates:a})}),t.results=n,t}).then(function(e){m.renderAsync("results",e).then(function(e){var n=t.getElementById("results");h.removeClass(n,"visuallyhidden"),n.innerHTML=e}).then(function(){var e=t.getElementById("contentArea").querySelectorAll("i");e.forEach(function(e){e.addEventListener("click",function(){var t=e.parentNode.parentNode.parentNode.dataset.gid,n=h.findById(r,"filteredEstates").getSource().getFeatureById(t).getGeometry().getCoordinates();r.getView().setCenter(n),r.getView().setZoom(16)})})})}).then(function(){new Clusterize({scrollId:"scrollArea",contentId:"contentArea"})})["catch"](function(e){console.log(e),404===e.status?toastr.error(s.errors.property[404]):503===e.status?toastr.error(s.errors.property[503]):toastr.error(s.errors.internal)})}function p(e){var t=a.config.commons.map;o(t.getViewport()).mouseleave(function(t){t.preventDefault(),t.stopPropagation(),e.setActive(!1)}),o(t.getViewport()).mouseenter(function(t){t.preventDefault(),t.stopPropagation(),e.setActive(!0)}),e.on("drawstart",function(){h.findById(t,"select").getSource().clear()}),e.on("drawend",function(e){var t=e.feature.getGeometry().getExtent(),n=_.chunk(t,2).map(function(e){return ol.proj.transform(e,"EPSG:3857","EPSG:4326")});b=_.concat(n[0],n[1])})}function f(){var e=a.config.commons.map,t=new ol.interaction.Draw({source:h.findById(e,"select").getSource(),type:"LineString",geometryFunction:h.geometryFunction,maxPoints:2});t.setProperties({id:"draw"}),t.setActive(!1),o("#checkbox-6").change(function(){this.checked?(e.addInteraction(t),a.config.modules.info.disable(),p(t)):(a.config.modules.info.init(),e.removeInteraction(t),t.setActive(!1),h.findById(e,"select").getSource().clear(),b=w)}),s(),o("#invokeFilters").click(function(e){var t;e.preventDefault(),e.stopPropagation(),t=u(),o("form[name=filters]").parsley().validate()&&d(t)}),o("#clearFilters").click(function(t){t.preventDefault(),t.stopPropagation(),l(e),o("label[for=option-1]").addClass("is-checked"),o("#option-1").prop("checked",!0),o("label[for=option-2]").removeClass("is-checked"),o("#option-2").prop("checked",!1),o(".mdl-checkbox__input").each(function(e,t){o(t).prop("checked",!1).parent("label").removeClass("is-checked")}),o(".mdl-textfield__input").each(function(e,t){"estateType"!==o(t).attr("id")?o(t).val("").parent().eq(0).removeClass("is-dirty"):(o(t).attr("data-val","Apartment"),"el"===g?o(t).val("Διαμέρισμα"):o("#estateType").val("Apartment"))})})}var g=t.documentElement.lang,m=a.config.promises.dustBluebird,h=a.utils,y=ol.proj.transform([3652772,4112808],"EPSG:3857","EPSG:4326"),v=ol.proj.transform([37e5,4132797],"EPSG:3857","EPSG:4326"),w=_.concat(y,v),b=w;return{init:f}}(window,document,Promise,$,Parsley,moment,App);var userMap=function(e,t,n,o,r){"use strict";function i(){n.resolve(o.ajax({url:"http://www.geomerchant.eu/api/language",type:"GET",data:{type:s,context:a}})).then(function(e){r.config.commons.trans=e,r.config.commons.map=r.config.modules.map.initialize()}).then(function(){r.config.modules.info.init(),r.config.modules.filters.init()})["catch"](function(e){console.log(e)})}var a="map",s=t.documentElement.lang,c=o(".mdl-spinner");return o(t).ajaxStart(function(){o(".spiner-wrapper").removeClass("visuallyhidden"),c.addClass("is-active")}).ajaxStop(function(){o(".spiner-wrapper").addClass("visuallyhidden"),c.removeClass("is-active")}),toastr.options={closeButton:!1,debug:!1,newestOnTop:!1,progressBar:!1,positionClass:"toast-top-center",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},{init:i}}(window,document,Promise,jQuery,App);userMap.init(),$("#advanced-filters").click(function(){$("#estate-filters").toggleClass("visuallyhidden")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkN1c3RvbUV2ZW50LmpzIiwic2Nyb2xsSW50b1ZpZXdJZk5lZWRlZC5qcyIsImdsb2JhbHMuanMiLCJ1dGlscy5qcyIsIm9sMy1tYXAuanMiLCJpbmZvLmpzIiwiZmlsdGVycy5qcyIsImluZGV4LmpzIl0sIm5hbWVzIjpbIkN1c3RvbUV2ZW50IiwiZXZlbnQiLCJwYXJhbXMiLCJidWJibGVzIiwiY2FuY2VsYWJsZSIsImRldGFpbCIsInVuZGVmaW5lZCIsImV2dCIsImRvY3VtZW50IiwiY3JlYXRlRXZlbnQiLCJpbml0Q3VzdG9tRXZlbnQiLCJ3aW5kb3ciLCJwcm90b3R5cGUiLCJFdmVudCIsIkVsZW1lbnQiLCJzY3JvbGxJbnRvVmlld0lmTmVlZGVkIiwiY2VudGVySWZOZWVkZWQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJwYXJlbnQiLCJ0aGlzIiwicGFyZW50Tm9kZSIsInBhcmVudENvbXB1dGVkU3R5bGUiLCJnZXRDb21wdXRlZFN0eWxlIiwicGFyZW50Qm9yZGVyVG9wV2lkdGgiLCJwYXJzZUludCIsImdldFByb3BlcnR5VmFsdWUiLCJwYXJlbnRCb3JkZXJMZWZ0V2lkdGgiLCJvdmVyVG9wIiwib2Zmc2V0VG9wIiwic2Nyb2xsVG9wIiwib3ZlckJvdHRvbSIsImNsaWVudEhlaWdodCIsIm92ZXJMZWZ0Iiwib2Zmc2V0TGVmdCIsInNjcm9sbExlZnQiLCJvdmVyUmlnaHQiLCJjbGllbnRXaWR0aCIsImFsaWduV2l0aFRvcCIsInNjcm9sbEludG9WaWV3IiwiQXBwIiwiY29uZmlnIiwicHJvbWlzZXMiLCJkdXN0Qmx1ZWJpcmQiLCJQcm9taXNlIiwicHJvbWlzaWZ5QWxsIiwiZHVzdCIsImNsb3VkaW5hcnlCaXJkIiwiJCIsImNsb3VkaW5hcnkiLCJjb21tb25zIiwibWFwIiwidHJhbnMiLCJjYWNoZSIsImFjdGl2ZUVzdGF0ZSIsImFjdGl2ZUVzdGF0ZUxpc3RpbmciLCJtb2R1bGVzIiwiaW5mbyIsImVkaXQiLCJkZWxldGUiLCJpbnNlcnQiLCJmaWx0ZXJzIiwidXRpbHMiLCJjbG91ZF9uYW1lIiwiYXBpX2tleSIsImZpbmRCeUlkIiwiaWQiLCJsYXllcnMiLCJnZXRMYXllcnMiLCJnZXRMZW5ndGgiLCJpIiwiaXRlbSIsImdldCIsImZpbmRCeU5hbWUiLCJuYW1lIiwicHJldmVudERvdEFuZFNwYWNlIiwiZSIsImtleSIsImNoYXJDb2RlIiwia2V5Q29kZSIsImlubmVySFRNTCIsImdlb21ldHJ5RnVuY3Rpb24iLCJjb29yZGluYXRlcyIsImdlb21ldHJ5Iiwic3RhcnQiLCJlbmQiLCJnZW9tIiwib2wiLCJQb2x5Z29uIiwic2V0Q29vcmRpbmF0ZXMiLCJoYXNDbGFzcyIsImVsIiwiY2xhc3NOYW1lIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJSZWdFeHAiLCJ0ZXN0IiwicmVtb3ZlQ2xhc3MiLCJlbGVtZW50IiwicmVtb3ZlIiwicmVwbGFjZSIsInNwbGl0Iiwiam9pbiIsImFkZENsYXNzIiwiYWRkIiwidG9nZ2xlQ2xhc3MiLCJjbGFzc2VzIiwiZXhpc3RpbmdJbmRleCIsInRvZ2dsZSIsImluZGV4T2YiLCJzcGxpY2UiLCJwdXNoIiwicmVxdWVzdEZ1bGxTY3JlZW4iLCJ3c2NyaXB0IiwicmVxdWVzdE1ldGhvZCIsIndlYmtpdFJlcXVlc3RGdWxsU2NyZWVuIiwibW96UmVxdWVzdEZ1bGxTY3JlZW4iLCJtc1JlcXVlc3RGdWxsU2NyZWVuIiwiY2FsbCIsIkFjdGl2ZVhPYmplY3QiLCJTZW5kS2V5cyIsImV4aXRGdWxsc3JlZW4iLCJleGl0RnVsbFNjcmVlbiIsIndlYmtpdEV4aXRGdWxsc2NyZWVuIiwibW96Q2FuY2VsRnVsbFNjcmVlbiIsIm1zRXhpdEZ1bGxzY3JlZW4iLCJlbFRvRW4iLCJzdHJpbmciLCJuZXdTdHJpbmciLCJvcmlnaW5hbFN0cmluZyIsIkFycmF5IiwicmVwbGFjZV9uIiwiaGFuZGxlRGF0ZSIsInN0ciIsImxhbmciLCJuZXdEYXRlIiwiXyIsInNhbml0aXplIiwic2FuaXRpemVkU3RyIiwidmFsdWUiLCJjb25zb2xlIiwibG9nIiwiZG9jdW1lbnRFbGVtZW50IiwiY2VudGVyIiwiZXh0ZW50IiwiZ2VvSlNPTkZvcm1hdCIsImZvcm1hdCIsIkdlb0pTT04iLCJkZWZhdWx0RGF0YVByb2plY3Rpb24iLCJtYXBTdHlsZXMiLCJpY29uVHlwZSIsImVzdGF0ZVR5cGUiLCJ0eXBlIiwiQXBhcnRtZW50IiwiRGV0YWNoZWQgSG91c2UiLCJWaWxsYSIsIk1haXNvbmV0dGUiLCJpY29uUGF0aCIsImxpc3RpbmdUeXBlIiwicGF0aCIsInRydWUiLCJmYWxzZSIsImVzdGF0ZXMiLCJmZWF0dXJlIiwic3JjIiwic3R5bGUiLCJTdHlsZSIsImdldEdlb21ldHJ5IiwiaW1hZ2UiLCJJY29uIiwiYW5jaG9yT3JpZ2luIiwiYW5jaG9yIiwic2NhbGUiLCJjbHVzdGVyIiwib3JpZ2luYWxGZWF0dXJlIiwic2l6ZSIsIkNpcmNsZSIsInJhZGl1cyIsInN0cm9rZSIsIlN0cm9rZSIsImNvbG9yIiwid2lkdGgiLCJmaWxsIiwiRmlsbCIsInRleHQiLCJUZXh0IiwidG9TdHJpbmciLCJ6SW5kZXgiLCJwb2kiLCJzdHlsZUNhY2hlIiwic3ltYm9sIiwib2Zmc2V0WSIsImZpbHRlcmVkRXN0YXRlcyIsIm1hcFNvdXJjZXMiLCJiaW5nIiwic291cmNlIiwiQmluZ01hcHMiLCJpbWFnZXJ5U2V0IiwibWFwQm94IiwiWFlaIiwiYXR0cmlidXRpb25zIiwiQXR0cmlidXRpb24iLCJodG1sIiwidXJsIiwiVmVjdG9yIiwibG9hZGVyIiwic2VsZiIsImNsZWFyIiwiYWpheCIsImRhdGFUeXBlIiwiZG9uZSIsInJlc3BvbnNlIiwiZmVhdHVyZXMiLCJyZWFkRmVhdHVyZXMiLCJmZWF0dXJlUHJvamVjdGlvbiIsImFkZEZlYXR1cmVzIiwiZmFpbCIsImpxWEhSIiwidG9hc3RyIiwic3RhdHVzIiwiZXJyb3IiLCJDbHVzdGVyIiwiZGlzdGFuY2UiLCJzZWxlY3QiLCJtYXBMYXllcnMiLCJsYXllciIsIlRpbGUiLCJ2aXNpYmxlIiwibWF4Wm9vbSIsImNyb3NzT3JpZ2luIiwicHJlbG9hZCIsIkluZmluaXR5IiwibWF4UmVzb2x1dGlvbiIsImluaXRpYWxpemUiLCJjbG9uZURlZXAiLCJPYmplY3QiLCJrZXlzIiwiTWFwIiwidGFyZ2V0IiwiY29tcGFjdCIsImxvYWRUaWxlc1doaWxlQW5pbWF0aW5nIiwibG9hZFRpbGVzV2hpbGVJbnRlcmFjdGluZyIsInJlbmRlcmVyIiwiY29udHJvbHMiLCJjb250cm9sIiwiZGVmYXVsdHMiLCJhdHRyaWJ1dGlvbk9wdGlvbnMiLCJjb2xsYXBzaWJsZSIsImNvbGxhcHNlZCIsImV4dGVuZCIsIlNjYWxlTGluZSIsInVuaXRzIiwiT3ZlcnZpZXdNYXAiLCJab29tVG9FeHRlbnQiLCJ2aWV3IiwiVmlldyIsInByb2plY3Rpb24iLCJ6b29tIiwibWluWm9vbSIsImV4dHJhSW5mb01vZGFsIiwib2JqIiwibGlzdGluZ190eXBlIiwibGlzdGluZyIsInJlbnQiLCJzYWxlIiwiZ2lkIiwiYWRkcmVzcyIsImNvbnRhY3QiLCJnZXRQcm9wZXJ0aWVzIiwibmFtZV9lbCIsImxhc3RuYW1lIiwibGFzdG5hbWVfZWwiLCJuYW1lX2VuIiwibGFzdG5hbWVfZW4iLCJhcmVhIiwiYmVkcm9vbXMiLCJwcmljZSIsInRpdGxlcyIsImVzdGF0ZSIsImFtZW5pdGllcyIsImlzbmV3IiwicGFya2luZyIsImZ1cm5pc2hlZCIsInBldHMiLCJoZWF0aW5nIiwiY29vbGluZyIsImNvbnRhY3RJbmZvIiwicGhvbmUiLCJlbWFpbCIsInRpdGxlIiwiYnRucyIsImNsb3NlIiwicGhvbmUyIiwicGhvbmUxIiwicmVuZGVyQXN5bmMiLCJ0aGVuIiwiZGF0YSIsInJlc29sdmUiLCJjc3MiLCJyZXNvdXJjZXMiLCJ2ZXJzaW9uIiwicHVibGljX2lkIiwiY2xpY2siLCJyZW5kZXJFc3RhdGVDYXJkcyIsInNlbGVjdEZlYXR1cmUiLCJmIiwiY2xpY2tlZEZlYXR1cmUiLCJmb3JFYWNoRmVhdHVyZUF0UGl4ZWwiLCJwaXhlbCIsImdldFZpZXciLCJzZXRDZW50ZXIiLCJnZXRDb29yZGluYXRlcyIsInNldFpvb20iLCJnZXRTb3VyY2UiLCJwcm9wZXJ0eV9zZXJ2aWNlc19hbmFseXNpcyIsImZvckVhY2giLCJnZXRUeXBlIiwicmVzcG9uc2VUZXh0IiwiZ2V0RmVhdHVyZXMiLCJmaXQiLCJnZXRFeHRlbnQiLCJnZXRTaXplIiwiaW5pdCIsIm9uIiwiZGlzYWJsZSIsInVuIiwialF1ZXJ5IiwiUGFyc2xleSIsIm1vbWVudCIsImFzc2lnblZhbGlkYXRvcnMiLCJjb250ZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJpbnB1dHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYWRkRXZlbnRMaXN0ZW5lciIsImRhdGFzZXQiLCJhZGRSZXN1bHRzIiwic2V0SWQiLCJjbGVhclJlc3VsdHMiLCJnZXRJbnRlcmFjdGlvbnMiLCJzZXRBY3RpdmUiLCJnZXRWaWV3cG9ydCIsIm9mZiIsImJib3giLCJzZXRWaXNpYmxlIiwicmVtb3ZlQXR0ciIsImVtcHR5Iiwic2V0T3B0aW9ucyIsImZpbHRlckRhdGEiLCJ2YWwiLCJsZWFzZVR5cGUiLCJzdGFydFByaWNlIiwiZW5kUHJpY2UiLCJhcmVhU3RhcnQiLCJhcmVhRW5kIiwicHJvcCIsImdldFJlc3VsdHMiLCJvcHRpb25zIiwicmVuZGVyRGF0YSIsInJlc3VsdHMiLCJkYXRlU3RhcnQiLCJkYXRlRW5kIiwicHJvaiIsInRyYW5zZm9ybSIsInByb3BlcnRpZXMiLCJzdHJlZXRfZWwiLCJzdHJlZXRfbnVtYmVyIiwiZGF0ZV9zdGFydCIsInN0cmVldF9lbiIsImVzdGF0ZWFyZWEiLCJhcmVhVW5pdHMiLCJyZXN1bHQiLCJ6b29tcyIsImdldEZlYXR1cmVCeUlkIiwiQ2x1c3Rlcml6ZSIsInNjcm9sbElkIiwiY29udGVudElkIiwiZXJyb3JzIiwicHJvcGVydHkiLCJpbnRlcm5hbCIsImNob29zZUJ5QXJlYSIsImRyYXciLCJtb3VzZWxlYXZlIiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJtb3VzZWVudGVyIiwidHJhbnNmb3JtZWRDb29yZGluYXRlcyIsImNodW5rIiwiY3VycmVudFZhbHVlIiwiY29uY2F0IiwiZHJhd0ludGVyYWN0aW9uIiwiaW50ZXJhY3Rpb24iLCJEcmF3IiwibWF4UG9pbnRzIiwic2V0UHJvcGVydGllcyIsImNoYW5nZSIsImNoZWNrZWQiLCJhZGRJbnRlcmFjdGlvbiIsInJlbW92ZUludGVyYWN0aW9uIiwicGFyc2xleSIsInZhbGlkYXRlIiwiZWFjaCIsImluZGV4IiwiYXR0ciIsImVxIiwieHkxIiwieHkyIiwidXNlck1hcCIsImNvbnRleHQiLCIkbG9hZGluZyIsImFqYXhTdGFydCIsImFqYXhTdG9wIiwiY2xvc2VCdXR0b24iLCJkZWJ1ZyIsIm5ld2VzdE9uVG9wIiwicHJvZ3Jlc3NCYXIiLCJwb3NpdGlvbkNsYXNzIiwicHJldmVudER1cGxpY2F0ZXMiLCJvbmNsaWNrIiwic2hvd0R1cmF0aW9uIiwiaGlkZUR1cmF0aW9uIiwidGltZU91dCIsImV4dGVuZGVkVGltZU91dCIsInNob3dFYXNpbmciLCJoaWRlRWFzaW5nIiwic2hvd01ldGhvZCIsImhpZGVNZXRob2QiXSwibWFwcGluZ3MiOiJDQUFBLFdBSUEsUUFBQUEsR0FBQUMsRUFBQUMsR0FDQUEsRUFBQUEsSUFBQUMsU0FBQSxFQUFBQyxZQUFBLEVBQUFDLE9BQUFDLE9BQ0EsSUFBQUMsR0FBQUMsU0FBQUMsWUFBQSxjQUVBLE9BREFGLEdBQUFHLGdCQUFBVCxFQUFBQyxFQUFBQyxRQUFBRCxFQUFBRSxXQUFBRixFQUFBRyxRQUNBRSxFQU5BLE1BQUEsa0JBQUFJLFFBQUFYLGFBQUEsR0FTQUEsRUFBQVksVUFBQUQsT0FBQUUsTUFBQUQsZUFFQUQsT0FBQVgsWUFBQUEsT0NiQSxXQUNBYyxRQUFBRixVQUFBRyx5QkFDQUQsUUFBQUYsVUFBQUcsdUJBQUEsU0FBQUMsR0FDQUEsRUFBQSxJQUFBQyxVQUFBQyxRQUFBLElBQUFGLENBRUEsSUFBQUcsR0FBQUMsS0FBQUMsV0FDQUMsRUFBQVgsT0FBQVksaUJBQUFKLEVBQUEsTUFDQUssRUFBQUMs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LFdBQUEsUUFDQUMsV0FBQSxTQUNBQyxXQUFBLFNBQ0FDLFdBQUEsWUE0QkF4RyxLQUFBQSxJQUVBdlQsT0FBQUgsU0FBQW9DLFFBQUEwUixPQUFBOVIsSUFTQStXLFNBQUFyRixPQUNBbFIsRUFBQSxxQkFBQThQLE1BQUEsV0FDQTlQLEVBQUEsbUJBQUF5RCxZQUFBIiwiZmlsZSI6Im1hcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCkge1xyXG5cclxuICBpZiAoIHR5cGVvZiB3aW5kb3cuQ3VzdG9tRXZlbnQgPT09IFwiZnVuY3Rpb25cIiApIHJldHVybiBmYWxzZTtcclxuXHJcbiAgZnVuY3Rpb24gQ3VzdG9tRXZlbnQgKCBldmVudCwgcGFyYW1zICkge1xyXG4gICAgcGFyYW1zID0gcGFyYW1zIHx8IHsgYnViYmxlczogZmFsc2UsIGNhbmNlbGFibGU6IGZhbHNlLCBkZXRhaWw6IHVuZGVmaW5lZCB9O1xyXG4gICAgdmFyIGV2dCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCAnQ3VzdG9tRXZlbnQnICk7XHJcbiAgICBldnQuaW5pdEN1c3RvbUV2ZW50KCBldmVudCwgcGFyYW1zLmJ1YmJsZXMsIHBhcmFtcy5jYW5jZWxhYmxlLCBwYXJhbXMuZGV0YWlsICk7XHJcbiAgICByZXR1cm4gZXZ0O1xyXG4gICB9XHJcblxyXG4gIEN1c3RvbUV2ZW50LnByb3RvdHlwZSA9IHdpbmRvdy5FdmVudC5wcm90b3R5cGU7XHJcblxyXG4gIHdpbmRvdy5DdXN0b21FdmVudCA9IEN1c3RvbUV2ZW50O1xyXG59KSgpO1xyXG4iLCIgIChmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAoIUVsZW1lbnQucHJvdG90eXBlLnNjcm9sbEludG9WaWV3SWZOZWVkZWQpIHtcclxuICAgICAgRWxlbWVudC5wcm90b3R5cGUuc2Nyb2xsSW50b1ZpZXdJZk5lZWRlZCA9IGZ1bmN0aW9uIChjZW50ZXJJZk5lZWRlZCkge1xyXG4gICAgICAgIGNlbnRlcklmTmVlZGVkID0gYXJndW1lbnRzLmxlbmd0aCA9PT0gMCA/IHRydWUgOiAhIWNlbnRlcklmTmVlZGVkO1xyXG5cclxuICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnROb2RlLFxyXG4gICAgICAgIHBhcmVudENvbXB1dGVkU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShwYXJlbnQsIG51bGwpLFxyXG4gICAgICAgIHBhcmVudEJvcmRlclRvcFdpZHRoID0gcGFyc2VJbnQocGFyZW50Q29tcHV0ZWRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdib3JkZXItdG9wLXdpZHRoJykpLFxyXG4gICAgICAgIHBhcmVudEJvcmRlckxlZnRXaWR0aCA9IHBhcnNlSW50KHBhcmVudENvbXB1dGVkU3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnYm9yZGVyLWxlZnQtd2lkdGgnKSksXHJcbiAgICAgICAgb3ZlclRvcCA9IHRoaXMub2Zmc2V0VG9wIC0gcGFyZW50Lm9mZnNldFRvcCA8IHBhcmVudC5zY3JvbGxUb3AsXHJcbiAgICAgICAgb3ZlckJvdHRvbSA9ICh0aGlzLm9mZnNldFRvcCAtIHBhcmVudC5vZmZzZXRUb3AgKyB0aGlzLmNsaWVudEhlaWdodCAtIHBhcmVudEJvcmRlclRvcFdpZHRoKSA+IChwYXJlbnQuc2Nyb2xsVG9wICsgcGFyZW50LmNsaWVudEhlaWdodCksXHJcbiAgICAgICAgb3ZlckxlZnQgPSB0aGlzLm9mZnNldExlZnQgLSBwYXJlbnQub2Zmc2V0TGVmdCA8IHBhcmVudC5zY3JvbGxMZWZ0LFxyXG4gICAgICAgIG92ZXJSaWdodCA9ICh0aGlzLm9mZnNldExlZnQgLSBwYXJlbnQub2Zmc2V0TGVmdCArIHRoaXMuY2xpZW50V2lkdGggLSBwYXJlbnRCb3JkZXJMZWZ0V2lkdGgpID4gKHBhcmVudC5zY3JvbGxMZWZ0ICsgcGFyZW50LmNsaWVudFdpZHRoKSxcclxuICAgICAgICBhbGlnbldpdGhUb3AgPSBvdmVyVG9wICYmICFvdmVyQm90dG9tO1xyXG5cclxuICAgICAgICBpZiAoKG92ZXJUb3AgfHwgb3ZlckJvdHRvbSkgJiYgY2VudGVySWZOZWVkZWQpIHtcclxuICAgICAgICAgIHBhcmVudC5zY3JvbGxUb3AgPSB0aGlzLm9mZnNldFRvcCAtIHBhcmVudC5vZmZzZXRUb3AgLSBwYXJlbnQuY2xpZW50SGVpZ2h0IC8gMiAtIHBhcmVudEJvcmRlclRvcFdpZHRoICsgdGhpcy5jbGllbnRIZWlnaHQgLyAyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKChvdmVyTGVmdCB8fCBvdmVyUmlnaHQpICYmIGNlbnRlcklmTmVlZGVkKSB7XHJcbiAgICAgICAgICBwYXJlbnQuc2Nyb2xsTGVmdCA9IHRoaXMub2Zmc2V0TGVmdCAtIHBhcmVudC5vZmZzZXRMZWZ0IC0gcGFyZW50LmNsaWVudFdpZHRoIC8gMiAtIHBhcmVudEJvcmRlckxlZnRXaWR0aCArIHRoaXMuY2xpZW50V2lkdGggLyAyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKChvdmVyVG9wIHx8IG92ZXJCb3R0b20gfHwgb3ZlckxlZnQgfHwgb3ZlclJpZ2h0KSAmJiAhY2VudGVySWZOZWVkZWQpIHtcclxuICAgICAgICAgIHRoaXMuc2Nyb2xsSW50b1ZpZXcoYWxpZ25XaXRoVG9wKTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfSkoKTtcclxuIiwid2luZG93LkFwcCB8fCAod2luZG93LkFwcCA9IHt9KTtcclxud2luZG93LkFwcC5jb25maWcgPSB7XHJcbiAgcHJvbWlzZXM6IHtcclxuICAgIGR1c3RCbHVlYmlyZDogUHJvbWlzZS5wcm9taXNpZnlBbGwoZHVzdCksXHJcbiAgICBjbG91ZGluYXJ5QmlyZDogUHJvbWlzZS5wcm9taXNpZnlBbGwoJC5jbG91ZGluYXJ5KVxyXG4gIH0sXHJcbiAgY29tbW9uczoge1xyXG4gICAgbWFwOiB7fSxcclxuICAgIHRyYW5zOiB7fVxyXG4gIH0sXHJcbiAgY2FjaGU6IHtcclxuICAgIGFjdGl2ZUVzdGF0ZToge30sXHJcbiAgICBhY3RpdmVFc3RhdGVMaXN0aW5nOiB7fVxyXG4gIH0sXHJcbiAgbW9kdWxlczoge1xyXG4gICAgbWFwOiB7fSxcclxuICAgIGluZm86IHt9LFxyXG4gICAgZWRpdDoge30sXHJcbiAgICBkZWxldGU6IHt9LFxyXG4gICAgaW5zZXJ0OiB7fSxcclxuICAgIGZpbHRlcnM6IHt9XHJcbiAgfVxyXG59O1xyXG53aW5kb3cuQXBwLnV0aWxzID0ge307XHJcbi8vIHZhciB0cmFucztcclxuLy8gdmFyIGNsb3VkaW5hcnlCaXJkID0gUHJvbWlzZS5wcm9taXNpZnlBbGwoJC5jbG91ZGluYXJ5KTtcclxuLy8gdmFyIGFjdGl2ZUVzdGF0ZTtcclxuLy8gdmFyIGFjdGl2ZUVzdGF0ZUxpc3Rpbmc7XHJcbiQuY2xvdWRpbmFyeS5jb25maWcoeyBjbG91ZF9uYW1lOiAnZmlydmFpbicsIGFwaV9rZXk6ICczNzUxMzg5MzI2ODk1OTEnIH0pO1xyXG4iLCIvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjogW1wiZXJyb3JcIiwgeyBcInByb3BzXCI6IGZhbHNlIH1dKi9cclxuQXBwLnV0aWxzID0ge1xyXG4gIGZpbmRCeUlkOiBmdW5jdGlvbiBmaW5kQnlJZChtYXAsIGlkKSB7XHJcbiAgICB2YXIgbGF5ZXJzID0gbWFwLmdldExheWVycygpO1xyXG4gICAgdmFyIGxlbmd0aCA9IGxheWVycy5nZXRMZW5ndGgoKTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYgKGlkID09PSBsYXllcnMuaXRlbShpKS5nZXQoJ2lkJykpIHtcclxuICAgICAgICByZXR1cm4gbGF5ZXJzLml0ZW0oaSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH0sXHJcbiAgZmluZEJ5TmFtZTogZnVuY3Rpb24gZmluZEJ5TmFtZShtYXAsIG5hbWUpIHtcclxuICAgIHZhciBsYXllcnMgPSBtYXAuZ2V0TGF5ZXJzKCk7XHJcbiAgICB2YXIgbGVuZ3RoID0gbGF5ZXJzLmdldExlbmd0aCgpO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xyXG4gICAgICBpZiAobmFtZSA9PT0gbGF5ZXJzLml0ZW0oaSkuZ2V0KCduYW1lJykpIHtcclxuICAgICAgICByZXR1cm4gbGF5ZXJzLml0ZW0oaSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH0sXHJcbiAgcHJldmVudERvdEFuZFNwYWNlOiBmdW5jdGlvbiBwcmV2ZW50RG90QW5kU3BhY2UoZSkge1xyXG4gICAgdmFyIGtleSA9IGUuY2hhckNvZGUgPyBlLmNoYXJDb2RlIDogZS5rZXlDb2RlO1xyXG4gICAgdGhpcy5pbm5lckhUTUwgPSBrZXk7XHJcbiAgICBpZiAoa2V5ID09PSA0NiB8fCBrZXkgPT09IDMyKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0sXHJcbiAgZ2VvbWV0cnlGdW5jdGlvbjogZnVuY3Rpb24gZ2VvbWV0cnlGdW5jdGlvbihjb29yZGluYXRlcywgZ2VvbWV0cnkpIHtcclxuICAgIHZhciBnZW9tID0gZ2VvbWV0cnk7XHJcbiAgICB2YXIgc3RhcnQ7XHJcbiAgICB2YXIgZW5kO1xyXG4gICAgaWYgKCFnZW9tKSB7XHJcbiAgICAgIGdlb20gPSBuZXcgb2wuZ2VvbS5Qb2x5Z29uKG51bGwpO1xyXG4gICAgfVxyXG4gICAgc3RhcnQgPSBjb29yZGluYXRlc1swXTtcclxuICAgIGVuZCA9IGNvb3JkaW5hdGVzWzFdO1xyXG4gICAgZ2VvbS5zZXRDb29yZGluYXRlcyhbXHJcbiAgICAgIFtzdGFydCwgW3N0YXJ0WzBdLCBlbmRbMV1dLCBlbmQsIFtlbmRbMF0sIHN0YXJ0WzFdXSwgc3RhcnRdXHJcbiAgICBdKTtcclxuICAgIHJldHVybiBnZW9tO1xyXG4gIH0sXHJcbiAgaGFzQ2xhc3M6IGZ1bmN0aW9uIGhhc0NsYXNzKGVsLCBjbGFzc05hbWUpIHtcclxuICAgIGlmIChlbC5jbGFzc0xpc3QpIHtcclxuICAgICAgcmV0dXJuIGVsLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoJyhefCApJyArIGNsYXNzTmFtZSArICcoIHwkKScsICdnaScpLnRlc3QoZWwuY2xhc3NOYW1lKTtcclxuICB9LFxyXG4gIHJlbW92ZUNsYXNzOiBmdW5jdGlvbiByZW1vdmVDbGFzcyhlbCwgY2xhc3NOYW1lKSB7XHJcbiAgICB2YXIgZWxlbWVudCA9IGVsO1xyXG4gICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0KSB7XHJcbiAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSBlbGVtZW50LmNsYXNzTmFtZS5yZXBsYWNlKG5ldyBSZWdFeHAoJyhefFxcXFxiKScgKyBjbGFzc05hbWUuc3BsaXQoJyAnKS5qb2luKCd8JykgKyAnKFxcXFxifCQpJywgJ2dpJyksICcgJyk7XHJcbiAgICB9XHJcbiAgfSxcclxuICBhZGRDbGFzczogZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoZWwsIGNsYXNzTmFtZSkge1xyXG4gICAgdmFyIGVsZW1lbnQgPSBlbDtcclxuICAgIGlmIChlbGVtZW50LmNsYXNzTGlzdCkge1xyXG4gICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGVsZW1lbnQuY2xhc3NOYW1lICs9ICcgJyArIGNsYXNzTmFtZTtcclxuICAgIH1cclxuICB9LFxyXG4gIHRvZ2dsZUNsYXNzOiBmdW5jdGlvbiB0b2dnbGVDbGFzcyhlbCwgY2xhc3NOYW1lKSB7XHJcbiAgICB2YXIgY2xhc3NlcztcclxuICAgIHZhciBleGlzdGluZ0luZGV4O1xyXG4gICAgdmFyIGVsZW1lbnQgPSBlbDtcclxuICAgIGlmIChlbGVtZW50LmNsYXNzTGlzdCkge1xyXG4gICAgICBlbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoY2xhc3NOYW1lKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNsYXNzZXMgPSBlbGVtZW50LmNsYXNzTmFtZS5zcGxpdCgnICcpO1xyXG4gICAgICBleGlzdGluZ0luZGV4ID0gY2xhc3Nlcy5pbmRleE9mKGNsYXNzTmFtZSk7XHJcblxyXG4gICAgICBpZiAoZXhpc3RpbmdJbmRleCA+PSAwKSB7XHJcbiAgICAgICAgY2xhc3Nlcy5zcGxpY2UoZXhpc3RpbmdJbmRleCwgMSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY2xhc3Nlcy5wdXNoKGNsYXNzTmFtZSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSBjbGFzc2VzLmpvaW4oJyAnKTtcclxuICAgIH1cclxuICB9LFxyXG4gIHJlcXVlc3RGdWxsU2NyZWVuOiBmdW5jdGlvbiByZXF1ZXN0RnVsbFNjcmVlbihlbGVtZW50KSB7XHJcbiAgICAvLyBTdXBwb3J0cyBtb3N0IGJyb3dzZXJzIGFuZCB0aGVpciB2ZXJzaW9ucy5cclxuICAgIHZhciByZXF1ZXN0TWV0aG9kID0gZWxlbWVudC5yZXF1ZXN0RnVsbFNjcmVlbiB8fCBlbGVtZW50LndlYmtpdFJlcXVlc3RGdWxsU2NyZWVuIHx8IGVsZW1lbnQubW96UmVxdWVzdEZ1bGxTY3JlZW4gfHwgZWxlbWVudC5tc1JlcXVlc3RGdWxsU2NyZWVuO1xyXG4gICAgdmFyIHdzY3JpcHQ7XHJcbiAgICBpZiAocmVxdWVzdE1ldGhvZCkgeyAvLyBOYXRpdmUgZnVsbCBzY3JlZW4uXHJcbiAgICAgIHJlcXVlc3RNZXRob2QuY2FsbChlbGVtZW50KTtcclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHdpbmRvdy5BY3RpdmVYT2JqZWN0ICE9PSAndW5kZWZpbmVkJykgeyAvLyBPbGRlciBJRS5cclxuICAgICAgd3NjcmlwdCA9IG5ldyBBY3RpdmVYT2JqZWN0KCdXU2NyaXB0LlNoZWxsJyk7XHJcbiAgICAgIGlmICh3c2NyaXB0ICE9PSBudWxsKSB7XHJcbiAgICAgICAgd3NjcmlwdC5TZW5kS2V5cygne0YxMX0nKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgZXhpdEZ1bGxzcmVlbjogZnVuY3Rpb24gZXhpdEZ1bGxzcmVlbihlbGVtZW50KSB7XHJcbiAgICB2YXIgcmVxdWVzdE1ldGhvZCA9IGVsZW1lbnQuZXhpdEZ1bGxTY3JlZW4gfHwgZWxlbWVudC53ZWJraXRFeGl0RnVsbHNjcmVlbiB8fCBlbGVtZW50Lm1vekNhbmNlbEZ1bGxTY3JlZW4gfHwgZWxlbWVudC5tc0V4aXRGdWxsc2NyZWVuO1xyXG4gICAgdmFyIHdzY3JpcHQ7XHJcbiAgICBpZiAocmVxdWVzdE1ldGhvZCkgeyAvLyBOYXRpdmUgZnVsbCBzY3JlZW4uXHJcbiAgICAgIHJlcXVlc3RNZXRob2QuY2FsbChlbGVtZW50KTtcclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHdpbmRvdy5BY3RpdmVYT2JqZWN0ICE9PSAndW5kZWZpbmVkJykgeyAvLyBPbGRlciBJRS5cclxuICAgICAgd3NjcmlwdCA9IG5ldyBBY3RpdmVYT2JqZWN0KCdXU2NyaXB0LlNoZWxsJyk7XHJcbiAgICAgIGlmICh3c2NyaXB0ICE9PSBudWxsKSB7XHJcbiAgICAgICAgd3NjcmlwdC5TZW5kS2V5cygne0VzY30nKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgZWxUb0VuOiBmdW5jdGlvbiBlbFRvRW4oc3RyaW5nKSB7XHJcbiAgICB2YXIgb3JpZ2luYWxTdHJpbmcgPSBzdHJpbmc7XHJcbiAgICB2YXIgbmV3U3RyaW5nO1xyXG4gICAgdmFyIHJlcGxhY2UgPSBuZXcgQXJyYXkoJ86xJywgJ86sJywgJ86GJywgJ86RJywgJ86yJywgJ86SJywgJ86zJywgJ86TJywgJ860JywgJ86UJywgJ861JywgJ86tJywgJ86VJywgJ86IJywgJ862JywgJ86WJywgJ863JywgJ86uJywgJ86XJywgJ864JywgJ86YJywgJ865JywgJ86vJywgJ8+KJywgJ86QJywgJ86ZJywgJ86KJywgJ866JywgJ86aJywgJ867JywgJ86bJywgJ868JywgJ86cJywgJ869JywgJ86dJywgJ86+JywgJ86eJywgJ86/JywgJ8+MJywgJ86fJywgJ86MJywgJ8+AJywgJ86gJywgJ8+BJywgJ86hJywgJ8+DJywgJ8+CJywgJ86jJywgJ8+EJywgJ86kJywgJ8+FJywgJ8+NJywgJ86lJywgJ86OJywgJ8+GJywgJ86mJywgJ8+HJywgJ86nJywgJ8+IJywgJ86oJywgJ8+JJywgJ8+OJywgJ86pJywgJ86PJywgJyAnLCAnXFwnJywgJ1xcJycsICcsJyk7XHJcbiAgICB2YXIgcmVwbGFjZV9uID0gbmV3IEFycmF5KCdhJywgJ2EnLCAnQScsICdBJywgJ3YnLCAnVicsICdnJywgJ0cnLCAnZCcsICdEJywgJ2UnLCAnZScsICdFJywgJ0UnLCAneicsICdaJywgJ2knLCAnaScsICdJJywgJ3RoJywgJ1RoJywgJ2knLCAnaScsICdpJywgJ2knLCAnSScsICdJJywgJ2snLCAnSycsICdsJywgJ0wnLCAnbScsICdNJywgJ24nLCAnTicsICd4JywgJ1gnLCAnbycsICdvJywgJ08nLCAnTycsICdwJywgJ1AnLCAncicsICdSJywgJ3MnLCAncycsICdTJywgJ3QnLCAnVCcsICd1JywgJ3UnLCAnWScsICdZJywgJ2YnLCAnRicsICdjaCcsICdDaCcsICdwcycsICdQcycsICdvJywgJ28nLCAnTycsICdPJywgJyAnLCAnXycsICdfJywgJ18nKTtcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlcGxhY2UubGVuZ3RoOyBpKyspIHtcclxuICAgICAgb3JpZ2luYWxTdHJpbmcgPSBvcmlnaW5hbFN0cmluZy5yZXBsYWNlKG5ldyBSZWdFeHAocmVwbGFjZVtpXSwgJ2cnKSwgcmVwbGFjZV9uW2ldKTtcclxuICAgIH1cclxuICAgIG5ld1N0cmluZyA9IG9yaWdpbmFsU3RyaW5nO1xyXG4gICAgcmV0dXJuIG5ld1N0cmluZztcclxuICB9LFxyXG4gIGhhbmRsZURhdGU6IGZ1bmN0aW9uIGhhbmRsZURhdGUoc3RyLCBsYW5nKSB7XHJcbiAgICB2YXIgc3BsaXQ7XHJcbiAgICB2YXIgbmV3RGF0ZSA9IFtdO1xyXG4gICAgaWYgKHR5cGVvZiBzdHIgPT09ICdzdHJpbmcnICYmIGxhbmcgIT09ICdlbCcpIHtcclxuICAgICAgc3BsaXQgPSBfLnNwbGl0KHN0ciwgJy0nLCAzKTtcclxuICAgICAgbmV3RGF0ZSA9IFtzcGxpdFsxXSwgc3BsaXRbMF0sIHNwbGl0WzJdXTtcclxuICAgICAgcmV0dXJuIF8uam9pbihuZXdEYXRlLCAnLScpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN0cjtcclxuICB9LFxyXG4gIHNhbml0aXplOiBmdW5jdGlvbiBzYW5pdGl6ZShlbCkge1xyXG4gICAgdmFyIHNhbml0aXplZFN0cjtcclxuICAgIHZhciBzdHIgPSBlbC52YWx1ZTtcclxuICAgIHNhbml0aXplZFN0ciA9IHN0ci5yZXBsYWNlKC9bXmEtejAtOUEtWkEtes6RLc6pzrEtz4nOr8+KzpDPjM6szq3Pjc+LzrDOrs+OXS9naSwgJycpO1xyXG4gICAgZWwudmFsdWUgPSBzYW5pdGl6ZWRTdHI7XHJcbiAgICBjb25zb2xlLmxvZyhlbCk7XHJcbiAgICBjb25zb2xlLmxvZyhlbC52YWx1ZSk7XHJcbiAgICBjb25zb2xlLmxvZyhzYW5pdGl6ZWRTdHIpO1xyXG4gIH1cclxuICAvLyB6b29tVG9HaWQ6IGZ1bmN0aW9uIHpvb21Ub0dpZChtYXAsIGdpZCkge1xyXG4gIC8vICAgdmFyIGNvb3JkaW5hdGVzID0gdXRpbHMuZmluZEJ5SWQobWFwLCAnZmlsdGVyZWRFc3RhdGVzJykuZ2V0U291cmNlKCkuZ2V0RmVhdHVyZUJ5SWQoZ2lkKVxyXG4gIC8vICAgLmdldEdlb21ldHJ5KClcclxuICAvLyAgIC5nZXRDb29yZGluYXRlcygpO1xyXG4gIC8vICAgbWFwLmdldFZpZXcoKS5zZXRDZW50ZXIoY29vcmRpbmF0ZXMpO1xyXG4gIC8vIH1cclxufTtcclxuIiwiQXBwLmNvbmZpZy5tb2R1bGVzLm1hcCA9IChmdW5jdGlvbiBvbDNNYXAod2luZG93LCBkb2N1bWVudCwgUHJvbWlzZSwgb2wsIEFwcCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuICB2YXIgbGFuZyA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5sYW5nO1xyXG4gIHZhciBjZW50ZXIgPSBbMzY3NzM4NSwgNDEyMDk0OV07XHJcbiAgdmFyIGV4dGVudCA9IFszNjUyNzcyLCA0MTEyODA4LCAzNzAwMDAwLCA0MTMyNzk3XTtcclxuICB2YXIgZ2VvSlNPTkZvcm1hdCA9IG5ldyBvbC5mb3JtYXQuR2VvSlNPTih7XHJcbiAgICBkZWZhdWx0RGF0YVByb2plY3Rpb246ICdFUFNHOjQzMjYnXHJcbiAgfSk7XHJcblxyXG4gIHZhciBtYXBTdHlsZXMgPSB7XHJcbiAgICBpY29uVHlwZTogZnVuY3Rpb24gaWNvblR5cGUoZXN0YXRlVHlwZSkge1xyXG4gICAgICB2YXIgdHlwZSA9IHtcclxuICAgICAgICBBcGFydG1lbnQ6IGZ1bmN0aW9uIGFwYXJ0bWVudEljb24oKSB7XHJcbiAgICAgICAgICByZXR1cm4gJ2FwYXJ0bWVudCc7XHJcbiAgICAgICAgfSxcclxuICAgICAgICAnRGV0YWNoZWQgSG91c2UnOiBmdW5jdGlvbiBkZXRhY2hlZEhvdWNlSWNvbigpIHtcclxuICAgICAgICAgIHJldHVybiAnZGV0YWNoZWQnO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgVmlsbGE6IGZ1bmN0aW9uIHZpbGxhSWNvbigpIHtcclxuICAgICAgICAgIHJldHVybiAndmlsbGEnO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgTWFpc29uZXR0ZTogZnVuY3Rpb24gbWFpc29uZXR0ZUljb24oKSB7XHJcbiAgICAgICAgICByZXR1cm4gJ3ZpbGxhJztcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiAodHlwZVtlc3RhdGVUeXBlXSkoKTtcclxuICAgIH0sXHJcbiAgICBpY29uUGF0aDogZnVuY3Rpb24gaWNvblBhdGgobGlzdGluZ1R5cGUpIHtcclxuICAgICAgdmFyIHBhdGggPSB7XHJcbiAgICAgICAgdHJ1ZTogZnVuY3Rpb24gc2FsZUljb24oKSB7XHJcbiAgICAgICAgICByZXR1cm4gJy4vaW1hZ2VzL3BpbnMvc2FsZS8nO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZmFsc2U6IGZ1bmN0aW9uIHJlbnRJY29uKCkge1xyXG4gICAgICAgICAgcmV0dXJuICcuL2ltYWdlcy9waW5zL3JlbnQvJztcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiAocGF0aFtsaXN0aW5nVHlwZV0pKCk7XHJcbiAgICB9LFxyXG4gICAgZXN0YXRlczogZnVuY3Rpb24gZXN0YXRlcyhmZWF0dXJlKSB7XHJcbiAgICAgIHZhciBzcmMgPSBtYXBTdHlsZXMuaWNvblBhdGgoZmVhdHVyZS5nZXQoJ3NhbGUnKSkgK1xyXG4gICAgICBtYXBTdHlsZXMuaWNvblR5cGUoZmVhdHVyZS5nZXQoJ2VzdGF0ZXR5cGVfZW4nKSkgKyAnLTQ4LnBuZyc7XHJcbiAgICAgIHJldHVybiBuZXcgb2wuc3R5bGUuU3R5bGUoe1xyXG4gICAgICAgIGdlb21ldHJ5OiBmZWF0dXJlLmdldEdlb21ldHJ5KCksXHJcbiAgICAgICAgaW1hZ2U6IG5ldyBvbC5zdHlsZS5JY29uKCh7XHJcbiAgICAgICAgICBzcmM6IHNyYyxcclxuICAgICAgICAgIGFuY2hvck9yaWdpbjogJ2JvdHRvbS1sZWZ0JyxcclxuICAgICAgICAgIGFuY2hvcjogWzAuNSwgMF0sXHJcbiAgICAgICAgICBzY2FsZTogMVxyXG4gICAgICAgIH0pKVxyXG4gICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBjbHVzdGVyOiBmdW5jdGlvbiBjbHVzdGVyKGZlYXR1cmUpIHtcclxuICAgICAgdmFyIHNpemUgPSBmZWF0dXJlLmdldCgnZmVhdHVyZXMnKS5sZW5ndGg7XHJcbiAgICAgIHZhciBzdHlsZTtcclxuICAgICAgdmFyIG9yaWdpbmFsRmVhdHVyZTtcclxuICAgICAgaWYgKHNpemUgPiAxKSB7XHJcbiAgICAgICAgc3R5bGUgPSBbbmV3IG9sLnN0eWxlLlN0eWxlKHtcclxuICAgICAgICAgIGltYWdlOiBuZXcgb2wuc3R5bGUuQ2lyY2xlKHtcclxuICAgICAgICAgICAgcmFkaXVzOiAyMCxcclxuICAgICAgICAgICAgc3Ryb2tlOiBuZXcgb2wuc3R5bGUuU3Ryb2tlKHtcclxuICAgICAgICAgICAgICBjb2xvcjogWzE1NiwgMzksIDE3NiwgMV0sXHJcbiAgICAgICAgICAgICAgd2lkdGg6IDVcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIGZpbGw6IG5ldyBvbC5zdHlsZS5GaWxsKHtcclxuICAgICAgICAgICAgICBjb2xvcjogWzY4LCAxMzgsIDI1NSwgMC44XVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgICB0ZXh0OiBuZXcgb2wuc3R5bGUuVGV4dCh7XHJcbiAgICAgICAgICAgIHRleHQ6IHNpemUudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgZmlsbDogbmV3IG9sLnN0eWxlLkZpbGwoe1xyXG4gICAgICAgICAgICAgIGNvbG9yOiAnI0ZGRkZGRidcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgekluZGV4OiAxMDFcclxuICAgICAgICB9KV07XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgb3JpZ2luYWxGZWF0dXJlID0gZmVhdHVyZS5nZXQoJ2ZlYXR1cmVzJylbMF07XHJcbiAgICAgICAgc3R5bGUgPSBbbWFwU3R5bGVzLmVzdGF0ZXMob3JpZ2luYWxGZWF0dXJlKV07XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHN0eWxlO1xyXG4gICAgfSxcclxuICAgIHBvaTogZnVuY3Rpb24gcG9pKGZlYXR1cmUpIHtcclxuICAgICAgdmFyIHN0eWxlQ2FjaGUgPSB7fTtcclxuICAgICAgdmFyIHN5bWJvbCA9IGZlYXR1cmUuZ2V0KCdzdHlsZScpO1xyXG4gICAgICB2YXIgdGV4dDtcclxuICAgICAgaWYgKGxhbmcgPT09ICdlbCcpIHtcclxuICAgICAgICB0ZXh0ID0gZmVhdHVyZS5nZXQoJ25hbWVfZWwnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0ZXh0ID0gZmVhdHVyZS5nZXQoJ25hbWVfZW4nKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIXN0eWxlQ2FjaGVbc3ltYm9sXSkge1xyXG4gICAgICAgIHN0eWxlQ2FjaGUgPSBbbmV3IG9sLnN0eWxlLlN0eWxlKHtcclxuICAgICAgICAgIGltYWdlOiBuZXcgb2wuc3R5bGUuSWNvbigoe1xyXG4gICAgICAgICAgICBzcmM6ICcuLi9pbWFnZXMvbWFraS9yZW5kZXJzLycgKyBzeW1ib2wgKyAnLTI0LnBuZycsXHJcbiAgICAgICAgICAgIGFuY2hvck9yaWdpbjogJ2JvdHRvbS1sZWZ0JyxcclxuICAgICAgICAgICAgYW5jaG9yOiBbMC41LCAwLjVdLFxyXG4gICAgICAgICAgICBzY2FsZTogMVxyXG4gICAgICAgICAgfSkpLFxyXG4gICAgICAgICAgdGV4dDogbmV3IG9sLnN0eWxlLlRleHQoe1xyXG4gICAgICAgICAgICB0ZXh0OiB0ZXh0LFxyXG4gICAgICAgICAgICBzdHJva2U6IG5ldyBvbC5zdHlsZS5TdHJva2Uoe1xyXG4gICAgICAgICAgICAgIGNvbG9yOiBbMTU2LCAzOSwgMTc2LCAwLjhdLFxyXG4gICAgICAgICAgICAgIHdpZHRoOiAxXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBvZmZzZXRZOiAxMlxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9KV07XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHN0eWxlQ2FjaGU7XHJcbiAgICB9LFxyXG4gICAgZmlsdGVyZWRFc3RhdGVzOiBmdW5jdGlvbiBmaWx0ZXJlZEVzdGF0ZXMoZmVhdHVyZSkge1xyXG4gICAgICB2YXIgc3JjID0gbWFwU3R5bGVzLmljb25QYXRoKGZlYXR1cmUuZ2V0KCdzYWxlJykpICtcclxuICAgICAgbWFwU3R5bGVzLmljb25UeXBlKGZlYXR1cmUuZ2V0KCdlc3RhdGV0eXBlX2VuJykpICsgJy00OC5wbmcnO1xyXG4gICAgICByZXR1cm4gbmV3IG9sLnN0eWxlLlN0eWxlKHtcclxuICAgICAgICBpbWFnZTogbmV3IG9sLnN0eWxlLkljb24oKHtcclxuICAgICAgICAgIHNyYzogc3JjLFxyXG4gICAgICAgICAgYW5jaG9yT3JpZ2luOiAnYm90dG9tLWxlZnQnLFxyXG4gICAgICAgICAgYW5jaG9yOiBbMC41LCAwXSxcclxuICAgICAgICAgIHNjYWxlOiAxXHJcbiAgICAgICAgfSkpXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG5cclxuICB2YXIgbWFwU291cmNlcyA9IHtcclxuICAgIGJpbmc6IGZ1bmN0aW9uIGJpbmcoKSB7XHJcbiAgICAgIHJldHVybiBuZXcgb2wuc291cmNlLkJpbmdNYXBzKHtcclxuICAgICAgICBrZXk6ICdBazJHcThWVWZJQ3NQcHVmN0xSQU5YbVh0MnNIV21TTFBob2htVkxGdEZJRXdZanNfNU1DeUFoQUZ3UlNWcExqJyxcclxuICAgICAgICBpbWFnZXJ5U2V0OiAnQWVyaWFsV2l0aExhYmVscydcclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgbWFwQm94OiBmdW5jdGlvbiBtYXBCb3goKSB7XHJcbiAgICAgIHJldHVybiBuZXcgb2wuc291cmNlLlhZWih7XHJcbiAgICAgICAgYXR0cmlidXRpb25zOiBbbmV3IG9sLkF0dHJpYnV0aW9uKHtcclxuICAgICAgICAgIGh0bWw6ICc8YSBocmVmPVwiaHR0cHM6Ly93d3cubWFwYm94LmNvbS9hYm91dC9tYXBzL1wiIHRhcmdldD1cIl9ibGFua1wiPiZjb3B5OyBNYXBib3ggJmNvcHk7IE9wZW5TdHJlZXRNYXA8L2E+J1xyXG4gICAgICAgIH0pXSxcclxuICAgICAgICB1cmw6ICdodHRwczovL2FwaS5tYXBib3guY29tL3Y0L21hcGJveC5zdHJlZXRzL3t6fS97eH0ve3l9LnBuZz9hY2Nlc3NfdG9rZW49cGsuZXlKMUlqb2labWx5ZG1GcGJpSXNJbUVpT2lKbE9XWXlZVE0wTlRoaU5XTTBZakpqT0RKak5ERTRPRFF6TnpBMk1HUXlOaUo5Li1OVkRPMjdIenQtd19uUW9zVVBmTEEnXHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIGVzdGF0ZXM6IGZ1bmN0aW9uIGVzdGF0ZXMoKSB7XHJcbiAgICAgIHJldHVybiBuZXcgb2wuc291cmNlLlZlY3Rvcih7XHJcbiAgICAgICAgZm9ybWF0OiBnZW9KU09ORm9ybWF0LFxyXG4gICAgICAgIGxvYWRlcjogZnVuY3Rpb24gZmVhdHJlTG9hZGVyKCkge1xyXG4gICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgdGhpcy5jbGVhcigpO1xyXG4gICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiAnaHR0cDovLzEyNy4wLjAuMTozMDAwL2FwaS9saXN0aW5nL2FsbCcsXHJcbiAgICAgICAgICAgIHR5cGU6ICdHRVQnLFxyXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZG9uZShmdW5jdGlvbiBzdWNjZWRlZChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgIHZhciBmZWF0dXJlcyA9IGdlb0pTT05Gb3JtYXQucmVhZEZlYXR1cmVzKHJlc3BvbnNlLCB7XHJcbiAgICAgICAgICAgICAgICBmZWF0dXJlUHJvamVjdGlvbjogJ0VQU0c6Mzg1NydcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICBzZWxmLmFkZEZlYXR1cmVzKGZlYXR1cmVzKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmZhaWwoZnVuY3Rpb24gZmFpbGVkKGpxWEhSKSB7XHJcbiAgICAgICAgICAgICAgdG9hc3RyLmNsZWFyKCk7XHJcbiAgICAgICAgICAgICAgaWYgKGpxWEhSLnN0YXR1cyA9PT0gNDA0KSB7XHJcbiAgICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoJ1NvcnJ5LCB3ZSBjYW5ub3QgZmluZCBhbnkgcHJvcGVydGllcyEnKTtcclxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGpxWEhSLnN0YXR1cyA9PT0gNTAzKSB7XHJcbiAgICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoJ1NlcnZpY2UgVW5hdmFpbGFibGUnKTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKCdJbnRlcm5hbCBTZXJ2ZXIgRXJyb3InKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgY2x1c3RlcjogZnVuY3Rpb24gY2x1c3RlcigpIHtcclxuICAgICAgcmV0dXJuIG5ldyBvbC5zb3VyY2UuQ2x1c3Rlcih7XHJcbiAgICAgICAgZGlzdGFuY2U6IDQwLFxyXG4gICAgICAgIHNvdXJjZTogbWFwU291cmNlcy5lc3RhdGVzKCksXHJcbiAgICAgICAgYXR0cmlidXRpb25zOiBbbmV3IG9sLkF0dHJpYnV0aW9uKHtcclxuICAgICAgICAgIGh0bWw6ICdBbGwgbWFwcyDCqSA8YSBocmVmPVwiaHR0cDovL3d3dy50ZXJyYWNvZ25pdGEuZ3IvXCI+VGVycmEgQ29nbml0YTwvYT4nXHJcbiAgICAgICAgfSldXHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIHNlbGVjdDogZnVuY3Rpb24gc2VsZWN0KCkge1xyXG4gICAgICByZXR1cm4gbmV3IG9sLnNvdXJjZS5WZWN0b3Ioe30pO1xyXG4gICAgfSxcclxuICAgIHBvaTogZnVuY3Rpb24gcG9pKCkge1xyXG4gICAgICByZXR1cm4gbmV3IG9sLnNvdXJjZS5WZWN0b3Ioe1xyXG4gICAgICAgIGF0dHJpYnV0aW9uczogW25ldyBvbC5BdHRyaWJ1dGlvbih7XHJcbiAgICAgICAgICBodG1sOiAnUE9JIGJ5IDxhIGhyZWY9XCJodHRwOi8vd3d3LnRlcnJhY29nbml0YS5nci9cIj5UZXJyYSBDb2duaXRhPC9hPidcclxuICAgICAgICB9KV0sXHJcbiAgICAgICAgZm9ybWF0OiBnZW9KU09ORm9ybWF0XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHZhciBtYXBMYXllcnMgPSB7XHJcbiAgICBiaW5nOiBmdW5jdGlvbiBiaW5nKHRyYW5zKSB7XHJcbiAgICAgIHJldHVybiBuZXcgb2wubGF5ZXIuVGlsZSh7XHJcbiAgICAgICAgdmlzaWJsZTogdHJ1ZSxcclxuICAgICAgICBzb3VyY2U6IG1hcFNvdXJjZXMuYmluZygpLFxyXG4gICAgICAgIG1heFpvb206IDE5LFxyXG4gICAgICAgIGNyb3NzT3JpZ2luOiAnYW5vbnltb3VzJyxcclxuICAgICAgICBwcmVsb2FkOiBJbmZpbml0eSxcclxuICAgICAgICBpZDogJ2JpbmcnLFxyXG4gICAgICAgIG5hbWU6IHRyYW5zLmxheWVycy5iaW5nXHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIG1hcEJveDogZnVuY3Rpb24gbWFwQm94KHRyYW5zKSB7XHJcbiAgICAgIHJldHVybiBuZXcgb2wubGF5ZXIuVGlsZSh7XHJcbiAgICAgICAgc291cmNlOiBtYXBTb3VyY2VzLm1hcEJveCgpLFxyXG4gICAgICAgIGlkOiAnbWFwYm94JyxcclxuICAgICAgICBuYW1lOiB0cmFucy5sYXllcnMubWFwQm94XHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIGVzdGF0ZXM6IGZ1bmN0aW9uIGVzdGF0ZXModHJhbnMpIHtcclxuICAgICAgcmV0dXJuIG5ldyBvbC5sYXllci5WZWN0b3Ioe1xyXG4gICAgICAgIHNvdXJjZTogbWFwU291cmNlcy5jbHVzdGVyKCksXHJcbiAgICAgICAgaWQ6ICdlc3RhdGVzJyxcclxuICAgICAgICB2aXNpYmxlOiB0cnVlLFxyXG4gICAgICAgIHN0eWxlOiBtYXBTdHlsZXMuY2x1c3RlcixcclxuICAgICAgICB6SW5kZXg6IDIsXHJcbiAgICAgICAgbmFtZTogdHJhbnMubGF5ZXJzLmVzdGF0ZXNcclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgcG9pOiBmdW5jdGlvbiBwb2kodHJhbnMpIHtcclxuICAgICAgcmV0dXJuIG5ldyBvbC5sYXllci5WZWN0b3Ioe1xyXG4gICAgICAgIHNvdXJjZTogbWFwU291cmNlcy5wb2koKSxcclxuICAgICAgICBzdHlsZTogbWFwU3R5bGVzLnBvaSxcclxuICAgICAgICBtYXhSZXNvbHV0aW9uOiAzLFxyXG4gICAgICAgIHpJbmRleDogMSxcclxuICAgICAgICBpZDogJ3BvaSdcclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgZmlsdGVyZWRFc3RhdGVzOiBmdW5jdGlvbiBmaWx0ZXJlZEVzdGF0ZXModHJhbnMpIHtcclxuICAgICAgcmV0dXJuIG5ldyBvbC5sYXllci5WZWN0b3Ioe1xyXG4gICAgICAgIHNvdXJjZTogbmV3IG9sLnNvdXJjZS5WZWN0b3Ioe1xyXG4gICAgICAgICAgZm9ybWF0OiBnZW9KU09ORm9ybWF0XHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgaWQ6ICdmaWx0ZXJlZEVzdGF0ZXMnLFxyXG4gICAgICAgIHZpc2libGU6IHRydWUsXHJcbiAgICAgICAgc3R5bGU6IG1hcFN0eWxlcy5maWx0ZXJlZEVzdGF0ZXMsXHJcbiAgICAgICAgekluZGV4OiAyXHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIHNlbGVjdDogZnVuY3Rpb24gc2VsZWN0KCkge1xyXG4gICAgICByZXR1cm4gbmV3IG9sLmxheWVyLlZlY3Rvcih7XHJcbiAgICAgICAgc291cmNlOiBtYXBTb3VyY2VzLnNlbGVjdCgpLFxyXG4gICAgICAgIHN0eWxlOiBuZXcgb2wuc3R5bGUuU3R5bGUoe1xyXG4gICAgICAgICAgZmlsbDogbmV3IG9sLnN0eWxlLkZpbGwoe1xyXG4gICAgICAgICAgICBjb2xvcjogJ3JnYmEoMjI3LCA3MiwgMjcsIDAuMiknXHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICAgIHN0cm9rZTogbmV3IG9sLnN0eWxlLlN0cm9rZSh7XHJcbiAgICAgICAgICAgIGNvbG9yOiAnI0UzNDgxQicsXHJcbiAgICAgICAgICAgIHdpZHRoOiAyXHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICAgIGltYWdlOiBuZXcgb2wuc3R5bGUuQ2lyY2xlKHtcclxuICAgICAgICAgICAgcmFkaXVzOiA3LFxyXG4gICAgICAgICAgICBmaWxsOiBuZXcgb2wuc3R5bGUuRmlsbCh7XHJcbiAgICAgICAgICAgICAgY29sb3I6ICcjRTM0ODFCJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9KSxcclxuICAgICAgICB6SW5kZXg6IDMsXHJcbiAgICAgICAgaWQ6ICdzZWxlY3QnXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgdmFyIGluaXRpYWxpemUgPSBmdW5jdGlvbiBpbml0aWFsaXplKCkge1xyXG4gICAgIHZhciB0cmFucyA9IF8uY2xvbmVEZWVwKEFwcC5jb25maWcuY29tbW9ucy50cmFucyk7XHJcbiAgICB2YXIgbGF5ZXJzID0gT2JqZWN0LmtleXMobWFwTGF5ZXJzKS5tYXAoZnVuY3Rpb24gYWRkTWFwTGF5ZXJzKGtleSkge1xyXG4gICAgICBpZiAoa2V5ICE9PSAnYmluZycpIHsgcmV0dXJuIG1hcExheWVyc1trZXldKHRyYW5zKTsgfVxyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIG5ldyBvbC5NYXAoe1xyXG4gICAgICB0YXJnZXQ6ICdtYXAnLFxyXG4gICAgICBsYXllcnM6IF8uY29tcGFjdChsYXllcnMpLFxyXG4gICAgICBsb2FkVGlsZXNXaGlsZUFuaW1hdGluZzogdHJ1ZSxcclxuICAgICAgbG9hZFRpbGVzV2hpbGVJbnRlcmFjdGluZzogdHJ1ZSxcclxuICAgICAgcmVuZGVyZXI6ICdjYW52YXMnLFxyXG4gICAgICBjb250cm9sczogb2wuY29udHJvbC5kZWZhdWx0cyh7XHJcbiAgICAgICAgYXR0cmlidXRpb25PcHRpb25zOiB7XHJcbiAgICAgICAgICBjb2xsYXBzaWJsZTogZmFsc2UsXHJcbiAgICAgICAgICBjb2xsYXBzZWQ6IGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICAgLmV4dGVuZChbXHJcbiAgICAgICAgIG5ldyBvbC5jb250cm9sLlNjYWxlTGluZSh7XHJcbiAgICAgICAgICAgdW5pdHM6ICdtZXRyaWMnXHJcbiAgICAgICAgIH0pLCBuZXcgb2wuY29udHJvbC5PdmVydmlld01hcCh7XHJcbiAgICAgICAgICAgY2xhc3NOYW1lOiAnb2wtb3ZlcnZpZXdtYXAgb2wtY3VzdG9tLW92ZXJ2aWV3bWFwJyxcclxuICAgICAgICAgICBjb2xsYXBzaWJsZTogdHJ1ZSxcclxuICAgICAgICAgICBjb2xsYXBzZWQ6IHRydWUsXHJcbiAgICAgICAgICAgbGF5ZXJzOiBbbWFwTGF5ZXJzLmJpbmcodHJhbnMpXVxyXG4gICAgICAgICB9KSxcclxuICAgICAgICAgbmV3IG9sLmNvbnRyb2wuWm9vbVRvRXh0ZW50KHtcclxuICAgICAgICAgICBleHRlbnQ6IGV4dGVudFxyXG4gICAgICAgICB9KVxyXG4gICAgICAgXSksXHJcbiAgICAgIHZpZXc6IG5ldyBvbC5WaWV3KHtcclxuICAgICAgICBjZW50ZXI6IGNlbnRlcixcclxuICAgICAgICBleHRlbnQ6IGV4dGVudCxcclxuICAgICAgICBwcm9qZWN0aW9uOiAnRVBTRzozODU3JyxcclxuICAgICAgICB6b29tOiAxNCxcclxuICAgICAgICBtYXhab29tOiAxOSxcclxuICAgICAgICBtaW5ab29tOiAxNFxyXG4gICAgICB9KVxyXG4gICAgfSk7XHJcbiAgfTtcclxuICByZXR1cm4ge1xyXG4gICAgaW5pdGlhbGl6ZTogaW5pdGlhbGl6ZVxyXG4gIH07XHJcbn0od2luZG93LCBkb2N1bWVudCwgUHJvbWlzZSwgb2wsIEFwcCkpO1xyXG4iLCJBcHAuY29uZmlnLm1vZHVsZXMuaW5mbyA9IChmdW5jdGlvbiBpbmZvKHdpbmRvdywgZG9jdW1lbnQsIFByb21pc2UsICQsIEFwcCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuICB2YXIgbGFuZyA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5sYW5nO1xyXG4gIHZhciBkdXN0Qmx1ZWJpcmQgPSBBcHAuY29uZmlnLnByb21pc2VzLmR1c3RCbHVlYmlyZDtcclxuICB2YXIgdXRpbHMgPSBBcHAudXRpbHM7XHJcblxyXG4gIHZhciBnZW9KU09ORm9ybWF0ID0gbmV3IG9sLmZvcm1hdC5HZW9KU09OKHtcclxuICAgIGRlZmF1bHREYXRhUHJvamVjdGlvbjogJ0VQU0c6NDMyNidcclxuICB9KTtcclxuICBmdW5jdGlvbiBleHRyYUluZm9Nb2RhbChmZWF0dXJlKSB7XHJcbiAgICB2YXIgdHJhbnMgPSBfLmNsb25lRGVlcChBcHAuY29uZmlnLmNvbW1vbnMudHJhbnMpO1xyXG4gICAgdmFyIG9iaiA9IHt9O1xyXG4gICAgaWYgKGZlYXR1cmUuZ2V0KCdyZW50JykpIHtcclxuICAgICAgb2JqLmxpc3RpbmdfdHlwZSA9IHRyYW5zLmxpc3RpbmcucmVudDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG9iai5saXN0aW5nX3R5cGUgPSB0cmFucy5saXN0aW5nLnNhbGU7XHJcbiAgICB9XHJcbiAgICBvYmouZ2lkID0gZmVhdHVyZS5nZXQoJ2dpZCcpO1xyXG4gICAgaWYgKGxhbmcgPT09ICdlbCcpIHtcclxuICAgICAgb2JqLnR5cGUgPSBmZWF0dXJlLmdldCgnZXN0YXRldHlwZScpO1xyXG4gICAgICBvYmouYWRkcmVzcyA9IGZlYXR1cmUuZ2V0KCdzdHJlZXRfZWwnKSArICcnICsgZmVhdHVyZS5nZXQoJ3N0cmVldF9udW1iZXInKTtcclxuICAgICAgb2JqLmNvbnRhY3QgPSB7XHJcbiAgICAgICAgbmFtZTogZmVhdHVyZS5nZXRQcm9wZXJ0aWVzKCkubmFtZV9lbCxcclxuICAgICAgICBsYXN0bmFtZTogZmVhdHVyZS5nZXRQcm9wZXJ0aWVzKCkubGFzdG5hbWVfZWxcclxuICAgICAgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG9iai50eXBlID0gZmVhdHVyZS5nZXQoJ2VzdGF0ZXR5cGVfZW4nKTtcclxuICAgICAgb2JqLmFkZHJlc3MgPSBmZWF0dXJlLmdldCgnc3RyZWV0X2VuJykgKyAnJyArIGZlYXR1cmUuZ2V0KCdzdHJlZXRfbnVtYmVyJyk7XHJcbiAgICAgIG9iai5jb250YWN0ID0ge1xyXG4gICAgICAgIG5hbWU6IGZlYXR1cmUuZ2V0UHJvcGVydGllcygpLm5hbWVfZW4sXHJcbiAgICAgICAgbGFzdG5hbWU6IGZlYXR1cmUuZ2V0UHJvcGVydGllcygpLmxhc3RuYW1lX2VuXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgICBvYmouYXJlYSA9IGZlYXR1cmUuZ2V0KCdlc3RhdGVhcmVhJyk7XHJcbiAgICBvYmouYmVkcm9vbXMgPSBmZWF0dXJlLmdldCgnYmVkcm9vbXMnKTtcclxuICAgIG9iai5wcmljZSA9IGZlYXR1cmUuZ2V0KCdwcmljZScpO1xyXG4gICAgb2JqLnRpdGxlcyA9IHtcclxuICAgICAgZ2lkOiB0cmFucy5lc3RhdGUuZ2lkLFxyXG4gICAgICBsaXN0aW5nX3R5cGU6IHRyYW5zLmxpc3RpbmcudHlwZSxcclxuICAgICAgYWRkcmVzczogdHJhbnMuZXN0YXRlLmFkZHJlc3MsXHJcbiAgICAgIGFyZWE6IHRyYW5zLmVzdGF0ZS5hcmVhLFxyXG4gICAgICBiZWRyb29tczogdHJhbnMuZXN0YXRlLmFtZW5pdGllcy5iZWRyb29tcyxcclxuICAgICAgcHJpY2U6IHRyYW5zLmxpc3RpbmcucHJpY2UsXHJcbiAgICAgIGlzbmV3OiB0cmFucy5lc3RhdGUuYW1lbml0aWVzLmlzbmV3LFxyXG4gICAgICBwYXJraW5nOiB0cmFucy5lc3RhdGUuYW1lbml0aWVzLnBhcmtpbmcsXHJcbiAgICAgIGZ1cm5pc2hlZDogdHJhbnMuZXN0YXRlLmFtZW5pdGllcy5mdXJuaXNoZWQsXHJcbiAgICAgIHBldHM6IHRyYW5zLmVzdGF0ZS5hbWVuaXRpZXMucGV0cyxcclxuICAgICAgdmlldzogdHJhbnMuZXN0YXRlLmFtZW5pdGllcy52aWV3LFxyXG4gICAgICBoZWF0aW5nOiB0cmFucy5lc3RhdGUuYW1lbml0aWVzLmhlYXRpbmcsXHJcbiAgICAgIGNvb2xpbmc6IHRyYW5zLmVzdGF0ZS5hbWVuaXRpZXMuY29vbGluZyxcclxuICAgICAgY29udGFjdEluZm86IHRyYW5zLmNvbnRhY3QuY29udGFjdEluZm8sXHJcbiAgICAgIG5hbWU6IHRyYW5zLmNvbnRhY3QubmFtZSxcclxuICAgICAgbGFzdG5hbWU6IHRyYW5zLmNvbnRhY3QubGFzdG5hbWUsXHJcbiAgICAgIHBob25lOiB0cmFucy5jb250YWN0LnBob25lLFxyXG4gICAgICBlbWFpbDogdHJhbnMuY29udGFjdC5lbWFpbCxcclxuICAgICAgdGl0bGU6IHRyYW5zLmVzdGF0ZS5hbWVuaXRpZXMudGl0bGVcclxuICAgIH07XHJcbiAgICBvYmouZnVybmlzaGVkID0gZmVhdHVyZS5nZXQoJ2Z1cm5pc2hlZCcpO1xyXG4gICAgb2JqLmhlYXRpbmcgPSBmZWF0dXJlLmdldCgnaGVhdGluZycpO1xyXG4gICAgb2JqLmNvb2xpbmcgPSBmZWF0dXJlLmdldCgnY29vbGluZycpO1xyXG4gICAgb2JqLmlzbmV3ID0gZmVhdHVyZS5nZXQoJ2lzbmV3Jyk7XHJcbiAgICBvYmoudmlldyA9IGZlYXR1cmUuZ2V0KCd2aWV3Jyk7XHJcbiAgICBvYmoucGFya2luZyA9IGZlYXR1cmUuZ2V0KCdwYXJraW5nJyk7XHJcbiAgICBvYmoudGl0bGUgPSBmZWF0dXJlLmdldCgndGl0bGUnKTtcclxuICAgIG9iai5wZXRzID0gZmVhdHVyZS5nZXQoJ3BldHMnKTtcclxuICAgIG9iai5idG5zID0ge1xyXG4gICAgICBpbmZvOiB0cmFucy5idG5zLmluZm8sXHJcbiAgICAgIGNsb3NlOiB0cmFucy5idG5zLmNsb3NlXHJcbiAgICB9O1xyXG4gICAgaWYgKGZlYXR1cmUuZ2V0UHJvcGVydGllcygpLnBob25lMiAhPT0gbnVsbCkge1xyXG4gICAgICBvYmouY29udGFjdC5waG9uZSA9IGZlYXR1cmUuZ2V0UHJvcGVydGllcygpLnBob25lMSArICcgJyArIGZlYXR1cmUuZ2V0UHJvcGVydGllcygpLnBob25lMjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG9iai5jb250YWN0LnBob25lID0gZmVhdHVyZS5nZXRQcm9wZXJ0aWVzKCkucGhvbmUxO1xyXG4gICAgfVxyXG4gICAgb2JqLmNvbnRhY3QuZW1haWwgPSBmZWF0dXJlLmdldFByb3BlcnRpZXMoKS5lbWFpbDtcclxuICAgIGR1c3RCbHVlYmlyZC5yZW5kZXJBc3luYygnbW9kYWxJbmZvJywgb2JqKVxyXG4gICAgLnRoZW4oZnVuY3Rpb24gcmVzb2x2ZShkYXRhKSB7XHJcbiAgICAgICQoJyNtb2RhbCcpLnJlbW92ZUNsYXNzKCd2aXN1YWxseWhpZGRlbicpO1xyXG4gICAgICAkKCcubW9kYWwtY29udGVudCcpLmh0bWwoZGF0YSk7XHJcbiAgICB9KVxyXG4gICAgLnRoZW4oZnVuY3Rpb24gcmVzb2x2ZSgpIHtcclxuICAgICAgdmFyIHVybCA9ICQuY2xvdWRpbmFyeS51cmwoZmVhdHVyZS5nZXQoJ2dpZCcpLnRvU3RyaW5nKCksIHsgZm9ybWF0OiAnanNvbicsIHR5cGU6ICdsaXN0JyB9KTtcclxuICAgICAgUHJvbWlzZS5yZXNvbHZlKFxyXG4gICAgICAgICQuZ2V0KHVybClcclxuICAgICAgKVxyXG4gICAgICAudGhlbihmdW5jdGlvbiByZXNvbHZlQ2xvdWRpbmFyeShkYXRhKSB7XHJcbiAgICAgICAgJCgnLmJpZy1pbWFnZScpLmNzcygnYmFja2dyb3VuZC1pbWFnZScsICd1cmwoaHR0cDovL3Jlcy5jbG91ZGluYXJ5LmNvbS9maXJ2YWluL2ltYWdlL3VwbG9hZC92JyArIGRhdGEucmVzb3VyY2VzWzBdLnZlcnNpb25cclxuICAgICAgICArICcvJyArIGRhdGEucmVzb3VyY2VzWzBdLnB1YmxpY19pZCArICcuJyArIGRhdGEucmVzb3VyY2VzWzBdLmZvcm1hdCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChmdW5jdGlvbiBlcnJvcihlKSB7XHJcbiAgICAgICAgaWYgKGUuc3RhdHVzID09PSA0MDQpIHtcclxuICAgICAgICAgICQoJy5iaWctaW1hZ2UnKS5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnLCAndXJsKC9pbWFnZXMvbm9faW1hZ2VfYXZhaWxhYmxlLnBuZyknKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaChmdW5jdGlvbiBlcnJvcihlKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGUuc3RhdHVzKTtcclxuICAgIH0pO1xyXG4gICAgJCgnI21vZGFsLWNsb3NlJykuY2xpY2soZnVuY3Rpb24gY2xvc2VNb2RhbCgpIHtcclxuICAgICAgJCgnI21vZGFsJykuYWRkQ2xhc3MoJ3Zpc3VhbGx5aGlkZGVuJyk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgZnVuY3Rpb24gcmVuZGVyRXN0YXRlQ2FyZHMoZmVhdHVyZSkge1xyXG4gICAgdmFyIHRyYW5zID0gXy5jbG9uZURlZXAoQXBwLmNvbmZpZy5jb21tb25zLnRyYW5zKTtcclxuICAgIHZhciBvYmogPSB7fTtcclxuICAgIGlmIChmZWF0dXJlLmdldCgncmVudCcpKSB7XHJcbiAgICAgIG9iai5saXN0aW5nX3R5cGUgPSB0cmFucy5saXN0aW5nLnJlbnQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBvYmoubGlzdGluZ190eXBlID0gdHJhbnMubGlzdGluZy5zYWxlO1xyXG4gICAgfVxyXG4gICAgb2JqLmdpZCA9IGZlYXR1cmUuZ2V0KCdnaWQnKTtcclxuICAgIGlmIChsYW5nID09PSAnZWwnKSB7XHJcbiAgICAgIG9iai50eXBlID0gZmVhdHVyZS5nZXQoJ2VzdGF0ZXR5cGUnKTtcclxuICAgICAgb2JqLmFkZHJlc3MgPSBmZWF0dXJlLmdldCgnc3RyZWV0X2VsJykgKyAnJyArIGZlYXR1cmUuZ2V0KCdzdHJlZXRfbnVtYmVyJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBvYmoudHlwZSA9IGZlYXR1cmUuZ2V0KCdlc3RhdGV0eXBlX2VuJyk7XHJcbiAgICAgIG9iai5hZGRyZXNzID0gZmVhdHVyZS5nZXQoJ3N0cmVldF9lbicpICsgJycgKyBmZWF0dXJlLmdldCgnc3RyZWV0X251bWJlcicpO1xyXG4gICAgfVxyXG4gICAgb2JqLmFyZWEgPSBmZWF0dXJlLmdldCgnZXN0YXRlYXJlYScpO1xyXG4gICAgb2JqLmJlZHJvb21zID0gZmVhdHVyZS5nZXQoJ2JlZHJvb21zJyk7XHJcbiAgICBvYmoucHJpY2UgPSBmZWF0dXJlLmdldCgncHJpY2UnKTtcclxuICAgIG9iai50aXRsZSA9IHtcclxuICAgICAgbGlzdGluZ190eXBlOiB0cmFucy5saXN0aW5nLnR5cGUsXHJcbiAgICAgIGFkZHJlc3M6IHRyYW5zLmVzdGF0ZS5hZGRyZXNzLFxyXG4gICAgICBhcmVhOiB0cmFucy5lc3RhdGUuYXJlYSxcclxuICAgICAgYmVkcm9vbXM6IHRyYW5zLmVzdGF0ZS5hbWVuaXRpZXMuYmVkcm9vbXMsXHJcbiAgICAgIHByaWNlOiB0cmFucy5saXN0aW5nLnByaWNlLFxyXG4gICAgICBpc25ldzogdHJhbnMuZXN0YXRlLmFtZW5pdGllcy5pc25ldyxcclxuICAgICAgZnVybmlzaGVkOiB0cmFucy5lc3RhdGUuYW1lbml0aWVzLmZ1cm5pc2hlZCxcclxuICAgICAgcGV0czogdHJhbnMuZXN0YXRlLmFtZW5pdGllcy5wZXRzXHJcbiAgICB9O1xyXG4gICAgb2JqLmlzbmV3ID0gZmVhdHVyZS5nZXQoJ2lzbmV3Jyk7XHJcbiAgICBvYmouZnVybmlzaGVkID0gZmVhdHVyZS5nZXQoJ2Z1cm5pc2hlZCcpO1xyXG4gICAgb2JqLnBldHMgPSBmZWF0dXJlLmdldCgncGV0cycpO1xyXG4gICAgb2JqLmJ0bnMgPSB7XHJcbiAgICAgIGluZm86IHRyYW5zLmJ0bnMuaW5mbyxcclxuICAgICAgY2xvc2U6IHRyYW5zLmJ0bnMuY2xvc2VcclxuICAgIH07XHJcbiAgICBkdXN0Qmx1ZWJpcmQucmVuZGVyQXN5bmMoJ2VzdGF0ZUNhcmRzJywgb2JqKVxyXG4gICAgLnRoZW4oZnVuY3Rpb24gcmVzb2x2ZShkYXRhKSB7XHJcbiAgICAgICQoJy5lc3RhdGUtY2FyZHMnKS5odG1sKGRhdGEpO1xyXG4gICAgfSlcclxuICAgIC50aGVuKGZ1bmN0aW9uIHJlc29sdmUoKSB7XHJcbiAgICAgIHZhciB1cmwgPSAkLmNsb3VkaW5hcnkudXJsKGZlYXR1cmUuZ2V0KCdnaWQnKS50b1N0cmluZygpLCB7IGZvcm1hdDogJ2pzb24nLCB0eXBlOiAnbGlzdCcgfSk7XHJcbiAgICAgIFByb21pc2UucmVzb2x2ZShcclxuICAgICAgICAkLmdldCh1cmwpXHJcbiAgICAgIClcclxuICAgICAgLnRoZW4oZnVuY3Rpb24gcmVzb2x2ZUNsb3VkaW5hcnkoZGF0YSkge1xyXG4gICAgICAgICQoJy5lc3RhdGUtaW1hZ2UnKS5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnLCAndXJsKGh0dHA6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZmlydmFpbi9pbWFnZS91cGxvYWQvdicgKyBkYXRhLnJlc291cmNlc1swXS52ZXJzaW9uXHJcbiAgICAgICAgKyAnLycgKyBkYXRhLnJlc291cmNlc1swXS5wdWJsaWNfaWQgKyAnLicgKyBkYXRhLnJlc291cmNlc1swXS5mb3JtYXQpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZnVuY3Rpb24gZXJyb3IoZSkge1xyXG4gICAgICAgIGlmIChlLnN0YXR1cyA9PT0gNDA0KSB7XHJcbiAgICAgICAgICAkKCcuZXN0YXRlLWltYWdlJykuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgJ3VybCgvaW1hZ2VzL25vX2ltYWdlX2F2YWlsYWJsZS5wbmcpJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0pXHJcbiAgICAudGhlbihmdW5jdGlvbiByZXNvbHZlKCkge1xyXG4gICAgICAkKCcuZXN0YXRlLWltYWdlJykuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgJ3VybChodHRwOi8vcmVzLmNsb3VkaW5hcnkuY29tL2ZpcnZhaW4vaW1hZ2UvdXBsb2FkL2hfMjIyLGNfc2NhbGUvJyArIGZlYXR1cmUuZ2V0KCdnaWQnKSArICcuanBnKScpO1xyXG4gICAgICAkKCcuZXN0YXRlLWNhcmRzJykuYWRkQ2xhc3MoJ2VzdGF0ZS1jYXJkcy1hY3RpdmUnKTtcclxuICAgICAgJCgnI2VzdGF0ZS1jYXJkLXNxdWFyZS1jbG9zZScpLmNsaWNrKGZ1bmN0aW9uIGNsb3NlKCkge1xyXG4gICAgICAgICQoJy5lc3RhdGUtY2FyZHMnKS5yZW1vdmVDbGFzcygnZXN0YXRlLWNhcmRzLWFjdGl2ZScpO1xyXG4gICAgICB9KTtcclxuICAgICAgJCgnI2VzdGF0ZS1jYXJkLXNxdWFyZS1leHRyYS1pbmZvJykuY2xpY2soZnVuY3Rpb24gZXh0cmFJbmZvKCkge1xyXG4gICAgICAgIGV4dHJhSW5mb01vZGFsKGZlYXR1cmUpO1xyXG4gICAgICB9KTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goZnVuY3Rpb24gZXJyb3IoZSkge1xyXG4gICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgaWYgKGUuc3RhdHVzID09PSA0MDQpIHtcclxuICAgICAgICAkKCcuYmlnLWltYWdlJykuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgJ3VybCgvaW1hZ2VzL25vX2ltYWdlX2F2YWlsYWJsZS5wbmcpJyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICBmdW5jdGlvbiBzZWxlY3RGZWF0dXJlKGV2dCkge1xyXG4gICAgdmFyIG1hcCA9IGV2dC5tYXA7XHJcbiAgICAvLyB2YXIgY29vcmRpbmF0ZSA9IGV2dC5jb29yZGluYXRlO1xyXG4gICAgdmFyIGY7XHJcbiAgICB2YXIgY2xpY2tlZEZlYXR1cmUgPSBtYXAuZm9yRWFjaEZlYXR1cmVBdFBpeGVsKGV2dC5waXhlbCwgZnVuY3Rpb24gZmluZEZlYXR1cmUoZmVhdHVyZSwgbGF5ZXIpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBmZWF0dXJlOiBmZWF0dXJlLFxyXG4gICAgICAgIGxheWVyOiBsYXllclxyXG4gICAgICB9O1xyXG4gICAgfSwgdGhpcywgZnVuY3Rpb24gY2xpY2tlZEZlYXR1cmVMYXllckZpbHRlcihsYXllcikge1xyXG4gICAgICBpZiAobGF5ZXIuZ2V0KCdpZCcpID09PSAnZXN0YXRlcycgfHwgbGF5ZXIuZ2V0KCdpZCcpID09PSAnZmlsdGVyZWRFc3RhdGVzJykge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0sIHRoaXMpO1xyXG4gICAgaWYgKGNsaWNrZWRGZWF0dXJlKSB7XHJcbiAgICAgIGlmIChjbGlja2VkRmVhdHVyZS5sYXllci5nZXQoJ2lkJykgPT09ICdlc3RhdGVzJyAmJlxyXG4gICAgICAgIGNsaWNrZWRGZWF0dXJlLmZlYXR1cmUuZ2V0KCdmZWF0dXJlcycpLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgIGYgPSBjbGlja2VkRmVhdHVyZS5mZWF0dXJlLmdldFByb3BlcnRpZXMoKS5mZWF0dXJlc1swXTtcclxuICAgICAgICByZW5kZXJFc3RhdGVDYXJkcyhmKTtcclxuICAgICAgICBtYXAuZ2V0VmlldygpLnNldENlbnRlcihmLmdldEdlb21ldHJ5KCkuZ2V0Q29vcmRpbmF0ZXMoKSk7XHJcbiAgICAgICAgbWFwLmdldFZpZXcoKS5zZXRab29tKDE2KTtcclxuICAgICAgICBQcm9taXNlLnJlc29sdmUoXHJcbiAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICdodHRwOi8vMTI3LjAuMC4xOjMwMDAvYXBpL3VzZXMvJyArIGYuZ2V0UHJvcGVydGllcygpLmdpZCxcclxuICAgICAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKVxyXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIHJlc29sdmUoZGF0YSkge1xyXG4gICAgICAgICAgdmFyIGZlYXR1cmVzO1xyXG4gICAgICAgICAgdXRpbHMuZmluZEJ5SWQobWFwLCAncG9pJykuZ2V0U291cmNlKCkuY2xlYXIoKTtcclxuICAgICAgICAgIGZlYXR1cmVzID0gZ2VvSlNPTkZvcm1hdC5yZWFkRmVhdHVyZXMoZGF0YS5wcm9wZXJ0eV9zZXJ2aWNlc19hbmFseXNpcywge1xyXG4gICAgICAgICAgICBmZWF0dXJlUHJvamVjdGlvbjogJ0VQU0c6Mzg1NydcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbiByZW1vdmVQb2x5Z29uKGZlYXR1cmUpIHtcclxuICAgICAgICAgICAgaWYgKGZlYXR1cmUuZ2V0R2VvbWV0cnkoKS5nZXRUeXBlKCkgPT09ICdQb2x5Z29uJykge1xyXG4gICAgICAgICAgICAgIGZlYXR1cmVzLnNwbGljZShmZWF0dXJlcy5pbmRleE9mKGZlYXR1cmUpLCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICB1dGlscy5maW5kQnlJZChtYXAsICdwb2knKS5nZXRTb3VyY2UoKS5hZGRGZWF0dXJlcyhmZWF0dXJlcyk7XHJcbiAgICAgICAgICAvLyBtYXAuZ2V0VmlldygpLmZpdCh1dGlscy5maW5kQnlJZChtYXAsICdwb2knKS5nZXRTb3VyY2UoKS5nZXRFeHRlbnQoKSwgbWFwLmdldFNpemUoKSk7XHJcblxyXG4gICAgICAgICAgdG9hc3RyLmluZm8oJ0ZvdW5kICcgKyBmZWF0dXJlcy5sZW5ndGggKyAnIFBvaW50cyBvZiBJbnRlcmVzdCBpbiA4IG1pbnV0ZSBkaXN0YW5jZSEnKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChmdW5jdGlvbiBlcnJvcihlKSB7XHJcbiAgICAgICAgICB1dGlscy5maW5kQnlJZChtYXAsICdwb2knKS5nZXRTb3VyY2UoKS5jbGVhcigpO1xyXG4gICAgICAgICAgaWYgKGUuc3RhdHVzID09PSA0MDQpIHtcclxuICAgICAgICAgICAgdG9hc3RyLmVycm9yKCdTb3JyeSwgd2UgY2Fubm90IGZpbmQgYW55IFBvaW50cyBvZiBJbnRlcmVzdCBpbiA4IG1pbnV0ZSBkaXN0YW5jZSEnKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgICAgICB0b2FzdHIuZXJyb3IoZS5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2UgaWYgKGNsaWNrZWRGZWF0dXJlLmxheWVyLmdldCgnaWQnKSA9PT0gJ2ZpbHRlcmVkRXN0YXRlcycpIHtcclxuICAgICAgICBmID0gY2xpY2tlZEZlYXR1cmUuZmVhdHVyZTtcclxuICAgICAgICByZW5kZXJFc3RhdGVDYXJkcyhmKTtcclxuICAgICAgICBQcm9taXNlLnJlc29sdmUoXHJcbiAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICdodHRwOi8vMTI3LjAuMC4xOjMwMDAvZGIvdXNlcy8nICsgZi5nZXRQcm9wZXJ0aWVzKCkuZ2lkLFxyXG4gICAgICAgICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICApXHJcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gcmVzb2x2ZShkYXRhKSB7XHJcbiAgICAgICAgICB2YXIgZmVhdHVyZXM7XHJcbiAgICAgICAgICBpZiAodXRpbHMuZmluZEJ5SWQobWFwLCAncG9pJykuZ2V0U291cmNlKCkuZ2V0RmVhdHVyZXMoKS5sZW5ndGggIT09IDApIHtcclxuICAgICAgICAgICAgdXRpbHMuZmluZEJ5SWQobWFwLCAncG9pJykuZ2V0U291cmNlKCkuY2xlYXIoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGZlYXR1cmVzID0gZ2VvSlNPTkZvcm1hdC5yZWFkRmVhdHVyZXMoZGF0YS5wcm9wZXJ0eV9zZXJ2aWNlc19hbmFseXNpcywge1xyXG4gICAgICAgICAgICBmZWF0dXJlUHJvamVjdGlvbjogJ0VQU0c6Mzg1NydcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbiByZW1vdmVQb2x5Z29uKGZlYXR1cmUpIHtcclxuICAgICAgICAgICAgaWYgKGZlYXR1cmUuZ2V0R2VvbWV0cnkoKS5nZXRUeXBlKCkgPT09ICdQb2x5Z29uJykge1xyXG4gICAgICAgICAgICAgIGZlYXR1cmVzLnNwbGljZShmZWF0dXJlcy5pbmRleE9mKGZlYXR1cmUpLCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICB1dGlscy5maW5kQnlJZChtYXAsICdwb2knKS5nZXRTb3VyY2UoKS5hZGRGZWF0dXJlcyhmZWF0dXJlcyk7XHJcbiAgICAgICAgICBtYXAuZ2V0VmlldygpLmZpdCh1dGlscy5maW5kQnlJZChtYXAsICdwb2knKS5nZXRTb3VyY2UoKS5nZXRFeHRlbnQoKSwgbWFwLmdldFNpemUoKSk7XHJcbiAgICAgICAgICB0b2FzdHIuaW5mbygnRm91bmQgJyArIGZlYXR1cmVzLmxlbmd0aCArICcgUG9pbnRzIG9mIEludGVyZXN0IGluIDggbWludXRlIGRpc3RhbmNlIScpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIGVycm9yKGUpIHtcclxuICAgICAgICAgIGlmIChlLnN0YXR1cyA9PT0gNDA0KSB7XHJcbiAgICAgICAgICAgIHRvYXN0ci5lcnJvcignU29ycnksIHdlIGNhbm5vdCBmaW5kIGFueSBQb2ludHMgb2YgSW50ZXJlc3QgaW4gOCBtaW51dGUgZGlzdGFuY2UhJyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICAgICAgdG9hc3RyLmVycm9yKGUucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdXRpbHMuZmluZEJ5SWQobWFwLCAncG9pJykuZ2V0U291cmNlKCkuY2xlYXIoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgICB2YXIgbWFwID0gQXBwLmNvbmZpZy5jb21tb25zLm1hcDtcclxuICAgIG1hcC5vbignY2xpY2snLCBzZWxlY3RGZWF0dXJlKTtcclxuICB9XHJcbiAgZnVuY3Rpb24gZGlzYWJsZSgpIHtcclxuICAgIHZhciBtYXAgPSBBcHAuY29uZmlnLmNvbW1vbnMubWFwO1xyXG4gICAgbWFwLnVuKCdjbGljaycsIHNlbGVjdEZlYXR1cmUpO1xyXG4gIH1cclxuICByZXR1cm4ge1xyXG4gICAgaW5pdDogaW5pdCxcclxuICAgIGRpc2FibGU6IGRpc2FibGVcclxuICB9O1xyXG59KHdpbmRvdywgZG9jdW1lbnQsIFByb21pc2UsIGpRdWVyeSwgQXBwKSk7XHJcbiIsIkFwcC5jb25maWcubW9kdWxlcy5maWx0ZXJzID0gKGZ1bmN0aW9uIGZpbHRlcnMod2luZG93LCBkb2N1bWVudCwgUHJvbWlzZSwgJCwgUGFyc2xleSwgbW9tZW50LCBBcHApIHtcclxuICAndXNlIHN0cmljdCc7XHJcbiAgdmFyIGxhbmcgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQubGFuZztcclxuICB2YXIgZHVzdEJsdWViaXJkID0gQXBwLmNvbmZpZy5wcm9taXNlcy5kdXN0Qmx1ZWJpcmQ7XHJcbiAgdmFyIHV0aWxzID0gQXBwLnV0aWxzO1xyXG5cclxuICB2YXIgeHkxID0gb2wucHJvai50cmFuc2Zvcm0oWzM2NTI3NzIsIDQxMTI4MDhdLCAnRVBTRzozODU3JywgJ0VQU0c6NDMyNicpO1xyXG4gIHZhciB4eTIgPSBvbC5wcm9qLnRyYW5zZm9ybShbMzcwMDAwMCwgNDEzMjc5N10sICdFUFNHOjM4NTcnLCAnRVBTRzo0MzI2Jyk7XHJcbiAgdmFyIGV4dGVudCA9IF8uY29uY2F0KHh5MSwgeHkyKTtcclxuICB2YXIgYmJveCA9IGV4dGVudDtcclxuICBmdW5jdGlvbiBhc3NpZ25WYWxpZGF0b3JzKCkge1xyXG4gICAgdmFyIGNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5mb2JveC1jb250ZW50Jyk7XHJcbiAgICB2YXIgaW5wdXRzID0gY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPXRleHRdJyk7XHJcbiAgICBbXS5mb3JFYWNoLmNhbGwoaW5wdXRzLCBmdW5jdGlvbiBtYWtlUGFyc2xleUlucHV0cyhlbCkge1xyXG4gICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgZnVuY3Rpb24gc2FuaXRpemUoKSB7XHJcbiAgICAgICAgdmFyIHN0ciA9IHRoaXMudmFsdWU7XHJcbiAgICAgICAgdmFyIHNhbml0aXplZFN0cjtcclxuICAgICAgICBpZiAodGhpcy5kYXRhc2V0LnR5cGUgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICBzYW5pdGl6ZWRTdHIgPSBzdHIucmVwbGFjZSgvWy9cXEQvIF0vZ2ksICcnKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZGF0YXNldC50eXBlID09PSAnYWxwaGFudW0nKSB7XHJcbiAgICAgICAgICBzYW5pdGl6ZWRTdHIgPSBzdHIucmVwbGFjZSgvW15hLXowLTlBLVpBLXrOkS3Oqc6xLc+Jzq/Pis6Qz4zOrM6tz43Pi86wzq7PjiBdL2dpLCAnJyk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmRhdGFzZXQudHlwZSA9PT0gJ3NwZWNpYWwnKSB7XHJcbiAgICAgICAgICBzYW5pdGl6ZWRTdHIgPSBzdHIucmVwbGFjZSgvW14wLTkgXFwvXS9naSwgJycpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5kYXRhc2V0LnR5cGUgPT09ICdkYXRlJykge1xyXG4gICAgICAgICAgc2FuaXRpemVkU3RyID0gc3RyLnJlcGxhY2UoL1teMC05IFxcLV0vZ2ksICcnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IHNhbml0aXplZFN0cjtcclxuICAgICAgICB1dGlscy5yZW1vdmVDbGFzcyh0aGlzLnBhcmVudE5vZGUsICdpcy1pbnZhbGlkJyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIGFkZFJlc3VsdHMoZGF0YSkge1xyXG4gICAgdmFyIG1hcCA9IEFwcC5jb25maWcuY29tbW9ucy5tYXA7XHJcbiAgICB2YXIgZ2VvSlNPTkZvcm1hdCA9IG5ldyBvbC5mb3JtYXQuR2VvSlNPTih7XHJcbiAgICAgIGRlZmF1bHREYXRhUHJvamVjdGlvbjogJ0VQU0c6NDMyNidcclxuICAgIH0pO1xyXG4gICAgdmFyIGZlYXR1cmVzID0gZ2VvSlNPTkZvcm1hdC5yZWFkRmVhdHVyZXMoZGF0YSwge1xyXG4gICAgICBmZWF0dXJlUHJvamVjdGlvbjogJ0VQU0c6Mzg1NydcclxuICAgIH0pO1xyXG4gICAgZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbiBzZXRJZChmKSB7XHJcbiAgICAgIGYuc2V0SWQoZi5nZXRQcm9wZXJ0aWVzKCkuZ2lkKTtcclxuICAgIH0pO1xyXG4gICAgdXRpbHMuZmluZEJ5SWQobWFwLCAnZmlsdGVyZWRFc3RhdGVzJykuZ2V0U291cmNlKCkuYWRkRmVhdHVyZXMoZmVhdHVyZXMpO1xyXG4gICAgaWYgKGxhbmcgPT09ICdlbCcpIHtcclxuICAgICAgdG9hc3RyLmluZm8oJ86Sz4HOrc64zrfOus6xzr0gJyArIGZlYXR1cmVzLmxlbmd0aCArICcgzrnOtM65zr/Ous+EzrfPg86vzrXPgiEnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRvYXN0ci5pbmZvKCdGb3VuZCAnICsgZmVhdHVyZXMubGVuZ3RoICsgJyBlc3RhdGVzIScpO1xyXG4gICAgfVxyXG4gIH1cclxuICBmdW5jdGlvbiBjbGVhclJlc3VsdHMoKSB7XHJcbiAgICB2YXIgbWFwID0gQXBwLmNvbmZpZy5jb21tb25zLm1hcDtcclxuICAgIHV0aWxzLmZpbmRCeUlkKG1hcCwgJ2ZpbHRlcmVkRXN0YXRlcycpLmdldFNvdXJjZSgpLmNsZWFyKCk7XHJcbiAgICB1dGlscy5maW5kQnlJZChtYXAsICdzZWxlY3QnKS5nZXRTb3VyY2UoKS5jbGVhcigpO1xyXG4gICAgbWFwLmdldEludGVyYWN0aW9ucygpLmZvckVhY2goZnVuY3Rpb24gZmluZEludGVyYWN0aW9uQnlJZChpKSB7XHJcbiAgICAgIGlmIChpLmdldFByb3BlcnRpZXMoKS5pZCA9PT0gJ2RyYXcnKSB7XHJcbiAgICAgICAgaS5zZXRBY3RpdmUoZmFsc2UpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgICQobWFwLmdldFZpZXdwb3J0KCkpLm9mZignbW91c2VsZWF2ZScpO1xyXG4gICAgJChtYXAuZ2V0Vmlld3BvcnQoKSkub2ZmKCdtb3VzZWVudGVyJyk7XHJcbiAgICBiYm94ID0gZXh0ZW50O1xyXG4gICAgdXRpbHMuZmluZEJ5SWQobWFwLCAnZXN0YXRlcycpLnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICBBcHAuY29uZmlnLm1vZHVsZXMuaW5mby5pbml0KCk7XHJcbiAgICAkKCcjcmVzdWx0cycpLmFkZENsYXNzKCd2aXN1YWxseWhpZGRlbicpLnJlbW92ZUF0dHIoJ3N0eWxlJylcclxuICAgIC5lbXB0eSgpO1xyXG4gIH1cclxuICBmdW5jdGlvbiBzZXRPcHRpb25zKCkge1xyXG4gICAgdmFyIGZpbHRlckRhdGEgPSB7fTtcclxuICAgIGZpbHRlckRhdGEuZXN0YXRlVHlwZSA9ICQoJyNlc3RhdGVUeXBlJykudmFsKCk7XHJcbiAgICBmaWx0ZXJEYXRhLmxlYXNlVHlwZSA9ICQoJ2lucHV0W25hbWU9b3B0aW9uc106Y2hlY2tlZCcpLnZhbCgpICE9PSB1bmRlZmluZWQgPyAkKCdpbnB1dFtuYW1lPW9wdGlvbnNdOmNoZWNrZWQnKS52YWwoKSA6ICdSZW50JztcclxuICAgIGZpbHRlckRhdGEuc3RhcnRQcmljZSA9ICQoJyNzdGFydFByaWNlJykudmFsKCkgIT09ICcnID8gJCgnI3N0YXJ0UHJpY2UnKS52YWwoKSA6IDA7XHJcbiAgICBmaWx0ZXJEYXRhLmVuZFByaWNlID0gJCgnI2VuZFByaWNlJykudmFsKCkgIT09ICcnID8gJCgnI2VuZFByaWNlJykudmFsKCkgOiAyMTQ3NDgzNjQ3O1xyXG4gICAgZmlsdGVyRGF0YS5hcmVhU3RhcnQgPSAkKCcjYXJlYS1zdGFydCcpLnZhbCgpICE9PSAnJyA/ICQoJyNhcmVhLXN0YXJ0JykudmFsKCkgOiAwO1xyXG4gICAgZmlsdGVyRGF0YS5hcmVhRW5kID0gJCgnI2FyZWEtZW5kJykudmFsKCkgIT09ICcnID8gJCgnI2FyZWEtZW5kJykudmFsKCkgOiAyMTQ3NDgzNjQ3O1xyXG4gICAgZmlsdGVyRGF0YS5wYXJraW5nID0gJCgnI2NoZWNrYm94LTEnKS5wcm9wKCdjaGVja2VkJykgIT09IHVuZGVmaW5lZCA/ICQoJyNjaGVja2JveC0xJykucHJvcCgnY2hlY2tlZCcpIDogZmFsc2U7XHJcbiAgICBmaWx0ZXJEYXRhLmZ1cm5pc2hlZCA9ICQoJyNjaGVja2JveC0yJykucHJvcCgnY2hlY2tlZCcpICE9PSB1bmRlZmluZWQgPyAkKCcjY2hlY2tib3gtMicpLnByb3AoJ2NoZWNrZWQnKSA6IGZhbHNlO1xyXG4gICAgZmlsdGVyRGF0YS5oZWF0aW5nID0gJCgnI2NoZWNrYm94LTMnKS5wcm9wKCdjaGVja2VkJykgIT09IHVuZGVmaW5lZCA/ICQoJyNjaGVja2JveC0zJykucHJvcCgnY2hlY2tlZCcpIDogZmFsc2U7XHJcbiAgICBmaWx0ZXJEYXRhLmNvb2xpbmcgPSAkKCcjY2hlY2tib3gtNCcpLnByb3AoJ2NoZWNrZWQnKSAhPT0gdW5kZWZpbmVkID8gJCgnI2NoZWNrYm94LTQnKS5wcm9wKCdjaGVja2VkJykgOiBmYWxzZTtcclxuICAgIGZpbHRlckRhdGEudmlldyA9ICQoJyNjaGVja2JveC01JykucHJvcCgnY2hlY2tlZCcpICE9PSB1bmRlZmluZWQgPyAkKCcjY2hlY2tib3gtNScpLnByb3AoJ2NoZWNrZWQnKSA6IGZhbHNlO1xyXG4gICAgZmlsdGVyRGF0YS5iYm94ID0gYmJveDtcclxuICAgIHJldHVybiBmaWx0ZXJEYXRhO1xyXG4gIH1cclxuICBmdW5jdGlvbiBnZXRSZXN1bHRzKG9wdGlvbnMpIHtcclxuICAgIHZhciBtYXAgPSBBcHAuY29uZmlnLmNvbW1vbnMubWFwO1xyXG4gICAgdmFyIHRyYW5zID0gXy5jbG9uZURlZXAoQXBwLmNvbmZpZy5jb21tb25zLnRyYW5zKTtcclxuICAgIFByb21pc2UucmVzb2x2ZShcclxuICAgICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6ICdodHRwOi8vMTI3LjAuMC4xOjMwMDAvYXBpL2xpc3RpbmcvZmlsdGVycycsXHJcbiAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICBkYXRhOiBvcHRpb25zXHJcbiAgICAgIH0pXHJcbiAgICApXHJcbiAgICAudGhlbihmdW5jdGlvbiByZXNvbHZlKGRhdGEpIHtcclxuICAgICAgdmFyIHJlbmRlckRhdGEgPSB7fTtcclxuICAgICAgdmFyIHJlc3VsdHMgPSBbXTtcclxuXHJcbiAgICAgIHV0aWxzLmZpbmRCeUlkKG1hcCwgJ2VzdGF0ZXMnKS5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgdXRpbHMuZmluZEJ5SWQobWFwLCAncG9pJykuZ2V0U291cmNlKCkuY2xlYXIoKTtcclxuICAgICAgdXRpbHMuZmluZEJ5SWQobWFwLCAnZmlsdGVyZWRFc3RhdGVzJykuZ2V0U291cmNlKCkuY2xlYXIoKTtcclxuICAgICAgLy8gdXRpbHMuZmluZEJ5SWQobWFwLCAnc2VsZWN0JykuZ2V0U291cmNlKCkuY2xlYXIoKTtcclxuICAgICAgYWRkUmVzdWx0cyhkYXRhKTtcclxuICAgICAgXy5mb3JFYWNoKGRhdGEuZmVhdHVyZXMsIGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIGFkZHJlc3M7XHJcbiAgICAgICAgdmFyIGRhdGVTdGFydDtcclxuICAgICAgICB2YXIgZGF0ZUVuZDtcclxuICAgICAgICB2YXIgY29vcmRpbmF0ZXMgPSBvbC5wcm9qLnRyYW5zZm9ybSh2YWx1ZS5nZW9tZXRyeS5jb29yZGluYXRlcywgJ0VQU0c6Mzg1NycsICdFUFNHOjQzMjYnKTtcclxuICAgICAgICBpZiAobGFuZyA9PT0gJ2VsJykge1xyXG4gICAgICAgICAgYWRkcmVzcyA9IHZhbHVlLnByb3BlcnRpZXMuc3RyZWV0X2VsICsgJyAnICsgdmFsdWUucHJvcGVydGllcy5zdHJlZXRfbnVtYmVyO1xyXG4gICAgICAgICAgZGF0ZVN0YXJ0ID0gbW9tZW50KHZhbHVlLnByb3BlcnRpZXMuZGF0ZV9zdGFydCkuZm9ybWF0KCdERC1NTS1ZWVlZJyk7XHJcbiAgICAgICAgICBkYXRlRW5kID0gbW9tZW50KHZhbHVlLnByb3BlcnRpZXMuZW5kKS5mb3JtYXQoJ0RELU1NLVlZWVknKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgYWRkcmVzcyA9IHZhbHVlLnByb3BlcnRpZXMuc3RyZWV0X2VuICsgJyAnICsgdmFsdWUucHJvcGVydGllcy5zdHJlZXRfbnVtYmVyO1xyXG4gICAgICAgICAgZGF0ZVN0YXJ0ID0gbW9tZW50KHZhbHVlLnByb3BlcnRpZXMuZGF0ZV9zdGFydCkuZm9ybWF0KCdNTS1ERC1ZWVlZJyk7XHJcbiAgICAgICAgICBkYXRlRW5kID0gbW9tZW50KHZhbHVlLnByb3BlcnRpZXMuZW5kKS5mb3JtYXQoJ01NLURELVlZWVknKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmVzdWx0cy5wdXNoKHtcclxuICAgICAgICAgIGdpZDogdmFsdWUucHJvcGVydGllcy5naWQsXHJcbiAgICAgICAgICBwcmljZTogdmFsdWUucHJvcGVydGllcy5wcmljZSxcclxuICAgICAgICAgIGFyZWE6IHZhbHVlLnByb3BlcnRpZXMuZXN0YXRlYXJlYSxcclxuICAgICAgICAgIGFkZHJlc3M6IGFkZHJlc3MsXHJcbiAgICAgICAgICBkYXRlU3RhcnQ6IGRhdGVTdGFydCxcclxuICAgICAgICAgIGRhdGVFbmQ6IGRhdGVFbmQsXHJcbiAgICAgICAgICB0aXRsZToge1xyXG4gICAgICAgICAgICBwcmljZTogdHJhbnMubGlzdGluZy5wcmljZSxcclxuICAgICAgICAgICAgYXJlYTogdHJhbnMuZXN0YXRlLmFyZWEsXHJcbiAgICAgICAgICAgIGFyZWFVbml0czogdHJhbnMuZXN0YXRlLmFyZWFVbml0c1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGNvb3JkaW5hdGVzOiBjb29yZGluYXRlc1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgICAgcmVuZGVyRGF0YS5yZXN1bHRzID0gcmVzdWx0cztcclxuICAgICAgcmV0dXJuIHJlbmRlckRhdGE7XHJcbiAgICB9KVxyXG4gICAgLnRoZW4oZnVuY3Rpb24gcmVzb2x2ZShkYXRhKSB7XHJcbiAgICAgIGR1c3RCbHVlYmlyZC5yZW5kZXJBc3luYygncmVzdWx0cycsIGRhdGEpXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uIHJlc29sdmVEdXN0KHJlc3VsdCkge1xyXG4gICAgICAgIHZhciByZXN1bHRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3VsdHMnKTtcclxuICAgICAgICB1dGlscy5yZW1vdmVDbGFzcyhyZXN1bHRzLCAndmlzdWFsbHloaWRkZW4nKTtcclxuICAgICAgICByZXN1bHRzLmlubmVySFRNTCA9IHJlc3VsdDtcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oZnVuY3Rpb24gcmVzb2x2ZXooKSB7XHJcbiAgICAgICAgdmFyIHpvb21zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRlbnRBcmVhJykucXVlcnlTZWxlY3RvckFsbCgnaScpO1xyXG4gICAgICAgIHpvb21zLmZvckVhY2goZnVuY3Rpb24gYWRkWm9vbVRvUmVzdWx0cyh6b29tKSB7XHJcbiAgICAgICAgICB6b29tLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gem9vbVRvR2lkKCkge1xyXG4gICAgICAgICAgICB2YXIgZ2lkID0gem9vbS5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZS5kYXRhc2V0LmdpZDtcclxuICAgICAgICAgICAgdmFyIGNvb3JkaW5hdGVzID0gdXRpbHMuZmluZEJ5SWQobWFwLCAnZmlsdGVyZWRFc3RhdGVzJykuZ2V0U291cmNlKCkuZ2V0RmVhdHVyZUJ5SWQoZ2lkKVxyXG4gICAgICAgICAgICAuZ2V0R2VvbWV0cnkoKVxyXG4gICAgICAgICAgICAuZ2V0Q29vcmRpbmF0ZXMoKTtcclxuICAgICAgICAgICAgbWFwLmdldFZpZXcoKS5zZXRDZW50ZXIoY29vcmRpbmF0ZXMpO1xyXG4gICAgICAgICAgICBtYXAuZ2V0VmlldygpLnNldFpvb20oMTYpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSlcclxuICAgIC50aGVuKGZ1bmN0aW9uIHJlc29sdmUoKSB7XHJcbiAgICAgIHZhciBjbHVzdGVyaXplID0gbmV3IENsdXN0ZXJpemUoe1xyXG4gICAgICAgIHNjcm9sbElkOiAnc2Nyb2xsQXJlYScsXHJcbiAgICAgICAgY29udGVudElkOiAnY29udGVudEFyZWEnXHJcbiAgICAgIH0pO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaChmdW5jdGlvbiBlcnJvcihlKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICBpZiAoZS5zdGF0dXMgPT09IDQwNCkge1xyXG4gICAgICAgIHRvYXN0ci5lcnJvcih0cmFucy5lcnJvcnMucHJvcGVydHlbNDA0XSk7XHJcbiAgICAgIH0gZWxzZSBpZiAoZS5zdGF0dXMgPT09IDUwMykge1xyXG4gICAgICAgIHRvYXN0ci5lcnJvcih0cmFucy5lcnJvcnMucHJvcGVydHlbNTAzXSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdG9hc3RyLmVycm9yKHRyYW5zLmVycm9ycy5pbnRlcm5hbCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICBmdW5jdGlvbiBjaG9vc2VCeUFyZWEoZHJhdykge1xyXG4gICAgdmFyIG1hcCA9IEFwcC5jb25maWcuY29tbW9ucy5tYXA7XHJcbiAgICAkKG1hcC5nZXRWaWV3cG9ydCgpKS5tb3VzZWxlYXZlKGZ1bmN0aW9uIGxlYXZlTWFwRm9yQXJlYVNlbGVjdGlvbihldmVudCkge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgZHJhdy5zZXRBY3RpdmUoZmFsc2UpO1xyXG4gICAgfSk7XHJcbiAgICAkKG1hcC5nZXRWaWV3cG9ydCgpKS5tb3VzZWVudGVyKGZ1bmN0aW9uIGVudGVyTWFwRm9yQXJlYVNlbGVjdGlvbihldmVudCkge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgZHJhdy5zZXRBY3RpdmUodHJ1ZSk7XHJcbiAgICB9KTtcclxuICAgIGRyYXcub24oJ2RyYXdzdGFydCcsIGZ1bmN0aW9uIGRyYXdzdGFydCgpIHtcclxuICAgICAgdXRpbHMuZmluZEJ5SWQobWFwLCAnc2VsZWN0JykuZ2V0U291cmNlKCkuY2xlYXIoKTtcclxuICAgIH0pO1xyXG4gICAgZHJhdy5vbignZHJhd2VuZCcsIGZ1bmN0aW9uIGRyYXdlbmQoZSkge1xyXG4gICAgICB2YXIgY29vcmRpbmF0ZXMgPSBlLmZlYXR1cmUuZ2V0R2VvbWV0cnkoKS5nZXRFeHRlbnQoKTtcclxuICAgICAgdmFyIHRyYW5zZm9ybWVkQ29vcmRpbmF0ZXMgPSBfLmNodW5rKGNvb3JkaW5hdGVzLCAyKS5tYXAoZnVuY3Rpb24gc3BsaXQoY3VycmVudFZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIG9sLnByb2oudHJhbnNmb3JtKGN1cnJlbnRWYWx1ZSwgJ0VQU0c6Mzg1NycsICdFUFNHOjQzMjYnKTtcclxuICAgICAgfSk7XHJcbiAgICAgIGJib3ggPSBfLmNvbmNhdCh0cmFuc2Zvcm1lZENvb3JkaW5hdGVzWzBdLCB0cmFuc2Zvcm1lZENvb3JkaW5hdGVzWzFdKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBmdW5jdGlvbiBpbml0KCkge1xyXG4gICAgdmFyIG1hcCA9IEFwcC5jb25maWcuY29tbW9ucy5tYXA7XHJcbiAgICB2YXIgZHJhd0ludGVyYWN0aW9uID0gbmV3IG9sLmludGVyYWN0aW9uLkRyYXcoe1xyXG4gICAgICBzb3VyY2U6IHV0aWxzLmZpbmRCeUlkKG1hcCwgJ3NlbGVjdCcpLmdldFNvdXJjZSgpLFxyXG4gICAgICB0eXBlOiAnTGluZVN0cmluZycsXHJcbiAgICAgIGdlb21ldHJ5RnVuY3Rpb246IHV0aWxzLmdlb21ldHJ5RnVuY3Rpb24sXHJcbiAgICAgIG1heFBvaW50czogMlxyXG4gICAgICAvLyBjb25kaXRpb246IGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgIC8vICAgcmV0dXJuIG9sLmV2ZW50cy5jb25kaXRpb24ucGxhdGZvcm1Nb2RpZmllcktleU9ubHkoZXZlbnQpO1xyXG4gICAgICAvLyB9XHJcbiAgICB9KTtcclxuICAgIGRyYXdJbnRlcmFjdGlvbi5zZXRQcm9wZXJ0aWVzKHtcclxuICAgICAgaWQ6ICdkcmF3J1xyXG4gICAgfSk7XHJcbiAgICBkcmF3SW50ZXJhY3Rpb24uc2V0QWN0aXZlKGZhbHNlKTtcclxuICAgICQoJyNjaGVja2JveC02JykuY2hhbmdlKGZ1bmN0aW9uIGVuYWJsZUFyZWFTZWxlY3Rpb24oKSB7XHJcbiAgICAgIGlmICh0aGlzLmNoZWNrZWQpIHtcclxuICAgICAgICBtYXAuYWRkSW50ZXJhY3Rpb24oZHJhd0ludGVyYWN0aW9uKTtcclxuICAgICAgICBBcHAuY29uZmlnLm1vZHVsZXMuaW5mby5kaXNhYmxlKCk7XHJcbiAgICAgICAgY2hvb3NlQnlBcmVhKGRyYXdJbnRlcmFjdGlvbik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgQXBwLmNvbmZpZy5tb2R1bGVzLmluZm8uaW5pdCgpO1xyXG4gICAgICAgIG1hcC5yZW1vdmVJbnRlcmFjdGlvbihkcmF3SW50ZXJhY3Rpb24pO1xyXG4gICAgICAgIGRyYXdJbnRlcmFjdGlvbi5zZXRBY3RpdmUoZmFsc2UpO1xyXG4gICAgICAgIHV0aWxzLmZpbmRCeUlkKG1hcCwgJ3NlbGVjdCcpLmdldFNvdXJjZSgpLmNsZWFyKCk7XHJcbiAgICAgICAgYmJveCA9IGV4dGVudDtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBhc3NpZ25WYWxpZGF0b3JzKCk7XHJcbiAgICAkKCcjaW52b2tlRmlsdGVycycpLmNsaWNrKGZ1bmN0aW9uIGludm9rZUZpbHRlcnMoZXZlbnQpIHtcclxuICAgICAgdmFyIG9wdGlvbnM7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICBvcHRpb25zID0gc2V0T3B0aW9ucygpO1xyXG4gICAgICBpZiAoJCgnZm9ybVtuYW1lPWZpbHRlcnNdJykucGFyc2xleSgpLnZhbGlkYXRlKCkpIHtcclxuICAgICAgICBnZXRSZXN1bHRzKG9wdGlvbnMpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgICQoJyNjbGVhckZpbHRlcnMnKS5jbGljayhmdW5jdGlvbiBjbGVhckZpbHRlcnMoZXZlbnQpIHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgIGNsZWFyUmVzdWx0cyhtYXApO1xyXG4gICAgICAkKCdsYWJlbFtmb3I9b3B0aW9uLTFdJykuYWRkQ2xhc3MoJ2lzLWNoZWNrZWQnKTtcclxuICAgICAgJCgnI29wdGlvbi0xJykucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xyXG4gICAgICAkKCdsYWJlbFtmb3I9b3B0aW9uLTJdJykucmVtb3ZlQ2xhc3MoJ2lzLWNoZWNrZWQnKTtcclxuICAgICAgJCgnI29wdGlvbi0yJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcclxuICAgICAgJCgnLm1kbC1jaGVja2JveF9faW5wdXQnKS5lYWNoKGZ1bmN0aW9uIGNsZWFyQ2hlY2tib3hlcyhpbmRleCwgZWwpIHtcclxuICAgICAgICAkKGVsKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpLnBhcmVudCgnbGFiZWwnKVxyXG4gICAgICAgIC5yZW1vdmVDbGFzcygnaXMtY2hlY2tlZCcpO1xyXG4gICAgICB9KTtcclxuICAgICAgJCgnLm1kbC10ZXh0ZmllbGRfX2lucHV0JykuZWFjaChmdW5jdGlvbiBjbGVhcklucHV0cyhpbmRleCwgZWwpIHtcclxuICAgICAgICBpZiAoJChlbCkuYXR0cignaWQnKSAhPT0gJ2VzdGF0ZVR5cGUnKSB7XHJcbiAgICAgICAgICAkKGVsKS52YWwoJycpLnBhcmVudCgpXHJcbiAgICAgICAgICAuZXEoMClcclxuICAgICAgICAgIC5yZW1vdmVDbGFzcygnaXMtZGlydHknKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgJChlbCkuYXR0cignZGF0YS12YWwnLCAnQXBhcnRtZW50Jyk7XHJcbiAgICAgICAgICBpZiAobGFuZyA9PT0gJ2VsJykge1xyXG4gICAgICAgICAgICAkKGVsKS52YWwoJ86UzrnOsc68zq3Pgc65z4POvM6xJyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKCcjZXN0YXRlVHlwZScpLnZhbCgnQXBhcnRtZW50Jyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuICByZXR1cm4ge1xyXG4gICAgaW5pdDogaW5pdFxyXG4gIH07XHJcbn0od2luZG93LCBkb2N1bWVudCwgUHJvbWlzZSwgJCwgUGFyc2xleSwgbW9tZW50LCBBcHApKTtcclxuIiwidmFyIHVzZXJNYXAgPSAoZnVuY3Rpb24gdXNlck1hcCh3aW5kb3csIGRvY3VtZW50LCBQcm9taXNlLCAkLCBBcHApIHtcclxuICAndXNlIHN0cmljdCc7XHJcbiAgdmFyIGNvbnRleHQgPSAnbWFwJztcclxuICB2YXIgbGFuZyA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5sYW5nO1xyXG4gIHZhciAkbG9hZGluZyA9ICQoJy5tZGwtc3Bpbm5lcicpO1xyXG4gICQoZG9jdW1lbnQpXHJcbiAgLmFqYXhTdGFydChmdW5jdGlvbiBzdGFydCgpIHtcclxuICAgICQoJy5zcGluZXItd3JhcHBlcicpLnJlbW92ZUNsYXNzKCd2aXN1YWxseWhpZGRlbicpO1xyXG4gICAgJGxvYWRpbmcuYWRkQ2xhc3MoJ2lzLWFjdGl2ZScpO1xyXG4gIH0pXHJcbiAgLmFqYXhTdG9wKGZ1bmN0aW9uIHN0b3AoKSB7XHJcbiAgICAkKCcuc3BpbmVyLXdyYXBwZXInKS5hZGRDbGFzcygndmlzdWFsbHloaWRkZW4nKTtcclxuICAgICRsb2FkaW5nLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcclxuICB9KTtcclxuICB0b2FzdHIub3B0aW9ucyA9IHtcclxuICAgIGNsb3NlQnV0dG9uOiBmYWxzZSxcclxuICAgIGRlYnVnOiBmYWxzZSxcclxuICAgIG5ld2VzdE9uVG9wOiBmYWxzZSxcclxuICAgIHByb2dyZXNzQmFyOiBmYWxzZSxcclxuICAgIHBvc2l0aW9uQ2xhc3M6ICd0b2FzdC10b3AtY2VudGVyJyxcclxuICAgIHByZXZlbnREdXBsaWNhdGVzOiBmYWxzZSxcclxuICAgIG9uY2xpY2s6IG51bGwsXHJcbiAgICBzaG93RHVyYXRpb246ICczMDAnLFxyXG4gICAgaGlkZUR1cmF0aW9uOiAnMTAwMCcsXHJcbiAgICB0aW1lT3V0OiAnNTAwMCcsXHJcbiAgICBleHRlbmRlZFRpbWVPdXQ6ICcxMDAwJyxcclxuICAgIHNob3dFYXNpbmc6ICdzd2luZycsXHJcbiAgICBoaWRlRWFzaW5nOiAnbGluZWFyJyxcclxuICAgIHNob3dNZXRob2Q6ICdmYWRlSW4nLFxyXG4gICAgaGlkZU1ldGhvZDogJ2ZhZGVPdXQnXHJcbiAgfTtcclxuXHJcbiAgZnVuY3Rpb24gaW5pdCgpIHtcclxuICAgIFByb21pc2UucmVzb2x2ZShcclxuICAgICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6ICdodHRwOi8vMTI3LjAuMC4xOjMwMDAvYXBpL2xhbmd1YWdlJyxcclxuICAgICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICB0eXBlOiBsYW5nLFxyXG4gICAgICAgICAgY29udGV4dDogY29udGV4dFxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICAgKVxyXG4gICAgLnRoZW4oZnVuY3Rpb24gcmVzb2x2ZShkYXRhKSB7XHJcbiAgICAgIEFwcC5jb25maWcuY29tbW9ucy50cmFucyA9IGRhdGE7XHJcbiAgICAgIEFwcC5jb25maWcuY29tbW9ucy5tYXAgPSBBcHAuY29uZmlnLm1vZHVsZXMubWFwLmluaXRpYWxpemUoKTtcclxuICAgIH0pXHJcbiAgICAudGhlbihmdW5jdGlvbiByZXNvbHZlKCkge1xyXG4gICAgICBBcHAuY29uZmlnLm1vZHVsZXMuaW5mby5pbml0KCk7XHJcbiAgICAgIEFwcC5jb25maWcubW9kdWxlcy5maWx0ZXJzLmluaXQoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goZnVuY3Rpb24gZXJyb3IoZSkge1xyXG4gICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGluaXQ6IGluaXRcclxuICB9O1xyXG59KHdpbmRvdywgZG9jdW1lbnQsIFByb21pc2UsIGpRdWVyeSwgQXBwKSk7XHJcblxyXG5cclxuLy8galF1ZXJ5KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoJCkge1xyXG4vLyAgICQoJy5zcGlubmVyJykuYWRkQ2xhc3MoJ3Zpc3VhbGx5aGlkZGVuJyk7XHJcbi8vICAgJCgnLm1kbC1zcGlubmVyJykucmVtb3ZlQ2xhc3MoJ2lzLWFjdGl2ZScpO1xyXG4vLyAgIC8vIGhhbmRsZVNlbGVjdCgpO1xyXG4vLyB9KTtcclxuXHJcbnVzZXJNYXAuaW5pdCgpO1xyXG4kKCcjYWR2YW5jZWQtZmlsdGVycycpLmNsaWNrKGZ1bmN0aW9uIHRvZ2dsZUZpbHRlcnMoKSB7XHJcbiAgJCgnI2VzdGF0ZS1maWx0ZXJzJykudG9nZ2xlQ2xhc3MoJ3Zpc3VhbGx5aGlkZGVuJyk7XHJcbn0pO1xyXG4vLyAkKCcjdG9nZ2xlLXByaWNlLXJhbmdlJykuY2xpY2soZnVuY3Rpb24gdG9nZ2xlUHJpY2VSYW5nZSgpIHtcclxuLy8gICAkKCcjcHJpY2UtcmFuZ2UnKS50b2dnbGVDbGFzcygndmlzdWFsbHloaWRkZW4nKTtcclxuLy8gfSk7XHJcbiJdfQ==
