function createPropertyStyle(e){var t;return t="Sale"===e.get("type_en")?"../images/map-icons/pins/48/pin2.png":"../images/map-icons/pins/48/pin5.png",new ol.style.Style({geometry:e.getGeometry(),image:new ol.style.Icon({src:t,anchorOrigin:"bottom-left",anchor:[0,0],scale:.7})})}function propertyStyleFunction(e,t){var o=e.get("features").length;if(o>1)style=[new ol.style.Style({image:new ol.style.Circle({radius:20,stroke:new ol.style.Stroke({color:[156,39,176,1],width:5}),fill:new ol.style.Fill({color:[68,138,255,.8]})}),text:new ol.style.Text({text:o.toString(),fill:new ol.style.Fill({color:"#FFFFFF"})}),zIndex:101})];else{var r=e.get("features")[0];style=[createPropertyStyle(r)]}return style}function selectStyleFunction(e,t){for(var o=[new ol.style.Style({})],r=e.get("features"),a=r.length-1;a>=0;--a)originalFeature=r[a],o.push(createPropertyStyle(originalFeature));return o}function filteredEsateStyle(e,t){return styleCache=[new ol.style.Style({image:new ol.style.Icon({src:"../images/map-icons/pins/48/pin4.png",anchorOrigin:"bottom-left",anchor:[.5,.5],scale:.7})})]}function addInteraction(){selectSource.clear(),draw=new ol.interaction.Draw({source:selectSource,type:"LineString",geometryFunction:geometryFunction,maxPoints:2}),draw.on("drawstart",function(){selectSource.clear()}),draw.on("drawend",function(){map.removeInteraction(draw)}),map.addInteraction(draw)}function geometryFunction(e,t){t||(t=new ol.geom.Polygon(null));var o=e[0],r=e[1];return t.setCoordinates([[o,[o[0],r[1]],r,[r[0],o[1]],o]]),t}function handleInfo(e){e.preventDefault(),map.removeInteraction(draw);var t=(e.coordinate,{}),o={};t.title=o,"el"===lang?(o.estateCode="Κωδικός Ιδιοκτησίας",o.type="Τύπος",o.area="Εμβαδό",o.address="Διευθυνση",o.bedrooms="Υπνοδωμάτια",o.price="Τιμή",o["new"]="Νεόδμητο",o.parking="Στάθμεση",o.furnished="Επιπλωμένο",o.pets="Κατοικίδια",o.view="Θέα",o.heating="Θέρμανση",o.cooling="Ψύξη",o.contactInfo="Στοιχεία Επικοινωνίας",o.name="Όνομα",o.lastname="Επίθετο",o.phone="Τηλέφωνο",o.email="Ηλεκτρονική Διεύθυνση"):(o.estateCode="Estate Code",o.type="Type",o.area="Size",o.address="Address",o.bedrooms="Bedrooms",o.price="Price",o["new"]="Newly Build",o.parking="Parking",o.furnished="Furnished",o.pets="Pets Allowed",o.view="View",o.heating="Heating",o.cooling="Cooling",o.contactInfo="Contact Info",o.name="Name",o.lastname="Last Name",o.phone="Telephone",o.email="Email"),clickedFeature=map.forEachFeatureAtPixel(e.pixel,function(e,t){return{feature:e,layer:t}},this,function(e){return"estates"===e.get("id")||"filteredEstates"===e.get("id")?!0:void 0},this);var r;clickedFeature?"estates"===clickedFeature.layer.get("id")&&1===clickedFeature.feature.get("features").length?(r=clickedFeature.feature.getProperties().features[0],createPSAandCard(r,t)):"filteredEstates"===clickedFeature.layer.get("id")&&(r=clickedFeature.feature,createPSAandCard(r,t)):PSA.setSource(null)}function createPSAandCard(e,t){var o={};o.gid=e.get("gid"),o.type=e.get("estatetype"),o.area=e.get("estatearea"),"el"===lang?o.address=e.get("street_el")+" "+e.get("h_num_el"):o.address=e.get("street_en")+" "+e.get("h_num_en"),o.bedrooms=e.get("bedrooms"),o.price=e.get("price"),o["new"]=e.get("new"),o.parking=e.get("parking"),o.furnished=e.get("furnished"),o.pets=e.get("pets"),o.view=e.get("view"),o.heating=e.get("heating"),o.cooling=e.get("cooling"),"el"===lang?(o.name=e.get("name_el"),o.lastname=e.get("lastname_el")):(o.name=e.get("name_en"),o.lastname=e.get("lastname_en")),o.phone=e.get("phone1"),o.email=e.get("email"),o.coordinate=e.get("geometry").getCoordinates();var r=new ol.source.Vector({attributions:[new ol.Attribution({html:'POI by <a href="http://www.terracognita.gr/">Terra Cognita</a>'})],format:geoJSONFormat,loader:function(e,t,r){var a="http://localhost:3000/db/uses/"+o.gid,n=this;$.ajax({url:a,type:"GET",dataType:"json"}).done(function(e){var t=geoJSONFormat.readFeatures(e.property_services_analysis,{featureProjection:"EPSG:3857"}),o=new ol.style.Style({fill:new ol.style.Fill({color:[156,39,176,.1]})});t[0].setStyle(o),n.addFeatures(t)}).fail(function(){console.log("error")})},strategy:ol.loadingstrategy.all});PSA.setSource(r),map.getView().setCenter(o.coordinate),map.getView().setResolution(1.2),t.feature=o,dust.render("estateCards.dust",t,function(e,t){$(".estate-cards").html(t),$(".estate-cards").addClass("estate-cards-active")}),$('a[href="#openModal"]').click(function(){dust.render("modalInfo.dust",t,function(e,t){$(".modal-content").html(t)})}),$('a[href="#closeEstateCard"]').click(function(){$(".estate-cards").removeClass("estate-cards-active")})}var center=[3677385,4120949],extent=[3590094,4102833,3855483,4261211],lang=document.documentElement.lang,styleCache={},geoJSONFormat=new ol.format.GeoJSON({defaultDataProjection:"EPSG:4326"}),bing=new ol.layer.Tile({visible:!0,source:new ol.source.BingMaps({key:"Ak2Gq8VUfICsPpuf7LRANXmXt2sHWmSLPhohmVLFtFIEwYjs_5MCyAhAFwRSVpLj",imagerySet:"Aerial"}),maxZoom:19,crossOrigin:"anonymous",preload:1/0,id:"bing"}),mapbox=new ol.layer.Tile({source:new ol.source.XYZ({attributions:[new ol.Attribution({html:'<a href="https://www.mapbox.com/about/maps/" target="_blank">&copy; Mapbox &copy; OpenStreetMap</a>'})],url:"https://api.mapbox.com/v4/mapbox.streets/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiZmlydmFpbiIsImEiOiJlOWYyYTM0NThiNWM0YjJjODJjNDE4ODQzNzA2MGQyNiJ9.-NVDO27Hzt-w_nQosUPfLA"}),id:"mapbox"}),propertySource=new ol.source.Vector({format:geoJSONFormat,loader:function(e,t,o){console.log(t);var r=ol.proj.transformExtent(e,"EPSG:3857","EPSG:4326"),a="http://localhost:3000/db/property?bbox[x1]="+r[0]+"&bbox[y1]="+r[1]+"&bbox[x2]="+r[2]+"&bbox[y2]="+r[3],n=this;this.clear(),console.log(e),$.ajax({url:a,type:"GET",dataType:"json"}).done(function(e){var t=geoJSONFormat.readFeatures(e,{featureProjection:"EPSG:3857"});n.addFeatures(t)}).fail(function(){console.log("error")})},strategy:ol.loadingstrategy.bbox}),propertyClusterSource=new ol.source.Cluster({distance:40,source:propertySource,attributions:[new ol.Attribution({html:'All maps © <a href="http://www.terracognita.gr/">Terra Cognita</a>'})]}),property=new ol.layer.Vector({source:propertyClusterSource,id:"estates",visible:!0,style:propertyStyleFunction});property.setZIndex(2);var PSAStyleFunction=function(e,t){var o,r=e.get("style");return o="el"===lang?e.get("name_el"):e.get("name_en"),styleCache[r]||(styleCache=[new ol.style.Style({image:new ol.style.Icon({src:"../images/maki/renders/"+r+"-24.png",anchorOrigin:"bottom-left",anchor:[.5,.5],scale:1}),text:new ol.style.Text({text:o,stroke:new ol.style.Stroke({color:[156,39,176,.8],width:1}),offsetY:12})})]),styleCache},PSA=new ol.layer.Vector({style:PSAStyleFunction,maxResolution:3});PSA.setZIndex(1);var filteredEstates=new ol.layer.Vector({source:new ol.source.Vector({format:geoJSONFormat}),id:"filteredEstates",visible:!0,style:filteredEsateStyle});filteredEstates.setZIndex(2);var selectSource=new ol.source.Vector({}),selectBox=new ol.layer.Vector({source:selectSource,style:new ol.style.Style({fill:new ol.style.Fill({color:"rgba(227, 72, 27, 0.2)"}),stroke:new ol.style.Stroke({color:"#E3481B",width:2}),image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"#E3481B"})})})});selectBox.setZIndex(3);var map=new ol.Map({target:"map",layers:[mapbox,property,PSA,filteredEstates,selectBox],loadTilesWhileAnimating:!0,loadTilesWhileInteracting:!0,renderer:"canvas",controls:ol.control.defaults({attributionOptions:{collapsible:!1,collapsed:!1}}).extend([new ol.control.ScaleLine({units:"metric"}),new ol.control.OverviewMap({className:"ol-overviewmap ol-custom-overviewmap",collapsible:!0,collapsed:!0,layers:[bing]}),new ol.control.ZoomToExtent({extent:extent})]),view:new ol.View({center:center,projection:"EPSG:3857",zoom:14,maxZoom:19,minZoom:10})});"el"===lang?(bing.set("name","Δορυφορική εικόνα"),mapbox.set("name","Χάρτης"),property.set("name","Ακίνητα")):(bing.set("name","Sattelite Image"),mapbox.set("name","Map"),property.set("name","Properties")),window.app||(window.app={});var app=window.app;app.filters=function(e){this.leaseType=void 0!==e.leaseType?e.leaseType:"Rent",this.startPrice=void 0!==e.startPrice?e.startPrice:0,this.endPrice=void 0!==e.endPrice?e.endPrice:1e10,this.parking=void 0!==e.parking?e.parking:!1,this.furnsished=void 0!==e.furnished?e.pakring:!1,this.heating=void 0!==e.heating?e.heating:!1,this.cooling=void 0!==e.cooling?e.cooling:!1,this.view=void 0!==e.view?e.view:!1},app.filters.prototype.setDefaults=function(){var e;PSA.setSource(null),toastr.options={closeButton:!1,debug:!1,newestOnTop:!1,progressBar:!1,positionClass:"toast-top-center",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},e=0===selectSource.getFeatures().length?ol.proj.transformExtent(extent,"EPSG:3857","EPSG:4326"):ol.proj.transformExtent(selectSource.getFeatures()[0].getGeometry().getExtent(),"EPSG:3857","EPSG:4326"),this.extent=e},app.filters.prototype.ajaxCall=function(){$.ajax({url:"http://localhost:3000/db/filteredproperty?bbox[x1]="+this.extent[0]+"&bbox[y1]="+this.extent[1]+"&bbox[x2]="+this.extent[2]+"&bbox[y2]="+this.extent[3],type:"GET",dataType:"json",data:{leaseType:this.leaseType,furnished:this.furnished,heating:this.heating,parking:this.parking,cooling:this.cooling,view:this.view,startPrice:this.startPrice,endPrice:this.endPrice}}).done(function(e){var t=geoJSONFormat.readFeatures(e,{featureProjection:"EPSG:3857"});if(t.length>0){toastr.clear(),filteredEstates.getSource().clear(),filteredEstates.getSource().addFeatures(t),filteredEstates.setVisible(!0),property.setVisible(!1);filteredEstates.getSource().getExtent()}else toastr.error("No Info Found!"),filteredEstates.setVisible(!1),property.setVisible(!0)})},$("#invokeFilters").click(function(){window.options||(window.options={});var e;window.options.leaseType=$("input[name=options]:checked").val(),window.options.startPrice=$("#startPrice").val(),window.options.endPrice=$("#endPrice").val(),window.options.parking=$("#checkbox-1").prop("checked"),window.options.furnished=$("#checkbox-2").prop("checked"),window.options.heating=$("#checkbox-3").prop("checked"),window.options.cooling=$("#checkbox-4").prop("checked"),window.options.view=$("#checkbox-5").prop("checked"),e=new app.filters(window.options),e.setDefaults(),e.ajaxCall()}),$("#clearFilters").click(function(){$("label[for=option-1]").addClass("is-checked"),$("label[for=option-2]").removeClass("is-checked"),$("label[for=checkbox-1]").removeClass("is-checked"),$("label[for=checkbox-2]").removeClass("is-checked"),$("label[for=checkbox-3]").removeClass("is-checked"),$("label[for=checkbox-4]").removeClass("is-checked"),$("label[for=checkbox-5]").removeClass("is-checked"),$("label[for=checkbox-6]").removeClass("is-checked"),filteredEstates.getSource().clear(),property.setVisible(!0),PSA.setSource(null),selectSource.clear(),map.removeInteraction(draw)});var draw;$("#checkbox-6").click(function(){this.checked?addInteraction():(map.removeInteraction(draw),selectSource.clear())}),function(){var e=new ol.Geolocation({projection:map.getView().getProjection(),trackingOptions:{maximumAge:1e4,enableHighAccuracy:!0,timeout:6e5}}),t=new ol.Feature;e.on("change:accuracyGeometry",function(){t.setGeometry(e.getAccuracyGeometry())});var o=new ol.Feature;o.setStyle(new ol.style.Style({image:new ol.style.Circle({radius:6,fill:new ol.style.Fill({color:"#3399CC"}),stroke:new ol.style.Stroke({color:"#fff",width:2})})})),e.on("change:position",function(){var t=e.getPosition();o.setGeometry(t?new ol.geom.Point(t):null)}),featuresOverlaySource=new ol.source.Vector({});new ol.layer.Vector({map:map,source:featuresOverlaySource});$(".geolocation").on("change",function(r){r.preventDefault(),$(this).prop("checked")===!0?(e.setTracking(!0),featuresOverlaySource.addFeatures([o,t])):(e.setTracking(!1),featuresOverlaySource.clear())})}(),$(".info").on("change",function(e){e.preventDefault(),PSA.setSource(null),$(this).prop("checked")===!0?map.on("click",handleInfo):map.un("click",handleInfo)}),function(){function e(e){e.preventDefault();var r=n.getSource().getFeatures().length,a=e.coordinate;if(0===r)o.setGeometry(new ol.geom.Point(a)),o.setId("first"),n.getSource().addFeature(o),i[0]=a[0],i[1]=a[1];else if(1===r){var l=o.clone();l.setGeometry(new ol.geom.Point(a)),l.setId("second"),n.getSource().addFeature(l),i[2]=a[0],i[3]=a[1],t(i)}else n.getSource().clear()}function t(e){var t=ol.proj.transform([e[0],e[1]],"EPSG:3857","EPSG:4326"),o=ol.proj.transform([e[2],e[3]],"EPSG:3857","EPSG:4326"),r=t[0],a=t[1],i=o[0],l=o[1];$.ajax({url:"https://api.mapbox.com/v4/directions/mapbox.driving/"+r+","+a+";"+i+","+l+".json?alternatives=false&access_token=pk.eyJ1IjoiZmlydmFpbiIsImEiOiJlOWYyYTM0NThiNWM0YjJjODJjNDE4ODQzNzA2MGQyNiJ9.-NVDO27Hzt-w_nQosUPfLA",type:"GET",dataType:"json"}).done(function(e){var t={};t.type="Feature",t.geometry=e.routes[0].geometry,n.getSource().addFeatures(geoJSONFormat.readFeatures(t,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"})),map.getView().fit(n.getSource().getExtent(),map.getSize())}).fail(function(){}).always(function(){})}var o=new ol.Feature,r=new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",opacity:1,scale:1,src:"../images/map-icons/pins/24/pin1.png",snapToPixel:!1}),zIndex:100});o.setStyle(r);var a=new ol.style.Style({stroke:new ol.style.Stroke({color:"#408080",width:5,lineDash:[4,4]})}),n=new ol.layer.Vector({map:map,source:new ol.source.Vector,style:a,id:"route",nameEl:"Διαδρομή",NameEn:"Route"}),i=[];geoJSONFormat=new ol.format.GeoJSON({defaultDataProjection:"EPSG:4326",geometryName:"geometry"}),$(".marker").on("change",function(t){t.preventDefault(),$(this).prop("checked")===!0?map.on("singleclick",e):(map.un("singleclick",e),n.getSource().clear())})}(),function(){$(".weather").change(function(){if($(this).prop("checked")===!0){map.getOverlays().forEach(function(e){"weather"===e.get("name")&&($(e.getElement()).parent().remove(),$(e.getElement()).remove())});var e=ol.proj.transform(map.getView().getCenter(),"EPSG:3857","EPSG:4326"),t=e[1],o=e[0];$.ajax({url:"http://api.openweathermap.org/data/2.5/find?lat="+t+"&lon="+o+"&cnt=5&cluster=no&units=metric&type=accurate&APPID=f9cd9fa2c427c3b115e87e4862619c5c",type:"GET",dataType:"json"}).done(function(e){function t(e,t){var o=document.createElement("div");return o.setAttribute("class","weather-popup default-primary-color mdl-shadow--6dp"),o.setAttribute("id",t),o.setAttribute("data-name","weather"),new ol.Overlay({element:o,position:e})}var o,r,a=e.list;$.each(a,function(e,a){r=ol.proj.transform([a.coord.lon,a.coord.lat],"EPSG:4326","EPSG:3857"),o=t(r,e),map.addOverlay(o),o.set("name","weather"),weatherData={name:a.name,temp:a.main.temp,pressure:a.main.pressure,humidity:a.main.humidity},dust.render("weatherPopup.dust",weatherData,function(t,o){$("#"+e).html(o)})})}).fail(function(){})}else $(this).prop("checked")===!1&&map.getOverlays().forEach(function(e){"weather"===e.get("name")&&($(e.getElement()).parent().remove(),$(e.getElement()).remove())})})}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hcC5qcyIsImZpbHRlcnMuanMiLCJpbmZvLmpzIiwiZ2VvbG9jYXRpb24uanMiLCJyb3V0aW5nLmpzIiwid2VhdGhlci5qcyJdLCJuYW1lcyI6WyJjcmVhdGVQcm9wZXJ0eVN0eWxlIiwiZmVhdHVyZSIsInNyYyIsImdldCIsIm9sIiwic3R5bGUiLCJTdHlsZSIsImdlb21ldHJ5IiwiZ2V0R2VvbWV0cnkiLCJpbWFnZSIsIkljb24iLCJhbmNob3JPcmlnaW4iLCJhbmNob3IiLCJzY2FsZSIsInByb3BlcnR5U3R5bGVGdW5jdGlvbiIsInJlc29sdXRpb24iLCJzaXplIiwibGVuZ3RoIiwiQ2lyY2xlIiwicmFkaXVzIiwic3Ryb2tlIiwiU3Ryb2tlIiwiY29sb3IiLCJ3aWR0aCIsImZpbGwiLCJGaWxsIiwidGV4dCIsIlRleHQiLCJ0b1N0cmluZyIsInpJbmRleCIsIm9yaWdpbmFsRmVhdHVyZSIsInNlbGVjdFN0eWxlRnVuY3Rpb24iLCJzdHlsZXMiLCJvcmlnaW5hbEZlYXR1cmVzIiwiaSIsInB1c2giLCJmaWx0ZXJlZEVzYXRlU3R5bGUiLCJzdHlsZUNhY2hlIiwiYWRkSW50ZXJhY3Rpb24iLCJzZWxlY3RTb3VyY2UiLCJjbGVhciIsImRyYXciLCJpbnRlcmFjdGlvbiIsIkRyYXciLCJzb3VyY2UiLCJ0eXBlIiwiZ2VvbWV0cnlGdW5jdGlvbiIsIm1heFBvaW50cyIsIm9uIiwibWFwIiwicmVtb3ZlSW50ZXJhY3Rpb24iLCJjb29yZGluYXRlcyIsImdlb20iLCJQb2x5Z29uIiwic3RhcnQiLCJlbmQiLCJzZXRDb29yZGluYXRlcyIsImhhbmRsZUluZm8iLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsIm9iaiIsImNvb3JkaW5hdGUiLCJ0aXRsZSIsImxhbmciLCJlc3RhdGVDb2RlIiwiYXJlYSIsImFkZHJlc3MiLCJiZWRyb29tcyIsInByaWNlIiwicGFya2luZyIsImZ1cm5pc2hlZCIsInBldHMiLCJ2aWV3IiwiaGVhdGluZyIsImNvb2xpbmciLCJjb250YWN0SW5mbyIsIm5hbWUiLCJsYXN0bmFtZSIsInBob25lIiwiZW1haWwiLCJjbGlja2VkRmVhdHVyZSIsImZvckVhY2hGZWF0dXJlQXRQaXhlbCIsInBpeGVsIiwibGF5ZXIiLCJ0aGlzIiwiZiIsImdldFByb3BlcnRpZXMiLCJmZWF0dXJlcyIsImNyZWF0ZVBTQWFuZENhcmQiLCJQU0EiLCJzZXRTb3VyY2UiLCJnaWQiLCJnZXRDb29yZGluYXRlcyIsIlBTQVNvdXJjZSIsIlZlY3RvciIsImF0dHJpYnV0aW9ucyIsIkF0dHJpYnV0aW9uIiwiaHRtbCIsImZvcm1hdCIsImdlb0pTT05Gb3JtYXQiLCJsb2FkZXIiLCJleHRlbnQiLCJwcm9qZWN0aW9uIiwidXJsIiwic2VsZiIsIiQiLCJhamF4IiwiZGF0YVR5cGUiLCJkb25lIiwicmVzcG9uc2UiLCJyZWFkRmVhdHVyZXMiLCJwcm9wZXJ0eV9zZXJ2aWNlc19hbmFseXNpcyIsImZlYXR1cmVQcm9qZWN0aW9uIiwic2V0U3R5bGUiLCJhZGRGZWF0dXJlcyIsImZhaWwiLCJjb25zb2xlIiwibG9nIiwic3RyYXRlZ3kiLCJsb2FkaW5nc3RyYXRlZ3kiLCJhbGwiLCJnZXRWaWV3Iiwic2V0Q2VudGVyIiwic2V0UmVzb2x1dGlvbiIsImR1c3QiLCJyZW5kZXIiLCJlcnIiLCJvdXQiLCJhZGRDbGFzcyIsImNsaWNrIiwicmVtb3ZlQ2xhc3MiLCJjZW50ZXIiLCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsIkdlb0pTT04iLCJkZWZhdWx0RGF0YVByb2plY3Rpb24iLCJiaW5nIiwiVGlsZSIsInZpc2libGUiLCJCaW5nTWFwcyIsImtleSIsImltYWdlcnlTZXQiLCJtYXhab29tIiwiY3Jvc3NPcmlnaW4iLCJwcmVsb2FkIiwiSW5maW5pdHkiLCJpZCIsIm1hcGJveCIsIlhZWiIsInByb3BlcnR5U291cmNlIiwiZXBzZzQzMjZFeHRlbnQiLCJwcm9qIiwidHJhbnNmb3JtRXh0ZW50IiwiYmJveCIsInByb3BlcnR5Q2x1c3RlclNvdXJjZSIsIkNsdXN0ZXIiLCJkaXN0YW5jZSIsInByb3BlcnR5Iiwic2V0WkluZGV4IiwiUFNBU3R5bGVGdW5jdGlvbiIsInN5bWJvbCIsIm9mZnNldFkiLCJtYXhSZXNvbHV0aW9uIiwiZmlsdGVyZWRFc3RhdGVzIiwic2VsZWN0Qm94IiwiTWFwIiwidGFyZ2V0IiwibGF5ZXJzIiwibG9hZFRpbGVzV2hpbGVBbmltYXRpbmciLCJsb2FkVGlsZXNXaGlsZUludGVyYWN0aW5nIiwicmVuZGVyZXIiLCJjb250cm9scyIsImNvbnRyb2wiLCJkZWZhdWx0cyIsImF0dHJpYnV0aW9uT3B0aW9ucyIsImNvbGxhcHNpYmxlIiwiY29sbGFwc2VkIiwiZXh0ZW5kIiwiU2NhbGVMaW5lIiwidW5pdHMiLCJPdmVydmlld01hcCIsImNsYXNzTmFtZSIsIlpvb21Ub0V4dGVudCIsIlZpZXciLCJ6b29tIiwibWluWm9vbSIsInNldCIsIndpbmRvdyIsImFwcCIsImZpbHRlcnMiLCJvcHRpb25zIiwibGVhc2VUeXBlIiwidW5kZWZpbmVkIiwic3RhcnRQcmljZSIsImVuZFByaWNlIiwiZnVybnNpc2hlZCIsInBha3JpbmciLCJwcm90b3R5cGUiLCJzZXREZWZhdWx0cyIsInRvYXN0ciIsImNsb3NlQnV0dG9uIiwiZGVidWciLCJuZXdlc3RPblRvcCIsInByb2dyZXNzQmFyIiwicG9zaXRpb25DbGFzcyIsInByZXZlbnREdXBsaWNhdGVzIiwib25jbGljayIsInNob3dEdXJhdGlvbiIsImhpZGVEdXJhdGlvbiIsInRpbWVPdXQiLCJleHRlbmRlZFRpbWVPdXQiLCJzaG93RWFzaW5nIiwiaGlkZUVhc2luZyIsInNob3dNZXRob2QiLCJoaWRlTWV0aG9kIiwiZ2V0RmVhdHVyZXMiLCJnZXRFeHRlbnQiLCJhamF4Q2FsbCIsImRhdGEiLCJnZXRTb3VyY2UiLCJzZXRWaXNpYmxlIiwiZXJyb3IiLCJ2YWwiLCJwcm9wIiwiY2hlY2tlZCIsImdlb2xvY2F0aW9uIiwiR2VvbG9jYXRpb24iLCJnZXRQcm9qZWN0aW9uIiwidHJhY2tpbmdPcHRpb25zIiwibWF4aW11bUFnZSIsImVuYWJsZUhpZ2hBY2N1cmFjeSIsInRpbWVvdXQiLCJhY2N1cmFjeUZlYXR1cmUiLCJGZWF0dXJlIiwic2V0R2VvbWV0cnkiLCJnZXRBY2N1cmFjeUdlb21ldHJ5IiwicG9zaXRpb25GZWF0dXJlIiwiZ2V0UG9zaXRpb24iLCJQb2ludCIsImZlYXR1cmVzT3ZlcmxheVNvdXJjZSIsImUiLCJzZXRUcmFja2luZyIsInVuIiwiaGFuZGxlTWFya2VyIiwiZXZlbnQiLCJmZWF0dXJlQ291bnQiLCJmZWF0dXJlc092ZXJsYXkiLCJtYXJrZXIiLCJzZXRJZCIsImFkZEZlYXR1cmUiLCJyb3V0ZUNvb3JkcyIsImNsb25lIiwiY2FsbFJvdXRlIiwiZmlyc3QiLCJ0cmFuc2Zvcm0iLCJzZWNvbmQiLCJ4MSIsInkxIiwieDIiLCJ5MiIsInJvdXRlIiwicm91dGVzIiwiZGF0YVByb2plY3Rpb24iLCJmaXQiLCJnZXRTaXplIiwiYWx3YXlzIiwiaWNvblN0eWxlIiwiYW5jaG9yWFVuaXRzIiwiYW5jaG9yWVVuaXRzIiwib3BhY2l0eSIsInNuYXBUb1BpeGVsIiwiZmVhdHVyZXNPdmVybGF5U3R5bGUiLCJsaW5lRGFzaCIsIm5hbWVFbCIsIk5hbWVFbiIsImdlb21ldHJ5TmFtZSIsImNoYW5nZSIsImdldE92ZXJsYXlzIiwiZm9yRWFjaCIsIm92bCIsImdldEVsZW1lbnQiLCJwYXJlbnQiLCJyZW1vdmUiLCJnZXRDZW50ZXIiLCJsYXQiLCJsb24iLCJjcmVhdGVXZWF0aGVyT3ZlcmxheSIsInBvc2l0aW9uIiwiaW5kZXgiLCJlbGVtIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsIk92ZXJsYXkiLCJlbGVtZW50Iiwib3ZlcmxheSIsIm9ianMiLCJsaXN0IiwiZWFjaCIsImNvb3JkIiwiYWRkT3ZlcmxheSIsIndlYXRoZXJEYXRhIiwidGVtcCIsIm1haW4iLCJwcmVzc3VyZSIsImh1bWlkaXR5Il0sIm1hcHBpbmdzIjoiQUF3QkEsUUFBQUEscUJBQUFDLEdBQ0EsR0FBQUMsRUFNQSxPQUpB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dXJjZXNDb250ZW50IjpbInZhciBjZW50ZXIgPSBbXG4gICAgICAzNjc3Mzg1LCA0MTIwOTQ5XG4gICAgXSxcbiAgICBleHRlbnQgPSBbXG4gICAgICAzNTkwMDk0LCA0MTAyODMzLCAzODU1NDgzLCA0MjYxMjExXG4gICAgXSxcbiAgICBsYW5nID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmxhbmcsXG4gICAgc3R5bGVDYWNoZSA9IHt9LFxuICAgIGdlb0pTT05Gb3JtYXQgPSBuZXcgb2wuZm9ybWF0Lkdlb0pTT04oe2RlZmF1bHREYXRhUHJvamVjdGlvbjogXCJFUFNHOjQzMjZcIn0pO1xudmFyIGJpbmcgPSBuZXcgb2wubGF5ZXIuVGlsZSh7XG4gIHZpc2libGU6IHRydWUsXG4gIHNvdXJjZTogbmV3IG9sLnNvdXJjZS5CaW5nTWFwcyh7a2V5OiBcIkFrMkdxOFZVZklDc1BwdWY3TFJBTlhtWHQyc0hXbVNMUGhvaG1WTEZ0RklFd1lqc181TUN5QWhBRndSU1ZwTGpcIiwgaW1hZ2VyeVNldDogXCJBZXJpYWxcIn0pLFxuICBtYXhab29tOiAxOSxcbiAgY3Jvc3NPcmlnaW46IFwiYW5vbnltb3VzXCIsXG4gIHByZWxvYWQ6IEluZmluaXR5LFxuICBpZDogXCJiaW5nXCJcbn0pO1xudmFyIG1hcGJveCA9IG5ldyBvbC5sYXllci5UaWxlKHtcbiAgc291cmNlOiBuZXcgb2wuc291cmNlLlhZWih7XG4gICAgYXR0cmlidXRpb25zOiBbbmV3IG9sLkF0dHJpYnV0aW9uKHtodG1sOiBcIjxhIGhyZWY9XFxcImh0dHBzOi8vd3d3Lm1hcGJveC5jb20vYWJvdXQvbWFwcy9cXFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIj4mY29weTsgTWFwYm94ICZjb3B5OyBPcGVuU3RyZWV0TWFwPC9hPlwifSldLFxuICAgIHVybDogXCJodHRwczovL2FwaS5tYXBib3guY29tL3Y0L21hcGJveC5zdHJlZXRzL3t6fS97eH0ve3l9LnBuZz9hY2Nlc3NfdG9rZW49cGsuZXlKMUlqb2labWx5ZG1GcGJpSXNJbUVpT2lKbE9XWXlZVE0wTlRoaU5XTTBZakpqT0RKak5ERTRPRFF6TnpBMk1HUXlOaUo5Li1OVkRPMjdIenQtd19uUW9zVVBmTEFcIlxuICB9KSxcbiAgaWQ6IFwibWFwYm94XCJcbn0pO1xuZnVuY3Rpb24gY3JlYXRlUHJvcGVydHlTdHlsZShmZWF0dXJlKSB7XG4gIHZhciBzcmM7XG4gIGlmIChmZWF0dXJlLmdldChcInR5cGVfZW5cIikgPT09IFwiU2FsZVwiKSB7XG4gICAgc3JjID0gXCIuLi9pbWFnZXMvbWFwLWljb25zL3BpbnMvNDgvcGluMi5wbmdcIjtcbiAgfSBlbHNlIHtcbiAgICBzcmMgPSBcIi4uL2ltYWdlcy9tYXAtaWNvbnMvcGlucy80OC9waW41LnBuZ1wiO1xuICB9XG4gIHJldHVybiBuZXcgb2wuc3R5bGUuU3R5bGUoe1xuICAgIGdlb21ldHJ5OiBmZWF0dXJlLmdldEdlb21ldHJ5KCksXG4gICAgaW1hZ2U6IG5ldyBvbC5zdHlsZS5JY29uKCh7XG4gICAgICBzcmM6IHNyYyxcbiAgICAgIGFuY2hvck9yaWdpbjogXCJib3R0b20tbGVmdFwiLFxuICAgICAgYW5jaG9yOiBbXG4gICAgICAgIDAsIDBcbiAgICAgIF0sXG4gICAgICBzY2FsZTogMC43XG4gICAgfSkpXG4gIH0pO1xufVxuZnVuY3Rpb24gcHJvcGVydHlTdHlsZUZ1bmN0aW9uKGZlYXR1cmUsIHJlc29sdXRpb24pIHtcbiAgdmFyIHNpemUgPSBmZWF0dXJlLmdldChcImZlYXR1cmVzXCIpLmxlbmd0aDtcbiAgaWYgKHNpemUgPiAxKSB7XG4gICAgc3R5bGUgPSBbbmV3IG9sLnN0eWxlLlN0eWxlKHtcbiAgICAgIGltYWdlOiBuZXcgb2wuc3R5bGUuQ2lyY2xlKHtcbiAgICAgICAgcmFkaXVzOiAyMCxcbiAgICAgICAgc3Ryb2tlOiBuZXcgb2wuc3R5bGUuU3Ryb2tlKHtcbiAgICAgICAgICBjb2xvcjogW1xuICAgICAgICAgICAgMTU2LCAzOSwgMTc2LCAxXG4gICAgICAgICAgXSxcbiAgICAgICAgICB3aWR0aDogNVxuICAgICAgICB9KSxcbiAgICAgICAgZmlsbDogbmV3IG9sLnN0eWxlLkZpbGwoe1xuICAgICAgICAgIGNvbG9yOiBbNjgsIDEzOCwgMjU1LCAwLjhdXG4gICAgICAgIH0pXG4gICAgICB9KSxcbiAgICAgIHRleHQ6IG5ldyBvbC5zdHlsZS5UZXh0KHtcbiAgICAgICAgdGV4dDogc2l6ZS50b1N0cmluZygpLFxuICAgICAgICBmaWxsOiBuZXcgb2wuc3R5bGUuRmlsbCh7Y29sb3I6IFwiI0ZGRkZGRlwifSlcbiAgICAgIH0pLFxuICAgICAgekluZGV4OiAxMDFcbiAgICB9KV07XG4gIH0gZWxzZSB7XG4gICAgdmFyIG9yaWdpbmFsRmVhdHVyZSA9IGZlYXR1cmUuZ2V0KFwiZmVhdHVyZXNcIilbMF07XG4gICAgc3R5bGUgPSBbY3JlYXRlUHJvcGVydHlTdHlsZShvcmlnaW5hbEZlYXR1cmUpXTtcbiAgfVxuICByZXR1cm4gc3R5bGU7XG59XG5mdW5jdGlvbiBzZWxlY3RTdHlsZUZ1bmN0aW9uKGZlYXR1cmUsIHJlc29sdXRpb24pIHtcbiAgdmFyIHN0eWxlcyA9IFtuZXcgb2wuc3R5bGUuU3R5bGUoe30pXTtcbiAgdmFyIG9yaWdpbmFsRmVhdHVyZXMgPSBmZWF0dXJlLmdldChcImZlYXR1cmVzXCIpO1xuICB2YXIgb3JpZ2luYUZlYXR1cmU7XG4gIGZvciAodmFyIGkgPSBvcmlnaW5hbEZlYXR1cmVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgb3JpZ2luYWxGZWF0dXJlID0gb3JpZ2luYWxGZWF0dXJlc1tpXTtcbiAgICBzdHlsZXMucHVzaChjcmVhdGVQcm9wZXJ0eVN0eWxlKG9yaWdpbmFsRmVhdHVyZSkpO1xuICB9XG4gIHJldHVybiBzdHlsZXM7XG59XG52YXIgcHJvcGVydHlTb3VyY2UgPSBuZXcgb2wuc291cmNlLlZlY3Rvcih7XG4gIGZvcm1hdDogZ2VvSlNPTkZvcm1hdCxcbiAgbG9hZGVyOiBmdW5jdGlvbihleHRlbnQsIHJlc29sdXRpb24sIHByb2plY3Rpb24pIHtcbiAgICBjb25zb2xlLmxvZyhyZXNvbHV0aW9uKTtcbiAgICB2YXIgZXBzZzQzMjZFeHRlbnQgPSBvbC5wcm9qLnRyYW5zZm9ybUV4dGVudChleHRlbnQsIFwiRVBTRzozODU3XCIsIFwiRVBTRzo0MzI2XCIpO1xuICAgIHZhciB1cmwgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9kYi9wcm9wZXJ0eT9iYm94W3gxXT1cIiArIGVwc2c0MzI2RXh0ZW50WzBdICsgXCImYmJveFt5MV09XCIgKyBlcHNnNDMyNkV4dGVudFsxXSArIFwiJmJib3hbeDJdPVwiICsgZXBzZzQzMjZFeHRlbnRbMl0gKyBcIiZiYm94W3kyXT1cIiArIGVwc2c0MzI2RXh0ZW50WzNdO1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB0aGlzLmNsZWFyKCk7XG4gICAgY29uc29sZS5sb2coZXh0ZW50KTtcbiAgICAkLmFqYXgoe3VybDogdXJsLCB0eXBlOiBcIkdFVFwiLCBkYXRhVHlwZTogXCJqc29uXCJ9KS5kb25lKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICB2YXIgZmVhdHVyZXMgPSBnZW9KU09ORm9ybWF0LnJlYWRGZWF0dXJlcyhyZXNwb25zZSwge2ZlYXR1cmVQcm9qZWN0aW9uOiBcIkVQU0c6Mzg1N1wifSk7XG4gICAgICBzZWxmLmFkZEZlYXR1cmVzKGZlYXR1cmVzKTtcbiAgICB9KS5mYWlsKGZ1bmN0aW9uKCkge1xuICAgICAgY29uc29sZS5sb2coXCJlcnJvclwiKTtcbiAgICB9KTtcbiAgfSxcbiAgc3RyYXRlZ3k6IG9sLmxvYWRpbmdzdHJhdGVneS5iYm94XG59KTtcbnZhciBwcm9wZXJ0eUNsdXN0ZXJTb3VyY2UgPSBuZXcgb2wuc291cmNlLkNsdXN0ZXIoe1xuICBkaXN0YW5jZTogNDAsXG4gIHNvdXJjZTogcHJvcGVydHlTb3VyY2UsXG4gIGF0dHJpYnV0aW9uczogW25ldyBvbC5BdHRyaWJ1dGlvbih7XG4gICAgaHRtbDogXCJBbGwgbWFwcyDCqSBcIiArIFwiPGEgaHJlZj1cXFwiaHR0cDovL3d3dy50ZXJyYWNvZ25pdGEuZ3IvXFxcIj5UZXJyYSBDb2duaXRhPC9hPlwiXG4gIH0pXVxufSk7XG52YXIgcHJvcGVydHkgPSBuZXcgb2wubGF5ZXIuVmVjdG9yKHtzb3VyY2U6IHByb3BlcnR5Q2x1c3RlclNvdXJjZSwgaWQ6IFwiZXN0YXRlc1wiLCB2aXNpYmxlOiB0cnVlLCBzdHlsZTogcHJvcGVydHlTdHlsZUZ1bmN0aW9ufSk7XG5wcm9wZXJ0eS5zZXRaSW5kZXgoMik7XG52YXIgUFNBU3R5bGVGdW5jdGlvbiA9IGZ1bmN0aW9uKGZlYXR1cmUsIHJlc29sdXRpb24pIHtcbiAgdmFyIHN5bWJvbCA9IGZlYXR1cmUuZ2V0KFwic3R5bGVcIik7XG4gIHZhciB0ZXh0O1xuICBpZiAobGFuZyA9PT0gXCJlbFwiKSB7XG4gICAgdGV4dCA9IGZlYXR1cmUuZ2V0KFwibmFtZV9lbFwiKTtcbiAgfSBlbHNlIHtcbiAgICB0ZXh0ID0gZmVhdHVyZS5nZXQoXCJuYW1lX2VuXCIpO1xuICB9XG4gIGlmICghc3R5bGVDYWNoZVtzeW1ib2xdKSB7XG4gICAgc3R5bGVDYWNoZSA9IFtuZXcgb2wuc3R5bGUuU3R5bGUoe1xuICAgICAgaW1hZ2U6IG5ldyBvbC5zdHlsZS5JY29uKCh7XG4gICAgICAgIHNyYzogXCIuLi9pbWFnZXMvbWFraS9yZW5kZXJzL1wiICsgc3ltYm9sICsgXCItMjQucG5nXCIsXG4gICAgICAgIGFuY2hvck9yaWdpbjogXCJib3R0b20tbGVmdFwiLFxuICAgICAgICBhbmNob3I6IFtcbiAgICAgICAgICAwLjUsIDAuNVxuICAgICAgICBdLFxuICAgICAgICBzY2FsZTogMVxuICAgICAgfSkpLFxuICAgICAgdGV4dDogbmV3IG9sLnN0eWxlLlRleHQoe1xuICAgICAgICB0ZXh0OiB0ZXh0LFxuICAgICAgICBzdHJva2U6IG5ldyBvbC5zdHlsZS5TdHJva2Uoe1xuICAgICAgICAgIGNvbG9yOiBbXG4gICAgICAgICAgICAxNTYsIDM5LCAxNzYsIDAuOFxuICAgICAgICAgIF0sXG4gICAgICAgICAgd2lkdGg6IDFcbiAgICAgICAgfSksXG4gICAgICAgIG9mZnNldFk6IDEyXG4gICAgICB9KVxuICAgIH0pXTtcbiAgfVxuICByZXR1cm4gc3R5bGVDYWNoZTtcbn07XG52YXIgUFNBID0gbmV3IG9sLmxheWVyLlZlY3Rvcih7c3R5bGU6IFBTQVN0eWxlRnVuY3Rpb24sIG1heFJlc29sdXRpb246IDN9KTtcblBTQS5zZXRaSW5kZXgoMSk7XG5mdW5jdGlvbiBmaWx0ZXJlZEVzYXRlU3R5bGUoZmVhdHVyZSwgcmVzb2x1dGlvbikge1xuICBzdHlsZUNhY2hlID0gW25ldyBvbC5zdHlsZS5TdHlsZSh7XG4gICAgaW1hZ2U6IG5ldyBvbC5zdHlsZS5JY29uKCh7XG4gICAgICBzcmM6IFwiLi4vaW1hZ2VzL21hcC1pY29ucy9waW5zLzQ4L3BpbjQucG5nXCIsXG4gICAgICBhbmNob3JPcmlnaW46IFwiYm90dG9tLWxlZnRcIixcbiAgICAgIGFuY2hvcjogW1xuICAgICAgICAwLjUsIDAuNVxuICAgICAgXSxcbiAgICAgIHNjYWxlOiAwLjdcbiAgICB9KSlcbiAgfSldO1xuICByZXR1cm4gc3R5bGVDYWNoZTtcbn1cbnZhciBmaWx0ZXJlZEVzdGF0ZXMgPSBuZXcgb2wubGF5ZXIuVmVjdG9yKHtcbiAgc291cmNlOiBuZXcgb2wuc291cmNlLlZlY3Rvcih7Zm9ybWF0OiBnZW9KU09ORm9ybWF0fSksXG4gIGlkOiBcImZpbHRlcmVkRXN0YXRlc1wiLFxuICB2aXNpYmxlOiB0cnVlLFxuICBzdHlsZTogZmlsdGVyZWRFc2F0ZVN0eWxlXG59KTtcbmZpbHRlcmVkRXN0YXRlcy5zZXRaSW5kZXgoMik7XG52YXIgc2VsZWN0U291cmNlID0gbmV3IG9sLnNvdXJjZS5WZWN0b3Ioe30pO1xudmFyIHNlbGVjdEJveCA9IG5ldyBvbC5sYXllci5WZWN0b3Ioe1xuICBzb3VyY2U6IHNlbGVjdFNvdXJjZSxcbiAgc3R5bGU6IG5ldyBvbC5zdHlsZS5TdHlsZSh7XG4gICAgZmlsbDogbmV3IG9sLnN0eWxlLkZpbGwoe2NvbG9yOiBcInJnYmEoMjI3LCA3MiwgMjcsIDAuMilcIn0pLFxuICAgIHN0cm9rZTogbmV3IG9sLnN0eWxlLlN0cm9rZSh7Y29sb3I6IFwiI0UzNDgxQlwiLCB3aWR0aDogMn0pLFxuICAgIGltYWdlOiBuZXcgb2wuc3R5bGUuQ2lyY2xlKHtcbiAgICAgIHJhZGl1czogNyxcbiAgICAgIGZpbGw6IG5ldyBvbC5zdHlsZS5GaWxsKHtjb2xvcjogXCIjRTM0ODFCXCJ9KVxuICAgIH0pXG4gIH0pXG59KTtcbnNlbGVjdEJveC5zZXRaSW5kZXgoMyk7XG52YXIgbWFwID0gbmV3IG9sLk1hcCh7XG4gIHRhcmdldDogXCJtYXBcIixcbiAgbGF5ZXJzOiBbXG4gICAgbWFwYm94LCBwcm9wZXJ0eSwgUFNBLCBmaWx0ZXJlZEVzdGF0ZXMsIHNlbGVjdEJveFxuICBdLFxuICAvLyBpbnRlcmFjdGlvbnM6IG9sLmludGVyYWN0aW9uLmRlZmF1bHRzKCkuZXh0ZW5kKFtuZXcgb2wuaW50ZXJhY3Rpb24uU2VsZWN0KHtcbiAgLy8gICBjb25kaXRpb246IGZ1bmN0aW9uKGV2dCkge1xuICAvLyAgICAgcmV0dXJuIGV2dC50eXBlID09PSAnc2luZ2xlY2xpY2snICYmIG9sLmV2ZW50cy5jb25kaXRpb24uc2hpZnRLZXlPbmx5KGV2dCk7XG4gIC8vICAgfSxcbiAgLy8gICBzdHlsZTogc2VsZWN0U3R5bGVGdW5jdGlvblxuICAvLyB9KV0pLFxuICBsb2FkVGlsZXNXaGlsZUFuaW1hdGluZzogdHJ1ZSxcbiAgbG9hZFRpbGVzV2hpbGVJbnRlcmFjdGluZzogdHJ1ZSxcbiAgcmVuZGVyZXI6IFwiY2FudmFzXCIsXG4gIGNvbnRyb2xzOiBvbC5jb250cm9sLmRlZmF1bHRzKHtcbiAgICBhdHRyaWJ1dGlvbk9wdGlvbnM6IHtcbiAgICAgIGNvbGxhcHNpYmxlOiBmYWxzZSxcbiAgICAgIGNvbGxhcHNlZDogZmFsc2VcbiAgICB9XG4gIH0pLmV4dGVuZChbXG4gICAgbmV3IG9sLmNvbnRyb2wuU2NhbGVMaW5lKHt1bml0czogXCJtZXRyaWNcIn0pLFxuICAgIG5ldyBvbC5jb250cm9sLk92ZXJ2aWV3TWFwKHtjbGFzc05hbWU6IFwib2wtb3ZlcnZpZXdtYXAgb2wtY3VzdG9tLW92ZXJ2aWV3bWFwXCIsIGNvbGxhcHNpYmxlOiB0cnVlLCBjb2xsYXBzZWQ6IHRydWUsIGxheWVyczogW2JpbmddfSksXG4gICAgbmV3IG9sLmNvbnRyb2wuWm9vbVRvRXh0ZW50KHtleHRlbnQ6IGV4dGVudH0pXG4gIF0pLFxuICB2aWV3OiBuZXcgb2wuVmlldyh7XG4gICAgY2VudGVyOiBjZW50ZXIsXG4gICAgLy8gZXh0ZW50OiBleHRlbnQsXG4gICAgcHJvamVjdGlvbjogXCJFUFNHOjM4NTdcIixcbiAgICB6b29tOiAxNCxcbiAgICBtYXhab29tOiAxOSxcbiAgICBtaW5ab29tOiAxMFxuICB9KVxufSk7XG5pZiAobGFuZyA9PT0gXCJlbFwiKSB7XG4gIGJpbmcuc2V0KFwibmFtZVwiLCBcIs6Uzr/Pgc+Fz4bOv8+BzrnOus6uIM61zrnOus+Mzr3OsVwiKTtcbiAgbWFwYm94LnNldChcIm5hbWVcIiwgXCLOp86sz4HPhM63z4JcIik7XG4gIHByb3BlcnR5LnNldChcIm5hbWVcIiwgXCLOkc66zq/Ovc63z4TOsVwiKTtcbn0gZWxzZSB7XG4gIGJpbmcuc2V0KFwibmFtZVwiLCBcIlNhdHRlbGl0ZSBJbWFnZVwiKTtcbiAgbWFwYm94LnNldChcIm5hbWVcIiwgXCJNYXBcIik7XG4gIHByb3BlcnR5LnNldChcIm5hbWVcIiwgXCJQcm9wZXJ0aWVzXCIpO1xufVxuIiwid2luZG93LmFwcCB8fCAod2luZG93LmFwcCA9IHt9KTtcbnZhciBhcHAgPSB3aW5kb3cuYXBwO1xuYXBwLmZpbHRlcnMgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gIHRoaXMubGVhc2VUeXBlID0gb3B0aW9ucy5sZWFzZVR5cGUgIT09IHVuZGVmaW5lZFxuICAgID8gb3B0aW9ucy5sZWFzZVR5cGVcbiAgICA6IFwiUmVudFwiO1xuICB0aGlzLnN0YXJ0UHJpY2UgPSBvcHRpb25zLnN0YXJ0UHJpY2UgIT09IHVuZGVmaW5lZFxuICAgID8gb3B0aW9ucy5zdGFydFByaWNlXG4gICAgOiAwO1xuICB0aGlzLmVuZFByaWNlID0gb3B0aW9ucy5lbmRQcmljZSAhPT0gdW5kZWZpbmVkXG4gICAgPyBvcHRpb25zLmVuZFByaWNlXG4gICAgOiAxMDAwMDAwMDAwMDtcbiAgdGhpcy5wYXJraW5nID0gb3B0aW9ucy5wYXJraW5nICE9PSB1bmRlZmluZWRcbiAgICA/IG9wdGlvbnMucGFya2luZ1xuICAgIDogZmFsc2U7XG4gIHRoaXMuZnVybnNpc2hlZCA9IG9wdGlvbnMuZnVybmlzaGVkICE9PSB1bmRlZmluZWRcbiAgICA/IG9wdGlvbnMucGFrcmluZ1xuICAgIDogZmFsc2U7XG4gIHRoaXMuaGVhdGluZyA9IG9wdGlvbnMuaGVhdGluZyAhPT0gdW5kZWZpbmVkXG4gICAgPyBvcHRpb25zLmhlYXRpbmdcbiAgICA6IGZhbHNlO1xuICB0aGlzLmNvb2xpbmcgPSBvcHRpb25zLmNvb2xpbmcgIT09IHVuZGVmaW5lZFxuICAgID8gb3B0aW9ucy5jb29saW5nXG4gICAgOiBmYWxzZTtcbiAgdGhpcy52aWV3ID0gb3B0aW9ucy52aWV3ICE9PSB1bmRlZmluZWRcbiAgICA/IG9wdGlvbnMudmlld1xuICAgIDogZmFsc2U7XG59O1xuYXBwLmZpbHRlcnMucHJvdG90eXBlLnNldERlZmF1bHRzID0gZnVuY3Rpb24oKSB7XG4gIHZhciBlcHNnNDMyNkV4dGVudDtcbiAgUFNBLnNldFNvdXJjZShudWxsKTtcbiAgdG9hc3RyLm9wdGlvbnMgPSB7XG4gICAgXCJjbG9zZUJ1dHRvblwiOiBmYWxzZSxcbiAgICBcImRlYnVnXCI6IGZhbHNlLFxuICAgIFwibmV3ZXN0T25Ub3BcIjogZmFsc2UsXG4gICAgXCJwcm9ncmVzc0JhclwiOiBmYWxzZSxcbiAgICBcInBvc2l0aW9uQ2xhc3NcIjogXCJ0b2FzdC10b3AtY2VudGVyXCIsXG4gICAgXCJwcmV2ZW50RHVwbGljYXRlc1wiOiBmYWxzZSxcbiAgICBcIm9uY2xpY2tcIjogbnVsbCxcbiAgICBcInNob3dEdXJhdGlvblwiOiBcIjMwMFwiLFxuICAgIFwiaGlkZUR1cmF0aW9uXCI6IFwiMTAwMFwiLFxuICAgIFwidGltZU91dFwiOiBcIjUwMDBcIixcbiAgICBcImV4dGVuZGVkVGltZU91dFwiOiBcIjEwMDBcIixcbiAgICBcInNob3dFYXNpbmdcIjogXCJzd2luZ1wiLFxuICAgIFwiaGlkZUVhc2luZ1wiOiBcImxpbmVhclwiLFxuICAgIFwic2hvd01ldGhvZFwiOiBcImZhZGVJblwiLFxuICAgIFwiaGlkZU1ldGhvZFwiOiBcImZhZGVPdXRcIlxuICB9O1xuICBpZiAoc2VsZWN0U291cmNlLmdldEZlYXR1cmVzKCkubGVuZ3RoID09PSAwKSB7XG4gICAgZXBzZzQzMjZFeHRlbnQgPSBvbC5wcm9qLnRyYW5zZm9ybUV4dGVudChleHRlbnQsIFwiRVBTRzozODU3XCIsIFwiRVBTRzo0MzI2XCIpO1xuICB9IGVsc2Uge1xuICAgIGVwc2c0MzI2RXh0ZW50ID0gb2wucHJvai50cmFuc2Zvcm1FeHRlbnQoc2VsZWN0U291cmNlLmdldEZlYXR1cmVzKClbMF0uZ2V0R2VvbWV0cnkoKS5nZXRFeHRlbnQoKSwgXCJFUFNHOjM4NTdcIiwgXCJFUFNHOjQzMjZcIik7XG4gIH1cbiAgdGhpcy5leHRlbnQgPSBlcHNnNDMyNkV4dGVudDtcbn07XG5hcHAuZmlsdGVycy5wcm90b3R5cGUuYWpheENhbGwgPSBmdW5jdGlvbigpIHtcbiAgJC5hamF4KHtcbiAgICB1cmw6IFwiaHR0cDovL2xvY2FsaG9zdDozMDAwL2RiL2ZpbHRlcmVkcHJvcGVydHk/YmJveFt4MV09XCIgKyB0aGlzLmV4dGVudFswXSArIFwiJmJib3hbeTFdPVwiICsgdGhpcy5leHRlbnRbMV0gKyBcIiZiYm94W3gyXT1cIiArIHRoaXMuZXh0ZW50WzJdICsgXCImYmJveFt5Ml09XCIgKyB0aGlzLmV4dGVudFszXSxcbiAgICB0eXBlOiBcIkdFVFwiLFxuICAgIGRhdGFUeXBlOiBcImpzb25cIixcbiAgICBkYXRhOiB7XG4gICAgICBsZWFzZVR5cGU6IHRoaXMubGVhc2VUeXBlLFxuICAgICAgZnVybmlzaGVkOiB0aGlzLmZ1cm5pc2hlZCxcbiAgICAgIGhlYXRpbmc6IHRoaXMuaGVhdGluZyxcbiAgICAgIHBhcmtpbmc6IHRoaXMucGFya2luZyxcbiAgICAgIGNvb2xpbmc6IHRoaXMuY29vbGluZyxcbiAgICAgIHZpZXc6IHRoaXMudmlldyxcbiAgICAgIHN0YXJ0UHJpY2U6IHRoaXMuc3RhcnRQcmljZSxcbiAgICAgIGVuZFByaWNlOiB0aGlzLmVuZFByaWNlXG4gICAgfVxuICB9KS5kb25lKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgdmFyIGZlYXR1cmVzID0gZ2VvSlNPTkZvcm1hdC5yZWFkRmVhdHVyZXMocmVzcG9uc2UsIHtmZWF0dXJlUHJvamVjdGlvbjogXCJFUFNHOjM4NTdcIn0pO1xuICAgIGlmIChmZWF0dXJlcy5sZW5ndGggPiAwKSB7XG4gICAgICB0b2FzdHIuY2xlYXIoKTtcbiAgICAgIGZpbHRlcmVkRXN0YXRlcy5nZXRTb3VyY2UoKS5jbGVhcigpO1xuICAgICAgZmlsdGVyZWRFc3RhdGVzLmdldFNvdXJjZSgpLmFkZEZlYXR1cmVzKGZlYXR1cmVzKTtcbiAgICAgIGZpbHRlcmVkRXN0YXRlcy5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgcHJvcGVydHkuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICB2YXIgZXh0ZW50ID0gZmlsdGVyZWRFc3RhdGVzLmdldFNvdXJjZSgpLmdldEV4dGVudCgpO1xuICAgICAgdmFyIGNlbnRlciA9IFtdO1xuICAgIH0gZWxzZSB7XG4gICAgICB0b2FzdHIuZXJyb3IoXCJObyBJbmZvIEZvdW5kIVwiKTtcbiAgICAgIGZpbHRlcmVkRXN0YXRlcy5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgIHByb3BlcnR5LnNldFZpc2libGUodHJ1ZSk7XG4gICAgfVxuICB9KTtcbn07XG4kKFwiI2ludm9rZUZpbHRlcnNcIikuY2xpY2soZnVuY3Rpb24oKSB7XG4gIHdpbmRvdy5vcHRpb25zIHx8ICh3aW5kb3cub3B0aW9ucyA9IHt9KTtcbiAgdmFyIGZpbHRlcnM7XG4gIHdpbmRvdy5vcHRpb25zLmxlYXNlVHlwZSA9ICQoXCJpbnB1dFtuYW1lPW9wdGlvbnNdOmNoZWNrZWRcIikudmFsKCk7XG4gIHdpbmRvdy5vcHRpb25zLnN0YXJ0UHJpY2UgPSAkKFwiI3N0YXJ0UHJpY2VcIikudmFsKCk7XG4gIHdpbmRvdy5vcHRpb25zLmVuZFByaWNlID0gJChcIiNlbmRQcmljZVwiKS52YWwoKTtcbiAgd2luZG93Lm9wdGlvbnMucGFya2luZyA9ICQoXCIjY2hlY2tib3gtMVwiKS5wcm9wKFwiY2hlY2tlZFwiKTtcbiAgd2luZG93Lm9wdGlvbnMuZnVybmlzaGVkID0gJChcIiNjaGVja2JveC0yXCIpLnByb3AoXCJjaGVja2VkXCIpO1xuICB3aW5kb3cub3B0aW9ucy5oZWF0aW5nID0gJChcIiNjaGVja2JveC0zXCIpLnByb3AoXCJjaGVja2VkXCIpO1xuICB3aW5kb3cub3B0aW9ucy5jb29saW5nID0gJChcIiNjaGVja2JveC00XCIpLnByb3AoXCJjaGVja2VkXCIpO1xuICB3aW5kb3cub3B0aW9ucy52aWV3ID0gJChcIiNjaGVja2JveC01XCIpLnByb3AoXCJjaGVja2VkXCIpO1xuICBmaWx0ZXJzID0gbmV3IGFwcC5maWx0ZXJzKHdpbmRvdy5vcHRpb25zKTtcbiAgZmlsdGVycy5zZXREZWZhdWx0cygpO1xuICBmaWx0ZXJzLmFqYXhDYWxsKCk7XG59KTtcbiQoXCIjY2xlYXJGaWx0ZXJzXCIpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAkKFwibGFiZWxbZm9yPW9wdGlvbi0xXVwiKS5hZGRDbGFzcyhcImlzLWNoZWNrZWRcIik7XG4gICQoXCJsYWJlbFtmb3I9b3B0aW9uLTJdXCIpLnJlbW92ZUNsYXNzKFwiaXMtY2hlY2tlZFwiKTtcbiAgJChcImxhYmVsW2Zvcj1jaGVja2JveC0xXVwiKS5yZW1vdmVDbGFzcyhcImlzLWNoZWNrZWRcIik7XG4gICQoXCJsYWJlbFtmb3I9Y2hlY2tib3gtMl1cIikucmVtb3ZlQ2xhc3MoXCJpcy1jaGVja2VkXCIpO1xuICAkKFwibGFiZWxbZm9yPWNoZWNrYm94LTNdXCIpLnJlbW92ZUNsYXNzKFwiaXMtY2hlY2tlZFwiKTtcbiAgJChcImxhYmVsW2Zvcj1jaGVja2JveC00XVwiKS5yZW1vdmVDbGFzcyhcImlzLWNoZWNrZWRcIik7XG4gICQoXCJsYWJlbFtmb3I9Y2hlY2tib3gtNV1cIikucmVtb3ZlQ2xhc3MoXCJpcy1jaGVja2VkXCIpO1xuICAkKFwibGFiZWxbZm9yPWNoZWNrYm94LTZdXCIpLnJlbW92ZUNsYXNzKFwiaXMtY2hlY2tlZFwiKTtcbiAgZmlsdGVyZWRFc3RhdGVzLmdldFNvdXJjZSgpLmNsZWFyKCk7XG4gIHByb3BlcnR5LnNldFZpc2libGUodHJ1ZSk7XG4gIFBTQS5zZXRTb3VyY2UobnVsbCk7XG4gIHNlbGVjdFNvdXJjZS5jbGVhcigpO1xuICBtYXAucmVtb3ZlSW50ZXJhY3Rpb24oZHJhdyk7XG59KTtcbnZhciBkcmF3O1xuZnVuY3Rpb24gYWRkSW50ZXJhY3Rpb24oKSB7XG4gIHNlbGVjdFNvdXJjZS5jbGVhcigpO1xuICBkcmF3ID0gbmV3IG9sLmludGVyYWN0aW9uLkRyYXcoe3NvdXJjZTogc2VsZWN0U291cmNlLCB0eXBlOiBcIkxpbmVTdHJpbmdcIiwgZ2VvbWV0cnlGdW5jdGlvbjogZ2VvbWV0cnlGdW5jdGlvbiwgbWF4UG9pbnRzOiAyfSk7XG4gIGRyYXcub24oXCJkcmF3c3RhcnRcIiwgZnVuY3Rpb24oKSB7XG4gICAgc2VsZWN0U291cmNlLmNsZWFyKCk7XG4gIH0pO1xuICBkcmF3Lm9uKFwiZHJhd2VuZFwiLCBmdW5jdGlvbigpIHtcbiAgICBtYXAucmVtb3ZlSW50ZXJhY3Rpb24oZHJhdyk7XG4gIH0pO1xuICBtYXAuYWRkSW50ZXJhY3Rpb24oZHJhdyk7XG59XG5mdW5jdGlvbiBnZW9tZXRyeUZ1bmN0aW9uKGNvb3JkaW5hdGVzLCBnZW9tZXRyeSkge1xuICBpZiAoIWdlb21ldHJ5KSB7XG4gICAgZ2VvbWV0cnkgPSBuZXcgb2wuZ2VvbS5Qb2x5Z29uKG51bGwpO1xuICB9XG4gIHZhciBzdGFydCA9IGNvb3JkaW5hdGVzWzBdO1xuICB2YXIgZW5kID0gY29vcmRpbmF0ZXNbMV07XG4gIGdlb21ldHJ5LnNldENvb3JkaW5hdGVzKFtcbiAgICBbXG4gICAgICBzdGFydCxcbiAgICAgIFtcbiAgICAgICAgc3RhcnRbMF0sIGVuZFsxXVxuICAgICAgXSxcbiAgICAgIGVuZCxcbiAgICAgIFtcbiAgICAgICAgZW5kWzBdLCBzdGFydFsxXVxuICAgICAgXSxcbiAgICAgIHN0YXJ0XG4gICAgXVxuICBdKTtcbiAgcmV0dXJuIGdlb21ldHJ5O1xufVxuJChcIiNjaGVja2JveC02XCIpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICBpZiAodGhpcy5jaGVja2VkKSB7XG4gICAgYWRkSW50ZXJhY3Rpb24oKTtcbiAgfSBlbHNlIHtcbiAgICBtYXAucmVtb3ZlSW50ZXJhY3Rpb24oZHJhdyk7XG4gICAgc2VsZWN0U291cmNlLmNsZWFyKCk7XG4gIH1cbn0pO1xuIiwiZnVuY3Rpb24gaGFuZGxlSW5mbyhldnQpIHtcclxuICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICBtYXAucmVtb3ZlSW50ZXJhY3Rpb24oZHJhdyk7XHJcbiAgdmFyIGNvb3JkaW5hdGUgPSBldnQuY29vcmRpbmF0ZTtcclxuICB2YXIgb2JqID0ge307XHJcbiAgdmFyIHRpdGxlID0ge307XHJcbiAgdmFyIG93bmVyID0ge307XHJcbiAgdmFyIGZlYXR1cmVzID0gW107XHJcbiAgb2JqLnRpdGxlID0gdGl0bGU7XHJcbiAgaWYgKGxhbmcgPT09IFwiZWxcIikge1xyXG4gICAgdGl0bGUuZXN0YXRlQ29kZSA9IFwizprPic60zrnOus+Mz4IgzpnOtM65zr/Ous+EzrfPg86vzrHPglwiO1xyXG4gICAgdGl0bGUudHlwZSA9IFwizqTPjc+Azr/PglwiO1xyXG4gICAgdGl0bGUuYXJlYSA9IFwizpXOvM6yzrHOtM+MXCI7XHJcbiAgICB0aXRsZS5hZGRyZXNzID0gXCLOlM65zrXPhc64z4XOvc+DzrdcIjtcclxuICAgIHRpdGxlLmJlZHJvb21zID0gXCLOpc+Azr3Ov860z4nOvM6sz4TOuc6xXCI7XHJcbiAgICB0aXRsZS5wcmljZSA9IFwizqTOuc68zq5cIjtcclxuICAgIHRpdGxlLm5ldyA9IFwizp3Otc+MzrTOvM63z4TOv1wiO1xyXG4gICAgdGl0bGUucGFya2luZyA9IFwizqPPhM6szrjOvM61z4POt1wiO1xyXG4gICAgdGl0bGUuZnVybmlzaGVkID0gXCLOlc+AzrnPgM67z4nOvM6tzr3Ov1wiO1xyXG4gICAgdGl0bGUucGV0cyA9IFwizprOsc+Ezr/Ouc66zq/OtM65zrFcIjtcclxuICAgIHRpdGxlLnZpZXcgPSBcIs6Yzq3OsVwiO1xyXG4gICAgdGl0bGUuaGVhdGluZyA9IFwizpjOrc+BzrzOsc69z4POt1wiO1xyXG4gICAgdGl0bGUuY29vbGluZyA9IFwizqjPjc6+zrdcIjtcclxuICAgIHRpdGxlLmNvbnRhY3RJbmZvID0gXCLOo8+Ezr/Ouc+HzrXOr86xIM6Vz4DOuc66zr/Ouc69z4nOvc6vzrHPglwiO1xyXG4gICAgdGl0bGUubmFtZSA9IFwizozOvc6/zrzOsVwiO1xyXG4gICAgdGl0bGUubGFzdG5hbWUgPSBcIs6Vz4DOr864zrXPhM6/XCI7XHJcbiAgICB0aXRsZS5waG9uZSA9IFwizqTOt867zq3Phs+Jzr3Ov1wiO1xyXG4gICAgdGl0bGUuZW1haWwgPSBcIs6XzrvOtc66z4TPgc6/zr3Ouc66zq4gzpTOuc61z43OuM+Fzr3Pg863XCI7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRpdGxlLmVzdGF0ZUNvZGUgPSBcIkVzdGF0ZSBDb2RlXCI7XHJcbiAgICB0aXRsZS50eXBlID0gXCJUeXBlXCI7XHJcbiAgICB0aXRsZS5hcmVhID0gXCJTaXplXCI7XHJcbiAgICB0aXRsZS5hZGRyZXNzID0gXCJBZGRyZXNzXCI7XHJcbiAgICB0aXRsZS5iZWRyb29tcyA9IFwiQmVkcm9vbXNcIjtcclxuICAgIHRpdGxlLnByaWNlID0gXCJQcmljZVwiO1xyXG4gICAgdGl0bGUubmV3ID0gXCJOZXdseSBCdWlsZFwiO1xyXG4gICAgdGl0bGUucGFya2luZyA9IFwiUGFya2luZ1wiO1xyXG4gICAgdGl0bGUuZnVybmlzaGVkID0gXCJGdXJuaXNoZWRcIjtcclxuICAgIHRpdGxlLnBldHMgPSBcIlBldHMgQWxsb3dlZFwiO1xyXG4gICAgdGl0bGUudmlldyA9IFwiVmlld1wiO1xyXG4gICAgdGl0bGUuaGVhdGluZyA9IFwiSGVhdGluZ1wiO1xyXG4gICAgdGl0bGUuY29vbGluZyA9IFwiQ29vbGluZ1wiO1xyXG4gICAgdGl0bGUuY29udGFjdEluZm8gPSBcIkNvbnRhY3QgSW5mb1wiO1xyXG4gICAgdGl0bGUubmFtZSA9IFwiTmFtZVwiO1xyXG4gICAgdGl0bGUubGFzdG5hbWUgPSBcIkxhc3QgTmFtZVwiO1xyXG4gICAgdGl0bGUucGhvbmUgPSBcIlRlbGVwaG9uZVwiO1xyXG4gICAgdGl0bGUuZW1haWwgPSBcIkVtYWlsXCI7XHJcbiAgfVxyXG4gIGNsaWNrZWRGZWF0dXJlID0gbWFwLmZvckVhY2hGZWF0dXJlQXRQaXhlbChldnQucGl4ZWwsIGZ1bmN0aW9uKGZlYXR1cmUsIGxheWVyKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBmZWF0dXJlOiBmZWF0dXJlLFxyXG4gICAgICBsYXllcjogbGF5ZXJcclxuICAgIH07XHJcbiAgfSwgdGhpcywgZnVuY3Rpb24obGF5ZXIpIHtcclxuICAgIGlmIChsYXllci5nZXQoXCJpZFwiKSA9PT0gXCJlc3RhdGVzXCIgfHwgbGF5ZXIuZ2V0KFwiaWRcIikgPT09IFwiZmlsdGVyZWRFc3RhdGVzXCIpIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgfSwgdGhpcyk7XHJcbiAgdmFyIGY7XHJcbiAgaWYgKGNsaWNrZWRGZWF0dXJlKSB7XHJcbiAgICBpZiAoY2xpY2tlZEZlYXR1cmUubGF5ZXIuZ2V0KFwiaWRcIikgPT09IFwiZXN0YXRlc1wiICYmIGNsaWNrZWRGZWF0dXJlLmZlYXR1cmUuZ2V0KFwiZmVhdHVyZXNcIikubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgIGYgPSBjbGlja2VkRmVhdHVyZS5mZWF0dXJlLmdldFByb3BlcnRpZXMoKS5mZWF0dXJlc1swXTtcclxuICAgICAgY3JlYXRlUFNBYW5kQ2FyZChmLCBvYmopO1xyXG4gICAgfSBlbHNlIGlmIChjbGlja2VkRmVhdHVyZS5sYXllci5nZXQoXCJpZFwiKSA9PT0gXCJmaWx0ZXJlZEVzdGF0ZXNcIikge1xyXG4gICAgICBmID0gY2xpY2tlZEZlYXR1cmUuZmVhdHVyZTtcclxuICAgICAgY3JlYXRlUFNBYW5kQ2FyZChmLCBvYmopO1xyXG4gICAgfVxyXG4gIH0gZWxzZSB7XHJcbiAgICBQU0Euc2V0U291cmNlKG51bGwpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlUFNBYW5kQ2FyZChmLCBvYmopIHtcclxuICB2YXIgZmVhdHVyZSA9IHt9O1xyXG4gIGZlYXR1cmUuZ2lkID0gZi5nZXQoXCJnaWRcIik7XHJcbiAgZmVhdHVyZS50eXBlID0gZi5nZXQoXCJlc3RhdGV0eXBlXCIpO1xyXG4gIGZlYXR1cmUuYXJlYSA9IGYuZ2V0KFwiZXN0YXRlYXJlYVwiKTtcclxuICBpZiAobGFuZyA9PT0gXCJlbFwiKSB7XHJcbiAgICBmZWF0dXJlLmFkZHJlc3MgPSBmLmdldChcInN0cmVldF9lbFwiKSArIFwiIFwiICsgZi5nZXQoXCJoX251bV9lbFwiKTtcclxuICB9IGVsc2Uge1xyXG4gICAgZmVhdHVyZS5hZGRyZXNzID0gZi5nZXQoXCJzdHJlZXRfZW5cIikgKyBcIiBcIiArIGYuZ2V0KFwiaF9udW1fZW5cIik7XHJcbiAgfVxyXG4gIGZlYXR1cmUuYmVkcm9vbXMgPSBmLmdldChcImJlZHJvb21zXCIpO1xyXG4gIGZlYXR1cmUucHJpY2UgPSBmLmdldChcInByaWNlXCIpO1xyXG4gIGZlYXR1cmUubmV3ID0gZi5nZXQoXCJuZXdcIik7XHJcbiAgZmVhdHVyZS5wYXJraW5nID0gZi5nZXQoXCJwYXJraW5nXCIpO1xyXG4gIGZlYXR1cmUuZnVybmlzaGVkID0gZi5nZXQoXCJmdXJuaXNoZWRcIik7XHJcbiAgZmVhdHVyZS5wZXRzID0gZi5nZXQoXCJwZXRzXCIpO1xyXG4gIGZlYXR1cmUudmlldyA9IGYuZ2V0KFwidmlld1wiKTtcclxuICBmZWF0dXJlLmhlYXRpbmcgPSBmLmdldChcImhlYXRpbmdcIik7XHJcbiAgZmVhdHVyZS5jb29saW5nID0gZi5nZXQoXCJjb29saW5nXCIpO1xyXG4gIGlmIChsYW5nID09PSBcImVsXCIpIHtcclxuICAgIGZlYXR1cmUubmFtZSA9IGYuZ2V0KFwibmFtZV9lbFwiKTtcclxuICAgIGZlYXR1cmUubGFzdG5hbWUgPSBmLmdldChcImxhc3RuYW1lX2VsXCIpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBmZWF0dXJlLm5hbWUgPSBmLmdldChcIm5hbWVfZW5cIik7XHJcbiAgICBmZWF0dXJlLmxhc3RuYW1lID0gZi5nZXQoXCJsYXN0bmFtZV9lblwiKTtcclxuICB9XHJcbiAgZmVhdHVyZS5waG9uZSA9IGYuZ2V0KFwicGhvbmUxXCIpO1xyXG4gIGZlYXR1cmUuZW1haWwgPSBmLmdldChcImVtYWlsXCIpO1xyXG4gIGZlYXR1cmUuY29vcmRpbmF0ZSA9IGYuZ2V0KFwiZ2VvbWV0cnlcIikuZ2V0Q29vcmRpbmF0ZXMoKTtcclxuICB2YXIgUFNBU291cmNlID0gbmV3IG9sLnNvdXJjZS5WZWN0b3Ioe1xyXG4gICAgYXR0cmlidXRpb25zOiBbbmV3IG9sLkF0dHJpYnV0aW9uKHtcclxuICAgICAgaHRtbDogXCJQT0kgYnkgXCIgKyBcIjxhIGhyZWY9XFxcImh0dHA6Ly93d3cudGVycmFjb2duaXRhLmdyL1xcXCI+VGVycmEgQ29nbml0YTwvYT5cIlxyXG4gICAgfSldLFxyXG4gICAgZm9ybWF0OiBnZW9KU09ORm9ybWF0LFxyXG4gICAgbG9hZGVyOiBmdW5jdGlvbihleHRlbnQsIHJlc29sdXRpb24sIHByb2plY3Rpb24pIHtcclxuICAgICAgdmFyIHVybCA9IFwiaHR0cDovL2xvY2FsaG9zdDozMDAwL2RiL3VzZXMvXCIgKyBmZWF0dXJlLmdpZDtcclxuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgIHR5cGU6IFwiR0VUXCIsXHJcbiAgICAgICAgZGF0YVR5cGU6IFwianNvblwiXHJcbiAgICAgIH0pLmRvbmUoZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICB2YXIgZmVhdHVyZXMgPSBnZW9KU09ORm9ybWF0LnJlYWRGZWF0dXJlcyhyZXNwb25zZS5wcm9wZXJ0eV9zZXJ2aWNlc19hbmFseXNpcywge1xyXG4gICAgICAgICAgZmVhdHVyZVByb2plY3Rpb246IFwiRVBTRzozODU3XCJcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgYXJlYSA9IG5ldyBvbC5zdHlsZS5TdHlsZSh7XHJcbiAgICAgICAgICBmaWxsOiBuZXcgb2wuc3R5bGUuRmlsbCh7XHJcbiAgICAgICAgICAgIGNvbG9yOiBbMTU2LCAzOSwgMTc2LCAwLjFdXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGZlYXR1cmVzWzBdLnNldFN0eWxlKGFyZWEpO1xyXG4gICAgICAgIHNlbGYuYWRkRmVhdHVyZXMoZmVhdHVyZXMpO1xyXG4gICAgICB9KS5mYWlsKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiZXJyb3JcIik7XHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIHN0cmF0ZWd5OiBvbC5sb2FkaW5nc3RyYXRlZ3kuYWxsXHJcbiAgfSk7XHJcbiAgUFNBLnNldFNvdXJjZShQU0FTb3VyY2UpO1xyXG4gIG1hcC5nZXRWaWV3KCkuc2V0Q2VudGVyKGZlYXR1cmUuY29vcmRpbmF0ZSk7XHJcbiAgbWFwLmdldFZpZXcoKS5zZXRSZXNvbHV0aW9uKDEuMik7XHJcbiAgb2JqLmZlYXR1cmUgPSBmZWF0dXJlO1xyXG4gIGR1c3QucmVuZGVyKFwiZXN0YXRlQ2FyZHMuZHVzdFwiLCBvYmosIGZ1bmN0aW9uKGVyciwgb3V0KSB7XHJcbiAgICAkKFwiLmVzdGF0ZS1jYXJkc1wiKS5odG1sKG91dCk7XHJcbiAgICAkKFwiLmVzdGF0ZS1jYXJkc1wiKS5hZGRDbGFzcyhcImVzdGF0ZS1jYXJkcy1hY3RpdmVcIik7XHJcbiAgICAvLyAkKFwiI2luZm9ib3hcIikuYWRkQ2xhc3MoXCJ2aXN1YWxseWhpZGRlblwiKTtcclxuICB9KTtcclxuICAkKFwiYVtocmVmPVxcXCIjb3Blbk1vZGFsXFxcIl1cIikuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICBkdXN0LnJlbmRlcihcIm1vZGFsSW5mby5kdXN0XCIsIG9iaiwgZnVuY3Rpb24oZXJyLCBvdXQpIHtcclxuICAgICAgJChcIi5tb2RhbC1jb250ZW50XCIpLmh0bWwob3V0KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG4gICQoXCJhW2hyZWY9XFxcIiNjbG9zZUVzdGF0ZUNhcmRcXFwiXVwiKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICQoXCIuZXN0YXRlLWNhcmRzXCIpLnJlbW92ZUNsYXNzKFwiZXN0YXRlLWNhcmRzLWFjdGl2ZVwiKTtcclxuICB9KTtcclxufVxyXG4kKFwiLmluZm9cIikub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24oZSkge1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuICBQU0Euc2V0U291cmNlKG51bGwpO1xyXG4gIGlmICgkKHRoaXMpLnByb3AoXCJjaGVja2VkXCIpID09PSB0cnVlKSB7XHJcbiAgICBtYXAub24oXCJjbGlja1wiLCBoYW5kbGVJbmZvKTtcclxuICB9IGVsc2Uge1xyXG4gICAgbWFwLnVuKFwiY2xpY2tcIiwgaGFuZGxlSW5mbyk7XHJcbiAgfVxyXG59KTtcclxuIiwiKGZ1bmN0aW9uKCkge1xuICB2YXIgZ2VvbG9jYXRpb24gPSBuZXcgb2wuR2VvbG9jYXRpb24oe1xuICAgIC8vIHRha2UgdGhlIHByb2plY3Rpb24gdG8gdXNlIGZyb20gdGhlIG1hcCdzIHZpZXdcbiAgICBwcm9qZWN0aW9uOiBtYXAuZ2V0VmlldygpLmdldFByb2plY3Rpb24oKSxcbiAgICB0cmFja2luZ09wdGlvbnM6IHtcbiAgICAgIG1heGltdW1BZ2U6IDEwMDAwLFxuICAgICAgZW5hYmxlSGlnaEFjY3VyYWN5OiB0cnVlLFxuICAgICAgdGltZW91dDogNjAwMDAwXG4gICAgfVxuICB9KTtcbiAgdmFyIGFjY3VyYWN5RmVhdHVyZSA9IG5ldyBvbC5GZWF0dXJlKCk7XG4gIGdlb2xvY2F0aW9uLm9uKFwiY2hhbmdlOmFjY3VyYWN5R2VvbWV0cnlcIiwgZnVuY3Rpb24oKSB7XG4gICAgYWNjdXJhY3lGZWF0dXJlLnNldEdlb21ldHJ5KGdlb2xvY2F0aW9uLmdldEFjY3VyYWN5R2VvbWV0cnkoKSk7XG4gIH0pO1xuICB2YXIgcG9zaXRpb25GZWF0dXJlID0gbmV3IG9sLkZlYXR1cmUoKTtcbiAgcG9zaXRpb25GZWF0dXJlLnNldFN0eWxlKG5ldyBvbC5zdHlsZS5TdHlsZSh7XG4gICAgaW1hZ2U6IG5ldyBvbC5zdHlsZS5DaXJjbGUoe1xuICAgICAgcmFkaXVzOiA2LFxuICAgICAgZmlsbDogbmV3IG9sLnN0eWxlLkZpbGwoe2NvbG9yOiBcIiMzMzk5Q0NcIn0pLFxuICAgICAgc3Ryb2tlOiBuZXcgb2wuc3R5bGUuU3Ryb2tlKHtjb2xvcjogXCIjZmZmXCIsIHdpZHRoOiAyfSlcbiAgICB9KVxuICB9KSk7XG4gIC8vIGxpc3RlbiB0byBjaGFuZ2VzIGluIHBvc2l0aW9uXG4gIGdlb2xvY2F0aW9uLm9uKFwiY2hhbmdlOnBvc2l0aW9uXCIsIGZ1bmN0aW9uKCkge1xuICAgIHZhciBjb29yZGluYXRlcyA9IGdlb2xvY2F0aW9uLmdldFBvc2l0aW9uKCk7XG4gICAgcG9zaXRpb25GZWF0dXJlLnNldEdlb21ldHJ5KGNvb3JkaW5hdGVzXG4gICAgICA/IG5ldyBvbC5nZW9tLlBvaW50KGNvb3JkaW5hdGVzKVxuICAgICAgOiBudWxsKTtcbiAgfSk7XG4gIGZlYXR1cmVzT3ZlcmxheVNvdXJjZSA9IG5ldyBvbC5zb3VyY2UuVmVjdG9yKHt9KTtcbiAgdmFyIGZlYXR1cmVzT3ZlcmxheSA9IG5ldyBvbC5sYXllci5WZWN0b3Ioe21hcDogbWFwLCBzb3VyY2U6IGZlYXR1cmVzT3ZlcmxheVNvdXJjZX0pO1xuICAkKFwiLmdlb2xvY2F0aW9uXCIpLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgaWYgKCQodGhpcykucHJvcChcImNoZWNrZWRcIikgPT09IHRydWUpIHtcbiAgICAgIGdlb2xvY2F0aW9uLnNldFRyYWNraW5nKHRydWUpO1xuICAgICAgZmVhdHVyZXNPdmVybGF5U291cmNlLmFkZEZlYXR1cmVzKFtwb3NpdGlvbkZlYXR1cmUsIGFjY3VyYWN5RmVhdHVyZV0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBnZW9sb2NhdGlvbi5zZXRUcmFja2luZyhmYWxzZSk7XG4gICAgICBmZWF0dXJlc092ZXJsYXlTb3VyY2UuY2xlYXIoKTtcbiAgICB9XG4gIH0pO1xufSgpKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgdmFyIG1hcmtlciA9IG5ldyBvbC5GZWF0dXJlKCk7XG4gIHZhciBpY29uU3R5bGUgPSBuZXcgb2wuc3R5bGUuU3R5bGUoe1xuICAgIGltYWdlOiBuZXcgb2wuc3R5bGUuSWNvbigvKiogQHR5cGUge29seC5zdHlsZS5JY29uT3B0aW9uc30gKi9cbiAgICAoe1xuICAgICAgYW5jaG9yOiBbXG4gICAgICAgIDAuNSwgMVxuICAgICAgXSxcbiAgICAgIGFuY2hvclhVbml0czogXCJmcmFjdGlvblwiLFxuICAgICAgYW5jaG9yWVVuaXRzOiBcImZyYWN0aW9uXCIsXG4gICAgICBvcGFjaXR5OiAxLFxuICAgICAgc2NhbGU6IDEsXG4gICAgICBzcmM6IFwiLi4vaW1hZ2VzL21hcC1pY29ucy9waW5zLzI0L3BpbjEucG5nXCIsXG4gICAgICBzbmFwVG9QaXhlbDogZmFsc2VcbiAgICB9KSksXG4gICAgekluZGV4OiAxMDBcbiAgfSk7XG4gIG1hcmtlci5zZXRTdHlsZShpY29uU3R5bGUpO1xuICB2YXIgZmVhdHVyZXNPdmVybGF5U3R5bGUgPSBuZXcgb2wuc3R5bGUuU3R5bGUoe1xuICAgIHN0cm9rZTogbmV3IG9sLnN0eWxlLlN0cm9rZSh7XG4gICAgICBjb2xvcjogXCIjNDA4MDgwXCIsXG4gICAgICB3aWR0aDogNSxcbiAgICAgIGxpbmVEYXNoOiBbNCwgNF1cbiAgICB9KVxuICB9KTtcbiAgdmFyIGZlYXR1cmVzT3ZlcmxheSA9IG5ldyBvbC5sYXllci5WZWN0b3Ioe1xuICAgIG1hcDogbWFwLFxuICAgIHNvdXJjZTogbmV3IG9sLnNvdXJjZS5WZWN0b3IoKSxcbiAgICBzdHlsZTogZmVhdHVyZXNPdmVybGF5U3R5bGUsXG4gICAgaWQ6IFwicm91dGVcIixcbiAgICBuYW1lRWw6IFwizpTOuc6xzrTPgc6/zrzOrlwiLFxuICAgIE5hbWVFbjogXCJSb3V0ZVwiXG4gIH0pO1xuICB2YXIgcm91dGVDb29yZHMgPSBbXTtcbiAgZnVuY3Rpb24gaGFuZGxlTWFya2VyKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB2YXIgZmVhdHVyZUNvdW50ID0gZmVhdHVyZXNPdmVybGF5LmdldFNvdXJjZSgpLmdldEZlYXR1cmVzKCkubGVuZ3RoO1xuICAgIHZhciBjb29yZGluYXRlcyA9IGV2ZW50LmNvb3JkaW5hdGU7XG4gICAgaWYgKGZlYXR1cmVDb3VudCA9PT0gMCkge1xuICAgICAgbWFya2VyLnNldEdlb21ldHJ5KG5ldyBvbC5nZW9tLlBvaW50KGNvb3JkaW5hdGVzKSk7XG4gICAgICBtYXJrZXIuc2V0SWQoXCJmaXJzdFwiKTtcbiAgICAgIGZlYXR1cmVzT3ZlcmxheS5nZXRTb3VyY2UoKS5hZGRGZWF0dXJlKG1hcmtlcik7XG4gICAgICByb3V0ZUNvb3Jkc1swXSA9IGNvb3JkaW5hdGVzWzBdO1xuICAgICAgcm91dGVDb29yZHNbMV0gPSBjb29yZGluYXRlc1sxXTtcbiAgICB9IGVsc2UgaWYgKGZlYXR1cmVDb3VudCA9PT0gMSkge1xuICAgICAgdmFyIGNsb25lID0gbWFya2VyLmNsb25lKCk7XG4gICAgICBjbG9uZS5zZXRHZW9tZXRyeShuZXcgb2wuZ2VvbS5Qb2ludChjb29yZGluYXRlcykpO1xuICAgICAgY2xvbmUuc2V0SWQoXCJzZWNvbmRcIik7XG4gICAgICBmZWF0dXJlc092ZXJsYXkuZ2V0U291cmNlKCkuYWRkRmVhdHVyZShjbG9uZSk7XG4gICAgICByb3V0ZUNvb3Jkc1syXSA9IGNvb3JkaW5hdGVzWzBdO1xuICAgICAgcm91dGVDb29yZHNbM10gPSBjb29yZGluYXRlc1sxXTtcbiAgICAgIGNhbGxSb3V0ZShyb3V0ZUNvb3Jkcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZlYXR1cmVzT3ZlcmxheS5nZXRTb3VyY2UoKS5jbGVhcigpO1xuICAgIH1cbiAgfVxuICBnZW9KU09ORm9ybWF0ID0gbmV3IG9sLmZvcm1hdC5HZW9KU09OKHtkZWZhdWx0RGF0YVByb2plY3Rpb246IFwiRVBTRzo0MzI2XCIsIGdlb21ldHJ5TmFtZTogXCJnZW9tZXRyeVwifSk7XG4gIGZ1bmN0aW9uIGNhbGxSb3V0ZShyb3V0ZUNvb3Jkcykge1xuICAgIHZhciBmaXJzdCA9IG9sLnByb2oudHJhbnNmb3JtKFtcbiAgICAgIHJvdXRlQ29vcmRzWzBdLCByb3V0ZUNvb3Jkc1sxXVxuICAgIF0sIFwiRVBTRzozODU3XCIsIFwiRVBTRzo0MzI2XCIpO1xuICAgIHZhciBzZWNvbmQgPSBvbC5wcm9qLnRyYW5zZm9ybShbXG4gICAgICByb3V0ZUNvb3Jkc1syXSwgcm91dGVDb29yZHNbM11cbiAgICBdLCBcIkVQU0c6Mzg1N1wiLCBcIkVQU0c6NDMyNlwiKTtcbiAgICB2YXIgeDEgPSBmaXJzdFswXTtcbiAgICB2YXIgeTEgPSBmaXJzdFsxXTtcbiAgICB2YXIgeDIgPSBzZWNvbmRbMF07XG4gICAgdmFyIHkyID0gc2Vjb25kWzFdO1xuICAgICQuYWpheCh7XG4gICAgICB1cmw6IFwiaHR0cHM6Ly9hcGkubWFwYm94LmNvbS92NC9kaXJlY3Rpb25zL21hcGJveC5kcml2aW5nL1wiICsgeDEgKyBcIixcIiArIHkxICsgXCI7XCIgKyB4MiArIFwiLFwiICsgeTIgKyBcIi5qc29uP2FsdGVybmF0aXZlcz1mYWxzZSZhY2Nlc3NfdG9rZW49cGsuZXlKMUlqb2labWx5ZG1GcGJpSXNJbUVpT2lKbE9XWXlZVE0wTlRoaU5XTTBZakpqT0RKak5ERTRPRFF6TnpBMk1HUXlOaUo5Li1OVkRPMjdIenQtd19uUW9zVVBmTEFcIixcbiAgICAgIHR5cGU6IFwiR0VUXCIsXG4gICAgICBkYXRhVHlwZTogXCJqc29uXCJcbiAgICB9KS5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIHZhciByb3V0ZSA9IHt9O1xuICAgICAgcm91dGUudHlwZSA9IFwiRmVhdHVyZVwiO1xuICAgICAgcm91dGUuZ2VvbWV0cnkgPSBkYXRhLnJvdXRlc1swXS5nZW9tZXRyeTtcbiAgICAgIGZlYXR1cmVzT3ZlcmxheS5nZXRTb3VyY2UoKS5hZGRGZWF0dXJlcyhnZW9KU09ORm9ybWF0LnJlYWRGZWF0dXJlcyhyb3V0ZSwge1xuICAgICAgICBkYXRhUHJvamVjdGlvbjogXCJFUFNHOjQzMjZcIixcbiAgICAgICAgZmVhdHVyZVByb2plY3Rpb246IFwiRVBTRzozODU3XCJcbiAgICAgIH0pKTtcbiAgICAgIG1hcC5nZXRWaWV3KCkuZml0KGZlYXR1cmVzT3ZlcmxheS5nZXRTb3VyY2UoKS5nZXRFeHRlbnQoKSwgbWFwLmdldFNpemUoKSk7XG4gICAgfSkuZmFpbChmdW5jdGlvbigpIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiZXJyb3JcIik7XG4gICAgfSkuYWx3YXlzKGZ1bmN0aW9uKCkge1xuICAgICAgLy8gY29uc29sZS5sb2coXCJjb21wbGV0ZVwiKTtcbiAgICB9KTtcbiAgfVxuICAkKFwiLm1hcmtlclwiKS5vbihcImNoYW5nZVwiLCBmdW5jdGlvbihldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgLyogQWN0IG9uIHRoZSBldmVudCAqL1xuICAgIGlmICgkKHRoaXMpLnByb3AoXCJjaGVja2VkXCIpID09PSB0cnVlKSB7XG4gICAgICBtYXAub24oXCJzaW5nbGVjbGlja1wiLCBoYW5kbGVNYXJrZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBtYXAudW4oXCJzaW5nbGVjbGlja1wiLCBoYW5kbGVNYXJrZXIpO1xuICAgICAgZmVhdHVyZXNPdmVybGF5LmdldFNvdXJjZSgpLmNsZWFyKCk7XG4gICAgfVxuICB9KTtcbn0oKSk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICQoXCIud2VhdGhlclwiKS5jaGFuZ2UoZnVuY3Rpb24oKSB7XG4gICAgaWYgKCQodGhpcykucHJvcChcImNoZWNrZWRcIikgPT09IHRydWUpIHtcbiAgICAgIG1hcC5nZXRPdmVybGF5cygpLmZvckVhY2goZnVuY3Rpb24ob3ZsKSB7XG4gICAgICAgIGlmIChvdmwuZ2V0KFwibmFtZVwiKSA9PT0gXCJ3ZWF0aGVyXCIpIHtcbiAgICAgICAgICAoJChvdmwuZ2V0RWxlbWVudCgpKS5wYXJlbnQoKSkucmVtb3ZlKCk7XG4gICAgICAgICAgJChvdmwuZ2V0RWxlbWVudCgpKS5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB2YXIgY2VudGVyID0gb2wucHJvai50cmFuc2Zvcm0obWFwLmdldFZpZXcoKS5nZXRDZW50ZXIoKSwgXCJFUFNHOjM4NTdcIiwgXCJFUFNHOjQzMjZcIik7XG4gICAgICB2YXIgbGF0ID0gY2VudGVyWzFdO1xuICAgICAgdmFyIGxvbiA9IGNlbnRlclswXTtcbiAgICAgICQuYWpheCh7XG4gICAgICAgIHVybDogXCJodHRwOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9kYXRhLzIuNS9maW5kP2xhdD1cIiArIGxhdCArIFwiJmxvbj1cIiArIGxvbiArIFwiJmNudD01JmNsdXN0ZXI9bm8mdW5pdHM9bWV0cmljJnR5cGU9YWNjdXJhdGUmQVBQSUQ9ZjljZDlmYTJjNDI3YzNiMTE1ZTg3ZTQ4NjI2MTljNWNcIixcbiAgICAgICAgdHlwZTogXCJHRVRcIixcbiAgICAgICAgZGF0YVR5cGU6IFwianNvblwiXG4gICAgICB9KS5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlV2VhdGhlck92ZXJsYXkocG9zaXRpb24sIGluZGV4KSB7XG4gICAgICAgICAgdmFyIGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgIGVsZW0uc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJ3ZWF0aGVyLXBvcHVwIGRlZmF1bHQtcHJpbWFyeS1jb2xvciBtZGwtc2hhZG93LS02ZHBcIik7XG4gICAgICAgICAgZWxlbS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBpbmRleCk7XG4gICAgICAgICAgZWxlbS5zZXRBdHRyaWJ1dGUoXCJkYXRhLW5hbWVcIiwgXCJ3ZWF0aGVyXCIpO1xuICAgICAgICAgIHJldHVybiBuZXcgb2wuT3ZlcmxheSh7ZWxlbWVudDogZWxlbSwgcG9zaXRpb246IHBvc2l0aW9ufSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG9ianMgPSBkYXRhLmxpc3Q7XG4gICAgICAgIHZhciBvdmVybGF5LFxuICAgICAgICAgIGNvb3JkaW5hdGVzO1xuICAgICAgICAkLmVhY2gob2JqcywgZnVuY3Rpb24oaW5kZXgsIHZhbCkge1xuICAgICAgICAgIGNvb3JkaW5hdGVzID0gb2wucHJvai50cmFuc2Zvcm0oW1xuICAgICAgICAgICAgdmFsLmNvb3JkLmxvbiwgdmFsLmNvb3JkLmxhdFxuICAgICAgICAgIF0sIFwiRVBTRzo0MzI2XCIsIFwiRVBTRzozODU3XCIpO1xuICAgICAgICAgIG92ZXJsYXkgPSBjcmVhdGVXZWF0aGVyT3ZlcmxheShjb29yZGluYXRlcywgaW5kZXgpO1xuICAgICAgICAgIG1hcC5hZGRPdmVybGF5KG92ZXJsYXkpO1xuICAgICAgICAgIG92ZXJsYXkuc2V0KFwibmFtZVwiLCBcIndlYXRoZXJcIik7XG4gICAgICAgICAgd2VhdGhlckRhdGEgPSB7XG4gICAgICAgICAgICBcIm5hbWVcIjogdmFsLm5hbWUsXG4gICAgICAgICAgICBcInRlbXBcIjogdmFsLm1haW4udGVtcCxcbiAgICAgICAgICAgIFwicHJlc3N1cmVcIjogdmFsLm1haW4ucHJlc3N1cmUsXG4gICAgICAgICAgICBcImh1bWlkaXR5XCI6IHZhbC5tYWluLmh1bWlkaXR5XG4gICAgICAgICAgfTtcbiAgICAgICAgICBkdXN0LnJlbmRlcihcIndlYXRoZXJQb3B1cC5kdXN0XCIsIHdlYXRoZXJEYXRhLCBmdW5jdGlvbihlcnIsIG91dCkge1xuICAgICAgICAgICAgJChcIiNcIiArIGluZGV4KS5odG1sKG91dCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSkuZmFpbChmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gdG9hc3RyLmVycm9yKFwizpTOtc69IM6yz4HOrc64zrfOus6xzr0gz4DOu863z4HOv8+Gzr/Pgc6vzrXPgiDOs865zrEgz4TOuc+CIM66zrHOuc+BzrnOus6tz4Igz4PPhc69zrjOrs66zrXPgiFcIik7XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKCQodGhpcykucHJvcChcImNoZWNrZWRcIikgPT09IGZhbHNlKSB7XG4gICAgICBtYXAuZ2V0T3ZlcmxheXMoKS5mb3JFYWNoKGZ1bmN0aW9uKG92bCkge1xuICAgICAgICBpZiAob3ZsLmdldChcIm5hbWVcIikgPT09IFwid2VhdGhlclwiKSB7XG4gICAgICAgICAgKCQob3ZsLmdldEVsZW1lbnQoKSkucGFyZW50KCkpLnJlbW92ZSgpO1xuICAgICAgICAgICQob3ZsLmdldEVsZW1lbnQoKSkucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG59KCkpO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
