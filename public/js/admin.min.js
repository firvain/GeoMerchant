function PropertyStyle(){var e="../images/map-icons/pins/48/pin1.png";return new ol.style.Style({image:new ol.style.Icon({src:e,anchor:[.5,1],scale:.7})})}function clickInfo(e){var t,o,n={};o=new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 0, 0, 0.2)"}),stroke:new ol.style.Stroke({color:"#FF00003",width:2}),image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"#FF0000"})})}),e.preventDefault(),t=map.forEachFeatureAtPixel(e.pixel,function(e,t){return{feature:e,layer:t}},this,function(e){return"property"===e.get("id")?!0:void 0},this),t?(n.feature={},t.feature.setStyle(o),t.feature.getKeys().forEach(function(e){n.feature[e]=t.feature.get(e)}),dust.render("adminPropertyInfo",n,function(e,o){$(".property-info").html(o),$(".property-info").removeClass("visuallyhidden"),componentHandler.upgradeDom(),$("#listing").on("click",function(e){var o;e.preventDefault(),o=$(this).data("gid"),$.ajax({url:"http://127.0.0.1:3000/db/listing",type:"GET",dataType:"json",data:{gid:o}}).done(function(e){console.log(e);var n=e.id;$(".modal-dialog").removeClass("visuallyhidden"),dust.render("listingInsert",e,function(e,a){$(".modal-content").html(a),componentHandler.upgradeDom(),handleForm.set({name:"insert-update-listing",submitBtnId:"ok"}),$("#sent-listing").on("click",function(e){var a;e.preventDefault(),a=handleForm.get(),null!==a&&(a.property_gid=o,a.listing_id=n,$.ajax({url:"http://127.0.0.1:3000/db/listing/update",type:"POST",data:a,dataType:"text"}).done(function(e,t,o){201===o.status?toastr.success("Property Updated In Database"):toastr.error("Oops Something Went Wrong!!!")}).fail(function(e,t,o){toastr.error("Oops Something Went Wrong!!!")}).always(function(){handleForm.clear(),$("#openModal").addClass("visuallyhidden"),propertySource.clear(),t.feature.setStyle(null)}))}),$("#cancel-listing").on("click",function(e){e.preventDefault(),handleForm.clear(),t.feature.setStyle(null),$("#openModal").addClass("visuallyhidden")})})}).fail(function(){var e={};"el"===lang?(e.msg="Δεν Βρέθηκε Αγγελία",e.text="Δημιουργία Καινούργιας;",e.yes="ΝΑΙ",e.no="ΟΧΙ"):(e.msg="No Listing Found",e.text="Create New Listing?",e.yes="YES",e.no="NO"),dust.render("dialog",e,function(e,n){$("#openModal").removeClass("visuallyhidden"),$(".modal-content").html(n),componentHandler.upgradeDom(),$("#yes").on("click",function(e){e.preventDefault(),dust.render("listingInsert",{},function(e,n){$(".modal-content").html(n),componentHandler.upgradeDom(),handleForm.set({name:"insert-update-listing",submitBtnId:"ok"}),$("#sent-listing").on("click",function(e){var n;e.preventDefault(),n=handleForm.get(),null!==n&&(n.property_gid=o,$.ajax({url:"http://127.0.0.1:3000/db/listing/insert",type:"POST",data:n,dataType:"text"}).done(function(e,t,o){201===o.status?toastr.success("Property Updated In Database"):toastr.error("Oops Something Went Wrong!!!")}).fail(function(e,t,o){toastr.error("Oops Something Went Wrong!!!")}).always(function(){handleForm.clear(),$("#openModal").addClass("visuallyhidden"),t.feature.setStyle(null)}))}),$("#cancel-listing").on("click",function(e){e.preventDefault(),handleForm.clear(),t.feature.setStyle(null),$("#openModal").addClass("visuallyhidden")})})}),$("#no").on("click",function(e){e.preventDefault(),$("#openModal").addClass("visuallyhidden"),t.feature.setStyle(null)})})})})})):(propertySource.forEachFeature(function(e){e.setStyle(null)}),$(".property-info").addClass("visuallyhidden"),toastr.options={positionClass:"toast-bottom-full-width",preventDuplicates:!0,timeOut:60},toastr.error("Cant Find Any Property There..."))}var center=[3677385,4120949],extent=[3590094,4102833,3855483,4261211],lang=document.documentElement.lang,geoJSONFormat=new ol.format.GeoJSON({defaultDataProjection:"EPSG:4326"}),propertySource,property,map,features,drawnProperties,draw,select,translate,bing=new ol.layer.Tile({visible:!0,source:new ol.source.BingMaps({key:"Ak2Gq8VUfICsPpuf7LRANXmXt2sHWmSLPhohmVLFtFIEwYjs_5MCyAhAFwRSVpLj",imagerySet:"Aerial"}),maxZoom:19,crossOrigin:"anonymous",preload:1/0,id:"bing"}),mapbox=new ol.layer.Tile({source:new ol.source.XYZ({attributions:[new ol.Attribution({html:'<a href="https://www.mapbox.com/about/maps/" target="_blank">&copy; Mapbox &copy; OpenStreetMap</a>'})],url:"https://api.mapbox.com/v4/mapbox.streets/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiZmlydmFpbiIsImEiOiJlOWYyYTM0NThiNWM0YjJjODJjNDE4ODQzNzA2MGQyNiJ9.-NVDO27Hzt-w_nQosUPfLA"}),id:"mapbox"});propertySource=new ol.source.Vector({format:geoJSONFormat,loader:function(e,t,o){var n="http://127.0.0.1:3000/db/admin",a=this;a.clear(),$.ajax({url:n,type:"POST",beforeSend:function(e){localStorage.getItem("userToken")&&e.setRequestHeader("Authorization","Bearer "+localStorage.getItem("userToken"))},dataType:"json",data:{id:id}}).done(function(e){var t=geoJSONFormat.readFeatures(e,{featureProjection:"EPSG:3857"});a.addFeatures(t)}).fail(function(){console.log("error")})},strategy:ol.loadingstrategy.all}),property=new ol.layer.Vector({source:propertySource,id:"property",visible:!0,style:PropertyStyle()}),property.setZIndex(2),map=new ol.Map({target:"adminMap",layers:[mapbox,property],loadTilesWhileAnimating:!0,loadTilesWhileInteracting:!0,renderer:"canvas",controls:ol.control.defaults({attributionOptions:{collapsible:!1,collapsed:!1}}).extend([new ol.control.ScaleLine({units:"metric"}),new ol.control.OverviewMap({className:"ol-overviewmap ol-custom-overviewmap",collapsible:!0,collapsed:!0,layers:[bing]}),new ol.control.ZoomToExtent({extent:extent})]),view:new ol.View({center:center,projection:"EPSG:3857",zoom:14,maxZoom:19,minZoom:10})}),"el"===lang?(bing.set("name","Δορυφορική εικόνα"),mapbox.set("name","Χάρτης"),property.set("name","Ακίνητα")):(bing.set("name","Sattelite Image"),mapbox.set("name","Map"),property.set("name","Properties")),features=new ol.Collection,drawnProperties=new ol.layer.Vector({source:new ol.source.Vector,style:new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.2)"}),stroke:new ol.style.Stroke({color:"#ffcc33",width:2}),image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"#ffcc33"})})}),id:"drawnProperties"}),map.addLayer(drawnProperties),draw=new ol.interaction.Draw({source:drawnProperties.getSource(),type:"Point",style:new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.2)"}),stroke:new ol.style.Stroke({color:"#ffcc33",width:2}),image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"#ffcc33"})})})}),map.addInteraction(draw),draw.setActive(!1),select=new ol.interaction.Select({layers:[property],features:features,style:new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 0, 0, 0.2)"}),stroke:new ol.style.Stroke({color:"#FF00003",width:2}),image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"#FF0000"})})})}),map.addInteraction(select),select.setActive(!1),translate=new ol.interaction.Translate({features:select.getFeatures()}),map.addInteraction(translate),translate.setActive(!1),map.on("click",clickInfo),$("#logout").click(function(){location.href="/map/logout"}),$("#insertProperty").click(function(){$(".property-info").addClass("visuallyhidden"),toastr.options={positionClass:"toast-top-center",preventDuplicates:!0,timeOut:60},map.un("click",clickInfo),select.setActive(!1),draw.setActive(!0),draw.on("drawend",function(e){var t={};e.preventDefault(),draw.setActive(!1),$(".modal-dialog").removeClass("visuallyhidden"),dust.render("propertyInsert",t,function(e,t){$(".modal-content").html(t),componentHandler.upgradeDom(),handleForm.set({name:"insertProperty",submitBtnId:"insert"}),$("#cancelInsert").on("click",function(e){e.preventDefault(),handleForm.clear(),drawnProperties.getSource().clear(),$(".modal-dialog").addClass("visuallyhidden"),map.on("click",clickInfo)}),$("#insert").on("click",function(e){var t,o;e.preventDefault(),t=handleForm.get(),console.log(t),null!==t&&(handleCoords.setLayer("drawnProperties"),o=handleCoords.coords(),t.x=o[0],t.y=o[1],t.adminId=id,$.ajax({url:"http://127.0.0.1:3000/db/insert",type:"POST",data:t}).done(function(e,t,o){toastr.options={positionClass:"toast-bottom-full-width",preventDuplicates:!0,timeOut:60},201===o.status?toastr.success("Property Recorded In Database"):toastr.error("Oops Something Went Wrong!!!")}).fail(function(e,t,o){toastr.error("Oops Something Went Wrong!!!")}).always(function(){e.preventDefault(),drawnProperties.getSource().clear(),propertySource.clear(),handleForm.clear(),$(".modal-dialog").addClass("visuallyhidden"),map.on("click",clickInfo)}))})})})}),$("#deleteProperty").click(function(e){e.preventDefault(),$(".property-info").addClass("visuallyhidden"),toastr.options={positionClass:"toast-top-center",preventDuplicates:!0,timeOut:20},map.un("click",clickInfo),draw.setActive(!1),features.clear(),propertySource.clear(),select.setActive(!0),select.once("select",function(e){var t;1===e.target.getFeatures().getLength()&&(toastr.options.newestOnTop=!0,toastr.options.preventDuplicates=!0,toastr.options.extendedTimeOut=0,toastr.options.timeOut=0,toastr.options.closeButton=!0,t=toastr.warning('<p>Are you sure?</p><div class="toastr-btns"><button id="yesDelete" class="mdl-button mdl-js-button ">Yes</button><button id="noDelete" class="mdl-button mdl-js-button">No</button></div>'),t.on("click","#yesDelete",function(){var e=select.getFeatures().item(0).get("gid");$.ajax({url:"http://127.0.0.1:3000/db/delete",type:"POST",dataType:"text",data:{gid:e}}).done(function(e,t,o){toastr.options={positionClass:"toast-bottom-full-width",preventDuplicates:!0,timeOut:60},toastr.success("Property Deleted From Database")}).fail(function(e,t,o){toastr.options={positionClass:"toast-bottom-full-width",preventDuplicates:!0,timeOut:60},toastr.success("Oops Something Went Wrong!!!")}).always(function(){propertySource.clear(),select.getFeatures().clear(),select.setActive(!1),map.on("click",clickInfo)}),t.remove()}),t.on("click","#noDelete",function(){t.remove(),select.getFeatures().clear(),select.setActive(!1)}))})}),$("#updateProperty").on("click",function(e){var t,o;e.preventDefault(),map.un("click",clickInfo),draw.setActive(!1),features.clear(),propertySource.clear(),select.setActive(!0),translate.setActive(!0),$(".property-info").addClass("visuallyhidden"),select.once("select",function(e){1===select.getFeatures().getLength()&&(t=select.getFeatures().item(0).get("gid"),$.ajax({url:"http://127.0.0.1:3000/db/fetch",type:"POST",dataType:"json",data:{gid:t}}).done(function(e){o=_.head(e.features).properties}).fail(function(){toastr.error("Oops Something Went Wrong!!!")}).always(function(){console.log("complete")}))}),translate.on("translateend",function(e){var n=ol.proj.transform(e.coordinate,"EPSG:3857","EPSG:4326");$(".modal-dialog").removeClass("visuallyhidden"),dust.render("propertyUpdate",o,function(e,o){$(".modal-content").html(o),componentHandler.upgradeDom(),handleForm.set({name:"updateProperty",submitBtnId:"update"}),$("#update").on("click",function(e){var o;e.preventDefault(),o=handleForm.get(),_.isNil(o)||(o.x=n[0],o.y=n[1],o.gid=t,$.ajax({url:"http://127.0.0.1:3000/db/update",type:"POST",data:o}).done(function(e,t,o){toastr.options={positionClass:"toast-bottom-full-width",preventDuplicates:!0,timeOut:60},200===o.status?toastr.success("Property Updated In Database"):toastr.error("Oops Something Went Wrong!!!")}).fail(function(){toastr.error("Oops Something Went Wrong!!!")}).always(function(){propertySource.clear(),select.getFeatures().clear(),select.setActive(!1),translate.setActive(!1),map.on("click",clickInfo),$(".modal-dialog").addClass("visuallyhidden")}))}),$("#cancelUpdate").on("click",function(e){e.preventDefault(),handleForm.clear(),propertySource.clear(),select.getFeatures().clear(),select.setActive(!1),translate.setActive(!1),map.on("click",clickInfo),$(".modal-dialog").addClass("visuallyhidden"),map.on("click",clickInfo)})}),$("#adminMap").removeAttr("style")})}),$(document).ready(function(){window.Parsley.on("field:error",function(){console.log("Validation failed for: ",this.$element)}),window.Parsley.addValidator("date",{requirementType:"string",validateString:function(e,t){return moment(e,"DD-MM-YYYY",!0).isValid()===!0?!0:!1},messages:{en:"Wrong Date",el:"Λάθος Ημερομηνία"}}),window.Parsley.addValidator("salerenten",{requirementType:"string",validateString:function(e,t){return"Sale"===e||"Rent"===e?!0:!1},messages:{en:"Please Type Sale or Rent",el:"Παρακαλώ πληκρολογήστε Sale ή Rent"}}),window.Parsley.addValidator("salerentel",{requirementType:"string",validateString:function(e,t){return"Πώληση"===e||"Ενοικίαση"===e?!0:!1},messages:{en:"Please Type Πώληση or Ενοικίαση",el:"Παρακαλώ πληκρολογήστε Πώληση ή Ενοικίαση"}})});var handleCoords=function(e){"use strict";function t(e){for(var t=map.getLayers(),o=t.getLength(),n=0;o>n;n++)if(e===t.item(n).get("id"))return t.item(n);return null}function o(e){r=t(e)}function n(){var t;return t=r.getSource().getFeatures()[0].getGeometry().getCoordinates(),a=e.proj.transform(t,"EPSG:3857","EPSG:4326")}var a,r;return{coords:n,setLayer:o}}(ol),handleForm=function(e,t){"use strict";function o(e){s=e.name,c=e.submitBtnId}function n(){return d=e('form[name="'+s+'"').parsley(),!0}function a(){d.destroy()}function r(){return d.validate()}function l(){var t={};return n(),r()===!0?(e('form[name="'+s+'"').find(".mdl-textfield__input").each(function(o,n){t[e(this).attr("id")]=e(this).val()}),e('form[name="'+s+'"').find(".mdl-checkbox__input").each(function(o,n){t[e(this).attr("id")]=e(this).prop("checked")}),t):null}function i(){1==n()&&a(),e('form[name="'+s+'"').find(".mdl-textfield__input").each(function(t,o){e(this).val(""),e(this).parent().eq(0).removeClass("is-dirty"),e(this).parent().eq(0).removeClass("is-invalid")}),e('form[name="'+s+'"').find(".mdl-checkbox__input").each(function(t,o){e(this).prop("checked",!1)}),e('form[name="'+s+'"').find(".mdl-checkbox").each(function(t,o){e(this).removeClass("is-checked")})}var s,c,d;return{set:o,get:l,clear:i}}(jQuery,parsley);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkbWluLmpzIiwiaGFuZGxlQ29vcmRzLmpzIiwiaGFuZGxlRm9ybS5qcyJdLCJuYW1lcyI6WyJQcm9wZXJ0eVN0eWxlIiwic3JjIiwib2wiLCJzdHlsZSIsIlN0eWxlIiwiaW1hZ2UiLCJJY29uIiwiYW5jaG9yIiwic2NhbGUiLCJjbGlja0luZm8iLCJldmVudCIsImNsaWNrZWRGZWF0dXJlIiwiY2xpY2tlZEZlYXR1cmVTdHlsZSIsIm9iaiIsImZpbGwiLCJGaWxsIiwiY29sb3IiLCJzdHJva2UiLCJTdHJva2UiLCJ3aWR0aCIsIkNpcmNsZSIsInJhZGl1cyIsInByZXZlbnREZWZhdWx0IiwibWFwIiwiZm9yRWFjaEZlYXR1cmVBdFBpeGVsIiwicGl4ZWwiLCJmZWF0dXJlIiwibGF5ZXIiLCJ0aGlzIiwiZ2V0Iiwic2V0U3R5bGUiLCJnZXRLZXlzIiwiZm9yRWFjaCIsImtleSIsImR1c3QiLCJyZW5kZXIiLCJlcnIiLCJvdXQiLCIkIiwiaHRtbCIsInJlbW92ZUNsYXNzIiwiY29tcG9uZW50SGFuZGxlciIsInVwZ3JhZGVEb20iLCJvbiIsImdpZCIsImRhdGEiLCJhamF4IiwidXJsIiwidHlwZSIsImRhdGFUeXBlIiwiZG9uZSIsImNvbnNvbGUiLCJsb2ciLCJsaXN0aW5nX2lkIiwiaWQiLCJoYW5kbGVGb3JtIiwic2V0IiwibmFtZSIsInN1Ym1pdEJ0bklkIiwicHJvcGVydHlfZ2lkIiwidGV4dFN0YXR1cyIsImpxWEhSIiwic3RhdHVzIiwidG9hc3RyIiwic3VjY2VzcyIsImVycm9yIiwiZmFpbCIsImVycm9yVGhyb3duIiwiYWx3YXlzIiwiY2xlYXIiLCJhZGRDbGFzcyIsInByb3BlcnR5U291cmNlIiwibGFuZyIsIm1zZyIsInRleHQiLCJ5ZXMiLCJubyIsImZvckVhY2hGZWF0dXJlIiwiZiIsIm9wdGlvbnMiLCJwb3NpdGlvbkNsYXNzIiwicHJldmVudER1cGxpY2F0ZXMiLCJ0aW1lT3V0IiwiY2VudGVyIiwiZXh0ZW50IiwiZG9jdW1lbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJnZW9KU09ORm9ybWF0IiwiZm9ybWF0IiwiR2VvSlNPTiIsImRlZmF1bHREYXRhUHJvamVjdGlvbiIsInByb3BlcnR5IiwiZmVhdHVyZXMiLCJkcmF3blByb3BlcnRpZXMiLCJkcmF3Iiwic2VsZWN0IiwidHJhbnNsYXRlIiwiYmluZyIsIlRpbGUiLCJ2aXNpYmxlIiwic291cmNlIiwiQmluZ01hcHMiLCJpbWFnZXJ5U2V0IiwibWF4Wm9vbSIsImNyb3NzT3JpZ2luIiwicHJlbG9hZCIsIkluZmluaXR5IiwibWFwYm94IiwiWFlaIiwiYXR0cmlidXRpb25zIiwiQXR0cmlidXRpb24iLCJWZWN0b3IiLCJsb2FkZXIiLCJyZXNvbHV0aW9uIiwicHJvamVjdGlvbiIsInNlbGYiLCJiZWZvcmVTZW5kIiwieGhyIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInNldFJlcXVlc3RIZWFkZXIiLCJyZXNwb25zZSIsInJlYWRGZWF0dXJlcyIsImZlYXR1cmVQcm9qZWN0aW9uIiwiYWRkRmVhdHVyZXMiLCJzdHJhdGVneSIsImxvYWRpbmdzdHJhdGVneSIsImFsbCIsInNldFpJbmRleCIsIk1hcCIsInRhcmdldCIsImxheWVycyIsImxvYWRUaWxlc1doaWxlQW5pbWF0aW5nIiwibG9hZFRpbGVzV2hpbGVJbnRlcmFjdGluZyIsInJlbmRlcmVyIiwiY29udHJvbHMiLCJjb250cm9sIiwiZGVmYXVsdHMiLCJhdHRyaWJ1dGlvbk9wdGlvbnMiLCJjb2xsYXBzaWJsZSIsImNvbGxhcHNlZCIsImV4dGVuZCIsIlNjYWxlTGluZSIsInVuaXRzIiwiT3ZlcnZpZXdNYXAiLCJjbGFzc05hbWUiLCJab29tVG9FeHRlbnQiLCJ2aWV3IiwiVmlldyIsInpvb20iLCJtaW5ab29tIiwiQ29sbGVjdGlvbiIsImFkZExheWVyIiwiaW50ZXJhY3Rpb24iLCJEcmF3IiwiZ2V0U291cmNlIiwiYWRkSW50ZXJhY3Rpb24iLCJzZXRBY3RpdmUiLCJTZWxlY3QiLCJUcmFuc2xhdGUiLCJnZXRGZWF0dXJlcyIsImNsaWNrIiwibG9jYXRpb24iLCJocmVmIiwidW4iLCJjIiwiaGFuZGxlQ29vcmRzIiwic2V0TGF5ZXIiLCJjb29yZHMiLCJ4IiwieSIsImFkbWluSWQiLCJvbmNlIiwiZSIsIiR0b2FzdCIsImdldExlbmd0aCIsIm5ld2VzdE9uVG9wIiwiZXh0ZW5kZWRUaW1lT3V0IiwiY2xvc2VCdXR0b24iLCJ3YXJuaW5nIiwiaXRlbSIsInJlbW92ZSIsIl8iLCJoZWFkIiwicHJvcGVydGllcyIsInByb2oiLCJ0cmFuc2Zvcm0iLCJjb29yZGluYXRlIiwiaXNOaWwiLCJyZW1vdmVBdHRyIiwicmVhZHkiLCJ3aW5kb3ciLCJQYXJzbGV5IiwiJGVsZW1lbnQiLCJhZGRWYWxpZGF0b3IiLCJyZXF1aXJlbWVudFR5cGUiLCJ2YWxpZGF0ZVN0cmluZyIsInZhbHVlIiwicmVxdWlyZW1lbnQiLCJtb21lbnQiLCJpc1ZhbGlkIiwibWVzc2FnZXMiLCJlbiIsImVsIiwiZmluZEJ5SWQiLCJnZXRMYXllcnMiLCJsZW5ndGgiLCJpIiwibCIsImdldENvb3JkcyIsImNvb3JkRVBTRzM4NTciLCJnZXRHZW9tZXRyeSIsImdldENvb3JkaW5hdGVzIiwicGFyc2xleSIsInNldE9wdGlvbnMiLCJmb3JtTmFtZSIsImNyZWF0ZVZhbGlkYXRvciIsInAiLCJkZXN0cm95VmFsaWRhdG9yIiwiZGVzdHJveSIsInZhbGlkYXRlRm9ybSIsInZhbGlkYXRlIiwiZ2V0QXR0cmlidXRlcyIsImZpbmQiLCJlYWNoIiwiaW5kZXgiLCJlbGVtZW50IiwiYXR0ciIsInZhbCIsInByb3AiLCJyZXNldEZvcm0iLCJwYXJlbnQiLCJlcSIsImpRdWVyeSJdLCJtYXBwaW5ncyI6IkFBNEJBLFFBQUFBLGlCQUNBLEdBQUFDLEdBQUEsc0NBQ0EsT0FBQSxJQUFBQyxJQUFBQyxNQUFBQyxPQUNBQyxNQUFBLEdBQUFILElBQUFDLE1BQUFHLE1BQ0FMLElBQUFBLEVBQ0FNLFFBQ0EsR0FBQSxHQUVBQyxNQUFBLE9BZ0tBLFFBQUFDLFdBQUFDLEdBQ0EsR0FDQUMs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LEVBQUFDLEdBQ0FyTixFQUFBeUIsRUFBQVYsTUFBQXVNLEtBQUEsT0FBQTdMLEVBQUFWLE1BQUF3TSxRQUVBOUwsRUFBQSxjQUFBaUwsRUFBQSxLQUFBUSxLQUFBLHdCQUFBQyxLQUVBLFNBQUFDLEVBQUFDLEdBQ0FyTixFQUFBeUIsRUFBQVYsTUFBQXVNLEtBQUEsT0FBQTdMLEVBQUFWLE1BQUF5TSxLQUFBLGFBRUF4TixHQUVBLEtBR0EsUUFBQXlOLEtBQ0EsR0FBQWQsS0FDQUUsSUFFQXBMLEVBQUEsY0FBQWlMLEVBQUEsS0FBQVEsS0FBQSx5QkFBQUMsS0FFQSxTQUFBQyxFQUFBQyxHQUNBNUwsRUFBQVYsTUFBQXdNLElBQUEsSUFDQTlMLEVBQUFWLE1BQUEyTSxTQUFBQyxHQUFBLEdBQUFoTSxZQUFBLFlBQ0FGLEVBQUFWLE1BQUEyTSxTQUFBQyxHQUFBLEdBQUFoTSxZQUFBLGdCQUVBRixFQUFBLGNBQUFpTCxFQUFBLEtBQUFRLEtBQUEsd0JBQUFDLEtBRUEsU0FBQUMsRUFBQUMsR0FDQTVMLEVBQUFWLE1BQUF5TSxLQUFBLFdBQUEsS0FFQS9MLEVBQUEsY0FBQWlMLEVBQUEsS0FBQVEsS0FBQSxpQkFBQUMsS0FFQSxTQUFBQyxFQUFBQyxHQUNBNUwsRUFBQVYsTUFBQVksWUFBQSxnQkFwRUEsR0FBQStLLEdBQUE3SixFQUFBK0osQ0F1RUEsUUFDQWpLLElBQUE4SixFQUNBekwsSUFBQWlNLEVBQ0F6SixNQUFBaUssSUFPQUcsT0FBQXBCIiwiZmlsZSI6ImFkbWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBjZW50ZXIgPSBbMzY3NzM4NSwgNDEyMDk0OV0sXG4gICAgZXh0ZW50ID0gWzM1OTAwOTQsIDQxMDI4MzMsIDM4NTU0ODMsIDQyNjEyMTFdLFxuICAgIGxhbmcgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQubGFuZyxcbiAgICBnZW9KU09ORm9ybWF0ID0gbmV3IG9sLmZvcm1hdC5HZW9KU09OKHtcbiAgICAgIGRlZmF1bHREYXRhUHJvamVjdGlvbjogJ0VQU0c6NDMyNidcbiAgICB9KSxcbiAgICBwcm9wZXJ0eVNvdXJjZSwgcHJvcGVydHksIG1hcCwgZmVhdHVyZXMsIGRyYXduUHJvcGVydGllcywgZHJhdywgc2VsZWN0LCB0cmFuc2xhdGU7XG52YXIgYmluZyA9IG5ldyBvbC5sYXllci5UaWxlKHtcbiAgdmlzaWJsZTogdHJ1ZSxcbiAgc291cmNlOiBuZXcgb2wuc291cmNlLkJpbmdNYXBzKHtcbiAgICBrZXk6ICdBazJHcThWVWZJQ3NQcHVmN0xSQU5YbVh0MnNIV21TTFBob2htVkxGdEZJRXdZanNfNU1DeUFoQUZ3UlNWcExqJyxcbiAgICBpbWFnZXJ5U2V0OiAnQWVyaWFsJ1xuICB9KSxcbiAgbWF4Wm9vbTogMTksXG4gIGNyb3NzT3JpZ2luOiAnYW5vbnltb3VzJyxcbiAgcHJlbG9hZDogSW5maW5pdHksXG4gIGlkOiAnYmluZydcbn0pO1xudmFyIG1hcGJveCA9IG5ldyBvbC5sYXllci5UaWxlKHtcbiAgc291cmNlOiBuZXcgb2wuc291cmNlLlhZWih7XG4gICAgYXR0cmlidXRpb25zOiBbbmV3IG9sLkF0dHJpYnV0aW9uKHtcbiAgICAgIGh0bWw6ICc8YSBocmVmPVwiaHR0cHM6Ly93d3cubWFwYm94LmNvbS9hYm91dC9tYXBzL1wiIHRhcmdldD1cIl9ibGFua1wiPiZjb3B5OyBNYXBib3ggJmNvcHk7IE9wZW5TdHJlZXRNYXA8L2E+J1xuICAgIH0pXSxcbiAgICB1cmw6ICdodHRwczovL2FwaS5tYXBib3guY29tL3Y0L21hcGJveC5zdHJlZXRzL3t6fS97eH0ve3l9LnBuZz9hY2Nlc3NfdG9rZW49cGsuZXlKMUlqb2labWx5ZG1GcGJpSXNJbUVpT2lKbE9XWXlZVE0wTlRoaU5XTTBZakpqT0RKak5ERTRPRFF6TnpBMk1HUXlOaUo5Li1OVkRPMjdIenQtd19uUW9zVVBmTEEnXG4gIH0pLFxuICBpZDogJ21hcGJveCdcbn0pO1xuXG5mdW5jdGlvbiBQcm9wZXJ0eVN0eWxlKCkge1xuICB2YXIgc3JjID0gJy4uL2ltYWdlcy9tYXAtaWNvbnMvcGlucy80OC9waW4xLnBuZyc7XG4gIHJldHVybiBuZXcgb2wuc3R5bGUuU3R5bGUoe1xuICAgIGltYWdlOiBuZXcgb2wuc3R5bGUuSWNvbigoe1xuICAgICAgc3JjOiBzcmMsXG4gICAgICBhbmNob3I6IFtcbiAgICAgICAgMC41LCAxXG4gICAgICBdLFxuICAgICAgc2NhbGU6IDAuN1xuICAgIH0pKVxuICB9KTtcbn1cbnByb3BlcnR5U291cmNlID0gbmV3IG9sLnNvdXJjZS5WZWN0b3Ioe1xuICBmb3JtYXQ6IGdlb0pTT05Gb3JtYXQsXG4gIGxvYWRlcjogZnVuY3Rpb24oZXh0ZW50LCByZXNvbHV0aW9uLCBwcm9qZWN0aW9uKSB7XG4gICAgdmFyIHVybCA9ICdodHRwOi8vMTI3LjAuMC4xOjMwMDAvZGIvYWRtaW4nO1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLmNsZWFyKCk7XG4gICAgJC5hamF4KHtcbiAgICAgIHVybDogdXJsLFxuICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgJ2JlZm9yZVNlbmQnOiBmdW5jdGlvbih4aHIpIHtcbiAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyVG9rZW4nKSkge1xuICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdBdXRob3JpemF0aW9uJywgJ0JlYXJlciAnICsgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJUb2tlbicpKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGlkOiBpZFxuICAgICAgfVxuICAgIH0pLmRvbmUoZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgIHZhciBmZWF0dXJlcyA9IGdlb0pTT05Gb3JtYXQucmVhZEZlYXR1cmVzKHJlc3BvbnNlLCB7XG4gICAgICAgIGZlYXR1cmVQcm9qZWN0aW9uOiAnRVBTRzozODU3J1xuICAgICAgfSk7XG4gICAgICBzZWxmLmFkZEZlYXR1cmVzKGZlYXR1cmVzKTtcbiAgICB9KS5mYWlsKGZ1bmN0aW9uKCkge1xuICAgICAgY29uc29sZS5sb2coJ2Vycm9yJyk7XG4gICAgfSk7XG4gIH0sXG4gIHN0cmF0ZWd5OiBvbC5sb2FkaW5nc3RyYXRlZ3kuYWxsXG59KTtcbnByb3BlcnR5ID0gbmV3IG9sLmxheWVyLlZlY3Rvcih7XG4gIHNvdXJjZTogcHJvcGVydHlTb3VyY2UsXG4gIGlkOiAncHJvcGVydHknLFxuICB2aXNpYmxlOiB0cnVlLFxuICBzdHlsZTogUHJvcGVydHlTdHlsZSgpXG59KTtcbnByb3BlcnR5LnNldFpJbmRleCgyKTtcbm1hcCA9IG5ldyBvbC5NYXAoe1xuICB0YXJnZXQ6ICdhZG1pbk1hcCcsXG4gIGxheWVyczogW1xuICAgIG1hcGJveCwgcHJvcGVydHlcbiAgXSxcbiAgbG9hZFRpbGVzV2hpbGVBbmltYXRpbmc6IHRydWUsXG4gIGxvYWRUaWxlc1doaWxlSW50ZXJhY3Rpbmc6IHRydWUsXG4gIHJlbmRlcmVyOiAnY2FudmFzJyxcbiAgY29udHJvbHM6IG9sLmNvbnRyb2wuZGVmYXVsdHMoe1xuICAgIGF0dHJpYnV0aW9uT3B0aW9uczoge1xuICAgICAgY29sbGFwc2libGU6IGZhbHNlLFxuICAgICAgY29sbGFwc2VkOiBmYWxzZVxuICAgIH1cbiAgfSkuZXh0ZW5kKFtcbiAgICBuZXcgb2wuY29udHJvbC5TY2FsZUxpbmUoe1xuICAgICAgdW5pdHM6ICdtZXRyaWMnXG4gICAgfSksXG4gICAgbmV3IG9sLmNvbnRyb2wuT3ZlcnZpZXdNYXAoe1xuICAgICAgY2xhc3NOYW1lOiAnb2wtb3ZlcnZpZXdtYXAgb2wtY3VzdG9tLW92ZXJ2aWV3bWFwJyxcbiAgICAgIGNvbGxhcHNpYmxlOiB0cnVlLFxuICAgICAgY29sbGFwc2VkOiB0cnVlLFxuICAgICAgbGF5ZXJzOiBbYmluZ11cbiAgICB9KSxcbiAgICBuZXcgb2wuY29udHJvbC5ab29tVG9FeHRlbnQoe1xuICAgICAgZXh0ZW50OiBleHRlbnRcbiAgICB9KVxuICBdKSxcbiAgdmlldzogbmV3IG9sLlZpZXcoe1xuICAgIGNlbnRlcjogY2VudGVyLFxuICAgIC8vIGV4dGVudDogZXh0ZW50LFxuICAgIHByb2plY3Rpb246ICdFUFNHOjM4NTcnLFxuICAgIHpvb206IDE0LFxuICAgIG1heFpvb206IDE5LFxuICAgIG1pblpvb206IDEwXG4gIH0pXG59KTtcbmlmIChsYW5nID09PSAnZWwnKSB7XG4gIGJpbmcuc2V0KCduYW1lJywgJ86Uzr/Pgc+Fz4bOv8+BzrnOus6uIM61zrnOus+Mzr3OsScpO1xuICBtYXBib3guc2V0KCduYW1lJywgJ86nzqzPgc+EzrfPgicpO1xuICBwcm9wZXJ0eS5zZXQoJ25hbWUnLCAnzpHOus6vzr3Ot8+EzrEnKTtcbn0gZWxzZSB7XG4gIGJpbmcuc2V0KCduYW1lJywgJ1NhdHRlbGl0ZSBJbWFnZScpO1xuICBtYXBib3guc2V0KCduYW1lJywgJ01hcCcpO1xuICBwcm9wZXJ0eS5zZXQoJ25hbWUnLCAnUHJvcGVydGllcycpO1xufVxuLy89PT09PT0gaW50ZXJhY3Rpb25zID09PT09PVxuZmVhdHVyZXMgPSBuZXcgb2wuQ29sbGVjdGlvbigpO1xuZHJhd25Qcm9wZXJ0aWVzID0gbmV3IG9sLmxheWVyLlZlY3Rvcih7XG4gIHNvdXJjZTogbmV3IG9sLnNvdXJjZS5WZWN0b3IoKSxcbiAgc3R5bGU6IG5ldyBvbC5zdHlsZS5TdHlsZSh7XG4gICAgZmlsbDogbmV3IG9sLnN0eWxlLkZpbGwoe1xuICAgICAgY29sb3I6ICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMiknXG4gICAgfSksXG4gICAgc3Ryb2tlOiBuZXcgb2wuc3R5bGUuU3Ryb2tlKHtcbiAgICAgIGNvbG9yOiAnI2ZmY2MzMycsXG4gICAgICB3aWR0aDogMlxuICAgIH0pLFxuICAgIGltYWdlOiBuZXcgb2wuc3R5bGUuQ2lyY2xlKHtcbiAgICAgIHJhZGl1czogNyxcbiAgICAgIGZpbGw6IG5ldyBvbC5zdHlsZS5GaWxsKHtcbiAgICAgICAgY29sb3I6ICcjZmZjYzMzJ1xuICAgICAgfSlcbiAgICB9KVxuICB9KSxcbiAgaWQ6ICdkcmF3blByb3BlcnRpZXMnXG59KTtcbm1hcC5hZGRMYXllcihkcmF3blByb3BlcnRpZXMpO1xuLy9kcmF3XG5kcmF3ID0gbmV3IG9sLmludGVyYWN0aW9uLkRyYXcoe1xuICAvLyBmZWF0dXJlczogZmVhdHVyZXMsXG4gIHNvdXJjZTogZHJhd25Qcm9wZXJ0aWVzLmdldFNvdXJjZSgpLFxuICB0eXBlOiAnUG9pbnQnLFxuICBzdHlsZTogbmV3IG9sLnN0eWxlLlN0eWxlKHtcbiAgICBmaWxsOiBuZXcgb2wuc3R5bGUuRmlsbCh7XG4gICAgICBjb2xvcjogJ3JnYmEoMjU1LCAyNTUsIDI1NSwgMC4yKSdcbiAgICB9KSxcbiAgICBzdHJva2U6IG5ldyBvbC5zdHlsZS5TdHJva2Uoe1xuICAgICAgY29sb3I6ICcjZmZjYzMzJyxcbiAgICAgIHdpZHRoOiAyXG4gICAgfSksXG4gICAgaW1hZ2U6IG5ldyBvbC5zdHlsZS5DaXJjbGUoe1xuICAgICAgcmFkaXVzOiA3LFxuICAgICAgZmlsbDogbmV3IG9sLnN0eWxlLkZpbGwoe1xuICAgICAgICBjb2xvcjogJyNmZmNjMzMnXG4gICAgICB9KVxuICAgIH0pXG4gIH0pXG59KTtcbm1hcC5hZGRJbnRlcmFjdGlvbihkcmF3KTtcbmRyYXcuc2V0QWN0aXZlKGZhbHNlKTtcbi8vc2VsZWN0XG5zZWxlY3QgPSBuZXcgb2wuaW50ZXJhY3Rpb24uU2VsZWN0KHtcbiAgbGF5ZXJzOiBbcHJvcGVydHldLFxuICBmZWF0dXJlczogZmVhdHVyZXMsXG4gIHN0eWxlOiBuZXcgb2wuc3R5bGUuU3R5bGUoe1xuICAgIGZpbGw6IG5ldyBvbC5zdHlsZS5GaWxsKHtcbiAgICAgIGNvbG9yOiAncmdiYSgyNTUsIDAsIDAsIDAuMiknXG4gICAgfSksXG4gICAgc3Ryb2tlOiBuZXcgb2wuc3R5bGUuU3Ryb2tlKHtcbiAgICAgIGNvbG9yOiAnI0ZGMDAwMDMnLFxuICAgICAgd2lkdGg6IDJcbiAgICB9KSxcbiAgICBpbWFnZTogbmV3IG9sLnN0eWxlLkNpcmNsZSh7XG4gICAgICByYWRpdXM6IDcsXG4gICAgICBmaWxsOiBuZXcgb2wuc3R5bGUuRmlsbCh7XG4gICAgICAgIGNvbG9yOiAnI0ZGMDAwMCdcbiAgICAgIH0pXG4gICAgfSlcbiAgfSlcbn0pO1xubWFwLmFkZEludGVyYWN0aW9uKHNlbGVjdCk7XG5zZWxlY3Quc2V0QWN0aXZlKGZhbHNlKTtcbnRyYW5zbGF0ZSA9IG5ldyBvbC5pbnRlcmFjdGlvbi5UcmFuc2xhdGUoe1xuICBmZWF0dXJlczogc2VsZWN0LmdldEZlYXR1cmVzKClcbn0pO1xubWFwLmFkZEludGVyYWN0aW9uKHRyYW5zbGF0ZSk7XG50cmFuc2xhdGUuc2V0QWN0aXZlKGZhbHNlKTtcbi8vPT09PT09IGluZm8gPT09PT09XG5tYXAub24oJ2NsaWNrJywgY2xpY2tJbmZvKTtcblxuZnVuY3Rpb24gY2xpY2tJbmZvKGV2ZW50KSB7XG4gIHZhciBvYmogPSB7fTtcbiAgdmFyIGNsaWNrZWRGZWF0dXJlICwgY2xpY2tlZEZlYXR1cmVTdHlsZTtcbiAgY2xpY2tlZEZlYXR1cmVTdHlsZSA9IG5ldyBvbC5zdHlsZS5TdHlsZSh7XG4gICAgZmlsbDogbmV3IG9sLnN0eWxlLkZpbGwoe1xuICAgICAgY29sb3I6ICdyZ2JhKDI1NSwgMCwgMCwgMC4yKSdcbiAgICB9KSxcbiAgICBzdHJva2U6IG5ldyBvbC5zdHlsZS5TdHJva2Uoe1xuICAgICAgY29sb3I6ICcjRkYwMDAwMycsXG4gICAgICB3aWR0aDogMlxuICAgIH0pLFxuICAgIGltYWdlOiBuZXcgb2wuc3R5bGUuQ2lyY2xlKHtcbiAgICAgIHJhZGl1czogNyxcbiAgICAgIGZpbGw6IG5ldyBvbC5zdHlsZS5GaWxsKHtcbiAgICAgICAgY29sb3I6ICcjRkYwMDAwJ1xuICAgICAgfSlcbiAgICB9KVxuICB9KVxuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICBjbGlja2VkRmVhdHVyZSA9IG1hcC5mb3JFYWNoRmVhdHVyZUF0UGl4ZWwoZXZlbnQucGl4ZWwsIGZ1bmN0aW9uKGZlYXR1cmUsIGxheWVyKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGZlYXR1cmU6IGZlYXR1cmUsXG4gICAgICBsYXllcjogbGF5ZXJcbiAgICB9O1xuICB9LCB0aGlzLCBmdW5jdGlvbihsYXllcikge1xuICAgIGlmIChsYXllci5nZXQoJ2lkJykgPT09ICdwcm9wZXJ0eScpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSwgdGhpcyk7XG4gIGlmIChjbGlja2VkRmVhdHVyZSkge1xuICAgIG9iai5mZWF0dXJlID0ge307XG4gICAgY2xpY2tlZEZlYXR1cmUuZmVhdHVyZS5zZXRTdHlsZShjbGlja2VkRmVhdHVyZVN0eWxlKTtcbiAgICAvLyBjbGlja2VkRmVhdHVyZS5mZWF0dXJlLnNldFNjYWxlKDEuMik7XG4gICAgY2xpY2tlZEZlYXR1cmUuZmVhdHVyZS5nZXRLZXlzKCkuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcbiAgICAgIG9iai5mZWF0dXJlW2tleV0gPSBjbGlja2VkRmVhdHVyZS5mZWF0dXJlLmdldChrZXkpO1xuICAgIH0pO1xuICAgIGR1c3QucmVuZGVyKCdhZG1pblByb3BlcnR5SW5mbycsIG9iaiwgZnVuY3Rpb24oZXJyLCBvdXQpIHtcbiAgICAgICQoJy5wcm9wZXJ0eS1pbmZvJykuaHRtbChvdXQpO1xuICAgICAgJCgnLnByb3BlcnR5LWluZm8nKS5yZW1vdmVDbGFzcygndmlzdWFsbHloaWRkZW4nKTtcbiAgICAgIGNvbXBvbmVudEhhbmRsZXIudXBncmFkZURvbSgpO1xuICAgICAgJCgnI2xpc3RpbmcnKS5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICB2YXIgZ2lkO1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBnaWQgPSAkKHRoaXMpLmRhdGEoJ2dpZCcpO1xuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgIHVybDogJ2h0dHA6Ly8xMjcuMC4wLjE6MzAwMC9kYi9saXN0aW5nJyxcbiAgICAgICAgICB0eXBlOiAnR0VUJyxcbiAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIGdpZDogZ2lkXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAgIC5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgdmFyIGxpc3RpbmdfaWQgPSBkYXRhLmlkO1xuICAgICAgICAgICAgJCgnLm1vZGFsLWRpYWxvZycpLnJlbW92ZUNsYXNzKCd2aXN1YWxseWhpZGRlbicpO1xuICAgICAgICAgICAgZHVzdC5yZW5kZXIoJ2xpc3RpbmdJbnNlcnQnLCBkYXRhLCBmdW5jdGlvbihlcnIsIG91dCkge1xuICAgICAgICAgICAgICAkKCcubW9kYWwtY29udGVudCcpLmh0bWwob3V0KTtcbiAgICAgICAgICAgICAgY29tcG9uZW50SGFuZGxlci51cGdyYWRlRG9tKCk7XG4gICAgICAgICAgICAgIGhhbmRsZUZvcm0uc2V0KHtcbiAgICAgICAgICAgICAgICBuYW1lOiAnaW5zZXJ0LXVwZGF0ZS1saXN0aW5nJyxcbiAgICAgICAgICAgICAgICBzdWJtaXRCdG5JZDogJ29rJ1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgJCgnI3NlbnQtbGlzdGluZycpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGE7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBkYXRhID0gaGFuZGxlRm9ybS5nZXQoKTtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgZGF0YS5wcm9wZXJ0eV9naWQgPSBnaWQ7XG4gICAgICAgICAgICAgICAgICBkYXRhLmxpc3RpbmdfaWQgPSBsaXN0aW5nX2lkO1xuICAgICAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnaHR0cDovLzEyNy4wLjAuMTozMDAwL2RiL2xpc3RpbmcvdXBkYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ3RleHQnXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuZG9uZShmdW5jdGlvbihkYXRhLCB0ZXh0U3RhdHVzLCBqcVhIUikge1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChqcVhIUi5zdGF0dXMgPT09IDIwMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoJ1Byb3BlcnR5IFVwZGF0ZWQgSW4gRGF0YWJhc2UnKTtcbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKCdPb3BzIFNvbWV0aGluZyBXZW50IFdyb25nISEhJyk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuZmFpbChmdW5jdGlvbihqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcbiAgICAgICAgICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoJ09vcHMgU29tZXRoaW5nIFdlbnQgV3JvbmchISEnKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmFsd2F5cyhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVGb3JtLmNsZWFyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgJCgnI29wZW5Nb2RhbCcpLmFkZENsYXNzKCd2aXN1YWxseWhpZGRlbicpO1xuICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5U291cmNlLmNsZWFyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgY2xpY2tlZEZlYXR1cmUuZmVhdHVyZS5zZXRTdHlsZShudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgJCgnI2NhbmNlbC1saXN0aW5nJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGhhbmRsZUZvcm0uY2xlYXIoKTtcbiAgICAgICAgICAgICAgICBjbGlja2VkRmVhdHVyZS5mZWF0dXJlLnNldFN0eWxlKG51bGwpO1xuICAgICAgICAgICAgICAgICQoJyNvcGVuTW9kYWwnKS5hZGRDbGFzcygndmlzdWFsbHloaWRkZW4nKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5mYWlsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIG9iaiA9IHt9O1xuICAgICAgICAgICAgaWYgKGxhbmcgPT09ICdlbCcpIHtcbiAgICAgICAgICAgICAgb2JqLm1zZyA9ICfOlM61zr0gzpLPgc6tzrjOt866zrUgzpHOs86zzrXOu86vzrEnLFxuICAgICAgICAgICAgICBvYmoudGV4dCA9ICfOlM63zrzOuc6/z4XPgc6zzq/OsSDOms6xzrnOvc6/z43Pgc6zzrnOsc+COycsXG4gICAgICAgICAgICAgIG9iai55ZXMgPSAnzp3Okc6ZJ1xuICAgICAgICAgICAgICBvYmoubm8gPSAnzp/Op86ZJ1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgb2JqLm1zZyA9ICdObyBMaXN0aW5nIEZvdW5kJyxcbiAgICAgICAgICAgICAgb2JqLnRleHQgPSAnQ3JlYXRlIE5ldyBMaXN0aW5nPycsXG4gICAgICAgICAgICAgIG9iai55ZXMgPSAnWUVTJ1xuICAgICAgICAgICAgICBvYmoubm8gPSAnTk8nXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkdXN0LnJlbmRlcignZGlhbG9nJywgb2JqLCBmdW5jdGlvbihlcnJvciwgb3V0KSB7XG4gICAgICAgICAgICAgICQoJyNvcGVuTW9kYWwnKS5yZW1vdmVDbGFzcygndmlzdWFsbHloaWRkZW4nKTtcbiAgICAgICAgICAgICAgJCgnLm1vZGFsLWNvbnRlbnQnKS5odG1sKG91dCk7XG4gICAgICAgICAgICAgIGNvbXBvbmVudEhhbmRsZXIudXBncmFkZURvbSgpO1xuICAgICAgICAgICAgICAkKCcjeWVzJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGR1c3QucmVuZGVyKCdsaXN0aW5nSW5zZXJ0Jywge30sIGZ1bmN0aW9uKGVyciwgb3V0KSB7XG4gICAgICAgICAgICAgICAgICAkKCcubW9kYWwtY29udGVudCcpLmh0bWwob3V0KTtcbiAgICAgICAgICAgICAgICAgIGNvbXBvbmVudEhhbmRsZXIudXBncmFkZURvbSgpO1xuICAgICAgICAgICAgICAgICAgaGFuZGxlRm9ybS5zZXQoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnaW5zZXJ0LXVwZGF0ZS1saXN0aW5nJyxcbiAgICAgICAgICAgICAgICAgICAgc3VibWl0QnRuSWQ6ICdvaydcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgJCgnI3NlbnQtbGlzdGluZycpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhO1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICBkYXRhID0gaGFuZGxlRm9ybS5nZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICBkYXRhLnByb3BlcnR5X2dpZCA9IGdpZDtcbiAgICAgICAgICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiAnaHR0cDovLzEyNy4wLjAuMTozMDAwL2RiL2xpc3RpbmcvaW5zZXJ0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ3RleHQnXG4gICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5kb25lKGZ1bmN0aW9uKGRhdGEsIHRleHRTdGF0dXMsIGpxWEhSKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqcVhIUi5zdGF0dXMgPT09IDIwMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKCdQcm9wZXJ0eSBVcGRhdGVkIEluIERhdGFiYXNlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKCdPb3BzIFNvbWV0aGluZyBXZW50IFdyb25nISEhJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmFpbChmdW5jdGlvbihqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKCdPb3BzIFNvbWV0aGluZyBXZW50IFdyb25nISEhJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFsd2F5cyhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlRm9ybS5jbGVhcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjb3Blbk1vZGFsJykuYWRkQ2xhc3MoJ3Zpc3VhbGx5aGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrZWRGZWF0dXJlLmZlYXR1cmUuc2V0U3R5bGUobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAkKCcjY2FuY2VsLWxpc3RpbmcnKS5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICBoYW5kbGVGb3JtLmNsZWFyKCk7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrZWRGZWF0dXJlLmZlYXR1cmUuc2V0U3R5bGUobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICQoJyNvcGVuTW9kYWwnKS5hZGRDbGFzcygndmlzdWFsbHloaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAkKCcjbm8nKS5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgJCgnI29wZW5Nb2RhbCcpLmFkZENsYXNzKCd2aXN1YWxseWhpZGRlbicpO1xuICAgICAgICAgICAgICAgIGNsaWNrZWRGZWF0dXJlLmZlYXR1cmUuc2V0U3R5bGUobnVsbCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSlcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHByb3BlcnR5U291cmNlLmZvckVhY2hGZWF0dXJlKGZ1bmN0aW9uKGYpIHtcbiAgICAgIGYuc2V0U3R5bGUobnVsbClcbiAgICB9KTtcbiAgICAkKCcucHJvcGVydHktaW5mbycpLmFkZENsYXNzKCd2aXN1YWxseWhpZGRlbicpO1xuICAgIHRvYXN0ci5vcHRpb25zID0ge1xuICAgICAgJ3Bvc2l0aW9uQ2xhc3MnOiAndG9hc3QtYm90dG9tLWZ1bGwtd2lkdGgnLFxuICAgICAgJ3ByZXZlbnREdXBsaWNhdGVzJzogdHJ1ZSxcbiAgICAgICd0aW1lT3V0JzogNjBcbiAgICB9O1xuICAgIHRvYXN0ci5lcnJvcignQ2FudCBGaW5kIEFueSBQcm9wZXJ0eSBUaGVyZS4uLicpO1xuICB9XG59XG4vLz09PT09PSBsb2dvdXQgPT09PT09XG4kKCcjbG9nb3V0JykuY2xpY2soZnVuY3Rpb24oKSB7XG4gIGxvY2F0aW9uLmhyZWYgPSAnL21hcC9sb2dvdXQnO1xufSk7XG4vLz09PT09PSBpbnNlcnQgPT09PT09XG4kKCcjaW5zZXJ0UHJvcGVydHknKS5jbGljayhmdW5jdGlvbigpIHtcbiAgJCgnLnByb3BlcnR5LWluZm8nKS5hZGRDbGFzcygndmlzdWFsbHloaWRkZW4nKTtcbiAgdG9hc3RyLm9wdGlvbnMgPSB7XG4gICAgJ3Bvc2l0aW9uQ2xhc3MnOiAndG9hc3QtdG9wLWNlbnRlcicsXG4gICAgJ3ByZXZlbnREdXBsaWNhdGVzJzogdHJ1ZSxcbiAgICAndGltZU91dCc6IDYwXG4gIH07XG4gIG1hcC51bignY2xpY2snLCBjbGlja0luZm8pO1xuICBzZWxlY3Quc2V0QWN0aXZlKGZhbHNlKTtcbiAgZHJhdy5zZXRBY3RpdmUodHJ1ZSk7XG4gIGRyYXcub24oJ2RyYXdlbmQnLCBmdW5jdGlvbihldmVudCkge1xuICAgIHZhciBvYmogPSB7fTtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGRyYXcuc2V0QWN0aXZlKGZhbHNlKTtcbiAgICAkKCcubW9kYWwtZGlhbG9nJykucmVtb3ZlQ2xhc3MoJ3Zpc3VhbGx5aGlkZGVuJyk7XG4gICAgZHVzdC5yZW5kZXIoJ3Byb3BlcnR5SW5zZXJ0Jywgb2JqLCBmdW5jdGlvbihlcnIsIG91dCkge1xuICAgICAgJCgnLm1vZGFsLWNvbnRlbnQnKS5odG1sKG91dCk7XG4gICAgICBjb21wb25lbnRIYW5kbGVyLnVwZ3JhZGVEb20oKTtcbiAgICAgIGhhbmRsZUZvcm0uc2V0KHtcbiAgICAgICAgbmFtZTogJ2luc2VydFByb3BlcnR5JyxcbiAgICAgICAgc3VibWl0QnRuSWQ6ICdpbnNlcnQnXG4gICAgICB9KTtcbiAgICAgICQoJyNjYW5jZWxJbnNlcnQnKS5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBoYW5kbGVGb3JtLmNsZWFyKCk7XG4gICAgICAgIGRyYXduUHJvcGVydGllcy5nZXRTb3VyY2UoKS5jbGVhcigpO1xuXG4gICAgICAgICQoJy5tb2RhbC1kaWFsb2cnKS5hZGRDbGFzcygndmlzdWFsbHloaWRkZW4nKTtcbiAgICAgICAgbWFwLm9uKCdjbGljaycsIGNsaWNrSW5mbyk7XG4gICAgICB9KTtcbiAgICAgICQoJyNpbnNlcnQnKS5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICB2YXIgZGF0YSwgYztcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZGF0YSA9IGhhbmRsZUZvcm0uZ2V0KCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICBpZiAoZGF0YSAhPT0gbnVsbCkge1xuICAgICAgICAgIGhhbmRsZUNvb3Jkcy5zZXRMYXllcignZHJhd25Qcm9wZXJ0aWVzJyk7XG4gICAgICAgICAgYyA9IGhhbmRsZUNvb3Jkcy5jb29yZHMoKTtcbiAgICAgICAgICBkYXRhLnggPSBjWzBdO1xuICAgICAgICAgIGRhdGEueSA9IGNbMV07XG4gICAgICAgICAgZGF0YS5hZG1pbklkID0gaWQ7XG4gICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogJ2h0dHA6Ly8xMjcuMC4wLjE6MzAwMC9kYi9pbnNlcnQnLFxuICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgZGF0YTogZGF0YVxuICAgICAgICAgIH0pLmRvbmUoZnVuY3Rpb24oZGF0YSwgdGV4dFN0YXR1cywganFYSFIpIHtcbiAgICAgICAgICAgIHRvYXN0ci5vcHRpb25zID0ge1xuICAgICAgICAgICAgICAncG9zaXRpb25DbGFzcyc6ICd0b2FzdC1ib3R0b20tZnVsbC13aWR0aCcsXG4gICAgICAgICAgICAgICdwcmV2ZW50RHVwbGljYXRlcyc6IHRydWUsXG4gICAgICAgICAgICAgICd0aW1lT3V0JzogNjBcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoanFYSFIuc3RhdHVzID09PSAyMDEpIHtcbiAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoJ1Byb3BlcnR5IFJlY29yZGVkIEluIERhdGFiYXNlJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoJ09vcHMgU29tZXRoaW5nIFdlbnQgV3JvbmchISEnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xuICAgICAgICAgICAgdG9hc3RyLmVycm9yKCdPb3BzIFNvbWV0aGluZyBXZW50IFdyb25nISEhJyk7XG4gICAgICAgICAgfSkuYWx3YXlzKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGRyYXduUHJvcGVydGllcy5nZXRTb3VyY2UoKS5jbGVhcigpO1xuICAgICAgICAgICAgcHJvcGVydHlTb3VyY2UuY2xlYXIoKTtcbiAgICAgICAgICAgIGhhbmRsZUZvcm0uY2xlYXIoKTtcbiAgICAgICAgICAgICQoJy5tb2RhbC1kaWFsb2cnKS5hZGRDbGFzcygndmlzdWFsbHloaWRkZW4nKTtcbiAgICAgICAgICAgIG1hcC5vbignY2xpY2snLCBjbGlja0luZm8pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbi8vPT09PT09IGRlbGV0ZSA9PT09PT1cbiQoJyNkZWxldGVQcm9wZXJ0eScpLmNsaWNrKGZ1bmN0aW9uKGV2ZW50KSB7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICQoJy5wcm9wZXJ0eS1pbmZvJykuYWRkQ2xhc3MoJ3Zpc3VhbGx5aGlkZGVuJyk7XG4gIHRvYXN0ci5vcHRpb25zID0ge1xuICAgICdwb3NpdGlvbkNsYXNzJzogJ3RvYXN0LXRvcC1jZW50ZXInLFxuICAgICdwcmV2ZW50RHVwbGljYXRlcyc6IHRydWUsXG4gICAgJ3RpbWVPdXQnOiAyMFxuICB9O1xuICBtYXAudW4oJ2NsaWNrJywgY2xpY2tJbmZvKTtcbiAgZHJhdy5zZXRBY3RpdmUoZmFsc2UpO1xuICBmZWF0dXJlcy5jbGVhcigpO1xuICBwcm9wZXJ0eVNvdXJjZS5jbGVhcigpO1xuICBzZWxlY3Quc2V0QWN0aXZlKHRydWUpO1xuICBzZWxlY3Qub25jZSgnc2VsZWN0JywgZnVuY3Rpb24oZSkge1xuICAgIHZhciAkdG9hc3Q7XG4gICAgaWYgKGUudGFyZ2V0LmdldEZlYXR1cmVzKCkuZ2V0TGVuZ3RoKCkgPT09IDEpIHtcbiAgICAgIHRvYXN0ci5vcHRpb25zLm5ld2VzdE9uVG9wID0gdHJ1ZTtcbiAgICAgIHRvYXN0ci5vcHRpb25zLnByZXZlbnREdXBsaWNhdGVzID0gdHJ1ZTtcbiAgICAgIHRvYXN0ci5vcHRpb25zLmV4dGVuZGVkVGltZU91dCA9IDA7XG4gICAgICB0b2FzdHIub3B0aW9ucy50aW1lT3V0ID0gMDtcbiAgICAgIHRvYXN0ci5vcHRpb25zLmNsb3NlQnV0dG9uID0gdHJ1ZTtcbiAgICAgICR0b2FzdCA9IHRvYXN0ci53YXJuaW5nKCc8cD5BcmUgeW91IHN1cmU/PC9wPjxkaXYgY2xhc3M9XCJ0b2FzdHItYnRuc1wiPjxidXR0b24gaWQ9XCJ5ZXNEZWxldGVcIiBjbGFzcz1cIm1kbC1idXR0b24gbWRsLWpzLWJ1dHRvbiBcIj5ZZXM8L2J1dHRvbj48YnV0dG9uIGlkPVwibm9EZWxldGVcIiBjbGFzcz1cIm1kbC1idXR0b24gbWRsLWpzLWJ1dHRvblwiPk5vPC9idXR0b24+PC9kaXY+Jyk7XG4gICAgICAkdG9hc3Qub24oJ2NsaWNrJywgJyN5ZXNEZWxldGUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGdpZCA9IHNlbGVjdC5nZXRGZWF0dXJlcygpLml0ZW0oMCkuZ2V0KCdnaWQnKTtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICB1cmw6ICdodHRwOi8vMTI3LjAuMC4xOjMwMDAvZGIvZGVsZXRlJyxcbiAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgZGF0YVR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBnaWQ6IGdpZFxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgICAuZG9uZShmdW5jdGlvbihkYXRhLCB0ZXh0U3RhdHVzLCBqcVhIUikge1xuXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhqcVhIUi5zdGF0dXMpO1xuICAgICAgICAgICAgdG9hc3RyLm9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICdwb3NpdGlvbkNsYXNzJzogJ3RvYXN0LWJvdHRvbS1mdWxsLXdpZHRoJyxcbiAgICAgICAgICAgICAgJ3ByZXZlbnREdXBsaWNhdGVzJzogdHJ1ZSxcbiAgICAgICAgICAgICAgJ3RpbWVPdXQnOiA2MFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKCdQcm9wZXJ0eSBEZWxldGVkIEZyb20gRGF0YWJhc2UnKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5mYWlsKGZ1bmN0aW9uKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xuICAgICAgICAgICAgdG9hc3RyLm9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICdwb3NpdGlvbkNsYXNzJzogJ3RvYXN0LWJvdHRvbS1mdWxsLXdpZHRoJyxcbiAgICAgICAgICAgICAgJ3ByZXZlbnREdXBsaWNhdGVzJzogdHJ1ZSxcbiAgICAgICAgICAgICAgJ3RpbWVPdXQnOiA2MFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKCdPb3BzIFNvbWV0aGluZyBXZW50IFdyb25nISEhJyk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuYWx3YXlzKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcHJvcGVydHlTb3VyY2UuY2xlYXIoKTtcbiAgICAgICAgICAgIHNlbGVjdC5nZXRGZWF0dXJlcygpLmNsZWFyKCk7XG4gICAgICAgICAgICBzZWxlY3Quc2V0QWN0aXZlKGZhbHNlKTtcbiAgICAgICAgICAgIG1hcC5vbignY2xpY2snLCBjbGlja0luZm8pO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICR0b2FzdC5yZW1vdmUoKTtcbiAgICAgIH0pO1xuICAgICAgJHRvYXN0Lm9uKCdjbGljaycsICcjbm9EZWxldGUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgJHRvYXN0LnJlbW92ZSgpO1xuICAgICAgICBzZWxlY3QuZ2V0RmVhdHVyZXMoKS5jbGVhcigpO1xuICAgICAgICBzZWxlY3Quc2V0QWN0aXZlKGZhbHNlKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG59KTtcblxuLy89PT09PT0gdXBkYXRlID09PT09PVxuXG4kKCcjdXBkYXRlUHJvcGVydHknKS5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICB2YXIgZ2lkLCBvYmo7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIG1hcC51bignY2xpY2snLCBjbGlja0luZm8pO1xuICBkcmF3LnNldEFjdGl2ZShmYWxzZSk7XG4gIGZlYXR1cmVzLmNsZWFyKCk7XG4gIHByb3BlcnR5U291cmNlLmNsZWFyKCk7XG4gIHNlbGVjdC5zZXRBY3RpdmUodHJ1ZSk7XG4gIHRyYW5zbGF0ZS5zZXRBY3RpdmUodHJ1ZSk7XG4gICQoJy5wcm9wZXJ0eS1pbmZvJykuYWRkQ2xhc3MoJ3Zpc3VhbGx5aGlkZGVuJyk7XG4gIHNlbGVjdC5vbmNlKCdzZWxlY3QnLCBmdW5jdGlvbihlKSB7XG4gICAgaWYgKHNlbGVjdC5nZXRGZWF0dXJlcygpLmdldExlbmd0aCgpID09PSAxKSB7XG4gICAgICBnaWQgPSBzZWxlY3QuZ2V0RmVhdHVyZXMoKS5pdGVtKDApLmdldCgnZ2lkJyk7XG4gICAgICAkLmFqYXgoe1xuICAgICAgICB1cmw6ICdodHRwOi8vMTI3LjAuMC4xOjMwMDAvZGIvZmV0Y2gnLFxuICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBnaWQ6IGdpZFxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgICAuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgb2JqID0gXy5oZWFkKGRhdGEuZmVhdHVyZXMpLnByb3BlcnRpZXM7XG5cbiAgICAgICAgfSlcbiAgICAgICAgLmZhaWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdG9hc3RyLmVycm9yKCdPb3BzIFNvbWV0aGluZyBXZW50IFdyb25nISEhJyk7XG4gICAgICAgIH0pXG4gICAgICAgIC5hbHdheXMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2NvbXBsZXRlJyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIHRyYW5zbGF0ZS5vbigndHJhbnNsYXRlZW5kJywgZnVuY3Rpb24oZSkge1xuICAgIHZhciBjb29yZHMgPSBvbC5wcm9qLnRyYW5zZm9ybShlLmNvb3JkaW5hdGUsICdFUFNHOjM4NTcnLCAnRVBTRzo0MzI2Jyk7XG4gICAgJCgnLm1vZGFsLWRpYWxvZycpLnJlbW92ZUNsYXNzKCd2aXN1YWxseWhpZGRlbicpO1xuICAgIGR1c3QucmVuZGVyKCdwcm9wZXJ0eVVwZGF0ZScsIG9iaiwgZnVuY3Rpb24oZXJyLCBvdXQpIHtcblxuICAgICAgJCgnLm1vZGFsLWNvbnRlbnQnKS5odG1sKG91dCk7XG4gICAgICBjb21wb25lbnRIYW5kbGVyLnVwZ3JhZGVEb20oKTtcbiAgICAgIGhhbmRsZUZvcm0uc2V0KHtcbiAgICAgICAgbmFtZTogJ3VwZGF0ZVByb3BlcnR5JyxcbiAgICAgICAgc3VibWl0QnRuSWQ6ICd1cGRhdGUnXG4gICAgICB9KTtcbiAgICAgICQoJyN1cGRhdGUnKS5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICB2YXIgZGF0YTtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZGF0YSA9IGhhbmRsZUZvcm0uZ2V0KCk7XG4gICAgICAgIGlmICghXy5pc05pbChkYXRhKSkge1xuICAgICAgICAgIGRhdGEueCA9IGNvb3Jkc1swXTtcbiAgICAgICAgICBkYXRhLnkgPSBjb29yZHNbMV07XG4gICAgICAgICAgZGF0YS5naWQgPSBnaWQ7XG5cbiAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiAnaHR0cDovLzEyNy4wLjAuMTozMDAwL2RiL3VwZGF0ZScsXG4gICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICBkYXRhOiBkYXRhXG4gICAgICAgICAgfSlcbiAgICAgICAgICAgIC5kb25lKGZ1bmN0aW9uKGRhdGEsIHRleHRTdGF0dXMsIGpxWEhSKSB7XG4gICAgICAgICAgICAgIHRvYXN0ci5vcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICdwb3NpdGlvbkNsYXNzJzogJ3RvYXN0LWJvdHRvbS1mdWxsLXdpZHRoJyxcbiAgICAgICAgICAgICAgICAncHJldmVudER1cGxpY2F0ZXMnOiB0cnVlLFxuICAgICAgICAgICAgICAgICd0aW1lT3V0JzogNjBcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgaWYgKGpxWEhSLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoJ1Byb3BlcnR5IFVwZGF0ZWQgSW4gRGF0YWJhc2UnKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoJ09vcHMgU29tZXRoaW5nIFdlbnQgV3JvbmchISEnKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5mYWlsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoJ09vcHMgU29tZXRoaW5nIFdlbnQgV3JvbmchISEnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuYWx3YXlzKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBwcm9wZXJ0eVNvdXJjZS5jbGVhcigpO1xuICAgICAgICAgICAgICBzZWxlY3QuZ2V0RmVhdHVyZXMoKS5jbGVhcigpO1xuICAgICAgICAgICAgICBzZWxlY3Quc2V0QWN0aXZlKGZhbHNlKTtcbiAgICAgICAgICAgICAgdHJhbnNsYXRlLnNldEFjdGl2ZShmYWxzZSk7XG4gICAgICAgICAgICAgIG1hcC5vbignY2xpY2snLCBjbGlja0luZm8pO1xuICAgICAgICAgICAgICAkKCcubW9kYWwtZGlhbG9nJykuYWRkQ2xhc3MoJ3Zpc3VhbGx5aGlkZGVuJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICAkKCcjY2FuY2VsVXBkYXRlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaGFuZGxlRm9ybS5jbGVhcigpO1xuICAgICAgICBwcm9wZXJ0eVNvdXJjZS5jbGVhcigpO1xuICAgICAgICBzZWxlY3QuZ2V0RmVhdHVyZXMoKS5jbGVhcigpO1xuICAgICAgICBzZWxlY3Quc2V0QWN0aXZlKGZhbHNlKTtcbiAgICAgICAgdHJhbnNsYXRlLnNldEFjdGl2ZShmYWxzZSk7XG4gICAgICAgIG1hcC5vbignY2xpY2snLCBjbGlja0luZm8pO1xuICAgICAgICAkKCcubW9kYWwtZGlhbG9nJykuYWRkQ2xhc3MoJ3Zpc3VhbGx5aGlkZGVuJyk7XG4gICAgICAgIG1hcC5vbignY2xpY2snLCBjbGlja0luZm8pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgJCgnI2FkbWluTWFwJykucmVtb3ZlQXR0cignc3R5bGUnKTtcbiAgfSk7XG59KTtcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICB3aW5kb3cuUGFyc2xleS5vbignZmllbGQ6ZXJyb3InLCBmdW5jdGlvbigpIHtcbiAgICAvLyBUaGlzIGdsb2JhbCBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCBmb3IgYW55IGZpZWxkIHRoYXQgZmFpbHMgdmFsaWRhdGlvbi5cbiAgICBjb25zb2xlLmxvZygnVmFsaWRhdGlvbiBmYWlsZWQgZm9yOiAnLCB0aGlzLiRlbGVtZW50KTtcbiAgfSk7XG4gIHdpbmRvdy5QYXJzbGV5XG4gICAgLmFkZFZhbGlkYXRvcignZGF0ZScsIHtcbiAgICAgIHJlcXVpcmVtZW50VHlwZTogJ3N0cmluZycsXG4gICAgICB2YWxpZGF0ZVN0cmluZzogZnVuY3Rpb24odmFsdWUsIHJlcXVpcmVtZW50KSB7XG4gICAgICAgIGlmIChtb21lbnQodmFsdWUsICdERC1NTS1ZWVlZJywgdHJ1ZSkuaXNWYWxpZCgpID09PSB0cnVlKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG1lc3NhZ2VzOiB7XG4gICAgICAgIGVuOiAnV3JvbmcgRGF0ZScsXG4gICAgICAgIGVsOiAnzpvOrM64zr/PgiDOl868zrXPgc6/zrzOt869zq/OsSdcbiAgICAgIH1cbiAgICB9KTtcbiAgd2luZG93LlBhcnNsZXlcbiAgICAuYWRkVmFsaWRhdG9yKCdzYWxlcmVudGVuJywge1xuICAgICAgcmVxdWlyZW1lbnRUeXBlOiAnc3RyaW5nJyxcbiAgICAgIHZhbGlkYXRlU3RyaW5nOiBmdW5jdGlvbih2YWx1ZSwgcmVxdWlyZW1lbnQpIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSAnU2FsZScgfHwgdmFsdWUgPT09ICdSZW50Jykge1xuICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBtZXNzYWdlczoge1xuICAgICAgICBlbjogJ1BsZWFzZSBUeXBlIFNhbGUgb3IgUmVudCcsXG4gICAgICAgIGVsOiAnzqDOsc+BzrHOus6xzrvPjiDPgM67zrfOus+Bzr/Ou86/zrPOrs+Dz4TOtSBTYWxlIM6uIFJlbnQnXG4gICAgICB9XG4gICAgfSk7XG4gIHdpbmRvdy5QYXJzbGV5XG4gICAgLmFkZFZhbGlkYXRvcignc2FsZXJlbnRlbCcsIHtcbiAgICAgIHJlcXVpcmVtZW50VHlwZTogJ3N0cmluZycsXG4gICAgICB2YWxpZGF0ZVN0cmluZzogZnVuY3Rpb24odmFsdWUsIHJlcXVpcmVtZW50KSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gJ86gz47Ou863z4POtycgfHwgdmFsdWUgPT09ICfOlc69zr/Ouc66zq/Osc+DzrcnKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG1lc3NhZ2VzOiB7XG4gICAgICAgIGVuOiAnUGxlYXNlIFR5cGUgzqDPjs67zrfPg863IG9yIM6Vzr3Ov865zrrOr86xz4POtycsXG4gICAgICAgIGVsOiAnzqDOsc+BzrHOus6xzrvPjiDPgM67zrfOus+Bzr/Ou86/zrPOrs+Dz4TOtSDOoM+OzrvOt8+Dzrcgzq4gzpXOvc6/zrnOus6vzrHPg863J1xuICAgICAgfVxuICAgIH0pO1xufSk7XG4iLCJ2YXIgaGFuZGxlQ29vcmRzID0gKGZ1bmN0aW9uKG9sKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgdmFyIGNvb3JkcztcbiAgdmFyIGw7XG5cbiAgZnVuY3Rpb24gZmluZEJ5SWQoaWQpIHtcbiAgICB2YXIgbGF5ZXJzID0gbWFwLmdldExheWVycygpO1xuICAgIHZhciBsZW5ndGggPSBsYXllcnMuZ2V0TGVuZ3RoKCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGlkID09PSBsYXllcnMuaXRlbShpKS5nZXQoJ2lkJykpIHtcbiAgICAgICAgcmV0dXJuIGxheWVycy5pdGVtKGkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbmRCeU5hbWUobmFtZSkge1xuICAgIHZhciBpO1xuICAgIHZhciBsYXllcnMgPSBtYXAuZ2V0TGF5ZXJzKCk7XG4gICAgdmFyIGxlbmd0aCA9IGxheWVycy5nZXRMZW5ndGgoKTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChuYW1lID09PSBsYXllcnMuaXRlbShpKS5nZXQoJ25hbWVFbicpIHx8IG5hbWUgPT09IGxheWVycy5pdGVtKGkpLmdldCgnbmFtZUVsJykpIHtcbiAgICAgICAgcmV0dXJuIGxheWVycy5pdGVtKGkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldExheWVyKGlkKSB7XG4gICAgbCA9IGZpbmRCeUlkKGlkKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldENvb3JkcygpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIGNvb3JkRVBTRzM4NTc7XG4gICAgY29vcmRFUFNHMzg1NyA9IGwuZ2V0U291cmNlKCkuZ2V0RmVhdHVyZXMoKVswXS5nZXRHZW9tZXRyeSgpLmdldENvb3JkaW5hdGVzKCk7XG4gICAgY29vcmRzID0gb2wucHJvai50cmFuc2Zvcm0oY29vcmRFUFNHMzg1NywgJ0VQU0c6Mzg1NycsICdFUFNHOjQzMjYnKTtcbiAgICByZXR1cm4gY29vcmRzO1xuICB9XG4gIHJldHVybiB7XG4gICAgY29vcmRzOiBnZXRDb29yZHMsXG4gICAgc2V0TGF5ZXI6IHNldExheWVyXG4gIH07XG59KG9sKSk7XG4iLCJ2YXIgaGFuZGxlRm9ybSA9IChmdW5jdGlvbigkLCBwYXJzbGV5KSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG4gIHZhciBmb3JtTmFtZSwgc3VibWl0QnRuSWQsIHA7XHJcblxyXG4gIGZ1bmN0aW9uIHNldE9wdGlvbnMob3B0aW9ucykge1xyXG4gICAgZm9ybU5hbWUgPSBvcHRpb25zLm5hbWU7XHJcbiAgICBzdWJtaXRCdG5JZCA9IG9wdGlvbnMuc3VibWl0QnRuSWQ7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBkaXNhYmxlU3VibWl0QnRuKCkge1xyXG4gICAgJCgnIycgKyBzdWJtaXRCdG5JZCArICcnKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlVmFsaWRhdG9yKCkge1xyXG4gICAgcCA9ICQoJ2Zvcm1bbmFtZT1cIicgKyBmb3JtTmFtZSArICdcIicpLnBhcnNsZXkoKTtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZGVzdHJveVZhbGlkYXRvcigpIHtcclxuICAgIHAuZGVzdHJveSgpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gdmFsaWRhdGVGb3JtKCkge1xyXG4gICAgcmV0dXJuIHAudmFsaWRhdGUoKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIG9uVmFsaWRhdGVGb3JtU3VjY2VzcygpIHtcclxuICAgIHAub24oJ2Zvcm06c3VjY2VzcycsXHJcblxyXG4gICAgICBmdW5jdGlvbigpIHt9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdldEF0dHJpYnV0ZXMoKSB7XHJcbiAgICB2YXIgb2JqID0ge307XHJcbiAgICBjcmVhdGVWYWxpZGF0b3IoKTtcclxuICAgIGlmICh2YWxpZGF0ZUZvcm0oKSA9PT0gdHJ1ZSkge1xyXG4gICAgICAkKCdmb3JtW25hbWU9XCInICsgZm9ybU5hbWUgKyAnXCInKS5maW5kKCcubWRsLXRleHRmaWVsZF9faW5wdXQnKS5lYWNoKFxyXG5cclxuICAgICAgICBmdW5jdGlvbihpbmRleCwgZWxlbWVudCkge1xyXG4gICAgICAgICAgb2JqWyQodGhpcykuYXR0cignaWQnKV0gPSAkKHRoaXMpLnZhbCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAkKCdmb3JtW25hbWU9XCInICsgZm9ybU5hbWUgKyAnXCInKS5maW5kKCcubWRsLWNoZWNrYm94X19pbnB1dCcpLmVhY2goXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uKGluZGV4LCBlbGVtZW50KSB7XHJcbiAgICAgICAgICBvYmpbJCh0aGlzKS5hdHRyKCdpZCcpXSA9ICQodGhpcykucHJvcCgnY2hlY2tlZCcpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gb2JqO1xyXG4gICAgfVxyXG4gICAgZWxzZSByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlc2V0Rm9ybSgpIHtcclxuICAgIGlmIChjcmVhdGVWYWxpZGF0b3IoKSA9PSB0cnVlKSB7XHJcbiAgICAgIGRlc3Ryb3lWYWxpZGF0b3IoKTtcclxuICAgIH1cclxuICAgICQoJ2Zvcm1bbmFtZT1cIicgKyBmb3JtTmFtZSArICdcIicpLmZpbmQoJy5tZGwtdGV4dGZpZWxkX19pbnB1dCcpLmVhY2goXHJcblxyXG4gICAgICBmdW5jdGlvbihpbmRleCwgZWxlbWVudCkge1xyXG4gICAgICAgICQodGhpcykudmFsKCcnKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmVxKDApLnJlbW92ZUNsYXNzKCdpcy1kaXJ0eScpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50KCkuZXEoMCkucmVtb3ZlQ2xhc3MoJ2lzLWludmFsaWQnKTtcclxuICAgICAgfSk7XHJcbiAgICAkKCdmb3JtW25hbWU9XCInICsgZm9ybU5hbWUgKyAnXCInKS5maW5kKCcubWRsLWNoZWNrYm94X19pbnB1dCcpLmVhY2goXHJcblxyXG4gICAgICBmdW5jdGlvbihpbmRleCwgZWxlbWVudCkge1xyXG4gICAgICAgICQodGhpcykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcclxuICAgICAgfSk7XHJcbiAgICAkKCdmb3JtW25hbWU9XCInICsgZm9ybU5hbWUgKyAnXCInKS5maW5kKCcubWRsLWNoZWNrYm94JykuZWFjaChcclxuXHJcbiAgICAgIGZ1bmN0aW9uKGluZGV4LCBlbGVtZW50KSB7XHJcbiAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnaXMtY2hlY2tlZCcpO1xyXG4gICAgICB9KTtcclxuICB9XHJcbiAgcmV0dXJuIHtcclxuICAgIHNldDogc2V0T3B0aW9ucyxcclxuICAgIGdldDogZ2V0QXR0cmlidXRlcyxcclxuICAgIGNsZWFyOiByZXNldEZvcm1cclxuICAvLyBjcmVhdGVWYWxpZGF0b3I6IGNyZWF0ZVZhbGlkYXRvcixcclxuICAvLyBkZXN0cm95VmFsaWRhdG9yOiBkZXN0cm95VmFsaWRhdG9yLFxyXG4gIC8vIHZhbGlkYXRlRm9ybTogdmFsaWRhdGVGb3JtLFxyXG4gIC8vIG9uVmFsaWRhdGVGb3JtU3VjY2Vzczogb25WYWxpZGF0ZUZvcm1TdWNjZXNzLFxyXG4gIC8vIGRpc2FibGVTdWJtaXRCdG46IGRpc2FibGVTdWJtaXRCdG5cclxuICB9O1xyXG59KGpRdWVyeSwgcGFyc2xleSkpO1xyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
