function PropertyStyle(){var e="../images/map-icons/pins/48/pin1.png";return new ol.style.Style({image:new ol.style.Icon({src:e,anchor:[.5,1],scale:.7})})}function clickInfo(e){var t,o,n={};o=new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 0, 0, 0.2)"}),stroke:new ol.style.Stroke({color:"#FF00003",width:2}),image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"#FF0000"})})}),e.preventDefault(),t=map.forEachFeatureAtPixel(e.pixel,function(e,t){return{feature:e,layer:t}},this,function(e){return"property"===e.get("id")?!0:void 0},this),t?(n.feature={},t.feature.setStyle(o),t.feature.getKeys().forEach(function(e){n.feature[e]=t.feature.get(e)}),dust.render("adminPropertyInfo",n,function(e,o){$(".property-info").html(o),$(".property-info").removeClass("visuallyhidden"),componentHandler.upgradeDom(),$("#listing").on("click",function(e){var o;e.preventDefault(),o=$(this).data("gid"),$.ajax({url:"http://127.0.0.1:3000/db/listing",type:"GET",dataType:"json",data:{gid:o}}).done(function(e){console.log(e);var n=e.id;$(".modal-dialog").removeClass("visuallyhidden"),dust.render("listingInsert",e,function(e,a){$(".modal-content").html(a),componentHandler.upgradeDom(),handleForm.set({name:"insert-update-listing",submitBtnId:"ok"}),$("#sent-listing").on("click",function(e){var a;e.preventDefault(),a=handleForm.get(),null!==a&&(a.property_gid=o,a.listing_id=n,$.ajax({url:"http://127.0.0.1:3000/db/listing/update",type:"POST",data:a,dataType:"text"}).done(function(e,t,o){201===o.status?toastr.success("Property Updated In Database"):toastr.error("Oops Something Went Wrong!!!")}).fail(function(e,t,o){toastr.error("Oops Something Went Wrong!!!")}).always(function(){handleForm.clear(),$("#openModal").addClass("visuallyhidden"),propertySource.clear(),t.feature.setStyle(null)}))}),$("#cancel-listing").on("click",function(e){e.preventDefault(),handleForm.clear(),$("#openModal").addClass("visuallyhidden")})})}).fail(function(){var e={};"el"===lang?(e.msg="Δεν Βρέθηκε Αγγελία",e.text="Δημιουργία Καινούργιας;",e.yes="ΝΑΙ",e.no="ΟΧΙ"):(e.msg="No Listing Found",e.text="Create New Listing?",e.yes="YES",e.no="NO"),dust.render("dialog",e,function(e,n){$("#openModal").removeClass("visuallyhidden"),$(".modal-content").html(n),componentHandler.upgradeDom(),$("#yes").on("click",function(e){e.preventDefault(),dust.render("listingInsert",{},function(e,n){$(".modal-content").html(n),componentHandler.upgradeDom(),handleForm.set({name:"insert-update-listing",submitBtnId:"ok"}),$("#sent-listing").on("click",function(e){var n;e.preventDefault(),n=handleForm.get(),null!==n&&(n.property_gid=o,$.ajax({url:"http://127.0.0.1:3000/db/listing/insert",type:"POST",data:n,dataType:"text"}).done(function(e,t,o){201===o.status?toastr.success("Property Updated In Database"):toastr.error("Oops Something Went Wrong!!!")}).fail(function(e,t,o){toastr.error("Oops Something Went Wrong!!!")}).always(function(){handleForm.clear(),$("#openModal").addClass("visuallyhidden"),t.feature.setStyle(null)}))}),$("#cancel-listing").on("click",function(e){e.preventDefault(),handleForm.clear(),t.feature.setStyle(null),$("#openModal").addClass("visuallyhidden")})})}),$("#no").on("click",function(e){e.preventDefault(),$("#openModal").addClass("visuallyhidden")})})})})})):(propertySource.forEachFeature(function(e){e.setStyle(null)}),$(".property-info").addClass("visuallyhidden"),toastr.options={positionClass:"toast-bottom-full-width",preventDuplicates:!0,timeOut:60},toastr.error("Cant Find Any Property There..."))}var center=[3677385,4120949],extent=[3590094,4102833,3855483,4261211],lang=document.documentElement.lang,geoJSONFormat=new ol.format.GeoJSON({defaultDataProjection:"EPSG:4326"}),propertySource,property,map,features,drawnProperties,draw,select,translate,bing=new ol.layer.Tile({visible:!0,source:new ol.source.BingMaps({key:"Ak2Gq8VUfICsPpuf7LRANXmXt2sHWmSLPhohmVLFtFIEwYjs_5MCyAhAFwRSVpLj",imagerySet:"Aerial"}),maxZoom:19,crossOrigin:"anonymous",preload:1/0,id:"bing"}),mapbox=new ol.layer.Tile({source:new ol.source.XYZ({attributions:[new ol.Attribution({html:'<a href="https://www.mapbox.com/about/maps/" target="_blank">&copy; Mapbox &copy; OpenStreetMap</a>'})],url:"https://api.mapbox.com/v4/mapbox.streets/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiZmlydmFpbiIsImEiOiJlOWYyYTM0NThiNWM0YjJjODJjNDE4ODQzNzA2MGQyNiJ9.-NVDO27Hzt-w_nQosUPfLA"}),id:"mapbox"});propertySource=new ol.source.Vector({format:geoJSONFormat,loader:function(e,t,o){var n="http://127.0.0.1:3000/db/admin",a=this;a.clear(),$.ajax({url:n,type:"POST",beforeSend:function(e){localStorage.getItem("userToken")&&e.setRequestHeader("Authorization","Bearer "+localStorage.getItem("userToken"))},dataType:"json",data:{id:id}}).done(function(e){var t=geoJSONFormat.readFeatures(e,{featureProjection:"EPSG:3857"});a.addFeatures(t)}).fail(function(){console.log("error")})},strategy:ol.loadingstrategy.all}),property=new ol.layer.Vector({source:propertySource,id:"property",visible:!0,style:PropertyStyle()}),property.setZIndex(2),map=new ol.Map({target:"adminMap",layers:[mapbox,property],loadTilesWhileAnimating:!0,loadTilesWhileInteracting:!0,renderer:"canvas",controls:ol.control.defaults({attributionOptions:{collapsible:!1,collapsed:!1}}).extend([new ol.control.ScaleLine({units:"metric"}),new ol.control.OverviewMap({className:"ol-overviewmap ol-custom-overviewmap",collapsible:!0,collapsed:!0,layers:[bing]}),new ol.control.ZoomToExtent({extent:extent})]),view:new ol.View({center:center,projection:"EPSG:3857",zoom:14,maxZoom:19,minZoom:10})}),"el"===lang?(bing.set("name","Δορυφορική εικόνα"),mapbox.set("name","Χάρτης"),property.set("name","Ακίνητα")):(bing.set("name","Sattelite Image"),mapbox.set("name","Map"),property.set("name","Properties")),features=new ol.Collection,drawnProperties=new ol.layer.Vector({source:new ol.source.Vector,style:new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.2)"}),stroke:new ol.style.Stroke({color:"#ffcc33",width:2}),image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"#ffcc33"})})}),id:"drawnProperties"}),map.addLayer(drawnProperties),draw=new ol.interaction.Draw({source:drawnProperties.getSource(),type:"Point",style:new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.2)"}),stroke:new ol.style.Stroke({color:"#ffcc33",width:2}),image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"#ffcc33"})})})}),map.addInteraction(draw),draw.setActive(!1),select=new ol.interaction.Select({layers:[property],features:features,style:new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 0, 0, 0.2)"}),stroke:new ol.style.Stroke({color:"#FF00003",width:2}),image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"#FF0000"})})})}),map.addInteraction(select),select.setActive(!1),translate=new ol.interaction.Translate({features:select.getFeatures()}),map.addInteraction(translate),translate.setActive(!1),map.on("click",clickInfo),$("#insertProperty").click(function(){$(".property-info").addClass("visuallyhidden"),toastr.options={positionClass:"toast-top-center",preventDuplicates:!0,timeOut:60},map.un("click",clickInfo),select.setActive(!1),draw.setActive(!0),draw.on("drawend",function(e){var t={};e.preventDefault(),draw.setActive(!1),$(".modal-dialog").removeClass("visuallyhidden"),dust.render("propertyInsert",t,function(e,t){$(".modal-content").html(t),componentHandler.upgradeDom(),handleForm.set({name:"insertProperty",submitBtnId:"insert"}),$("#cancelInsert").on("click",function(e){e.preventDefault(),handleForm.clear(),drawnProperties.getSource().clear(),$(".modal-dialog").addClass("visuallyhidden"),map.on("click",clickInfo)}),$("#insert").on("click",function(e){var t,o;e.preventDefault(),t=handleForm.get(),console.log(t),null!==t&&(handleCoords.setLayer("drawnProperties"),o=handleCoords.coords(),t.x=o[0],t.y=o[1],t.adminId=id,$.ajax({url:"http://127.0.0.1:3000/db/insert",type:"POST",data:t}).done(function(e,t,o){toastr.options={positionClass:"toast-bottom-full-width",preventDuplicates:!0,timeOut:60},201===o.status?toastr.success("Property Recorded In Database"):toastr.error("Oops Something Went Wrong!!!")}).fail(function(e,t,o){toastr.error("Oops Something Went Wrong!!!")}).always(function(){e.preventDefault(),drawnProperties.getSource().clear(),propertySource.clear(),handleForm.clear(),$(".modal-dialog").addClass("visuallyhidden"),map.on("click",clickInfo)}))})})})}),$("#deleteProperty").click(function(e){e.preventDefault(),$(".property-info").addClass("visuallyhidden"),toastr.options={positionClass:"toast-top-center",preventDuplicates:!0,timeOut:20},toastr.info("Delete Property"),map.un("click",clickInfo),draw.setActive(!1),features.clear(),select.setActive(!0),select.on("select",function(e){var t;1===e.target.getFeatures().getLength()&&(toastr.options.newestOnTop=!0,toastr.options.preventDuplicates=!0,toastr.options.extendedTimeOut=0,toastr.options.timeOut=0,toastr.options.closeButton=!0,t=toastr.warning('<p>Are you sure?</p><div class="toastr-btns"><button id="yesDelete" class="mdl-button mdl-js-button ">Yes</button><button id="noDelete" class="mdl-button mdl-js-button">No</button></div>'),t.on("click","#yesDelete",function(){var e;console.log(select.getFeatures()),e=select.getFeatures().item(0).get("gid"),$.ajax({url:"http://127.0.0.1:3000/db/delete",type:"POST",dataType:"text",data:{gid:e}}).done(function(e,t,o){toastr.options={positionClass:"toast-bottom-full-width",preventDuplicates:!0,timeOut:60},toastr.success("Property Deleted From Database")}).fail(function(e,t,o){toastr.options={positionClass:"toast-bottom-full-width",preventDuplicates:!0,timeOut:60},toastr.success("Oops Something Went Wrong!!!")}).always(function(){propertySource.clear(),select.getFeatures().clear(),select.setActive(!1),map.on("click",clickInfo)}),t.remove()}),t.on("click","#noDelete",function(){t.remove(),select.getFeatures().clear(),select.setActive(!1)}))})}),$("#logout").click(function(){location.href="/map/logout"}),$("#updateProperty").on("click",function(e){var t,o;e.preventDefault(),map.un("click",clickInfo),draw.setActive(!1),select.setActive(!0),translate.setActive(!0),$(".property-info").addClass("visuallyhidden"),select.on("select",function(e){1===select.getFeatures().getLength()&&(t=select.getFeatures().item(0).get("gid"),$.ajax({url:"http://127.0.0.1:3000/db/fetch",type:"POST",dataType:"json",data:{gid:t}}).done(function(e){o=_.head(e.features).properties}).fail(function(){toastr.error("Oops Something Went Wrong!!!")}).always(function(){console.log("complete")}))}),translate.on("translateend",function(e){var n=ol.proj.transform(e.coordinate,"EPSG:3857","EPSG:4326");console.log(n),$(".modal-dialog").removeClass("visuallyhidden"),dust.render("propertyUpdate",o,function(e,o){$(".modal-content").html(o),componentHandler.upgradeDom(),handleForm.set({name:"updateProperty",submitBtnId:"update"}),$("#update").on("click",function(e){var o;e.preventDefault(),o=handleForm.get(),_.isNil(o)||(o.x=n[0],o.y=n[1],o.gid=t,$.ajax({url:"http://127.0.0.1:3000/db/update",type:"POST",data:o}).done(function(e,t,o){toastr.options={positionClass:"toast-bottom-full-width",preventDuplicates:!0,timeOut:60},200===o.status?toastr.success("Property Updated In Database"):toastr.error("Oops Something Went Wrong!!!")}).fail(function(){toastr.error("Oops Something Went Wrong!!!")}).always(function(){propertySource.clear(),select.getFeatures().clear(),select.setActive(!1),translate.setActive(!1),map.on("click",clickInfo),$(".modal-dialog").addClass("visuallyhidden")}))}),$("#cancelUpdate").on("click",function(e){e.preventDefault(),handleForm.clear(),propertySource.clear(),select.getFeatures().clear(),select.setActive(!1),translate.setActive(!1),map.on("click",clickInfo),$(".modal-dialog").addClass("visuallyhidden"),map.on("click",clickInfo)})})})}),$(document).ready(function(){window.Parsley.on("field:error",function(){console.log("Validation failed for: ",this.$element)}),window.Parsley.addValidator("date",{requirementType:"string",validateString:function(e,t){return moment(e,"DD-MM-YYYY",!0).isValid()===!0?!0:!1},messages:{en:"Wrong Date",el:"Λάθος Ημερομηνία"}}),window.Parsley.addValidator("salerenten",{requirementType:"string",validateString:function(e,t){return"Sale"===e||"Rent"===e?!0:!1},messages:{en:"Please Type Sale or Rent",el:"Παρακαλώ πληκρολογήστε Sale ή Rent"}}),window.Parsley.addValidator("salerentel",{requirementType:"string",validateString:function(e,t){return"Πώληση"===e||"Ενοικίαση"===e?!0:!1},messages:{en:"Please Type Πώληση or Ενοικίαση",el:"Παρακαλώ πληκρολογήστε Πώληση ή Ενοικίαση"}})});var handleCoords=function(e){"use strict";function t(e){for(var t=map.getLayers(),o=t.getLength(),n=0;o>n;n++)if(e===t.item(n).get("id"))return t.item(n);return null}function o(e){r=t(e)}function n(){var t;return t=r.getSource().getFeatures()[0].getGeometry().getCoordinates(),a=e.proj.transform(t,"EPSG:3857","EPSG:4326")}var a,r;return{coords:n,setLayer:o}}(ol),handleForm=function(e,t){"use strict";function o(e){s=e.name,c=e.submitBtnId}function n(){return d=e('form[name="'+s+'"').parsley(),!0}function a(){d.destroy()}function r(){return d.validate()}function l(){var t={};return n(),r()===!0?(e('form[name="'+s+'"').find(".mdl-textfield__input").each(function(o,n){t[e(this).attr("id")]=e(this).val()}),e('form[name="'+s+'"').find(".mdl-checkbox__input").each(function(o,n){t[e(this).attr("id")]=e(this).prop("checked")}),t):null}function i(){1==n()&&a(),e('form[name="'+s+'"').find(".mdl-textfield__input").each(function(t,o){e(this).val(""),e(this).parent().eq(0).removeClass("is-dirty"),e(this).parent().eq(0).removeClass("is-invalid")}),e('form[name="'+s+'"').find(".mdl-checkbox__input").each(function(t,o){e(this).prop("checked",!1)}),e('form[name="'+s+'"').find(".mdl-checkbox").each(function(t,o){e(this).removeClass("is-checked")})}var s,c,d;return{set:o,get:l,clear:i}}(jQuery,parsley);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkbWluLmpzIiwiaGFuZGxlQ29vcmRzLmpzIiwiaGFuZGxlRm9ybS5qcyJdLCJuYW1lcyI6WyJQcm9wZXJ0eVN0eWxlIiwic3JjIiwib2wiLCJzdHlsZSIsIlN0eWxlIiwiaW1hZ2UiLCJJY29uIiwiYW5jaG9yIiwic2NhbGUiLCJjbGlja0luZm8iLCJldmVudCIsImNsaWNrZWRGZWF0dXJlIiwiY2xpY2tlZEZlYXR1cmVTdHlsZSIsIm9iaiIsImZpbGwiLCJGaWxsIiwiY29sb3IiLCJzdHJva2UiLCJTdHJva2UiLCJ3aWR0aCIsIkNpcmNsZSIsInJhZGl1cyIsInByZXZlbnREZWZhdWx0IiwibWFwIiwiZm9yRWFjaEZlYXR1cmVBdFBpeGVsIiwicGl4ZWwiLCJmZWF0dXJlIiwibGF5ZXIiLCJ0aGlzIiwiZ2V0Iiwic2V0U3R5bGUiLCJnZXRLZXlzIiwiZm9yRWFjaCIsImtleSIsImR1c3QiLCJyZW5kZXIiLCJlcnIiLCJvdXQiLCIkIiwiaHRtbCIsInJlbW92ZUNsYXNzIiwiY29tcG9uZW50SGFuZGxlciIsInVwZ3JhZGVEb20iLCJvbiIsImdpZCIsImRhdGEiLCJhamF4IiwidXJsIiwidHlwZSIsImRhdGFUeXBlIiwiZG9uZSIsImNvbnNvbGUiLCJsb2ciLCJsaXN0aW5nX2lkIiwiaWQiLCJoYW5kbGVGb3JtIiwic2V0IiwibmFtZSIsInN1Ym1pdEJ0bklkIiwicHJvcGVydHlfZ2lkIiwidGV4dFN0YXR1cyIsImpxWEhSIiwic3RhdHVzIiwidG9hc3RyIiwic3VjY2VzcyIsImVycm9yIiwiZmFpbCIsImVycm9yVGhyb3duIiwiYWx3YXlzIiwiY2xlYXIiLCJhZGRDbGFzcyIsInByb3BlcnR5U291cmNlIiwibGFuZyIsIm1zZyIsInRleHQiLCJ5ZXMiLCJubyIsImZvckVhY2hGZWF0dXJlIiwiZiIsIm9wdGlvbnMiLCJwb3NpdGlvbkNsYXNzIiwicHJldmVudER1cGxpY2F0ZXMiLCJ0aW1lT3V0IiwiY2VudGVyIiwiZXh0ZW50IiwiZG9jdW1lbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJnZW9KU09ORm9ybWF0IiwiZm9ybWF0IiwiR2VvSlNPTiIsImRlZmF1bHREYXRhUHJvamVjdGlvbiIsInByb3BlcnR5IiwiZmVhdHVyZXMiLCJkcmF3blByb3BlcnRpZXMiLCJkcmF3Iiwic2VsZWN0IiwidHJhbnNsYXRlIiwiYmluZyIsIlRpbGUiLCJ2aXNpYmxlIiwic291cmNlIiwiQmluZ01hcHMiLCJpbWFnZXJ5U2V0IiwibWF4Wm9vbSIsImNyb3NzT3JpZ2luIiwicHJlbG9hZCIsIkluZmluaXR5IiwibWFwYm94IiwiWFlaIiwiYXR0cmlidXRpb25zIiwiQXR0cmlidXRpb24iLCJWZWN0b3IiLCJsb2FkZXIiLCJyZXNvbHV0aW9uIiwicHJvamVjdGlvbiIsInNlbGYiLCJiZWZvcmVTZW5kIiwieGhyIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInNldFJlcXVlc3RIZWFkZXIiLCJyZXNwb25zZSIsInJlYWRGZWF0dXJlcyIsImZlYXR1cmVQcm9qZWN0aW9uIiwiYWRkRmVhdHVyZXMiLCJzdHJhdGVneSIsImxvYWRpbmdzdHJhdGVneSIsImFsbCIsInNldFpJbmRleCIsIk1hcCIsInRhcmdldCIsImxheWVycyIsImxvYWRUaWxlc1doaWxlQW5pbWF0aW5nIiwibG9hZFRpbGVzV2hpbGVJbnRlcmFjdGluZyIsInJlbmRlcmVyIiwiY29udHJvbHMiLCJjb250cm9sIiwiZGVmYXVsdHMiLCJhdHRyaWJ1dGlvbk9wdGlvbnMiLCJjb2xsYXBzaWJsZSIsImNvbGxhcHNlZCIsImV4dGVuZCIsIlNjYWxlTGluZSIsInVuaXRzIiwiT3ZlcnZpZXdNYXAiLCJjbGFzc05hbWUiLCJab29tVG9FeHRlbnQiLCJ2aWV3IiwiVmlldyIsInpvb20iLCJtaW5ab29tIiwiQ29sbGVjdGlvbiIsImFkZExheWVyIiwiaW50ZXJhY3Rpb24iLCJEcmF3IiwiZ2V0U291cmNlIiwiYWRkSW50ZXJhY3Rpb24iLCJzZXRBY3RpdmUiLCJTZWxlY3QiLCJUcmFuc2xhdGUiLCJnZXRGZWF0dXJlcyIsImNsaWNrIiwidW4iLCJjIiwiaGFuZGxlQ29vcmRzIiwic2V0TGF5ZXIiLCJjb29yZHMiLCJ4IiwieSIsImFkbWluSWQiLCJpbmZvIiwiZSIsIiR0b2FzdCIsImdldExlbmd0aCIsIm5ld2VzdE9uVG9wIiwiZXh0ZW5kZWRUaW1lT3V0IiwiY2xvc2VCdXR0b24iLCJ3YXJuaW5nIiwiaXRlbSIsInJlbW92ZSIsImxvY2F0aW9uIiwiaHJlZiIsIl8iLCJoZWFkIiwicHJvcGVydGllcyIsInByb2oiLCJ0cmFuc2Zvcm0iLCJjb29yZGluYXRlIiwiaXNOaWwiLCJyZWFkeSIsIndpbmRvdyIsIlBhcnNsZXkiLCIkZWxlbWVudCIsImFkZFZhbGlkYXRvciIsInJlcXVpcmVtZW50VHlwZSIsInZhbGlkYXRlU3RyaW5nIiwidmFsdWUiLCJyZXF1aXJlbWVudCIsIm1vbWVudCIsImlzVmFsaWQiLCJtZXNzYWdlcyIsImVuIiwiZWwiLCJmaW5kQnlJZCIsImdldExheWVycyIsImxlbmd0aCIsImkiLCJsIiwiZ2V0Q29vcmRzIiwiY29vcmRFUFNHMzg1NyIsImdldEdlb21ldHJ5IiwiZ2V0Q29vcmRpbmF0ZXMiLCJwYXJzbGV5Iiwic2V0T3B0aW9ucyIsImZvcm1OYW1lIiwiY3JlYXRlVmFsaWRhdG9yIiwicCIsImRlc3Ryb3lWYWxpZGF0b3IiLCJkZXN0cm95IiwidmFsaWRhdGVGb3JtIiwidmFsaWRhdGUiLCJnZXRBdHRyaWJ1dGVzIiwiZmluZCIsImVhY2giLCJpbmRleCIsImVsZW1lbnQiLCJhdHRyIiwidmFsIiwicHJvcCIsInJlc2V0Rm9ybSIsInBhcmVudCIsImVxIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiQUE0QkEsUUFBQUEsaUJBQ0EsR0FBQUMsR0FBQSxzQ0FDQSxPQUFBLElBQUFDLElBQUFDLE1BQUFDLE9BQ0FDLE1BQUEsR0FBQUgsSUFBQUMsTUFBQUcsTUFDQUwsSUFBQUEsRUFDQU0sUUFDQSxHQUFBLEdBRUFDLE1BQUEsT0FnS0EsUUFBQUMsV0FBQUMsR0FDQSxHQUNBQyxHQUFBQyxFQURBQyxJ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RUFBQVYsTUFBQXVNLFFBRUE3TCxFQUFBLGNBQUFnTCxFQUFBLEtBQUFRLEtBQUEsd0JBQUFDLEtBRUEsU0FBQUMsRUFBQUMsR0FDQXBOLEVBQUF5QixFQUFBVixNQUFBc00sS0FBQSxPQUFBNUwsRUFBQVYsTUFBQXdNLEtBQUEsYUFFQXZOLEdBRUEsS0FHQSxRQUFBd04sS0FDQSxHQUFBZCxLQUNBRSxJQUVBbkwsRUFBQSxjQUFBZ0wsRUFBQSxLQUFBUSxLQUFBLHlCQUFBQyxLQUVBLFNBQUFDLEVBQUFDLEdBQ0EzTCxFQUFBVixNQUFBdU0sSUFBQSxJQUNBN0wsRUFBQVYsTUFBQTBNLFNBQUFDLEdBQUEsR0FBQS9MLFlBQUEsWUFDQUYsRUFBQVYsTUFBQTBNLFNBQUFDLEdBQUEsR0FBQS9MLFlBQUEsZ0JBRUFGLEVBQUEsY0FBQWdMLEVBQUEsS0FBQVEsS0FBQSx3QkFBQUMsS0FFQSxTQUFBQyxFQUFBQyxHQUNBM0wsRUFBQVYsTUFBQXdNLEtBQUEsV0FBQSxLQUVBOUwsRUFBQSxjQUFBZ0wsRUFBQSxLQUFBUSxLQUFBLGlCQUFBQyxLQUVBLFNBQUFDLEVBQUFDLEdBQ0EzTCxFQUFBVixNQUFBWSxZQUFBLGdCQXBFQSxHQUFBOEssR0FBQTVKLEVBQUE4SixDQXVFQSxRQUNBaEssSUFBQTZKLEVBQ0F4TCxJQUFBZ00sRUFDQXhKLE1BQUFnSyxJQU9BRyxPQUFBcEIiLCJmaWxlIjoiYWRtaW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGNlbnRlciA9IFszNjc3Mzg1LCA0MTIwOTQ5XSxcbiAgICBleHRlbnQgPSBbMzU5MDA5NCwgNDEwMjgzMywgMzg1NTQ4MywgNDI2MTIxMV0sXG4gICAgbGFuZyA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5sYW5nLFxuICAgIGdlb0pTT05Gb3JtYXQgPSBuZXcgb2wuZm9ybWF0Lkdlb0pTT04oe1xuICAgICAgZGVmYXVsdERhdGFQcm9qZWN0aW9uOiAnRVBTRzo0MzI2J1xuICAgIH0pLFxuICAgIHByb3BlcnR5U291cmNlLCBwcm9wZXJ0eSwgbWFwLCBmZWF0dXJlcywgZHJhd25Qcm9wZXJ0aWVzLCBkcmF3LCBzZWxlY3QsIHRyYW5zbGF0ZTtcbnZhciBiaW5nID0gbmV3IG9sLmxheWVyLlRpbGUoe1xuICB2aXNpYmxlOiB0cnVlLFxuICBzb3VyY2U6IG5ldyBvbC5zb3VyY2UuQmluZ01hcHMoe1xuICAgIGtleTogJ0FrMkdxOFZVZklDc1BwdWY3TFJBTlhtWHQyc0hXbVNMUGhvaG1WTEZ0RklFd1lqc181TUN5QWhBRndSU1ZwTGonLFxuICAgIGltYWdlcnlTZXQ6ICdBZXJpYWwnXG4gIH0pLFxuICBtYXhab29tOiAxOSxcbiAgY3Jvc3NPcmlnaW46ICdhbm9ueW1vdXMnLFxuICBwcmVsb2FkOiBJbmZpbml0eSxcbiAgaWQ6ICdiaW5nJ1xufSk7XG52YXIgbWFwYm94ID0gbmV3IG9sLmxheWVyLlRpbGUoe1xuICBzb3VyY2U6IG5ldyBvbC5zb3VyY2UuWFlaKHtcbiAgICBhdHRyaWJ1dGlvbnM6IFtuZXcgb2wuQXR0cmlidXRpb24oe1xuICAgICAgaHRtbDogJzxhIGhyZWY9XCJodHRwczovL3d3dy5tYXBib3guY29tL2Fib3V0L21hcHMvXCIgdGFyZ2V0PVwiX2JsYW5rXCI+JmNvcHk7IE1hcGJveCAmY29weTsgT3BlblN0cmVldE1hcDwvYT4nXG4gICAgfSldLFxuICAgIHVybDogJ2h0dHBzOi8vYXBpLm1hcGJveC5jb20vdjQvbWFwYm94LnN0cmVldHMve3p9L3t4fS97eX0ucG5nP2FjY2Vzc190b2tlbj1way5leUoxSWpvaVptbHlkbUZwYmlJc0ltRWlPaUpsT1dZeVlUTTBOVGhpTldNMFlqSmpPREpqTkRFNE9EUXpOekEyTUdReU5pSjkuLU5WRE8yN0h6dC13X25Rb3NVUGZMQSdcbiAgfSksXG4gIGlkOiAnbWFwYm94J1xufSk7XG5cbmZ1bmN0aW9uIFByb3BlcnR5U3R5bGUoKSB7XG4gIHZhciBzcmMgPSAnLi4vaW1hZ2VzL21hcC1pY29ucy9waW5zLzQ4L3BpbjEucG5nJztcbiAgcmV0dXJuIG5ldyBvbC5zdHlsZS5TdHlsZSh7XG4gICAgaW1hZ2U6IG5ldyBvbC5zdHlsZS5JY29uKCh7XG4gICAgICBzcmM6IHNyYyxcbiAgICAgIGFuY2hvcjogW1xuICAgICAgICAwLjUsIDFcbiAgICAgIF0sXG4gICAgICBzY2FsZTogMC43XG4gICAgfSkpXG4gIH0pO1xufVxucHJvcGVydHlTb3VyY2UgPSBuZXcgb2wuc291cmNlLlZlY3Rvcih7XG4gIGZvcm1hdDogZ2VvSlNPTkZvcm1hdCxcbiAgbG9hZGVyOiBmdW5jdGlvbihleHRlbnQsIHJlc29sdXRpb24sIHByb2plY3Rpb24pIHtcbiAgICB2YXIgdXJsID0gJ2h0dHA6Ly8xMjcuMC4wLjE6MzAwMC9kYi9hZG1pbic7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYuY2xlYXIoKTtcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiB1cmwsXG4gICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAnYmVmb3JlU2VuZCc6IGZ1bmN0aW9uKHhocikge1xuICAgICAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJUb2tlbicpKSB7XG4gICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0F1dGhvcml6YXRpb24nLCAnQmVhcmVyICcgKyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlclRva2VuJykpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgaWQ6IGlkXG4gICAgICB9XG4gICAgfSkuZG9uZShmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgdmFyIGZlYXR1cmVzID0gZ2VvSlNPTkZvcm1hdC5yZWFkRmVhdHVyZXMocmVzcG9uc2UsIHtcbiAgICAgICAgZmVhdHVyZVByb2plY3Rpb246ICdFUFNHOjM4NTcnXG4gICAgICB9KTtcbiAgICAgIHNlbGYuYWRkRmVhdHVyZXMoZmVhdHVyZXMpO1xuICAgIH0pLmZhaWwoZnVuY3Rpb24oKSB7XG4gICAgICBjb25zb2xlLmxvZygnZXJyb3InKTtcbiAgICB9KTtcbiAgfSxcbiAgc3RyYXRlZ3k6IG9sLmxvYWRpbmdzdHJhdGVneS5hbGxcbn0pO1xucHJvcGVydHkgPSBuZXcgb2wubGF5ZXIuVmVjdG9yKHtcbiAgc291cmNlOiBwcm9wZXJ0eVNvdXJjZSxcbiAgaWQ6ICdwcm9wZXJ0eScsXG4gIHZpc2libGU6IHRydWUsXG4gIHN0eWxlOiBQcm9wZXJ0eVN0eWxlKClcbn0pO1xucHJvcGVydHkuc2V0WkluZGV4KDIpO1xubWFwID0gbmV3IG9sLk1hcCh7XG4gIHRhcmdldDogJ2FkbWluTWFwJyxcbiAgbGF5ZXJzOiBbXG4gICAgbWFwYm94LCBwcm9wZXJ0eVxuICBdLFxuICBsb2FkVGlsZXNXaGlsZUFuaW1hdGluZzogdHJ1ZSxcbiAgbG9hZFRpbGVzV2hpbGVJbnRlcmFjdGluZzogdHJ1ZSxcbiAgcmVuZGVyZXI6ICdjYW52YXMnLFxuICBjb250cm9sczogb2wuY29udHJvbC5kZWZhdWx0cyh7XG4gICAgYXR0cmlidXRpb25PcHRpb25zOiB7XG4gICAgICBjb2xsYXBzaWJsZTogZmFsc2UsXG4gICAgICBjb2xsYXBzZWQ6IGZhbHNlXG4gICAgfVxuICB9KS5leHRlbmQoW1xuICAgIG5ldyBvbC5jb250cm9sLlNjYWxlTGluZSh7XG4gICAgICB1bml0czogJ21ldHJpYydcbiAgICB9KSxcbiAgICBuZXcgb2wuY29udHJvbC5PdmVydmlld01hcCh7XG4gICAgICBjbGFzc05hbWU6ICdvbC1vdmVydmlld21hcCBvbC1jdXN0b20tb3ZlcnZpZXdtYXAnLFxuICAgICAgY29sbGFwc2libGU6IHRydWUsXG4gICAgICBjb2xsYXBzZWQ6IHRydWUsXG4gICAgICBsYXllcnM6IFtiaW5nXVxuICAgIH0pLFxuICAgIG5ldyBvbC5jb250cm9sLlpvb21Ub0V4dGVudCh7XG4gICAgICBleHRlbnQ6IGV4dGVudFxuICAgIH0pXG4gIF0pLFxuICB2aWV3OiBuZXcgb2wuVmlldyh7XG4gICAgY2VudGVyOiBjZW50ZXIsXG4gICAgLy8gZXh0ZW50OiBleHRlbnQsXG4gICAgcHJvamVjdGlvbjogJ0VQU0c6Mzg1NycsXG4gICAgem9vbTogMTQsXG4gICAgbWF4Wm9vbTogMTksXG4gICAgbWluWm9vbTogMTBcbiAgfSlcbn0pO1xuaWYgKGxhbmcgPT09ICdlbCcpIHtcbiAgYmluZy5zZXQoJ25hbWUnLCAnzpTOv8+Bz4XPhs6/z4HOuc66zq4gzrXOuc66z4zOvc6xJyk7XG4gIG1hcGJveC5zZXQoJ25hbWUnLCAnzqfOrM+Bz4TOt8+CJyk7XG4gIHByb3BlcnR5LnNldCgnbmFtZScsICfOkc66zq/Ovc63z4TOsScpO1xufSBlbHNlIHtcbiAgYmluZy5zZXQoJ25hbWUnLCAnU2F0dGVsaXRlIEltYWdlJyk7XG4gIG1hcGJveC5zZXQoJ25hbWUnLCAnTWFwJyk7XG4gIHByb3BlcnR5LnNldCgnbmFtZScsICdQcm9wZXJ0aWVzJyk7XG59XG4vLz09PT09PSBpbnRlcmFjdGlvbnMgPT09PT09XG5mZWF0dXJlcyA9IG5ldyBvbC5Db2xsZWN0aW9uKCk7XG5kcmF3blByb3BlcnRpZXMgPSBuZXcgb2wubGF5ZXIuVmVjdG9yKHtcbiAgc291cmNlOiBuZXcgb2wuc291cmNlLlZlY3RvcigpLFxuICBzdHlsZTogbmV3IG9sLnN0eWxlLlN0eWxlKHtcbiAgICBmaWxsOiBuZXcgb2wuc3R5bGUuRmlsbCh7XG4gICAgICBjb2xvcjogJ3JnYmEoMjU1LCAyNTUsIDI1NSwgMC4yKSdcbiAgICB9KSxcbiAgICBzdHJva2U6IG5ldyBvbC5zdHlsZS5TdHJva2Uoe1xuICAgICAgY29sb3I6ICcjZmZjYzMzJyxcbiAgICAgIHdpZHRoOiAyXG4gICAgfSksXG4gICAgaW1hZ2U6IG5ldyBvbC5zdHlsZS5DaXJjbGUoe1xuICAgICAgcmFkaXVzOiA3LFxuICAgICAgZmlsbDogbmV3IG9sLnN0eWxlLkZpbGwoe1xuICAgICAgICBjb2xvcjogJyNmZmNjMzMnXG4gICAgICB9KVxuICAgIH0pXG4gIH0pLFxuICBpZDogJ2RyYXduUHJvcGVydGllcydcbn0pO1xubWFwLmFkZExheWVyKGRyYXduUHJvcGVydGllcyk7XG4vL2RyYXdcbmRyYXcgPSBuZXcgb2wuaW50ZXJhY3Rpb24uRHJhdyh7XG4gIC8vIGZlYXR1cmVzOiBmZWF0dXJlcyxcbiAgc291cmNlOiBkcmF3blByb3BlcnRpZXMuZ2V0U291cmNlKCksXG4gIHR5cGU6ICdQb2ludCcsXG4gIHN0eWxlOiBuZXcgb2wuc3R5bGUuU3R5bGUoe1xuICAgIGZpbGw6IG5ldyBvbC5zdHlsZS5GaWxsKHtcbiAgICAgIGNvbG9yOiAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjIpJ1xuICAgIH0pLFxuICAgIHN0cm9rZTogbmV3IG9sLnN0eWxlLlN0cm9rZSh7XG4gICAgICBjb2xvcjogJyNmZmNjMzMnLFxuICAgICAgd2lkdGg6IDJcbiAgICB9KSxcbiAgICBpbWFnZTogbmV3IG9sLnN0eWxlLkNpcmNsZSh7XG4gICAgICByYWRpdXM6IDcsXG4gICAgICBmaWxsOiBuZXcgb2wuc3R5bGUuRmlsbCh7XG4gICAgICAgIGNvbG9yOiAnI2ZmY2MzMydcbiAgICAgIH0pXG4gICAgfSlcbiAgfSlcbn0pO1xubWFwLmFkZEludGVyYWN0aW9uKGRyYXcpO1xuZHJhdy5zZXRBY3RpdmUoZmFsc2UpO1xuLy9zZWxlY3RcbnNlbGVjdCA9IG5ldyBvbC5pbnRlcmFjdGlvbi5TZWxlY3Qoe1xuICBsYXllcnM6IFtwcm9wZXJ0eV0sXG4gIGZlYXR1cmVzOiBmZWF0dXJlcyxcbiAgc3R5bGU6IG5ldyBvbC5zdHlsZS5TdHlsZSh7XG4gICAgZmlsbDogbmV3IG9sLnN0eWxlLkZpbGwoe1xuICAgICAgY29sb3I6ICdyZ2JhKDI1NSwgMCwgMCwgMC4yKSdcbiAgICB9KSxcbiAgICBzdHJva2U6IG5ldyBvbC5zdHlsZS5TdHJva2Uoe1xuICAgICAgY29sb3I6ICcjRkYwMDAwMycsXG4gICAgICB3aWR0aDogMlxuICAgIH0pLFxuICAgIGltYWdlOiBuZXcgb2wuc3R5bGUuQ2lyY2xlKHtcbiAgICAgIHJhZGl1czogNyxcbiAgICAgIGZpbGw6IG5ldyBvbC5zdHlsZS5GaWxsKHtcbiAgICAgICAgY29sb3I6ICcjRkYwMDAwJ1xuICAgICAgfSlcbiAgICB9KVxuICB9KVxufSk7XG5tYXAuYWRkSW50ZXJhY3Rpb24oc2VsZWN0KTtcbnNlbGVjdC5zZXRBY3RpdmUoZmFsc2UpO1xudHJhbnNsYXRlID0gbmV3IG9sLmludGVyYWN0aW9uLlRyYW5zbGF0ZSh7XG4gIGZlYXR1cmVzOiBzZWxlY3QuZ2V0RmVhdHVyZXMoKVxufSk7XG5tYXAuYWRkSW50ZXJhY3Rpb24odHJhbnNsYXRlKTtcbnRyYW5zbGF0ZS5zZXRBY3RpdmUoZmFsc2UpO1xuLy89PT09PT0gaW5mbyA9PT09PT1cbm1hcC5vbignY2xpY2snLCBjbGlja0luZm8pO1xuXG5mdW5jdGlvbiBjbGlja0luZm8oZXZlbnQpIHtcbiAgdmFyIG9iaiA9IHt9O1xuICB2YXIgY2xpY2tlZEZlYXR1cmUgLCBjbGlja2VkRmVhdHVyZVN0eWxlO1xuICBjbGlja2VkRmVhdHVyZVN0eWxlID0gbmV3IG9sLnN0eWxlLlN0eWxlKHtcbiAgICBmaWxsOiBuZXcgb2wuc3R5bGUuRmlsbCh7XG4gICAgICBjb2xvcjogJ3JnYmEoMjU1LCAwLCAwLCAwLjIpJ1xuICAgIH0pLFxuICAgIHN0cm9rZTogbmV3IG9sLnN0eWxlLlN0cm9rZSh7XG4gICAgICBjb2xvcjogJyNGRjAwMDAzJyxcbiAgICAgIHdpZHRoOiAyXG4gICAgfSksXG4gICAgaW1hZ2U6IG5ldyBvbC5zdHlsZS5DaXJjbGUoe1xuICAgICAgcmFkaXVzOiA3LFxuICAgICAgZmlsbDogbmV3IG9sLnN0eWxlLkZpbGwoe1xuICAgICAgICBjb2xvcjogJyNGRjAwMDAnXG4gICAgICB9KVxuICAgIH0pXG4gIH0pXG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIGNsaWNrZWRGZWF0dXJlID0gbWFwLmZvckVhY2hGZWF0dXJlQXRQaXhlbChldmVudC5waXhlbCwgZnVuY3Rpb24oZmVhdHVyZSwgbGF5ZXIpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZmVhdHVyZTogZmVhdHVyZSxcbiAgICAgIGxheWVyOiBsYXllclxuICAgIH07XG4gIH0sIHRoaXMsIGZ1bmN0aW9uKGxheWVyKSB7XG4gICAgaWYgKGxheWVyLmdldCgnaWQnKSA9PT0gJ3Byb3BlcnR5Jykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9LCB0aGlzKTtcbiAgaWYgKGNsaWNrZWRGZWF0dXJlKSB7XG4gICAgb2JqLmZlYXR1cmUgPSB7fTtcbiAgICBjbGlja2VkRmVhdHVyZS5mZWF0dXJlLnNldFN0eWxlKGNsaWNrZWRGZWF0dXJlU3R5bGUpO1xuICAgIC8vIGNsaWNrZWRGZWF0dXJlLmZlYXR1cmUuc2V0U2NhbGUoMS4yKTtcbiAgICBjbGlja2VkRmVhdHVyZS5mZWF0dXJlLmdldEtleXMoKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgICAgb2JqLmZlYXR1cmVba2V5XSA9IGNsaWNrZWRGZWF0dXJlLmZlYXR1cmUuZ2V0KGtleSk7XG4gICAgfSk7XG4gICAgZHVzdC5yZW5kZXIoJ2FkbWluUHJvcGVydHlJbmZvJywgb2JqLCBmdW5jdGlvbihlcnIsIG91dCkge1xuICAgICAgJCgnLnByb3BlcnR5LWluZm8nKS5odG1sKG91dCk7XG4gICAgICAkKCcucHJvcGVydHktaW5mbycpLnJlbW92ZUNsYXNzKCd2aXN1YWxseWhpZGRlbicpO1xuICAgICAgY29tcG9uZW50SGFuZGxlci51cGdyYWRlRG9tKCk7XG4gICAgICAkKCcjbGlzdGluZycpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIHZhciBnaWQ7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGdpZCA9ICQodGhpcykuZGF0YSgnZ2lkJyk7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgdXJsOiAnaHR0cDovLzEyNy4wLjAuMTozMDAwL2RiL2xpc3RpbmcnLFxuICAgICAgICAgIHR5cGU6ICdHRVQnLFxuICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgZ2lkOiBnaWRcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgICAgLmRvbmUoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICB2YXIgbGlzdGluZ19pZCA9IGRhdGEuaWQ7XG4gICAgICAgICAgICAkKCcubW9kYWwtZGlhbG9nJykucmVtb3ZlQ2xhc3MoJ3Zpc3VhbGx5aGlkZGVuJyk7XG4gICAgICAgICAgICBkdXN0LnJlbmRlcignbGlzdGluZ0luc2VydCcsIGRhdGEsIGZ1bmN0aW9uKGVyciwgb3V0KSB7XG4gICAgICAgICAgICAgICQoJy5tb2RhbC1jb250ZW50JykuaHRtbChvdXQpO1xuICAgICAgICAgICAgICBjb21wb25lbnRIYW5kbGVyLnVwZ3JhZGVEb20oKTtcbiAgICAgICAgICAgICAgaGFuZGxlRm9ybS5zZXQoe1xuICAgICAgICAgICAgICAgIG5hbWU6ICdpbnNlcnQtdXBkYXRlLWxpc3RpbmcnLFxuICAgICAgICAgICAgICAgIHN1Ym1pdEJ0bklkOiAnb2snXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAkKCcjc2VudC1saXN0aW5nJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YTtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGRhdGEgPSBoYW5kbGVGb3JtLmdldCgpO1xuICAgICAgICAgICAgICAgIGlmIChkYXRhICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICBkYXRhLnByb3BlcnR5X2dpZCA9IGdpZDtcbiAgICAgICAgICAgICAgICAgIGRhdGEubGlzdGluZ19pZCA9IGxpc3RpbmdfaWQ7XG4gICAgICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICB1cmw6ICdodHRwOi8vMTI3LjAuMC4xOjMwMDAvZGIvbGlzdGluZy91cGRhdGUnLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAndGV4dCdcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5kb25lKGZ1bmN0aW9uKGRhdGEsIHRleHRTdGF0dXMsIGpxWEhSKSB7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGpxWEhSLnN0YXR1cyA9PT0gMjAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2FzdHIuc3VjY2VzcygnUHJvcGVydHkgVXBkYXRlZCBJbiBEYXRhYmFzZScpO1xuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoJ09vcHMgU29tZXRoaW5nIFdlbnQgV3JvbmchISEnKTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5mYWlsKGZ1bmN0aW9uKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xuICAgICAgICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcignT29wcyBTb21ldGhpbmcgV2VudCBXcm9uZyEhIScpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuYWx3YXlzKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUZvcm0uY2xlYXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAkKCcjb3Blbk1vZGFsJykuYWRkQ2xhc3MoJ3Zpc3VhbGx5aGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHlTb3VyY2UuY2xlYXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICBjbGlja2VkRmVhdHVyZS5mZWF0dXJlLnNldFN0eWxlKG51bGwpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAkKCcjY2FuY2VsLWxpc3RpbmcnKS5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgaGFuZGxlRm9ybS5jbGVhcigpO1xuICAgICAgICAgICAgICAgICQoJyNvcGVuTW9kYWwnKS5hZGRDbGFzcygndmlzdWFsbHloaWRkZW4nKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5mYWlsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIG9iaiA9IHt9O1xuICAgICAgICAgICAgaWYgKGxhbmcgPT09ICdlbCcpIHtcbiAgICAgICAgICAgICAgb2JqLm1zZyA9ICfOlM61zr0gzpLPgc6tzrjOt866zrUgzpHOs86zzrXOu86vzrEnLFxuICAgICAgICAgICAgICBvYmoudGV4dCA9ICfOlM63zrzOuc6/z4XPgc6zzq/OsSDOms6xzrnOvc6/z43Pgc6zzrnOsc+COycsXG4gICAgICAgICAgICAgIG9iai55ZXMgPSAnzp3Okc6ZJ1xuICAgICAgICAgICAgICBvYmoubm8gPSAnzp/Op86ZJ1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgb2JqLm1zZyA9ICdObyBMaXN0aW5nIEZvdW5kJyxcbiAgICAgICAgICAgICAgb2JqLnRleHQgPSAnQ3JlYXRlIE5ldyBMaXN0aW5nPycsXG4gICAgICAgICAgICAgIG9iai55ZXMgPSAnWUVTJ1xuICAgICAgICAgICAgICBvYmoubm8gPSAnTk8nXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkdXN0LnJlbmRlcignZGlhbG9nJywgb2JqLCBmdW5jdGlvbihlcnJvciwgb3V0KSB7XG4gICAgICAgICAgICAgICQoJyNvcGVuTW9kYWwnKS5yZW1vdmVDbGFzcygndmlzdWFsbHloaWRkZW4nKTtcbiAgICAgICAgICAgICAgJCgnLm1vZGFsLWNvbnRlbnQnKS5odG1sKG91dCk7XG4gICAgICAgICAgICAgIGNvbXBvbmVudEhhbmRsZXIudXBncmFkZURvbSgpO1xuICAgICAgICAgICAgICAkKCcjeWVzJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGR1c3QucmVuZGVyKCdsaXN0aW5nSW5zZXJ0Jywge30sIGZ1bmN0aW9uKGVyciwgb3V0KSB7XG4gICAgICAgICAgICAgICAgICAkKCcubW9kYWwtY29udGVudCcpLmh0bWwob3V0KTtcbiAgICAgICAgICAgICAgICAgIGNvbXBvbmVudEhhbmRsZXIudXBncmFkZURvbSgpO1xuICAgICAgICAgICAgICAgICAgaGFuZGxlRm9ybS5zZXQoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnaW5zZXJ0LXVwZGF0ZS1saXN0aW5nJyxcbiAgICAgICAgICAgICAgICAgICAgc3VibWl0QnRuSWQ6ICdvaydcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgJCgnI3NlbnQtbGlzdGluZycpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhO1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICBkYXRhID0gaGFuZGxlRm9ybS5nZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICBkYXRhLnByb3BlcnR5X2dpZCA9IGdpZDtcbiAgICAgICAgICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiAnaHR0cDovLzEyNy4wLjAuMTozMDAwL2RiL2xpc3RpbmcvaW5zZXJ0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ3RleHQnXG4gICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5kb25lKGZ1bmN0aW9uKGRhdGEsIHRleHRTdGF0dXMsIGpxWEhSKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqcVhIUi5zdGF0dXMgPT09IDIwMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKCdQcm9wZXJ0eSBVcGRhdGVkIEluIERhdGFiYXNlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKCdPb3BzIFNvbWV0aGluZyBXZW50IFdyb25nISEhJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmFpbChmdW5jdGlvbihqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKCdPb3BzIFNvbWV0aGluZyBXZW50IFdyb25nISEhJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFsd2F5cyhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlRm9ybS5jbGVhcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjb3Blbk1vZGFsJykuYWRkQ2xhc3MoJ3Zpc3VhbGx5aGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrZWRGZWF0dXJlLmZlYXR1cmUuc2V0U3R5bGUobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAkKCcjY2FuY2VsLWxpc3RpbmcnKS5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICBoYW5kbGVGb3JtLmNsZWFyKCk7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrZWRGZWF0dXJlLmZlYXR1cmUuc2V0U3R5bGUobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICQoJyNvcGVuTW9kYWwnKS5hZGRDbGFzcygndmlzdWFsbHloaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAkKCcjbm8nKS5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgJCgnI29wZW5Nb2RhbCcpLmFkZENsYXNzKCd2aXN1YWxseWhpZGRlbicpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBwcm9wZXJ0eVNvdXJjZS5mb3JFYWNoRmVhdHVyZShmdW5jdGlvbihmKSB7XG4gICAgICBmLnNldFN0eWxlKG51bGwpXG4gICAgfSk7XG4gICAgJCgnLnByb3BlcnR5LWluZm8nKS5hZGRDbGFzcygndmlzdWFsbHloaWRkZW4nKTtcbiAgICB0b2FzdHIub3B0aW9ucyA9IHtcbiAgICAgICdwb3NpdGlvbkNsYXNzJzogJ3RvYXN0LWJvdHRvbS1mdWxsLXdpZHRoJyxcbiAgICAgICdwcmV2ZW50RHVwbGljYXRlcyc6IHRydWUsXG4gICAgICAndGltZU91dCc6IDYwXG4gICAgfTtcbiAgICB0b2FzdHIuZXJyb3IoJ0NhbnQgRmluZCBBbnkgUHJvcGVydHkgVGhlcmUuLi4nKTtcbiAgfVxufVxuLy89PT09PT0gaW5zZXJ0ID09PT09PVxuJCgnI2luc2VydFByb3BlcnR5JykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICQoJy5wcm9wZXJ0eS1pbmZvJykuYWRkQ2xhc3MoJ3Zpc3VhbGx5aGlkZGVuJyk7XG4gIHRvYXN0ci5vcHRpb25zID0ge1xuICAgICdwb3NpdGlvbkNsYXNzJzogJ3RvYXN0LXRvcC1jZW50ZXInLFxuICAgICdwcmV2ZW50RHVwbGljYXRlcyc6IHRydWUsXG4gICAgJ3RpbWVPdXQnOiA2MFxuICB9O1xuICAvLyB0b2FzdHIuaW5mbyhcIkFkZCBOZXcgUHJvcGVydHlcIik7XG4gIG1hcC51bignY2xpY2snLCBjbGlja0luZm8pO1xuICBzZWxlY3Quc2V0QWN0aXZlKGZhbHNlKTtcbiAgZHJhdy5zZXRBY3RpdmUodHJ1ZSk7XG4gIGRyYXcub24oJ2RyYXdlbmQnLCBmdW5jdGlvbihldmVudCkge1xuICAgIHZhciBvYmogPSB7fTtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGRyYXcuc2V0QWN0aXZlKGZhbHNlKTtcbiAgICAkKCcubW9kYWwtZGlhbG9nJykucmVtb3ZlQ2xhc3MoJ3Zpc3VhbGx5aGlkZGVuJyk7XG4gICAgZHVzdC5yZW5kZXIoJ3Byb3BlcnR5SW5zZXJ0Jywgb2JqLCBmdW5jdGlvbihlcnIsIG91dCkge1xuICAgICAgJCgnLm1vZGFsLWNvbnRlbnQnKS5odG1sKG91dCk7XG4gICAgICBjb21wb25lbnRIYW5kbGVyLnVwZ3JhZGVEb20oKTtcbiAgICAgIGhhbmRsZUZvcm0uc2V0KHtcbiAgICAgICAgbmFtZTogJ2luc2VydFByb3BlcnR5JyxcbiAgICAgICAgc3VibWl0QnRuSWQ6ICdpbnNlcnQnXG4gICAgICB9KTtcbiAgICAgICQoJyNjYW5jZWxJbnNlcnQnKS5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBoYW5kbGVGb3JtLmNsZWFyKCk7XG4gICAgICAgIGRyYXduUHJvcGVydGllcy5nZXRTb3VyY2UoKS5jbGVhcigpO1xuXG4gICAgICAgICQoJy5tb2RhbC1kaWFsb2cnKS5hZGRDbGFzcygndmlzdWFsbHloaWRkZW4nKTtcbiAgICAgICAgbWFwLm9uKCdjbGljaycsIGNsaWNrSW5mbyk7XG4gICAgICB9KTtcbiAgICAgICQoJyNpbnNlcnQnKS5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICB2YXIgZGF0YSwgYztcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZGF0YSA9IGhhbmRsZUZvcm0uZ2V0KCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICBpZiAoZGF0YSAhPT0gbnVsbCkge1xuICAgICAgICAgIGhhbmRsZUNvb3Jkcy5zZXRMYXllcignZHJhd25Qcm9wZXJ0aWVzJyk7XG4gICAgICAgICAgYyA9IGhhbmRsZUNvb3Jkcy5jb29yZHMoKTtcbiAgICAgICAgICBkYXRhLnggPSBjWzBdO1xuICAgICAgICAgIGRhdGEueSA9IGNbMV07XG4gICAgICAgICAgZGF0YS5hZG1pbklkID0gaWQ7XG4gICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogJ2h0dHA6Ly8xMjcuMC4wLjE6MzAwMC9kYi9pbnNlcnQnLFxuICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgZGF0YTogZGF0YVxuICAgICAgICAgIH0pLmRvbmUoZnVuY3Rpb24oZGF0YSwgdGV4dFN0YXR1cywganFYSFIpIHtcbiAgICAgICAgICAgIHRvYXN0ci5vcHRpb25zID0ge1xuICAgICAgICAgICAgICAncG9zaXRpb25DbGFzcyc6ICd0b2FzdC1ib3R0b20tZnVsbC13aWR0aCcsXG4gICAgICAgICAgICAgICdwcmV2ZW50RHVwbGljYXRlcyc6IHRydWUsXG4gICAgICAgICAgICAgICd0aW1lT3V0JzogNjBcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoanFYSFIuc3RhdHVzID09PSAyMDEpIHtcbiAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoJ1Byb3BlcnR5IFJlY29yZGVkIEluIERhdGFiYXNlJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoJ09vcHMgU29tZXRoaW5nIFdlbnQgV3JvbmchISEnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xuICAgICAgICAgICAgdG9hc3RyLmVycm9yKCdPb3BzIFNvbWV0aGluZyBXZW50IFdyb25nISEhJyk7XG4gICAgICAgICAgfSkuYWx3YXlzKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGRyYXduUHJvcGVydGllcy5nZXRTb3VyY2UoKS5jbGVhcigpO1xuICAgICAgICAgICAgcHJvcGVydHlTb3VyY2UuY2xlYXIoKTtcbiAgICAgICAgICAgIGhhbmRsZUZvcm0uY2xlYXIoKTtcbiAgICAgICAgICAgICQoJy5tb2RhbC1kaWFsb2cnKS5hZGRDbGFzcygndmlzdWFsbHloaWRkZW4nKTtcbiAgICAgICAgICAgIG1hcC5vbignY2xpY2snLCBjbGlja0luZm8pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbi8vPT09PT09IGRlbGV0ZSA9PT09PT1cbiQoJyNkZWxldGVQcm9wZXJ0eScpLmNsaWNrKGZ1bmN0aW9uKGV2ZW50KSB7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICQoJy5wcm9wZXJ0eS1pbmZvJykuYWRkQ2xhc3MoJ3Zpc3VhbGx5aGlkZGVuJyk7XG4gIHRvYXN0ci5vcHRpb25zID0ge1xuICAgICdwb3NpdGlvbkNsYXNzJzogJ3RvYXN0LXRvcC1jZW50ZXInLFxuICAgICdwcmV2ZW50RHVwbGljYXRlcyc6IHRydWUsXG4gICAgJ3RpbWVPdXQnOiAyMFxuICB9O1xuICB0b2FzdHIuaW5mbygnRGVsZXRlIFByb3BlcnR5Jyk7XG4gIG1hcC51bignY2xpY2snLCBjbGlja0luZm8pO1xuICBkcmF3LnNldEFjdGl2ZShmYWxzZSk7XG4gIGZlYXR1cmVzLmNsZWFyKCk7XG4gIHNlbGVjdC5zZXRBY3RpdmUodHJ1ZSk7XG4gIHNlbGVjdC5vbignc2VsZWN0JywgZnVuY3Rpb24oZSkge1xuICAgIHZhciAkdG9hc3Q7XG4gICAgaWYgKGUudGFyZ2V0LmdldEZlYXR1cmVzKCkuZ2V0TGVuZ3RoKCkgPT09IDEpIHtcbiAgICAgIHRvYXN0ci5vcHRpb25zLm5ld2VzdE9uVG9wID0gdHJ1ZTtcbiAgICAgIHRvYXN0ci5vcHRpb25zLnByZXZlbnREdXBsaWNhdGVzID0gdHJ1ZTtcbiAgICAgIHRvYXN0ci5vcHRpb25zLmV4dGVuZGVkVGltZU91dCA9IDA7XG4gICAgICB0b2FzdHIub3B0aW9ucy50aW1lT3V0ID0gMDtcbiAgICAgIHRvYXN0ci5vcHRpb25zLmNsb3NlQnV0dG9uID0gdHJ1ZTtcbiAgICAgICR0b2FzdCA9IHRvYXN0ci53YXJuaW5nKCc8cD5BcmUgeW91IHN1cmU/PC9wPjxkaXYgY2xhc3M9XCJ0b2FzdHItYnRuc1wiPjxidXR0b24gaWQ9XCJ5ZXNEZWxldGVcIiBjbGFzcz1cIm1kbC1idXR0b24gbWRsLWpzLWJ1dHRvbiBcIj5ZZXM8L2J1dHRvbj48YnV0dG9uIGlkPVwibm9EZWxldGVcIiBjbGFzcz1cIm1kbC1idXR0b24gbWRsLWpzLWJ1dHRvblwiPk5vPC9idXR0b24+PC9kaXY+Jyk7XG4gICAgICAkdG9hc3Qub24oJ2NsaWNrJywgJyN5ZXNEZWxldGUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGdpZDtcbiAgICAgICAgY29uc29sZS5sb2coc2VsZWN0LmdldEZlYXR1cmVzKCkpO1xuICAgICAgICBnaWQgPSBzZWxlY3QuZ2V0RmVhdHVyZXMoKS5pdGVtKDApLmdldCgnZ2lkJyk7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgdXJsOiAnaHR0cDovLzEyNy4wLjAuMTozMDAwL2RiL2RlbGV0ZScsXG4gICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgIGRhdGFUeXBlOiAndGV4dCcsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgZ2lkOiBnaWRcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgICAgLmRvbmUoZnVuY3Rpb24oZGF0YSwgdGV4dFN0YXR1cywganFYSFIpIHtcblxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coanFYSFIuc3RhdHVzKTtcbiAgICAgICAgICAgIHRvYXN0ci5vcHRpb25zID0ge1xuICAgICAgICAgICAgICAncG9zaXRpb25DbGFzcyc6ICd0b2FzdC1ib3R0b20tZnVsbC13aWR0aCcsXG4gICAgICAgICAgICAgICdwcmV2ZW50RHVwbGljYXRlcyc6IHRydWUsXG4gICAgICAgICAgICAgICd0aW1lT3V0JzogNjBcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0b2FzdHIuc3VjY2VzcygnUHJvcGVydHkgRGVsZXRlZCBGcm9tIERhdGFiYXNlJyk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuZmFpbChmdW5jdGlvbihqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcbiAgICAgICAgICAgIHRvYXN0ci5vcHRpb25zID0ge1xuICAgICAgICAgICAgICAncG9zaXRpb25DbGFzcyc6ICd0b2FzdC1ib3R0b20tZnVsbC13aWR0aCcsXG4gICAgICAgICAgICAgICdwcmV2ZW50RHVwbGljYXRlcyc6IHRydWUsXG4gICAgICAgICAgICAgICd0aW1lT3V0JzogNjBcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0b2FzdHIuc3VjY2VzcygnT29wcyBTb21ldGhpbmcgV2VudCBXcm9uZyEhIScpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmFsd2F5cyhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHByb3BlcnR5U291cmNlLmNsZWFyKCk7XG4gICAgICAgICAgICBzZWxlY3QuZ2V0RmVhdHVyZXMoKS5jbGVhcigpO1xuICAgICAgICAgICAgc2VsZWN0LnNldEFjdGl2ZShmYWxzZSk7XG4gICAgICAgICAgICBtYXAub24oJ2NsaWNrJywgY2xpY2tJbmZvKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAkdG9hc3QucmVtb3ZlKCk7XG4gICAgICB9KTtcbiAgICAgICR0b2FzdC5vbignY2xpY2snLCAnI25vRGVsZXRlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICR0b2FzdC5yZW1vdmUoKTtcbiAgICAgICAgc2VsZWN0LmdldEZlYXR1cmVzKCkuY2xlYXIoKTtcbiAgICAgICAgc2VsZWN0LnNldEFjdGl2ZShmYWxzZSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xufSk7XG4kKCcjbG9nb3V0JykuY2xpY2soZnVuY3Rpb24oKSB7XG4gIGxvY2F0aW9uLmhyZWYgPSAnL21hcC9sb2dvdXQnO1xufSk7XG4vLz09PT09PSB1cGRhdGUgPT09PT09XG5cbiQoJyN1cGRhdGVQcm9wZXJ0eScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gIHZhciBnaWQsIG9iajtcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgbWFwLnVuKCdjbGljaycsIGNsaWNrSW5mbyk7XG4gIGRyYXcuc2V0QWN0aXZlKGZhbHNlKTtcbiAgc2VsZWN0LnNldEFjdGl2ZSh0cnVlKTtcbiAgdHJhbnNsYXRlLnNldEFjdGl2ZSh0cnVlKTtcbiAgJCgnLnByb3BlcnR5LWluZm8nKS5hZGRDbGFzcygndmlzdWFsbHloaWRkZW4nKTtcbiAgc2VsZWN0Lm9uKCdzZWxlY3QnLCBmdW5jdGlvbihlKSB7XG4gICAgaWYgKHNlbGVjdC5nZXRGZWF0dXJlcygpLmdldExlbmd0aCgpID09PSAxKSB7XG4gICAgICBnaWQgPSBzZWxlY3QuZ2V0RmVhdHVyZXMoKS5pdGVtKDApLmdldCgnZ2lkJyk7XG4gICAgICAkLmFqYXgoe1xuICAgICAgICB1cmw6ICdodHRwOi8vMTI3LjAuMC4xOjMwMDAvZGIvZmV0Y2gnLFxuICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBnaWQ6IGdpZFxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgICAuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgb2JqID0gXy5oZWFkKGRhdGEuZmVhdHVyZXMpLnByb3BlcnRpZXM7XG5cbiAgICAgICAgfSlcbiAgICAgICAgLmZhaWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdG9hc3RyLmVycm9yKCdPb3BzIFNvbWV0aGluZyBXZW50IFdyb25nISEhJyk7XG4gICAgICAgIH0pXG4gICAgICAgIC5hbHdheXMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2NvbXBsZXRlJyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIHRyYW5zbGF0ZS5vbigndHJhbnNsYXRlZW5kJywgZnVuY3Rpb24oZSkge1xuICAgIHZhciBjb29yZHMgPSBvbC5wcm9qLnRyYW5zZm9ybShlLmNvb3JkaW5hdGUsICdFUFNHOjM4NTcnLCAnRVBTRzo0MzI2Jyk7XG4gICAgY29uc29sZS5sb2coY29vcmRzKTtcbiAgICAkKCcubW9kYWwtZGlhbG9nJykucmVtb3ZlQ2xhc3MoJ3Zpc3VhbGx5aGlkZGVuJyk7XG4gICAgZHVzdC5yZW5kZXIoJ3Byb3BlcnR5VXBkYXRlJywgb2JqLCBmdW5jdGlvbihlcnIsIG91dCkge1xuXG4gICAgICAkKCcubW9kYWwtY29udGVudCcpLmh0bWwob3V0KTtcbiAgICAgIGNvbXBvbmVudEhhbmRsZXIudXBncmFkZURvbSgpO1xuICAgICAgaGFuZGxlRm9ybS5zZXQoe1xuICAgICAgICBuYW1lOiAndXBkYXRlUHJvcGVydHknLFxuICAgICAgICBzdWJtaXRCdG5JZDogJ3VwZGF0ZSdcbiAgICAgIH0pO1xuICAgICAgJCgnI3VwZGF0ZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIHZhciBkYXRhO1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBkYXRhID0gaGFuZGxlRm9ybS5nZXQoKTtcbiAgICAgICAgaWYgKCFfLmlzTmlsKGRhdGEpKSB7XG4gICAgICAgICAgZGF0YS54ID0gY29vcmRzWzBdO1xuICAgICAgICAgIGRhdGEueSA9IGNvb3Jkc1sxXTtcbiAgICAgICAgICBkYXRhLmdpZCA9IGdpZDtcblxuICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6ICdodHRwOi8vMTI3LjAuMC4xOjMwMDAvZGIvdXBkYXRlJyxcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgIGRhdGE6IGRhdGFcbiAgICAgICAgICB9KVxuICAgICAgICAgICAgLmRvbmUoZnVuY3Rpb24oZGF0YSwgdGV4dFN0YXR1cywganFYSFIpIHtcbiAgICAgICAgICAgICAgdG9hc3RyLm9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgJ3Bvc2l0aW9uQ2xhc3MnOiAndG9hc3QtYm90dG9tLWZ1bGwtd2lkdGgnLFxuICAgICAgICAgICAgICAgICdwcmV2ZW50RHVwbGljYXRlcyc6IHRydWUsXG4gICAgICAgICAgICAgICAgJ3RpbWVPdXQnOiA2MFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICBpZiAoanFYSFIuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICB0b2FzdHIuc3VjY2VzcygnUHJvcGVydHkgVXBkYXRlZCBJbiBEYXRhYmFzZScpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcignT29wcyBTb21ldGhpbmcgV2VudCBXcm9uZyEhIScpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmZhaWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHRvYXN0ci5lcnJvcignT29wcyBTb21ldGhpbmcgV2VudCBXcm9uZyEhIScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5hbHdheXMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHByb3BlcnR5U291cmNlLmNsZWFyKCk7XG4gICAgICAgICAgICAgIHNlbGVjdC5nZXRGZWF0dXJlcygpLmNsZWFyKCk7XG4gICAgICAgICAgICAgIHNlbGVjdC5zZXRBY3RpdmUoZmFsc2UpO1xuICAgICAgICAgICAgICB0cmFuc2xhdGUuc2V0QWN0aXZlKGZhbHNlKTtcbiAgICAgICAgICAgICAgbWFwLm9uKCdjbGljaycsIGNsaWNrSW5mbyk7XG4gICAgICAgICAgICAgICQoJy5tb2RhbC1kaWFsb2cnKS5hZGRDbGFzcygndmlzdWFsbHloaWRkZW4nKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgICQoJyNjYW5jZWxVcGRhdGUnKS5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBoYW5kbGVGb3JtLmNsZWFyKCk7XG4gICAgICAgIHByb3BlcnR5U291cmNlLmNsZWFyKCk7XG4gICAgICAgIHNlbGVjdC5nZXRGZWF0dXJlcygpLmNsZWFyKCk7XG4gICAgICAgIHNlbGVjdC5zZXRBY3RpdmUoZmFsc2UpO1xuICAgICAgICB0cmFuc2xhdGUuc2V0QWN0aXZlKGZhbHNlKTtcbiAgICAgICAgbWFwLm9uKCdjbGljaycsIGNsaWNrSW5mbyk7XG4gICAgICAgICQoJy5tb2RhbC1kaWFsb2cnKS5hZGRDbGFzcygndmlzdWFsbHloaWRkZW4nKTtcbiAgICAgICAgbWFwLm9uKCdjbGljaycsIGNsaWNrSW5mbyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICB3aW5kb3cuUGFyc2xleS5vbignZmllbGQ6ZXJyb3InLCBmdW5jdGlvbigpIHtcbiAgICAvLyBUaGlzIGdsb2JhbCBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCBmb3IgYW55IGZpZWxkIHRoYXQgZmFpbHMgdmFsaWRhdGlvbi5cbiAgICBjb25zb2xlLmxvZygnVmFsaWRhdGlvbiBmYWlsZWQgZm9yOiAnLCB0aGlzLiRlbGVtZW50KTtcbiAgfSk7XG4gIHdpbmRvdy5QYXJzbGV5XG4gICAgLmFkZFZhbGlkYXRvcignZGF0ZScsIHtcbiAgICAgIHJlcXVpcmVtZW50VHlwZTogJ3N0cmluZycsXG4gICAgICB2YWxpZGF0ZVN0cmluZzogZnVuY3Rpb24odmFsdWUsIHJlcXVpcmVtZW50KSB7XG4gICAgICAgIGlmIChtb21lbnQodmFsdWUsICdERC1NTS1ZWVlZJywgdHJ1ZSkuaXNWYWxpZCgpID09PSB0cnVlKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG1lc3NhZ2VzOiB7XG4gICAgICAgIGVuOiAnV3JvbmcgRGF0ZScsXG4gICAgICAgIGVsOiAnzpvOrM64zr/PgiDOl868zrXPgc6/zrzOt869zq/OsSdcbiAgICAgIH1cbiAgICB9KTtcbiAgd2luZG93LlBhcnNsZXlcbiAgICAuYWRkVmFsaWRhdG9yKCdzYWxlcmVudGVuJywge1xuICAgICAgcmVxdWlyZW1lbnRUeXBlOiAnc3RyaW5nJyxcbiAgICAgIHZhbGlkYXRlU3RyaW5nOiBmdW5jdGlvbih2YWx1ZSwgcmVxdWlyZW1lbnQpIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSAnU2FsZScgfHwgdmFsdWUgPT09ICdSZW50Jykge1xuICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBtZXNzYWdlczoge1xuICAgICAgICBlbjogJ1BsZWFzZSBUeXBlIFNhbGUgb3IgUmVudCcsXG4gICAgICAgIGVsOiAnzqDOsc+BzrHOus6xzrvPjiDPgM67zrfOus+Bzr/Ou86/zrPOrs+Dz4TOtSBTYWxlIM6uIFJlbnQnXG4gICAgICB9XG4gICAgfSk7XG4gIHdpbmRvdy5QYXJzbGV5XG4gICAgLmFkZFZhbGlkYXRvcignc2FsZXJlbnRlbCcsIHtcbiAgICAgIHJlcXVpcmVtZW50VHlwZTogJ3N0cmluZycsXG4gICAgICB2YWxpZGF0ZVN0cmluZzogZnVuY3Rpb24odmFsdWUsIHJlcXVpcmVtZW50KSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gJ86gz47Ou863z4POtycgfHwgdmFsdWUgPT09ICfOlc69zr/Ouc66zq/Osc+DzrcnKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG1lc3NhZ2VzOiB7XG4gICAgICAgIGVuOiAnUGxlYXNlIFR5cGUgzqDPjs67zrfPg863IG9yIM6Vzr3Ov865zrrOr86xz4POtycsXG4gICAgICAgIGVsOiAnzqDOsc+BzrHOus6xzrvPjiDPgM67zrfOus+Bzr/Ou86/zrPOrs+Dz4TOtSDOoM+OzrvOt8+Dzrcgzq4gzpXOvc6/zrnOus6vzrHPg863J1xuICAgICAgfVxuICAgIH0pO1xufSk7XG5cbiIsInZhciBoYW5kbGVDb29yZHMgPSAoZnVuY3Rpb24ob2wpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICB2YXIgY29vcmRzO1xuICB2YXIgbDtcblxuICBmdW5jdGlvbiBmaW5kQnlJZChpZCkge1xuICAgIHZhciBsYXllcnMgPSBtYXAuZ2V0TGF5ZXJzKCk7XG4gICAgdmFyIGxlbmd0aCA9IGxheWVycy5nZXRMZW5ndGgoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoaWQgPT09IGxheWVycy5pdGVtKGkpLmdldCgnaWQnKSkge1xuICAgICAgICByZXR1cm4gbGF5ZXJzLml0ZW0oaSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gZmluZEJ5TmFtZShuYW1lKSB7XG4gICAgdmFyIGk7XG4gICAgdmFyIGxheWVycyA9IG1hcC5nZXRMYXllcnMoKTtcbiAgICB2YXIgbGVuZ3RoID0gbGF5ZXJzLmdldExlbmd0aCgpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgaWYgKG5hbWUgPT09IGxheWVycy5pdGVtKGkpLmdldCgnbmFtZUVuJykgfHwgbmFtZSA9PT0gbGF5ZXJzLml0ZW0oaSkuZ2V0KCduYW1lRWwnKSkge1xuICAgICAgICByZXR1cm4gbGF5ZXJzLml0ZW0oaSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0TGF5ZXIoaWQpIHtcbiAgICBsID0gZmluZEJ5SWQoaWQpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0Q29vcmRzKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgY29vcmRFUFNHMzg1NztcbiAgICBjb29yZEVQU0czODU3ID0gbC5nZXRTb3VyY2UoKS5nZXRGZWF0dXJlcygpWzBdLmdldEdlb21ldHJ5KCkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICBjb29yZHMgPSBvbC5wcm9qLnRyYW5zZm9ybShjb29yZEVQU0czODU3LCAnRVBTRzozODU3JywgJ0VQU0c6NDMyNicpO1xuICAgIHJldHVybiBjb29yZHM7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBjb29yZHM6IGdldENvb3JkcyxcbiAgICBzZXRMYXllcjogc2V0TGF5ZXJcbiAgfTtcbn0ob2wpKTtcbiIsInZhciBoYW5kbGVGb3JtID0gKGZ1bmN0aW9uKCQsIHBhcnNsZXkpIHtcclxuICAndXNlIHN0cmljdCc7XHJcbiAgdmFyIGZvcm1OYW1lLCBzdWJtaXRCdG5JZCwgcDtcclxuXHJcbiAgZnVuY3Rpb24gc2V0T3B0aW9ucyhvcHRpb25zKSB7XHJcbiAgICBmb3JtTmFtZSA9IG9wdGlvbnMubmFtZTtcclxuICAgIHN1Ym1pdEJ0bklkID0gb3B0aW9ucy5zdWJtaXRCdG5JZDtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGRpc2FibGVTdWJtaXRCdG4oKSB7XHJcbiAgICAkKCcjJyArIHN1Ym1pdEJ0bklkICsgJycpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjcmVhdGVWYWxpZGF0b3IoKSB7XHJcbiAgICBwID0gJCgnZm9ybVtuYW1lPVwiJyArIGZvcm1OYW1lICsgJ1wiJykucGFyc2xleSgpO1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBkZXN0cm95VmFsaWRhdG9yKCkge1xyXG4gICAgcC5kZXN0cm95KCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiB2YWxpZGF0ZUZvcm0oKSB7XHJcbiAgICByZXR1cm4gcC52YWxpZGF0ZSgpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gb25WYWxpZGF0ZUZvcm1TdWNjZXNzKCkge1xyXG4gICAgcC5vbignZm9ybTpzdWNjZXNzJyxcclxuXHJcbiAgICAgIGZ1bmN0aW9uKCkge30pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ2V0QXR0cmlidXRlcygpIHtcclxuICAgIHZhciBvYmogPSB7fTtcclxuICAgIGNyZWF0ZVZhbGlkYXRvcigpO1xyXG4gICAgaWYgKHZhbGlkYXRlRm9ybSgpID09PSB0cnVlKSB7XHJcbiAgICAgICQoJ2Zvcm1bbmFtZT1cIicgKyBmb3JtTmFtZSArICdcIicpLmZpbmQoJy5tZGwtdGV4dGZpZWxkX19pbnB1dCcpLmVhY2goXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uKGluZGV4LCBlbGVtZW50KSB7XHJcbiAgICAgICAgICBvYmpbJCh0aGlzKS5hdHRyKCdpZCcpXSA9ICQodGhpcykudmFsKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICQoJ2Zvcm1bbmFtZT1cIicgKyBmb3JtTmFtZSArICdcIicpLmZpbmQoJy5tZGwtY2hlY2tib3hfX2lucHV0JykuZWFjaChcclxuXHJcbiAgICAgICAgZnVuY3Rpb24oaW5kZXgsIGVsZW1lbnQpIHtcclxuICAgICAgICAgIG9ialskKHRoaXMpLmF0dHIoJ2lkJyldID0gJCh0aGlzKS5wcm9wKCdjaGVja2VkJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcbiAgICBlbHNlIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVzZXRGb3JtKCkge1xyXG4gICAgaWYgKGNyZWF0ZVZhbGlkYXRvcigpID09IHRydWUpIHtcclxuICAgICAgZGVzdHJveVZhbGlkYXRvcigpO1xyXG4gICAgfVxyXG4gICAgJCgnZm9ybVtuYW1lPVwiJyArIGZvcm1OYW1lICsgJ1wiJykuZmluZCgnLm1kbC10ZXh0ZmllbGRfX2lucHV0JykuZWFjaChcclxuXHJcbiAgICAgIGZ1bmN0aW9uKGluZGV4LCBlbGVtZW50KSB7XHJcbiAgICAgICAgJCh0aGlzKS52YWwoJycpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50KCkuZXEoMCkucmVtb3ZlQ2xhc3MoJ2lzLWRpcnR5Jyk7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5lcSgwKS5yZW1vdmVDbGFzcygnaXMtaW52YWxpZCcpO1xyXG4gICAgICB9KTtcclxuICAgICQoJ2Zvcm1bbmFtZT1cIicgKyBmb3JtTmFtZSArICdcIicpLmZpbmQoJy5tZGwtY2hlY2tib3hfX2lucHV0JykuZWFjaChcclxuXHJcbiAgICAgIGZ1bmN0aW9uKGluZGV4LCBlbGVtZW50KSB7XHJcbiAgICAgICAgJCh0aGlzKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xyXG4gICAgICB9KTtcclxuICAgICQoJ2Zvcm1bbmFtZT1cIicgKyBmb3JtTmFtZSArICdcIicpLmZpbmQoJy5tZGwtY2hlY2tib3gnKS5lYWNoKFxyXG5cclxuICAgICAgZnVuY3Rpb24oaW5kZXgsIGVsZW1lbnQpIHtcclxuICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdpcy1jaGVja2VkJyk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuICByZXR1cm4ge1xyXG4gICAgc2V0OiBzZXRPcHRpb25zLFxyXG4gICAgZ2V0OiBnZXRBdHRyaWJ1dGVzLFxyXG4gICAgY2xlYXI6IHJlc2V0Rm9ybVxyXG4gIC8vIGNyZWF0ZVZhbGlkYXRvcjogY3JlYXRlVmFsaWRhdG9yLFxyXG4gIC8vIGRlc3Ryb3lWYWxpZGF0b3I6IGRlc3Ryb3lWYWxpZGF0b3IsXHJcbiAgLy8gdmFsaWRhdGVGb3JtOiB2YWxpZGF0ZUZvcm0sXHJcbiAgLy8gb25WYWxpZGF0ZUZvcm1TdWNjZXNzOiBvblZhbGlkYXRlRm9ybVN1Y2Nlc3MsXHJcbiAgLy8gZGlzYWJsZVN1Ym1pdEJ0bjogZGlzYWJsZVN1Ym1pdEJ0blxyXG4gIH07XHJcbn0oalF1ZXJ5LCBwYXJzbGV5KSk7XHJcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
