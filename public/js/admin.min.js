!function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}return"function"==typeof window.CustomEvent?!1:(e.prototype=window.Event.prototype,void(window.CustomEvent=e))}(),function(){Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(e){e=0===arguments.length?!0:!!e;var t=this.parentNode,n=window.getComputedStyle(t,null),i=parseInt(n.getPropertyValue("border-top-width")),a=parseInt(n.getPropertyValue("border-left-width")),r=this.offsetTop-t.offsetTop<t.scrollTop,o=this.offsetTop-t.offsetTop+this.clientHeight-i>t.scrollTop+t.clientHeight,s=this.offsetLeft-t.offsetLeft<t.scrollLeft,l=this.offsetLeft-t.offsetLeft+this.clientWidth-a>t.scrollLeft+t.clientWidth,c=r&&!o;(r||o)&&e&&(t.scrollTop=this.offsetTop-t.offsetTop-t.clientHeight/2-i+this.clientHeight/2),(s||l)&&e&&(t.scrollLeft=this.offsetLeft-t.offsetLeft-t.clientWidth/2-a+this.clientWidth/2),(r||o||s||l)&&!e&&this.scrollIntoView(c)})}(),window.App||(window.App={}),window.App.config={promises:{dustBluebird:Promise.promisifyAll(dust),cloudinaryBird:Promise.promisifyAll($.cloudinary)},commons:{map:{},trans:{}},cache:{activeEstate:{},activeEstateListing:{}},modules:{map:{},info:{},edit:{},"delete":{},insert:{},filters:{}}},window.App.utils={},$.cloudinary.config({cloud_name:"firvain",api_key:"375138932689591"}),App.utils={findById:function(e,t){for(var n=e.getLayers(),i=n.getLength(),a=0;i>a;a++)if(t===n.item(a).get("id"))return n.item(a);return null},findByName:function(e,t){for(var n=e.getLayers(),i=n.getLength(),a=0;i>a;a++)if(t===n.item(a).get("name"))return n.item(a);return null},preventDotAndSpace:function(e){var t=e.charCode?e.charCode:e.keyCode;return this.innerHTML=t,46!==t&&32!==t},geometryFunction:function(e,t){var n,i,a=t;return a||(a=new ol.geom.Polygon(null)),n=e[0],i=e[1],a.setCoordinates([[n,[n[0],i[1]],i,[i[0],n[1]],n]]),a},hasClass:function(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)},removeClass:function(e,t){var n=e;n.classList?n.classList.remove(t):n.className=n.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")},addClass:function(e,t){var n=e;n.classList?n.classList.add(t):n.className+=" "+t},toggleClass:function(e,t){var n,i,a=e;a.classList?a.classList.toggle(t):(n=a.className.split(" "),i=n.indexOf(t),i>=0?n.splice(i,1):n.push(t),a.className=n.join(" "))},requestFullScreen:function(e){var t,n=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullScreen;n?n.call(e):"undefined"!=typeof window.ActiveXObject&&(t=new ActiveXObject("WScript.Shell"),null!==t&&t.SendKeys("{F11}"))},exitFullsreen:function(e){var t,n=e.exitFullScreen||e.webkitExitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen;n?n.call(e):"undefined"!=typeof window.ActiveXObject&&(t=new ActiveXObject("WScript.Shell"),null!==t&&t.SendKeys("{Esc}"))},elToEn:function(e){for(var t,n=e,i=new Array("α","ά","Ά","Α","β","Β","γ","Γ","δ","Δ","ε","έ","Ε","Έ","ζ","Ζ","η","ή","Η","θ","Θ","ι","ί","ϊ","ΐ","Ι","Ί","κ","Κ","λ","Λ","μ","Μ","ν","Ν","ξ","Ξ","ο","ό","Ο","Ό","π","Π","ρ","Ρ","σ","ς","Σ","τ","Τ","υ","ύ","Υ","Ύ","φ","Φ","χ","Χ","ψ","Ψ","ω","ώ","Ω","Ώ"," ","'","'",","),a=new Array("a","a","A","A","v","V","g","G","d","D","e","e","E","E","z","Z","i","i","I","th","Th","i","i","i","i","I","I","k","K","l","L","m","M","n","N","x","X","o","o","O","O","p","P","r","R","s","s","S","t","T","u","u","Y","Y","f","F","ch","Ch","ps","Ps","o","o","O","O"," ","_","_","_"),r=0;r<i.length;r++)n=n.replace(new RegExp(i[r],"g"),a[r]);return t=n},handleDate:function(e,t){var n,i=[];return"string"==typeof e&&"el"!==t?(n=_.split(e,"-",3),i=[n[1],n[0],n[2]],_.join(i,"-")):e},sanitize:function(e){var t,n=e.value;t=n.replace(/[^a-z0-9A-ZA-zΑ-Ωα-ωίϊΐόάέύϋΰήώ]/gi,""),e.value=t,console.log(e),console.log(e.value),console.log(t)}},App.config.modules.map=function(e,t,n,i,a){"use strict";var r=[3677385,4120949],o=[3652772,4112808,37e5,4132797],s=new i.format.GeoJSON({defaultDataProjection:"EPSG:4326"}),l={iconType:function(e){var t={Apartment:function(){return"apartment"},Store:function(){return"store"},"Detached House":function(){return"detached"},Maisonette:function(){return"maisonette"},Villa:function(){return"villa"}};return t[e]()},estates:function(e){var t="./images/pins/none/"+l.iconType(e.get("estatetype_en"))+"-48.png";return new i.style.Style({geometry:e.getGeometry(),image:new i.style.Icon({src:t,anchorOrigin:"bottom-left",anchor:[.5,0],scale:1})})}},c={bing:function(){return new i.source.BingMaps({key:"Ak2Gq8VUfICsPpuf7LRANXmXt2sHWmSLPhohmVLFtFIEwYjs_5MCyAhAFwRSVpLj",imagerySet:"AerialWithLabels"})},mapBox:function(){return new i.source.XYZ({attributions:[new i.Attribution({html:'<a href="https://www.mapbox.com/about/maps/" target="_blank">&copy; Mapbox &copy; OpenStreetMap</a>'})],url:"https://api.mapbox.com/v4/mapbox.streets/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiZmlydmFpbiIsImEiOiJlOWYyYTM0NThiNWM0YjJjODJjNDE4ODQzNzA2MGQyNiJ9.-NVDO27Hzt-w_nQosUPfLA"})},estates:function(){return new i.source.Vector({format:s,loader:function(){var e="http://www.geomerchant.eu/api/property/all/"+id,t=this;n.resolve($.ajax({url:e,type:"GET",dataType:"json"})).then(function(e){var n=s.readFeatures(e,{featureProjection:"EPSG:3857"});t.addFeatures(n)}).then(function(){t.getFeatures().forEach(function(e){e.setId(e.getProperties().gid)})})["catch"](function(e){console.log(e),404===e.status?toastr.error("Sorry, we cannot find any properties!"):503===e.status?toastr.error("Service Unavailable!"):toastr.error("Internal Server Error! Please reload page or try again later")})}})}},d={bing:function(e){return new i.layer.Tile({visible:!0,source:c.bing(),maxZoom:19,crossOrigin:"anonymous",preload:1/0,id:"bing",name:e.layers.bing})},mapBox:function(e){return new i.layer.Tile({source:c.mapBox(),id:"mapbox",name:e.layers.mapBox})},estates:function(){return new i.layer.Vector({source:c.estates(),id:"estates",visible:!0,style:l.estates})},newEstates:function(e){return new i.layer.Vector({source:new i.source.Vector,id:"newEstates",visible:!1,style:new i.style.Style({image:new i.style.Icon({src:"./images/pins/generic-48.png",anchorOrigin:"bottom-left",anchor:[.5,0],scale:1,color:"rgb(96, 125, 139)"})})})}},u=function(){var e=a.config.commons.trans,t=Object.keys(d).map(function(t){return"bing"!==t?d[t](e):null});return new i.Map({target:"appwrapper__map",layers:_.compact(t),loadTilesWhileAnimating:!0,loadTilesWhileInteracting:!0,renderer:"canvas",controls:i.control.defaults({attributionOptions:{collapsible:!1,collapsed:!1}}).extend([new i.control.ScaleLine({units:"metric"}),new i.control.OverviewMap({className:"ol-overviewmap ol-custom-overviewmap",collapsible:!0,collapsed:!0,layers:[d.bing(e)]}),new i.control.ZoomToExtent({extent:o})]),view:new i.View({center:r,extent:o,projection:"EPSG:3857",zoom:14,maxZoom:19,minZoom:14})})};return{initialize:u}}(window,document,Promise,ol,App),App.config.modules.info=function(e,t,n,i,a){"use strict";function r(e){f.renderAsync("edit",e).then(function(e){g.removeClass(p,"visuallyhidden"),p.innerHTML=e,getmdlSelect.init(".getmdl-select")})["catch"](function(e){console.log(e)})}function o(e){var o,s,l,f=e.map,m=_.cloneDeep(a.config.commons.trans),y=new ol.style.Style({image:new ol.style.Icon({src:"./images/pins/generic-48.png",anchorOrigin:"bottom-left",anchor:[.5,0],scale:1,color:"rgb(255,82,82)"})}),v=f.forEachFeatureAtPixel(e.pixel,function(e,t){return{feature:e,layer:t}},this,function(e){return"estates"===e.get("id")},this);if(v){g.findById(f,"estates").getSource().getFeatures().forEach(function(e){e.setStyle(null)}),s=v.feature,o=s.getGeometry().getCoordinates(),f.getView().setCenter(o),f.getView().setZoom(16),l=s.getProperties().gid,s.setStyle(y);var h=n.resolve(i.ajax({url:"http://www.geomerchant.eu/api/property",type:"GET",data:{gid:l}}));h.then(function(e){var t=e.features[0];return a.config.cache.activeEstate=t.properties,t}).then(function(e){"el"===c?m.values={gid:e.properties.gid,x:o[0],y:o[1],areaName:e.properties.area_name,estateType:e.properties.estatetype,address:e.properties.street_el,addressNumber:e.properties.street_number,pscode:e.properties.ps_code,estateArea:e.properties.estatearea,bedrooms:e.properties.bedrooms,floor:e.properties.floor,year:e.properties.year,planNumber:e.properties.plan_num,plotArea:e.properties.plotarea,parcelNumber:e.properties.parcel_num,parking:e.properties.parking,furnished:e.properties.furnished,isnew:e.properties.isnew,heating:e.properties.heating,cooling:e.properties.cooling,view:e.properties.view,title:e.properties.title}:m.values={gid:e.properties.gid,x:e.geometry.coordinates[0],y:e.geometry.coordinates[1],areaName:e.properties.area_name,estateType:e.properties.estatetype_en,address:e.properties.street_en,addressNumber:e.properties.street_number,pscode:e.properties.ps_code,estateArea:e.properties.estatearea,bedrooms:e.properties.bedrooms,floor:e.properties.floor,year:e.properties.year,planNumber:e.properties.plan_num,plotArea:e.properties.plotarea,parcelNumber:e.properties.parcel_num,parking:e.properties.parking,furnished:e.properties.furnished,isnew:e.properties.isnew,heating:e.properties.heating,cooling:e.properties.cooling,view:e.properties.view,title:e.properties.title}}),h["catch"](function(e){console.log(e)});var b=n.resolve(i.ajax({url:"http://www.geomerchant.eu/api/listing",type:"GET",data:{gid:l}})).then(function(e){a.config.cache.activeEstateListing=e,m.listing.values=e,m.listing.values.date_start=g.handleDate(e.date_start,c),m.listing.values.date_end=g.handleDate(e.date_end,c),m.listing.exists=!0})["catch"](function(e){var n=t.querySelector("#appwrapper__snackbar"),i={message:a.config.commons.trans.errors.listing404};console.log(e),404===e.status&&(m.listing.exists=!1,n.MaterialSnackbar.showSnackbar(i))});n.each([h,b],function(e){}).then(function(){r(m),d.removeAttribute("disabled"),u.removeAttribute("disabled"),g.addClass(d,"mdl-button--accent"),g.addClass(u,"mdl-button--accent")})["catch"](function(e){console.log(e)})}else p.innerHTML="",g.addClass(p,"visuallyhidden"),d.setAttribute("disabled",!0),u.setAttribute("disabled",!0),g.findById(f,"estates").getSource().getFeatures().forEach(function(e){e.setStyle(null)})}function s(){var e=a.config.commons.map;t.querySelector("body").dataset.active="info",e.on("click",o)}function l(){var e=a.config.commons.map;e.un("click",o)}var c=t.documentElement.lang,d=t.querySelector("#edit"),u=t.querySelector("#delete"),p=t.querySelector("#appwrapper__infobox-content"),f=a.config.promises.dustBluebird,g=a.utils;return{init:s,disable:l}}(window,document,Promise,jQuery,App),App.config.modules.edit=function(e,t,n,i,a,r){"use strict";function o(){m.children.length>0&&(m.innerHTML="")}function s(e){var t=App.config.commons.map,n=t.getInteractions(),i={};return n.forEach(function(t){return t.get("id")===e?(i=t,!1):!0}),i}function l(){var e=m.querySelectorAll("input[type=text]");[].forEach.call(e,function(e){e.addEventListener("blur",function(){var e,t=this.value;"number"===this.dataset.type?e=t.replace(/[\/\D\/ ]/gi,""):"alphanum"===this.dataset.type?e=t.replace(/[^a-z0-9A-ZA-zΑ-Ωα-ωίϊΐόάέύϋΰήώ ]/gi,""):"special"===this.dataset.type?e=t.replace(/[^0-9 \/]/gi,""):"date"===this.dataset.type&&(e=t.replace(/[^0-9 \-]/gi,"")),this.value=e,h.removeClass(this.parentNode,"is-invalid")})})}function c(e){var t;return t="el"===y?{"Διαμέρισμα":function(){return"Apartment"},"Μονοκατοικία":function(){return"Detached House"},"Μεζονέτα":function(){return"Maisonette"},"Έπαυλη":function(){return"Villa"}}:{Apartment:function(){return"Διαμέρισμα"},"Detached House":function(){return"Μονοκατοικία"},Maisonette:function(){return"Μεζονέτα"},Villa:function(){return"Έπαυλη"}},t[e]()}function d(){var e={},n={},i=m.querySelectorAll("input[type=text]"),a=m.querySelectorAll("input[type=checkbox]");return e.estate={},e.listing={},[].forEach.call(i,function(n){var i=_.last(_.split(n.getAttribute("id"),"-",3)),a=n.value,r=t.querySelector("#estate").dataset.newx,o=t.querySelector("#estate").dataset.newy,s=t.querySelector("#estate").dataset.originalx,l=t.querySelector("#estate").dataset.originaly;n.getAttribute("id").indexOf("estate")>-1?("undefined"!=typeof r?(e.estate.x=r,e.estate.y=o):(e.estate.x=s,e.estate.y=l),"el"===y?("type"===i&&(e.estate.estatetypeEn=c(a),e.estate.estatetype=a),"address"===i&&(e.estate.streetEn=h.elToEn(a),e.estate.streetEl=a)):("type"===i&&(e.estate.estatetypeEn=a,e.estate.estatetype=c(a)),"address"===i&&(e.estate.streetEn=a,e.estate.streetEl=h.elToEn(a))),"addressNumber"===i&&(e.estate.streetNumber=a),e.estate[i]=a):"type"===i?"Sale"===a||"Πώληση"===a?(e.listing.sale=!0,e.listing.rent=!1):(e.listing.sale=!1,e.listing.rent=!0):e.listing[i]=a}),[].forEach.call(a,function(t){var n=_.last(_.split(t.getAttribute("id"),"-",3)),i=t.checked;"pets"!==n?e.estate[n]=i:e.listing[n]=i}),n.estate=_.omit(e.estate,["address","addressNumber","type","toggle"]),n.listing=e.listing,n}function u(e){function a(e,t){var n=e;return n.gid=t,n}var r=t.querySelector("#appwrapper__snackbar"),l={};n.resolve(i.ajax({url:"http://www.geomerchant.eu/api/property",type:"PUT",data:e.estate})).then(function(t){return l.estateId=t.propertyGid,_.isEmpty(e.listing)?null:i.ajax({url:"http://www.geomerchant.eu/api/listing",type:"PUT",data:a(e.listing,t.propertyGid)})}).then(function(e){var t;t=null===e?{message:"Updated Estate: "+l.estateId}:{message:"Updated EstateID: "+l.estateId+" and ListingID: "+e.listingId},r.MaterialSnackbar.showSnackbar(t)})["catch"](function(e){var t={message:e};console.log(e),r.MaterialSnackbar.showSnackbar(t)})["finally"](function(){var e=App.config.commons.map;o(),h.addClass(m,"visuallyhidden"),h.findById(e,"estates").getSource().getFeatures().forEach(function(e){e.setStyle(null)}),b.setAttribute("disabled",!0),w.setAttribute("disabled",!0),v.init(),E.dataset.active="info",s("translate").setActive(!1)})}function p(){var e,n,o,s,l="el"===y?"DD-MM-YYYY":"MM-DD-YYYY",c=t.getElementById("infobox__date-start"),d=t.getElementById("infobox__date-end"),u=t.getElementById("listing__general-dateStart"),p=t.getElementById("listing__general-dateEnd"),f=new MutationObserver(function(e){var n;e.forEach(function(e){"class"===e.attributeName&&(n=i(e.target).prop(e.attributeName),n.indexOf("mddtp-picker--inactive")>-1?h.removeClass(t.getElementById("appwrapper__infobox"),"unclickable"):h.addClass(t.getElementById("appwrapper__infobox"),"unclickable"))})});null!==u&&(console.log(u.value),o="undefined"!==u.value?r(u.value,l):r(),e=new a["default"]({type:"date",init:o,future:r().add(5,"years"),trigger:u,orientation:"PORTRAIT"}),f.observe(t.getElementById("mddtp-picker__date"),{attributes:!0}),u.addEventListener("onOk",function(){h.addClass(this.parentNode,"is-dirty"),this.value=e.time.format(l).toString()}),c.addEventListener("click",function(){e.toggle()})),null!==p&&(s="undefined"!==p.value?r(u.value,l):r(),p.addEventListener("onOk",function(){h.addClass(this.parentNode,"is-dirty"),this.value=n.time.format(l).toString()}),n=new a["default"]({type:"date",init:s,future:r().add(5,"years"),trigger:p,orientation:"PORTRAIT"}),f.observe(t.getElementById("mddtp-picker__date"),{attributes:!0}),d.addEventListener("click",function(){n.toggle()}))}function f(){var e=new MutationObserver(function(e){var n;e.forEach(function(e){"data-val"===e.attributeName&&(n=e.target.value,"Rent"===n||"Ενοικίαση"===n?h.removeClass(t.querySelector("#listing__general-pets-wrapper"),"visuallyhidden"):h.addClass(t.querySelector("#listing__general-pets-wrapper"),"visuallyhidden"))})}),n=App.config.commons.map,i=m.querySelectorAll("input"),a=m.querySelectorAll("label"),r=m.querySelectorAll("button"),c=t.querySelector(".close"),f=t.querySelector(".agree"),g=t.querySelector("#estate_location-toggle"),y=t.querySelector("#estate__info-gid").value,_=new ol.interaction.Translate({features:new ol.Collection([h.findById(n,"estates").getSource().getFeatureById(y)]),layers:[h.findById(n,"estates")]});l(),_.set("id","translate"),null!==t.getElementById("listing__idAndType-type")&&e.observe(t.getElementById("listing__idAndType-type"),{attributes:!0,characterData:!0}),_.on("translateend",function(e){var n=t.querySelector("#estate");n.dataset.newx=e.coordinate[0],n.dataset.newy=e.coordinate[1],g.checked=!1,h.removeClass(g.parentNode,"is-checked"),_.setActive(!1)}),n.addInteraction(_),_.setActive(!1),g.addEventListener("click",function(){this.checked?_.setActive(!0):_.setActive(!1)}),[].forEach.call(t.getElementsByClassName("listing"),function(e){h.removeClass(e,"listing-disabled")}),[].forEach.call(i,function(e){h.hasClass(e,"not-edditable")||e.removeAttribute("disabled")}),[].forEach.call(a,function(e){h.removeClass(e,"is-disabled")}),[].forEach.call(r,function(e){e.removeAttribute("disabled")}),h.removeClass(t.querySelector("#confirmBtns"),"visuallyhidden"),c.addEventListener("click",function(){o(),h.addClass(m,"visuallyhidden"),h.findById(n,"estates").getSource().getFeatures().forEach(function(e){e.setStyle(null)}),b.setAttribute("disabled",!0),w.setAttribute("disabled",!0),v.init(),E.dataset.active="info",s("translate").setActive(!1)}),f.addEventListener("click",function(){var e=d();console.log(e),u(e)}),p()}function g(){v.disable(),f()}var m=t.querySelector("#appwrapper__infobox-content"),y=t.documentElement.lang,v=App.config.modules.info,h=App.utils,b=t.querySelector("#edit"),w=t.querySelector("#delete"),E=t.querySelector("body");return{init:g}}(window,document,Promise,$,mdDateTimePicker,moment,App),App.config.modules["delete"]=function(e,t,n,i,a,r){"use strict";function o(){E.children.length>0&&(E.innerHTML="")}function s(){var e=a.config.commons.map;m.findById(e,"estates").getSource().clear()}function l(e){n.resolve(i.ajax({url:"http://www.geomerchant.eu/api/listing",type:"DELETE",data:{id:e}})).then(function(e){console.log(e),E.querySelector("#listing").innerHTML="",E.querySelector("#listing").parentNode.removeChild(E.querySelector("#listing"))})["finally"](function(){var e=a.config.commons.map;o(),S.dataset.active="info",h.setAttribute("disabled",!0),v.setAttribute("disabled",!0),A.init(),m.findById(e,"estates").getSource().getFeatures().forEach(function(e){e.setStyle(null)})})["catch"](function(e){var t={message:e};console.log(e),w.MaterialSnackbar.showSnackbar(t)})}function c(e){n.resolve(i.ajax({url:"http://www.geomerchant.eu/api/property",type:"DELETE",data:{gid:e}})).then(function(){s()})["finally"](function(){var e=a.config.commons.map;o(),S.dataset.active="info",A.init(),h.setAttribute("disabled",!0),v.setAttribute("disabled",!0),m.findById(e,"estates").getSource().getFeatures().forEach(function(e){e.setStyle(null)})})["catch"](function(e){var t={message:e};console.log(e),w.MaterialSnackbar.showSnackbar(t)})}function d(){var e=b.querySelectorAll("input[name=options]"),t={};return 0!==e.length&&[].forEach.call(e,function(e){var n=_.last(_.split(e.getAttribute("id"),"-",3));t[n]=e.checked}),t}function u(){b.close()}function p(){var e,n=d();_.isEmpty(n)?(e=t.getElementById("estate__info-gid").value,c(e)):(n.listing===!0&&(e=t.getElementById("listing__idAndType-id").value,l(e)),n.estate===!0&&(e=t.getElementById("estate__info-gid").value,c(e))),b.close()}function f(){var e=t.getElementById("listing__idAndType-id"),n={};null===e?(n.title="Delete Estate",n.choose=!1):(n.title="Please choose what you want to delete",n.choose=!0),y.renderAsync("deleteDialog",n).then(function(e){b.innerHTML=e,b.showModal()}).then(function(){b.querySelector("#cancelDelete").addEventListener("click",u),b.querySelector("#confirmDelete").addEventListener("click",p)})["catch"](function(e){console.log(e)})}function g(){b.showModal||r.registerDialog(b),f()}var m=a.utils,y=a.config.promises.dustBluebird,v=t.getElementById("delete"),h=t.getElementById("edit"),b=t.querySelector("dialog"),w=t.querySelector("#appwrapper__snackbar"),E=t.getElementById("appwrapper__infobox-content"),S=t.querySelector("body"),A=a.config.modules.info;return{init:g}}(window,document,Promise,jQuery,App,dialogPolyfill),App.config.modules.insert=function(e,t,n,i,a,r,o,s,l,c){"use strict";function d(){C.children.length>0&&(C.innerHTML="",t.getElementById("activeModule").innerHTML="Information")}function u(){var e=C.querySelectorAll("input[type=text]");Array.prototype.map.call(e,function(e){""===e.value?k.addClass(e.parentNode,"is-invalid"):k.removeClass(e.parentNode,"is-invalid")})}function p(){var e=C.querySelectorAll("input[type=text]");return _.some(e,function(e){return""===e.value})}function f(e){var t=a.config.commons.map,n=t.getInteractions(),i={};return n.forEach(function(t){return t.get("id")===e?(i=t,!1):!0}),i}function g(){var e,n,a="el"===L?"DD-MM-YYYY":"MM-DD-YYYY",s=t.getElementById("infobox__date-start"),l=t.getElementById("infobox__date-end"),d=t.getElementById("listing__general-dateStart"),u=t.getElementById("listing__general-dateEnd"),p=new MutationObserver(function(e){var n;e.forEach(function(e){"class"===e.attributeName&&(n=i(e.target).prop(e.attributeName),n.indexOf("mddtp-picker--inactive")>-1?k.removeClass(t.getElementById("appwrapper__infobox"),"unclickable"):k.addClass(t.getElementById("appwrapper__infobox"),"unclickable"))})});null!==d&&(e=new r["default"]({type:"date",init:o(),future:o().add(5,"years"),trigger:d,orientation:"PORTRAIT"}),p.observe(t.getElementById("mddtp-picker__date"),{attributes:!0}),"Chrome"!==c.name?(d.removeAttribute("disabled"),d.addEventListener("onOk",function(){k.addClass(this.parentNode,"is-dirty"),this.value=e.time.format(a).toString(),this.disabled=!0})):d.addEventListener("onOk",function(){k.addClass(this.parentNode,"is-dirty"),this.value=e.time.format(a).toString()}),s.addEventListener("click",function(){e.toggle()})),null!==u&&("Chrome"!==c.name?(u.removeAttribute("disabled"),u.addEventListener("onOk",function(){k.addClass(this.parentNode,"is-dirty"),this.value=n.time.format(a).toString(),this.disabled=!0})):u.addEventListener("onOk",function(){k.addClass(this.parentNode,"is-dirty"),this.value=n.time.format(a).toString()}),n=new r["default"]({type:"date",init:o(),future:o().add(5,"years"),trigger:u,orientation:"PORTRAIT"}),p.observe(t.getElementById("mddtp-picker__date"),{attributes:!0}),l.addEventListener("click",function(){n.toggle()}))}function m(e){var t;return t="el"===L?{"Διαμέρισμα":function(){return"Apartment"},"Μονοκατοικία":function(){return"Detached House"},"Μεζονέτα":function(){return"Maisonette"},"Έπαυλη":function(){return"Villa"}}:{Apartment:function(){return"Διαμέρισμα"},"Detached House":function(){return"Μονοκατοικία"},Maisonette:function(){return"Μεζονέτα"},Villa:function(){return"Έπαυλη"}},t[e]()}function y(){var e=C.querySelectorAll("input[type=text]");[].forEach.call(e,function(e){e.addEventListener("blur",function(){var e,t=this.value;"number"===this.dataset.type?e=t.replace(/[\/\D\/ ]/gi,""):"alphanum"===this.dataset.type?e=t.replace(/[^a-z0-9A-ZA-zΑ-Ωα-ωίϊΐόάέύϋΰήώ ]/gi,""):"special"===this.dataset.type?e=t.replace(/[^0-9 \/]/gi,""):"date"===this.dataset.type&&(e=t.replace(/[^0-9 \-]/gi,"")),this.value=e,k.removeClass(this.parentNode,"is-invalid")})})}function v(e){var n=a.config.commons.map,i={},r={},o=C.querySelectorAll("input[type=text]"),s=C.querySelectorAll("input[type=checkbox]");return i.estate={},i.listing={},e?(i.estate.x=k.findById(n,"newEstates").getSource().getFeatures()[0].getGeometry().getCoordinates()[0],i.estate.y=k.findById(n,"newEstates").getSource().getFeatures()[0].getGeometry().getCoordinates()[1]):(i.estate.x=t.getElementById("estate").dataset.originalx,i.estate.y=t.getElementById("estate").dataset.originaly),[].forEach.call(o,function(e){var t=_.last(_.split(e.getAttribute("id"),"-",3)),n=e.value;"el"===L?("type"===t&&"estate__general_estate-type"===e.id?(i.estate.estatetypeEn=m(n),i.estate.estatetype=n):"type"===t&&"listing__idAndType-type"===e.id&&("Sale"===n||"Πώληση"===n?(i.listing.sale=!0,i.listing.rent=!1):(i.listing.sale=!1,i.listing.rent=!0)),"address"===t&&(i.estate.streetEn=k.elToEn(n),i.estate.streetEl=n)):("type"===t&&"estate__general_estate-type"===e.id?(i.estate.estatetypeEn=n,i.estate.estatetype=m(n)):"type"===t&&"listing__idAndType-type"===e.id&&("Sale"===n||"Πώληση"===n?(i.listing.sale=!0,i.listing.rent=!1):(i.listing.sale=!1,i.listing.rent=!0)),"address"===t&&(i.estate.streetEn=n,i.estate.streetEl=k.elToEn(n))),"addressNumber"===t&&(i.estate.streetNumber=n),"price"===t&&(i.listing.price=n),"dateStart"===t||"dateEnd"===t?i.listing[t]=n:i.estate[t]=n}),[].forEach.call(s,function(e){var t=_.last(_.split(e.getAttribute("id"),"-",3)),n=e.checked;"pets"!==t?i.estate[t]=n:i.listing[t]=n}),r.estate=_.omit(i.estate,["address","addressNumber","type","toggle"]),r.listing=i.listing,r}function h(t){t.estate.adminId=e.id,n.resolve(i.ajax({url:"http://www.geomerchant.eu/api/property",type:"POST",data:t.estate})).then(function(e){var t=e.gid,n={cloud_name:"firvain",upload_preset:"testupload",folder:t,client_allowed_formats:"jpg",theme:"minimal",tags:t};return l.openUploadWidget(n,function(e,t){return e?0:1}),t}).then(function(e){return t.listing.gid=e,i.ajax({url:"http://www.geomerchant.eu/api/listing",type:"POST",data:t.listing})})["finally"](function(){var e=a.config.commons.map;d(),k.addClass(C,"visuallyhidden"),x.dataset.active="info",k.findById(e,"newEstates").getSource().clear(),k.findById(e,"estates").getSource().clear(),M.init()})["catch"](function(e){console.log(e)})}function b(e){n.resolve(i.ajax({url:"http://www.geomerchant.eu/api/listing",type:"POST",data:_.merge({gid:e.gid},e.listing)})).then(function(e){console.log(e)})["finally"](function(){d(),k.addClass(C,"visuallyhidden"),x.dataset.active="info",M.init()})["catch"](function(e){console.log(e)})}function w(){T.renderAsync("insertListing",_.cloneDeep(a.config.commons.trans)).then(function(e){var n=t.getElementById("confirmBtns__agree"),a=t.getElementById("confirmBtns__disagree");i("#estate").after(e),getmdlSelect.init(".getmdl-select"),k.removeClass(t.getElementById("confirmBtns"),"visuallyhidden"),y(),g(),a.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),d(),C.innerHTML="",k.addClass(C,"visuallyhidden"),x.dataset.active=M,M.init()}),n.addEventListener("click",function(e){var n;e.preventDefault(),e.stopPropagation(),p()!==!0?(n=v(!1),n.gid=t.getElementById("estate__info-gid").value,b(n)):u()})})["catch"](function(e){console.log(e)})}function E(){var e=a.config.commons.map,n=f("newEstate"),i=_.cloneDeep(a.config.commons.trans);T.renderAsync("insert",i).then(function(e){d(),C.innerHTML=e,k.removeClass(C,"visuallyhidden"),getmdlSelect.init(".getmdl-select")}).then(function(i){var a=t.getElementById("confirmBtns__agree"),r=t.getElementById("confirmBtns__disagree"),o=t.getElementById("listing");y(),g(),r.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),d(),k.addClass(C,"visuallyhidden"),x.dataset.active=M,n.setActive(!1),k.findById(e,"newEstates").getSource().clear(),M.init()}),a.addEventListener("click",function s(e){e.preventDefault(),e.stopPropagation(),k.removeClass(o,"visuallyhidden"),this.innerHTML="Agree",e.target.removeEventListener(e.type,s),this.addEventListener("click",function(e){var t;e.preventDefault(),e.stopPropagation(),p()!==!0?(t=v(!0),h(t)):u()})})})["catch"](function(e){console.log(e)})}function S(){var e=a.config.commons.map,t=new ol.interaction.Draw({features:N,source:k.findById(e,"newEstates").getSource(),type:"Point",style:new ol.style.Style({image:new ol.style.Icon({src:"./images/pins/generic-48.png",anchorOrigin:"bottom-left",anchor:[.5,0],scale:1,color:"rgb(96, 125, 139)"})})});t.set("id","newEstate"),t.setActive(!1),e.addInteraction(t)}function A(){return"undefined"===C.innerHTML||""===C.innerHTML?0:"undefined"!==C.innerHTML&&null!==t.getElementById("listing")?1:2}function I(){var e=a.config.commons.map,n=f("newEstate"),i=k.findById(e,"newEstates");M.disable(),0===A()?(t.getElementById("activeModule").innerHTML="Add Estate And Listing",n.setActive(!0),k.findById(e,"newEstates").setVisible(!0),N.on("change:length",function(){this.getLength()>0&&(n.setActive(!1),i.getSource().clear())}),n.on("drawend",E)):2===A()?(t.getElementById("activeModule").innerHTML="Add Listing",n.setActive(!1),w()):(n.setActive(!1),t.getElementById("activeModule").innerHTML="Information",M.init())}function B(){_.isEmpty(f("newEstate"))&&S(),I()}var L=t.documentElement.lang,x=t.querySelector("body"),k=a.utils,T=a.config.promises.dustBluebird,C=t.getElementById("appwrapper__infobox-content"),M=a.config.modules.info,N=new ol.Collection;return{init:B}}(window,document,Promise,jQuery,App,mdDateTimePicker,moment,dialogPolyfill,cloudinary,bowser);var userMap=function(e,t,n,i,a){"use strict";function r(){n.resolve(i.ajax({url:"http://www.geomerchant.eu/api/language",type:"GET",data:{type:s,context:o}})).then(function(e){a.config.commons.trans=e,a.config.commons.map=a.config.modules.map.initialize()}).then(function(){var e;a.config.modules.info.init(),e=new MutationObserver(function(e){e.forEach(function(e){"undefined"!=typeof e.target.dataset&&("insert"===e.target.dataset.active?a.config.modules.insert.init():"delete"===e.target.dataset.active?a.config.modules["delete"].init():"edit"===e.target.dataset.active&&a.config.modules.edit.init())})}),e.observe(t.querySelector("body"),{attributes:!0})})["catch"](function(e){console.log(e)})}var o="admin",s=t.documentElement.lang,l=i(".mdl-spinner");return i(t).ajaxStart(function(){i(".spiner-wrapper").removeClass("visuallyhidden"),l.addClass("is-active")}).ajaxStop(function(){i(".spiner-wrapper").addClass("visuallyhidden"),l.removeClass("is-active")}),toastr.options={closeButton:!1,debug:!1,newestOnTop:!1,progressBar:!1,positionClass:"toast-top-center",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},{init:r}}(window,document,Promise,jQuery,App);userMap.init(),$(function(){var e=App.utils,t=document.getElementById("insert"),n=document.getElementById("delete"),i=document.querySelector("#edit");$("#logout").click(function(){location.href="/logout"}),document.getElementById("enter-fullscreen").addEventListener("click",function(){var t=document.body;e.requestFullScreen(t),e.removeClass(document.getElementById("exit-fullscreen").parentNode,"visuallyhidden"),e.addClass(this.parentNode,"visuallyhidden")}),document.getElementById("exit-fullscreen").addEventListener("click",function(){var t=document;e.exitFullsreen(t),e.removeClass(document.getElementById("enter-fullscreen").parentNode,"visuallyhidden"),e.addClass(this.parentNode,"visuallyhidden")}),t.addEventListener("click",function(){var e=document.querySelector("body");e.dataset.active="insert"}),n.addEventListener("click",function(){var e=document.querySelector("body");e.dataset.active="delete"}),i.addEventListener("click",function(){var e=document.querySelector("body");e.dataset.active="edit"})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkN1c3RvbUV2ZW50LmpzIiwic2Nyb2xsSW50b1ZpZXdJZk5lZWRlZC5qcyIsImdsb2JhbHMuanMiLCJ1dGlscy5qcyIsIm9sMy1tYXAuanMiLCJpbmZvLmpzIiwiZWRpdC5qcyIsImRlbGV0ZS5qcyIsImluc2VydC5qcyIsImluZGV4LmpzIl0sIm5hbWVzIjpbIkN1c3RvbUV2ZW50IiwiZXZlbnQiLCJwYXJhbXMiLCJidWJibGVzIiwiY2FuY2VsYWJsZSIsImRldGFpbCIsInVuZGVmaW5lZCIsImV2dCIsImRvY3VtZW50IiwiY3JlYXRlRXZlbnQiLCJpbml0Q3VzdG9tRXZlbnQiLCJ3aW5kb3ciLCJwcm90b3R5cGUiLCJFdmVudCIsIkVsZW1lbnQiLCJzY3JvbGxJbnRvVmlld0lmTmVlZGVkIiwiY2VudGVySWZOZWVkZWQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJwYXJlbnQiLCJ0aGlzIiwicGFyZW50Tm9kZSIsInBhcmVudENvbXB1dGVkU3R5bGUiLCJnZXRDb21wdXRlZFN0eWxlIiwicGFyZW50Qm9yZGVyVG9wV2lkdGgiLCJwYXJzZUludCIsImdldFByb3BlcnR5VmFsdWUiLCJwYXJlbnRCb3JkZXJMZWZ0V2lkdGgiLCJvdmVyVG9wIiwib2Zmc2V0VG9wIiwic2Nyb2xsVG9wIiwib3ZlckJvdHRvbSIsImNsaWVudEhlaWdodCIsIm92ZXJMZWZ0Iiwib2Zmc2V0TGVmdCIsInNjcm9sbExlZnQiLCJvdmVyUmlnaHQiLCJjbGllbnRXaWR0aCIsImFsaWduV2l0aFRvcCIsInNjcm9sbEludG9WaWV3IiwiQXBwIiwiY29uZmlnIiwicHJvbWlzZXMiLCJkdXN0Qmx1ZWJpcmQiLCJQcm9taXNlIiwicHJvbWlzaWZ5QWxsIiwiZHVzdCIsImNsb3VkaW5hcnlCaXJkIiwiJCIsImNsb3VkaW5hcnkiLCJjb21tb25zIiwibWFwIiwidHJhbnMiLCJjYWNoZSIsImFjdGl2ZUVzdGF0ZSIsImFjdGl2ZUVzdGF0ZUxpc3RpbmciLCJtb2R1bGVzIiwiaW5mbyIsImVkaXQiLCJkZWxldGUiLCJpbnNlcnQiLCJmaWx0ZXJzIiwidXRpbHMiLCJjbG91ZF9uYW1lIiwiYXBpX2tleSIsImZpbmRCeUlkIiwiaWQiLCJsYXllcnMiLCJnZXRMYXllcnMiLCJnZXRMZW5ndGgiLCJpIiwiaXRlbSIsImdldCIsImZpbmRCeU5hbWUiLCJuYW1lIiwicHJldmVudERvdEFuZFNwYWNlIiwiZSIsImtleSIsImNoYXJDb2RlIiwia2V5Q29kZSIsImlubmVySFRNTCIsImdlb21ldHJ5RnVuY3Rpb24iLCJjb29yZGluYXRlcyIsImdlb21ldHJ5Iiwic3RhcnQiLCJlbmQiLCJnZW9tIiwib2wiLCJQb2x5Z29uIiwic2V0Q29vcmRpbmF0ZXMiLCJoYXNDbGFzcyIsImVsIiwiY2xhc3NOYW1lIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJSZWdFeHAiLCJ0ZXN0IiwicmVtb3ZlQ2xhc3MiLCJlbGVtZW50IiwicmVtb3ZlIiwicmVwbGFjZSIsInNwbGl0Iiwiam9pbiIsImFkZENsYXNzIiwiYWRkIiwidG9nZ2xlQ2xhc3MiLCJjbGFzc2VzIiwiZXhpc3RpbmdJbmRleCIsInRvZ2dsZSIsImluZGV4T2YiLCJzcGxpY2UiLCJwdXNoIiwicmVxdWVzdEZ1bGxTY3JlZW4iLCJ3c2NyaXB0IiwicmVxdWVzdE1ldGhvZCIsIndlYmtpdFJlcXVlc3RGdWxsU2NyZWVuIiwibW96UmVxdWVzdEZ1bGxTY3JlZW4iLCJtc1JlcXVlc3RGdWxsU2NyZWVuIiwiY2FsbCIsIkFjdGl2ZVhPYmplY3QiLCJTZW5kS2V5cyIsImV4aXRGdWxsc3JlZW4iLCJleGl0RnVsbFNjcmVlbiIsIndlYmtpdEV4aXRGdWxsc2NyZWVuIiwibW96Q2FuY2VsRnVsbFNjcmVlbiIsIm1zRXhpdEZ1bGxzY3JlZW4iLCJlbFRvRW4iLCJzdHJpbmciLCJuZXdTdHJpbmciLCJvcmlnaW5hbFN0cmluZyIsIkFycmF5IiwicmVwbGFjZV9uIiwiaGFuZGxlRGF0ZSIsInN0ciIsImxhbmciLCJuZXdEYXRlIiwiXyIsInNhbml0aXplIiwic2FuaXRpemVkU3RyIiwidmFsdWUiLCJjb25zb2xlIiwibG9nIiwiY2VudGVyIiwiZXh0ZW50IiwiZ2VvSlNPTkZvcm1hdCIsImZvcm1hdCIsIkdlb0pTT04iLCJkZWZhdWx0RGF0YVByb2plY3Rpb24iLCJtYXBTdHlsZXMiLCJpY29uVHlwZSIsImVzdGF0ZVR5cGUiLCJBcGFydG1lbnQiLCJTdG9yZSIsIkRldGFjaGVkIEhvdXNlIiwiTWFpc29uZXR0ZSIsIlZpbGxhIiwiZXN0YXRlcyIsImZlYXR1cmUiLCJzcmMiLCJzdHlsZSIsIlN0eWxlIiwiZ2V0R2VvbWV0cnkiLCJpbWFnZSIsIkljb24iLCJhbmNob3JPcmlnaW4iLCJhbmNob3IiLCJzY2FsZSIsIm1hcFNvdXJjZXMiLCJiaW5nIiwic291cmNlIiwiQmluZ01hcHMiLCJpbWFnZXJ5U2V0IiwibWFwQm94IiwiWFlaIiwiYXR0cmlidXRpb25zIiwiQXR0cmlidXRpb24iLCJodG1sIiwidXJsIiwiVmVjdG9yIiwibG9hZGVyIiwic2VsZiIsInJlc29sdmUiLCJhamF4IiwidHlwZSIsImRhdGFUeXBlIiwidGhlbiIsImRhdGEiLCJmZWF0dXJlcyIsInJlYWRGZWF0dXJlcyIsImZlYXR1cmVQcm9qZWN0aW9uIiwiYWRkRmVhdHVyZXMiLCJnZXRGZWF0dXJlcyIsImZvckVhY2giLCJzZXRJZCIsImdldFByb3BlcnRpZXMiLCJnaWQiLCJzdGF0dXMiLCJ0b2FzdHIiLCJlcnJvciIsIm1hcExheWVycyIsImxheWVyIiwiVGlsZSIsInZpc2libGUiLCJtYXhab29tIiwiY3Jvc3NPcmlnaW4iLCJwcmVsb2FkIiwiSW5maW5pdHkiLCJuZXdFc3RhdGVzIiwiY29sb3IiLCJpbml0aWFsaXplIiwiT2JqZWN0Iiwia2V5cyIsIk1hcCIsInRhcmdldCIsImNvbXBhY3QiLCJsb2FkVGlsZXNXaGlsZUFuaW1hdGluZyIsImxvYWRUaWxlc1doaWxlSW50ZXJhY3RpbmciLCJyZW5kZXJlciIsImNvbnRyb2xzIiwiY29udHJvbCIsImRlZmF1bHRzIiwiYXR0cmlidXRpb25PcHRpb25zIiwiY29sbGFwc2libGUiLCJjb2xsYXBzZWQiLCJleHRlbmQiLCJTY2FsZUxpbmUiLCJ1bml0cyIsIk92ZXJ2aWV3TWFwIiwiWm9vbVRvRXh0ZW50IiwidmlldyIsIlZpZXciLCJwcm9qZWN0aW9uIiwiem9vbSIsIm1pblpvb20iLCJkdXN0RXN0YXRlSW5mbyIsInJlbmRlckFzeW5jIiwicmVzdWx0IiwiaW5mb0JveENvbnRlbnQiLCJnZXRtZGxTZWxlY3QiLCJpbml0Iiwic2VsZWN0RmVhdHVyZSIsImVzdGF0ZSIsInJlbmRlckRhdGEiLCJjbG9uZURlZXAiLCJjbGlja2VkRmVhdHVyZSIsImZvckVhY2hGZWF0dXJlQXRQaXhlbCIsInBpeGVsIiwiZ2V0U291cmNlIiwic2V0U3R5bGUiLCJnZXRDb29yZGluYXRlcyIsImdldFZpZXciLCJzZXRDZW50ZXIiLCJzZXRab29tIiwicDEiLCJwcm9wZXJ0aWVzIiwidmFsdWVzIiwieCIsInkiLCJhcmVhTmFtZSIsImFyZWFfbmFtZSIsImVzdGF0ZXR5cGUiLCJhZGRyZXNzIiwic3RyZWV0X2VsIiwiYWRkcmVzc051bWJlciIsInN0cmVldF9udW1iZXIiLCJwc2NvZGUiLCJwc19jb2RlIiwiZXN0YXRlQXJlYSIsImVzdGF0ZWFyZWEiLCJiZWRyb29tcyIsImZsb29yIiwieWVhciIsInBsYW5OdW1iZXIiLCJwbGFuX251bSIsInBsb3RBcmVhIiwicGxvdGFyZWEiLCJwYXJjZWxOdW1iZXIiLCJwYXJjZWxfbnVtIiwicGFya2luZyIsImZ1cm5pc2hlZCIsImlzbmV3IiwiaGVhdGluZyIsImNvb2xpbmciLCJ0aXRsZSIsImVzdGF0ZXR5cGVfZW4iLCJzdHJlZXRfZW4iLCJwMiIsImxpc3RpbmciLCJkYXRlX3N0YXJ0IiwiZGF0ZV9lbmQiLCJleGlzdHMiLCJzbmFja2JhckNvbnRhaW5lciIsInF1ZXJ5U2VsZWN0b3IiLCJtZXNzYWdlIiwiZXJyb3JzIiwibGlzdGluZzQwNCIsIk1hdGVyaWFsU25hY2tiYXIiLCJzaG93U25hY2tiYXIiLCJlYWNoIiwiZWRpdEJ1dHRvbiIsInJlbW92ZUF0dHJpYnV0ZSIsImRlbGV0ZUJ1dHRvbiIsInNldEF0dHJpYnV0ZSIsImRhdGFzZXQiLCJhY3RpdmUiLCJvbiIsImRpc2FibGUiLCJ1biIsImRvY3VtZW50RWxlbWVudCIsImpRdWVyeSIsImRQaWNrIiwibW9tZW50IiwiY2xlYXJDb250ZW50IiwiY29udGVudCIsImNoaWxkcmVuIiwiZ2V0SW50ZXJhY3Rpb24iLCJpbnRlcmFjdGlvbnMiLCJnZXRJbnRlcmFjdGlvbnMiLCJmb3VuZCIsImludGVyYWN0aW9uIiwiYXNzaWduVmFsaWRhdG9ycyIsImlucHV0cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJhZGRFdmVudExpc3RlbmVyIiwic2V0RXN0YXRlVHlwZSIsInR5cGVzIiwizpTOuc6xzrzOrc+BzrnPg868zrEiLCLOnM6/zr3Ov866zrHPhM6/zrnOus6vzrEiLCLOnM61zrbOv869zq3PhM6xIiwizojPgM6xz4XOu863IiwiY29sbGVjdFZhbHVlcyIsImZpbHRlcmVkVmFsdWVzIiwiY2hlY2tib3hlcyIsImxhc3QiLCJnZXRBdHRyaWJ1dGUiLCJuZXdYIiwibmV3eCIsIm5ld1kiLCJuZXd5Iiwib3JpZ2luYWxYIiwib3JpZ2luYWx4Iiwib3JpZ2luYWxZIiwib3JpZ2luYWx5IiwiZXN0YXRldHlwZUVuIiwic3RyZWV0RW4iLCJzdHJlZXRFbCIsInN0cmVldE51bWJlciIsInNhbGUiLCJyZW50IiwiY2hlY2tlZCIsIm9taXQiLCJ1cGRhdGUiLCJhZGRHaWRUb0xpc3RpbmciLCJpbnB1dCIsInJldHVybmVkRGF0YSIsIm1zZ0RhdGEiLCJlc3RhdGVSZXN1bHQiLCJlc3RhdGVJZCIsInByb3BlcnR5R2lkIiwiaXNFbXB0eSIsImxpc3RpbmdSZXN1bHQiLCJtc2ciLCJsaXN0aW5nSWQiLCJib2R5Iiwic2V0QWN0aXZlIiwiZGF0ZVBpY2tlciIsImRhdGVTdGFydFBpY2tlciIsImRhdGVFbmRQaWNrZXIiLCJkYXRlU3RhcnRQaWNrZXJJbml0IiwiZGF0ZUVuZFBpY2tlckluaXQiLCJkYXRlU3RhcnRCdG4iLCJnZXRFbGVtZW50QnlJZCIsImRhdGVFbmRCdG4iLCJkYXRlU3RhcnRJbnB1dCIsImRhdGVFbmRJbnB1dCIsIm9ic2VydmVEYXRlUGlja2VyIiwiTXV0YXRpb25PYnNlcnZlciIsIm11dGF0aW9ucyIsImF0dHJpYnV0ZVZhbHVlIiwibXV0YXRpb24iLCJhdHRyaWJ1dGVOYW1lIiwicHJvcCIsImZ1dHVyZSIsInRyaWdnZXIiLCJvcmllbnRhdGlvbiIsIm9ic2VydmUiLCJhdHRyaWJ1dGVzIiwidGltZSIsInRvU3RyaW5nIiwiZW5hYmxlRWRpdCIsIm9ic2VydmVMaXN0aW5nSW5wdXQiLCJsYWJlbHMiLCJidXR0b25zIiwiZWRpdENsb3NlQnV0dG9uIiwiZWRpdEFncmVlQnV0dG9uIiwibG9jYXRpb25Td2l0Y2giLCJ0cmFuc2xhdGUiLCJUcmFuc2xhdGUiLCJDb2xsZWN0aW9uIiwiZ2V0RmVhdHVyZUJ5SWQiLCJzZXQiLCJjaGFyYWN0ZXJEYXRhIiwiY29vcmRpbmF0ZSIsImFkZEludGVyYWN0aW9uIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsIm1kRGF0ZVRpbWVQaWNrZXIiLCJkaWFsb2dQb2x5ZmlsbCIsInVwZGF0ZUVzdGF0ZXMiLCJjbGVhciIsImRlbGV0ZUxpc3RpbmciLCJkZWxldGVMaXN0aW5ncmVzdWx0IiwicmVtb3ZlQ2hpbGQiLCJkZWxldGVFc3RhdGVBbmRMaXN0aW5nIiwid2hhdFRvRGVsZXRlIiwiZGlhbG9nIiwiY2FuY2VsRGVsZXRlIiwiY2xvc2UiLCJjb25maXJtRGVsZXRlIiwiY2hvb3NlciIsInNob3ciLCJjaG9vc2UiLCJzaG93TW9kYWwiLCJpbml0RGlhbG9nIiwicmVnaXN0ZXJEaWFsb2ciLCJib3dzZXIiLCJpbnZhbGlkYXRlIiwib2JqIiwiY2hlY2tFbXB0eSIsInNvbWUiLCJkaXNhYmxlZCIsImdldFhZIiwicHJpY2UiLCJhamF4RXN0YXRlQW5kTGlzdGluZyIsImFkbWluSWQiLCJlc3RhdGVkYXRhIiwidXBsb2FkT3B0aW9ucyIsInVwbG9hZF9wcmVzZXQiLCJmb2xkZXIiLCJjbGllbnRfYWxsb3dlZF9mb3JtYXRzIiwidGhlbWUiLCJ0YWdzIiwib3BlblVwbG9hZFdpZGdldCIsImFqYXhMaXN0aW5nIiwibWVyZ2UiLCJyZW5kZXJEdXN0TGlzdGluZyIsImFncmVlIiwiZGlzYWdyZWUiLCJhZnRlciIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwiYWpheERhdGEiLCJyZW5kZXJEdXN0RXNhdGVBbmRMaXN0aW5nIiwiZHJhdyIsImluc2VydENvbnRpbnVlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNyZWF0ZURyYXdJbnRlcmFjdGlvbiIsIkRyYXciLCJkcmF3bkNvbGxlY3Rpb24iLCJjaGVja0VzdGF0ZSIsInNldFZpc2libGUiLCJ1c2VyTWFwIiwiY29udGV4dCIsIm1vZHVsZU9ic2VydmVyIiwiJGxvYWRpbmciLCJhamF4U3RhcnQiLCJhamF4U3RvcCIsIm9wdGlvbnMiLCJjbG9zZUJ1dHRvbiIsImRlYnVnIiwibmV3ZXN0T25Ub3AiLCJwcm9ncmVzc0JhciIsInBvc2l0aW9uQ2xhc3MiLCJwcmV2ZW50RHVwbGljYXRlcyIsIm9uY2xpY2siLCJzaG93RHVyYXRpb24iLCJoaWRlRHVyYXRpb24iLCJ0aW1lT3V0IiwiZXh0ZW5kZWRUaW1lT3V0Iiwic2hvd0Vhc2luZyIsImhpZGVFYXNpbmciLCJzaG93TWV0aG9kIiwiaGlkZU1ldGhvZCIsImFkZEJ1dHRvbiIsImNsaWNrIiwibG9jYXRpb24iLCJocmVmIiwiZWxlbSJdLCJtYXBwaW5ncyI6IkNBQUEsV0FJQSxRQUFBQSxHQUFBQyxFQUFBQyxHQUNBQSxFQUFBQSxJQUFBQyxTQUFBLEVBQUFDLFlBQUEsRUFBQUMsT0FBQUMsT0FDQSxJQUFBQyxHQUFBQyxTQUFBQyxZQUFBLGNBRUEsT0FEQUYsR0FBQUcsZ0JBQUFULEVBQUFDLEVBQUFDLFFBQUFELEVBQUFFLFdBQUFGLEVBQUFHLFFBQ0FFLEVBTkEsTUFBQSxrQkFBQUksUUFBQVgsYUFBQSxHQVNBQSxFQUFBWSxVQUFB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LEVBQUFGLEVBRUEzQixFQUFBLEdBQUE4QixPQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsS0FDQUMsRUFBQSxHQUFBRCxPQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsS0FBQSxLQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxLQUFBLEtBQUEsS0FBQSxLQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsS0FFQTVELEVBQUEsRUFBQUEsRUFBQThCLEVBQUFsRixPQUFBb0QsSUFDQTJELEVBQUFBLEVBQUE3QixRQUFBLEdBQUFMLFFBQUFLLEVBQUE5QixHQUFBLEtBQUE2RCxFQUFBN0QsR0FHQSxPQURBMEQsR0FBQUMsR0FHQUcsV0FBQSxTQUFBQyxFQUFBQyxHQUNBLEdBQUFqQyxHQUNBa0MsSUFDQSxPQUFBLGdCQUFB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QUFBbUMsWUFBQXpGLFNBQUEyVyxlQUFBLG9CQUFBOVYsV0FBQSxrQkFDQXlDLEVBQUF5QyxTQUFBbkYsS0FBQUMsV0FBQSxvQkFHQTZjLEVBQUEvSixpQkFBQSxRQUFBLFdBQ0EsR0FBQXdDLEdBQUFuVyxTQUFBNFIsY0FBQSxPQUNBdUUsR0FBQTVELFFBQUFDLE9BQUEsV0FFQUgsRUFBQXNCLGlCQUFBLFFBQUEsV0FDQSxHQUFBd0MsR0FBQW5XLFNBQUE0UixjQUFBLE9BQ0F1RSxHQUFBNUQsUUFBQUMsT0FBQSxXQUVBTCxFQUFBd0IsaUJBQUEsUUFBQSxXQUNBLEdBQUF3QyxHQUFBblcsU0FBQTRSLGNBQUEsT0FDQXVFLEdBQUE1RCxRQUFBQyxPQUFBIiwiZmlsZSI6ImFkbWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoKSB7XHJcblxyXG4gIGlmICggdHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudCA9PT0gXCJmdW5jdGlvblwiICkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICBmdW5jdGlvbiBDdXN0b21FdmVudCAoIGV2ZW50LCBwYXJhbXMgKSB7XHJcbiAgICBwYXJhbXMgPSBwYXJhbXMgfHwgeyBidWJibGVzOiBmYWxzZSwgY2FuY2VsYWJsZTogZmFsc2UsIGRldGFpbDogdW5kZWZpbmVkIH07XHJcbiAgICB2YXIgZXZ0ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoICdDdXN0b21FdmVudCcgKTtcclxuICAgIGV2dC5pbml0Q3VzdG9tRXZlbnQoIGV2ZW50LCBwYXJhbXMuYnViYmxlcywgcGFyYW1zLmNhbmNlbGFibGUsIHBhcmFtcy5kZXRhaWwgKTtcclxuICAgIHJldHVybiBldnQ7XHJcbiAgIH1cclxuXHJcbiAgQ3VzdG9tRXZlbnQucHJvdG90eXBlID0gd2luZG93LkV2ZW50LnByb3RvdHlwZTtcclxuXHJcbiAgd2luZG93LkN1c3RvbUV2ZW50ID0gQ3VzdG9tRXZlbnQ7XHJcbn0pKCk7XHJcbiIsIiAgKGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICghRWxlbWVudC5wcm90b3R5cGUuc2Nyb2xsSW50b1ZpZXdJZk5lZWRlZCkge1xyXG4gICAgICBFbGVtZW50LnByb3RvdHlwZS5zY3JvbGxJbnRvVmlld0lmTmVlZGVkID0gZnVuY3Rpb24gKGNlbnRlcklmTmVlZGVkKSB7XHJcbiAgICAgICAgY2VudGVySWZOZWVkZWQgPSBhcmd1bWVudHMubGVuZ3RoID09PSAwID8gdHJ1ZSA6ICEhY2VudGVySWZOZWVkZWQ7XHJcblxyXG4gICAgICAgIHZhciBwYXJlbnQgPSB0aGlzLnBhcmVudE5vZGUsXHJcbiAgICAgICAgcGFyZW50Q29tcHV0ZWRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHBhcmVudCwgbnVsbCksXHJcbiAgICAgICAgcGFyZW50Qm9yZGVyVG9wV2lkdGggPSBwYXJzZUludChwYXJlbnRDb21wdXRlZFN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ2JvcmRlci10b3Atd2lkdGgnKSksXHJcbiAgICAgICAgcGFyZW50Qm9yZGVyTGVmdFdpZHRoID0gcGFyc2VJbnQocGFyZW50Q29tcHV0ZWRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdib3JkZXItbGVmdC13aWR0aCcpKSxcclxuICAgICAgICBvdmVyVG9wID0gdGhpcy5vZmZzZXRUb3AgLSBwYXJlbnQub2Zmc2V0VG9wIDwgcGFyZW50LnNjcm9sbFRvcCxcclxuICAgICAgICBvdmVyQm90dG9tID0gKHRoaXMub2Zmc2V0VG9wIC0gcGFyZW50Lm9mZnNldFRvcCArIHRoaXMuY2xpZW50SGVpZ2h0IC0gcGFyZW50Qm9yZGVyVG9wV2lkdGgpID4gKHBhcmVudC5zY3JvbGxUb3AgKyBwYXJlbnQuY2xpZW50SGVpZ2h0KSxcclxuICAgICAgICBvdmVyTGVmdCA9IHRoaXMub2Zmc2V0TGVmdCAtIHBhcmVudC5vZmZzZXRMZWZ0IDwgcGFyZW50LnNjcm9sbExlZnQsXHJcbiAgICAgICAgb3ZlclJpZ2h0ID0gKHRoaXMub2Zmc2V0TGVmdCAtIHBhcmVudC5vZmZzZXRMZWZ0ICsgdGhpcy5jbGllbnRXaWR0aCAtIHBhcmVudEJvcmRlckxlZnRXaWR0aCkgPiAocGFyZW50LnNjcm9sbExlZnQgKyBwYXJlbnQuY2xpZW50V2lkdGgpLFxyXG4gICAgICAgIGFsaWduV2l0aFRvcCA9IG92ZXJUb3AgJiYgIW92ZXJCb3R0b207XHJcblxyXG4gICAgICAgIGlmICgob3ZlclRvcCB8fCBvdmVyQm90dG9tKSAmJiBjZW50ZXJJZk5lZWRlZCkge1xyXG4gICAgICAgICAgcGFyZW50LnNjcm9sbFRvcCA9IHRoaXMub2Zmc2V0VG9wIC0gcGFyZW50Lm9mZnNldFRvcCAtIHBhcmVudC5jbGllbnRIZWlnaHQgLyAyIC0gcGFyZW50Qm9yZGVyVG9wV2lkdGggKyB0aGlzLmNsaWVudEhlaWdodCAvIDI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoKG92ZXJMZWZ0IHx8IG92ZXJSaWdodCkgJiYgY2VudGVySWZOZWVkZWQpIHtcclxuICAgICAgICAgIHBhcmVudC5zY3JvbGxMZWZ0ID0gdGhpcy5vZmZzZXRMZWZ0IC0gcGFyZW50Lm9mZnNldExlZnQgLSBwYXJlbnQuY2xpZW50V2lkdGggLyAyIC0gcGFyZW50Qm9yZGVyTGVmdFdpZHRoICsgdGhpcy5jbGllbnRXaWR0aCAvIDI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoKG92ZXJUb3AgfHwgb3ZlckJvdHRvbSB8fCBvdmVyTGVmdCB8fCBvdmVyUmlnaHQpICYmICFjZW50ZXJJZk5lZWRlZCkge1xyXG4gICAgICAgICAgdGhpcy5zY3JvbGxJbnRvVmlldyhhbGlnbldpdGhUb3ApO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgIH1cclxuICB9KSgpO1xyXG4iLCJ3aW5kb3cuQXBwIHx8ICh3aW5kb3cuQXBwID0ge30pO1xyXG53aW5kb3cuQXBwLmNvbmZpZyA9IHtcclxuICBwcm9taXNlczoge1xyXG4gICAgZHVzdEJsdWViaXJkOiBQcm9taXNlLnByb21pc2lmeUFsbChkdXN0KSxcclxuICAgIGNsb3VkaW5hcnlCaXJkOiBQcm9taXNlLnByb21pc2lmeUFsbCgkLmNsb3VkaW5hcnkpXHJcbiAgfSxcclxuICBjb21tb25zOiB7XHJcbiAgICBtYXA6IHt9LFxyXG4gICAgdHJhbnM6IHt9XHJcbiAgfSxcclxuICBjYWNoZToge1xyXG4gICAgYWN0aXZlRXN0YXRlOiB7fSxcclxuICAgIGFjdGl2ZUVzdGF0ZUxpc3Rpbmc6IHt9XHJcbiAgfSxcclxuICBtb2R1bGVzOiB7XHJcbiAgICBtYXA6IHt9LFxyXG4gICAgaW5mbzoge30sXHJcbiAgICBlZGl0OiB7fSxcclxuICAgIGRlbGV0ZToge30sXHJcbiAgICBpbnNlcnQ6IHt9LFxyXG4gICAgZmlsdGVyczoge31cclxuICB9XHJcbn07XHJcbndpbmRvdy5BcHAudXRpbHMgPSB7fTtcclxuLy8gdmFyIHRyYW5zO1xyXG4vLyB2YXIgY2xvdWRpbmFyeUJpcmQgPSBQcm9taXNlLnByb21pc2lmeUFsbCgkLmNsb3VkaW5hcnkpO1xyXG4vLyB2YXIgYWN0aXZlRXN0YXRlO1xyXG4vLyB2YXIgYWN0aXZlRXN0YXRlTGlzdGluZztcclxuJC5jbG91ZGluYXJ5LmNvbmZpZyh7IGNsb3VkX25hbWU6ICdmaXJ2YWluJywgYXBpX2tleTogJzM3NTEzODkzMjY4OTU5MScgfSk7XHJcbiIsIi8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOiBbXCJlcnJvclwiLCB7IFwicHJvcHNcIjogZmFsc2UgfV0qL1xyXG5BcHAudXRpbHMgPSB7XHJcbiAgZmluZEJ5SWQ6IGZ1bmN0aW9uIGZpbmRCeUlkKG1hcCwgaWQpIHtcclxuICAgIHZhciBsYXllcnMgPSBtYXAuZ2V0TGF5ZXJzKCk7XHJcbiAgICB2YXIgbGVuZ3RoID0gbGF5ZXJzLmdldExlbmd0aCgpO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xyXG4gICAgICBpZiAoaWQgPT09IGxheWVycy5pdGVtKGkpLmdldCgnaWQnKSkge1xyXG4gICAgICAgIHJldHVybiBsYXllcnMuaXRlbShpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfSxcclxuICBmaW5kQnlOYW1lOiBmdW5jdGlvbiBmaW5kQnlOYW1lKG1hcCwgbmFtZSkge1xyXG4gICAgdmFyIGxheWVycyA9IG1hcC5nZXRMYXllcnMoKTtcclxuICAgIHZhciBsZW5ndGggPSBsYXllcnMuZ2V0TGVuZ3RoKCk7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGlmIChuYW1lID09PSBsYXllcnMuaXRlbShpKS5nZXQoJ25hbWUnKSkge1xyXG4gICAgICAgIHJldHVybiBsYXllcnMuaXRlbShpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfSxcclxuICBwcmV2ZW50RG90QW5kU3BhY2U6IGZ1bmN0aW9uIHByZXZlbnREb3RBbmRTcGFjZShlKSB7XHJcbiAgICB2YXIga2V5ID0gZS5jaGFyQ29kZSA/IGUuY2hhckNvZGUgOiBlLmtleUNvZGU7XHJcbiAgICB0aGlzLmlubmVySFRNTCA9IGtleTtcclxuICAgIGlmIChrZXkgPT09IDQ2IHx8IGtleSA9PT0gMzIpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfSxcclxuICBnZW9tZXRyeUZ1bmN0aW9uOiBmdW5jdGlvbiBnZW9tZXRyeUZ1bmN0aW9uKGNvb3JkaW5hdGVzLCBnZW9tZXRyeSkge1xyXG4gICAgdmFyIGdlb20gPSBnZW9tZXRyeTtcclxuICAgIHZhciBzdGFydDtcclxuICAgIHZhciBlbmQ7XHJcbiAgICBpZiAoIWdlb20pIHtcclxuICAgICAgZ2VvbSA9IG5ldyBvbC5nZW9tLlBvbHlnb24obnVsbCk7XHJcbiAgICB9XHJcbiAgICBzdGFydCA9IGNvb3JkaW5hdGVzWzBdO1xyXG4gICAgZW5kID0gY29vcmRpbmF0ZXNbMV07XHJcbiAgICBnZW9tLnNldENvb3JkaW5hdGVzKFtcclxuICAgICAgW3N0YXJ0LCBbc3RhcnRbMF0sIGVuZFsxXV0sIGVuZCwgW2VuZFswXSwgc3RhcnRbMV1dLCBzdGFydF1cclxuICAgIF0pO1xyXG4gICAgcmV0dXJuIGdlb207XHJcbiAgfSxcclxuICBoYXNDbGFzczogZnVuY3Rpb24gaGFzQ2xhc3MoZWwsIGNsYXNzTmFtZSkge1xyXG4gICAgaWYgKGVsLmNsYXNzTGlzdCkge1xyXG4gICAgICByZXR1cm4gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3IFJlZ0V4cCgnKF58ICknICsgY2xhc3NOYW1lICsgJyggfCQpJywgJ2dpJykudGVzdChlbC5jbGFzc05hbWUpO1xyXG4gIH0sXHJcbiAgcmVtb3ZlQ2xhc3M6IGZ1bmN0aW9uIHJlbW92ZUNsYXNzKGVsLCBjbGFzc05hbWUpIHtcclxuICAgIHZhciBlbGVtZW50ID0gZWw7XHJcbiAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QpIHtcclxuICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IGVsZW1lbnQuY2xhc3NOYW1lLnJlcGxhY2UobmV3IFJlZ0V4cCgnKF58XFxcXGIpJyArIGNsYXNzTmFtZS5zcGxpdCgnICcpLmpvaW4oJ3wnKSArICcoXFxcXGJ8JCknLCAnZ2knKSwgJyAnKTtcclxuICAgIH1cclxuICB9LFxyXG4gIGFkZENsYXNzOiBmdW5jdGlvbiByZW1vdmVDbGFzcyhlbCwgY2xhc3NOYW1lKSB7XHJcbiAgICB2YXIgZWxlbWVudCA9IGVsO1xyXG4gICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0KSB7XHJcbiAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZWxlbWVudC5jbGFzc05hbWUgKz0gJyAnICsgY2xhc3NOYW1lO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgdG9nZ2xlQ2xhc3M6IGZ1bmN0aW9uIHRvZ2dsZUNsYXNzKGVsLCBjbGFzc05hbWUpIHtcclxuICAgIHZhciBjbGFzc2VzO1xyXG4gICAgdmFyIGV4aXN0aW5nSW5kZXg7XHJcbiAgICB2YXIgZWxlbWVudCA9IGVsO1xyXG4gICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0KSB7XHJcbiAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZShjbGFzc05hbWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY2xhc3NlcyA9IGVsZW1lbnQuY2xhc3NOYW1lLnNwbGl0KCcgJyk7XHJcbiAgICAgIGV4aXN0aW5nSW5kZXggPSBjbGFzc2VzLmluZGV4T2YoY2xhc3NOYW1lKTtcclxuXHJcbiAgICAgIGlmIChleGlzdGluZ0luZGV4ID49IDApIHtcclxuICAgICAgICBjbGFzc2VzLnNwbGljZShleGlzdGluZ0luZGV4LCAxKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjbGFzc2VzLnB1c2goY2xhc3NOYW1lKTtcclxuICAgICAgfVxyXG4gICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IGNsYXNzZXMuam9pbignICcpO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgcmVxdWVzdEZ1bGxTY3JlZW46IGZ1bmN0aW9uIHJlcXVlc3RGdWxsU2NyZWVuKGVsZW1lbnQpIHtcclxuICAgIC8vIFN1cHBvcnRzIG1vc3QgYnJvd3NlcnMgYW5kIHRoZWlyIHZlcnNpb25zLlxyXG4gICAgdmFyIHJlcXVlc3RNZXRob2QgPSBlbGVtZW50LnJlcXVlc3RGdWxsU2NyZWVuIHx8IGVsZW1lbnQud2Via2l0UmVxdWVzdEZ1bGxTY3JlZW4gfHwgZWxlbWVudC5tb3pSZXF1ZXN0RnVsbFNjcmVlbiB8fCBlbGVtZW50Lm1zUmVxdWVzdEZ1bGxTY3JlZW47XHJcbiAgICB2YXIgd3NjcmlwdDtcclxuICAgIGlmIChyZXF1ZXN0TWV0aG9kKSB7IC8vIE5hdGl2ZSBmdWxsIHNjcmVlbi5cclxuICAgICAgcmVxdWVzdE1ldGhvZC5jYWxsKGVsZW1lbnQpO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygd2luZG93LkFjdGl2ZVhPYmplY3QgIT09ICd1bmRlZmluZWQnKSB7IC8vIE9sZGVyIElFLlxyXG4gICAgICB3c2NyaXB0ID0gbmV3IEFjdGl2ZVhPYmplY3QoJ1dTY3JpcHQuU2hlbGwnKTtcclxuICAgICAgaWYgKHdzY3JpcHQgIT09IG51bGwpIHtcclxuICAgICAgICB3c2NyaXB0LlNlbmRLZXlzKCd7RjExfScpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSxcclxuICBleGl0RnVsbHNyZWVuOiBmdW5jdGlvbiBleGl0RnVsbHNyZWVuKGVsZW1lbnQpIHtcclxuICAgIHZhciByZXF1ZXN0TWV0aG9kID0gZWxlbWVudC5leGl0RnVsbFNjcmVlbiB8fCBlbGVtZW50LndlYmtpdEV4aXRGdWxsc2NyZWVuIHx8IGVsZW1lbnQubW96Q2FuY2VsRnVsbFNjcmVlbiB8fCBlbGVtZW50Lm1zRXhpdEZ1bGxzY3JlZW47XHJcbiAgICB2YXIgd3NjcmlwdDtcclxuICAgIGlmIChyZXF1ZXN0TWV0aG9kKSB7IC8vIE5hdGl2ZSBmdWxsIHNjcmVlbi5cclxuICAgICAgcmVxdWVzdE1ldGhvZC5jYWxsKGVsZW1lbnQpO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygd2luZG93LkFjdGl2ZVhPYmplY3QgIT09ICd1bmRlZmluZWQnKSB7IC8vIE9sZGVyIElFLlxyXG4gICAgICB3c2NyaXB0ID0gbmV3IEFjdGl2ZVhPYmplY3QoJ1dTY3JpcHQuU2hlbGwnKTtcclxuICAgICAgaWYgKHdzY3JpcHQgIT09IG51bGwpIHtcclxuICAgICAgICB3c2NyaXB0LlNlbmRLZXlzKCd7RXNjfScpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSxcclxuICBlbFRvRW46IGZ1bmN0aW9uIGVsVG9FbihzdHJpbmcpIHtcclxuICAgIHZhciBvcmlnaW5hbFN0cmluZyA9IHN0cmluZztcclxuICAgIHZhciBuZXdTdHJpbmc7XHJcbiAgICB2YXIgcmVwbGFjZSA9IG5ldyBBcnJheSgnzrEnLCAnzqwnLCAnzoYnLCAnzpEnLCAnzrInLCAnzpInLCAnzrMnLCAnzpMnLCAnzrQnLCAnzpQnLCAnzrUnLCAnzq0nLCAnzpUnLCAnzognLCAnzrYnLCAnzpYnLCAnzrcnLCAnzq4nLCAnzpcnLCAnzrgnLCAnzpgnLCAnzrknLCAnzq8nLCAnz4onLCAnzpAnLCAnzpknLCAnzoonLCAnzronLCAnzponLCAnzrsnLCAnzpsnLCAnzrwnLCAnzpwnLCAnzr0nLCAnzp0nLCAnzr4nLCAnzp4nLCAnzr8nLCAnz4wnLCAnzp8nLCAnzownLCAnz4AnLCAnzqAnLCAnz4EnLCAnzqEnLCAnz4MnLCAnz4InLCAnzqMnLCAnz4QnLCAnzqQnLCAnz4UnLCAnz40nLCAnzqUnLCAnzo4nLCAnz4YnLCAnzqYnLCAnz4cnLCAnzqcnLCAnz4gnLCAnzqgnLCAnz4knLCAnz44nLCAnzqknLCAnzo8nLCAnICcsICdcXCcnLCAnXFwnJywgJywnKTtcclxuICAgIHZhciByZXBsYWNlX24gPSBuZXcgQXJyYXkoJ2EnLCAnYScsICdBJywgJ0EnLCAndicsICdWJywgJ2cnLCAnRycsICdkJywgJ0QnLCAnZScsICdlJywgJ0UnLCAnRScsICd6JywgJ1onLCAnaScsICdpJywgJ0knLCAndGgnLCAnVGgnLCAnaScsICdpJywgJ2knLCAnaScsICdJJywgJ0knLCAnaycsICdLJywgJ2wnLCAnTCcsICdtJywgJ00nLCAnbicsICdOJywgJ3gnLCAnWCcsICdvJywgJ28nLCAnTycsICdPJywgJ3AnLCAnUCcsICdyJywgJ1InLCAncycsICdzJywgJ1MnLCAndCcsICdUJywgJ3UnLCAndScsICdZJywgJ1knLCAnZicsICdGJywgJ2NoJywgJ0NoJywgJ3BzJywgJ1BzJywgJ28nLCAnbycsICdPJywgJ08nLCAnICcsICdfJywgJ18nLCAnXycpO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVwbGFjZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICBvcmlnaW5hbFN0cmluZyA9IG9yaWdpbmFsU3RyaW5nLnJlcGxhY2UobmV3IFJlZ0V4cChyZXBsYWNlW2ldLCAnZycpLCByZXBsYWNlX25baV0pO1xyXG4gICAgfVxyXG4gICAgbmV3U3RyaW5nID0gb3JpZ2luYWxTdHJpbmc7XHJcbiAgICByZXR1cm4gbmV3U3RyaW5nO1xyXG4gIH0sXHJcbiAgaGFuZGxlRGF0ZTogZnVuY3Rpb24gaGFuZGxlRGF0ZShzdHIsIGxhbmcpIHtcclxuICAgIHZhciBzcGxpdDtcclxuICAgIHZhciBuZXdEYXRlID0gW107XHJcbiAgICBpZiAodHlwZW9mIHN0ciA9PT0gJ3N0cmluZycgJiYgbGFuZyAhPT0gJ2VsJykge1xyXG4gICAgICBzcGxpdCA9IF8uc3BsaXQoc3RyLCAnLScsIDMpO1xyXG4gICAgICBuZXdEYXRlID0gW3NwbGl0WzFdLCBzcGxpdFswXSwgc3BsaXRbMl1dO1xyXG4gICAgICByZXR1cm4gXy5qb2luKG5ld0RhdGUsICctJyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3RyO1xyXG4gIH0sXHJcbiAgc2FuaXRpemU6IGZ1bmN0aW9uIHNhbml0aXplKGVsKSB7XHJcbiAgICB2YXIgc2FuaXRpemVkU3RyO1xyXG4gICAgdmFyIHN0ciA9IGVsLnZhbHVlO1xyXG4gICAgc2FuaXRpemVkU3RyID0gc3RyLnJlcGxhY2UoL1teYS16MC05QS1aQS16zpEtzqnOsS3Pic6vz4rOkM+MzqzOrc+Nz4vOsM6uz45dL2dpLCAnJyk7XHJcbiAgICBlbC52YWx1ZSA9IHNhbml0aXplZFN0cjtcclxuICAgIGNvbnNvbGUubG9nKGVsKTtcclxuICAgIGNvbnNvbGUubG9nKGVsLnZhbHVlKTtcclxuICAgIGNvbnNvbGUubG9nKHNhbml0aXplZFN0cik7XHJcbiAgfVxyXG4gIC8vIHpvb21Ub0dpZDogZnVuY3Rpb24gem9vbVRvR2lkKG1hcCwgZ2lkKSB7XHJcbiAgLy8gICB2YXIgY29vcmRpbmF0ZXMgPSB1dGlscy5maW5kQnlJZChtYXAsICdmaWx0ZXJlZEVzdGF0ZXMnKS5nZXRTb3VyY2UoKS5nZXRGZWF0dXJlQnlJZChnaWQpXHJcbiAgLy8gICAuZ2V0R2VvbWV0cnkoKVxyXG4gIC8vICAgLmdldENvb3JkaW5hdGVzKCk7XHJcbiAgLy8gICBtYXAuZ2V0VmlldygpLnNldENlbnRlcihjb29yZGluYXRlcyk7XHJcbiAgLy8gfVxyXG59O1xyXG4iLCJBcHAuY29uZmlnLm1vZHVsZXMubWFwID0gKGZ1bmN0aW9uIG9sM01hcCh3aW5kb3csIGRvY3VtZW50LCBQcm9taXNlLCBvbCwgQXBwKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG4gIHZhciBjZW50ZXIgPSBbMzY3NzM4NSwgNDEyMDk0OV07XHJcbiAgdmFyIGV4dGVudCA9IFszNjUyNzcyLCA0MTEyODA4LCAzNzAwMDAwLCA0MTMyNzk3XTtcclxuICB2YXIgZ2VvSlNPTkZvcm1hdCA9IG5ldyBvbC5mb3JtYXQuR2VvSlNPTih7XHJcbiAgICBkZWZhdWx0RGF0YVByb2plY3Rpb246ICdFUFNHOjQzMjYnXHJcbiAgfSk7XHJcblxyXG4gIHZhciBtYXBTdHlsZXMgPSB7XHJcbiAgICBpY29uVHlwZTogZnVuY3Rpb24gZ2V0SWNvblR5cGUoZXN0YXRlVHlwZSkge1xyXG4gICAgICB2YXIgaWNvblR5cGUgPSB7XHJcbiAgICAgICAgQXBhcnRtZW50OiBmdW5jdGlvbiBnZXRBcGFydG1lbnRJY29uKCkge1xyXG4gICAgICAgICAgcmV0dXJuICdhcGFydG1lbnQnO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgU3RvcmU6IGZ1bmN0aW9uIGdldFN0b3JlSWNvbigpIHtcclxuICAgICAgICAgIHJldHVybiAnc3RvcmUnO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJ0RldGFjaGVkIEhvdXNlJzogZnVuY3Rpb24gZ2V0RGV0YWNoZWRIb3VzZUljb24oKSB7XHJcbiAgICAgICAgICByZXR1cm4gJ2RldGFjaGVkJztcclxuICAgICAgICB9LFxyXG4gICAgICAgIE1haXNvbmV0dGU6IGZ1bmN0aW9uIGdldE1haXNvbmV0dGVJY29uKCkge1xyXG4gICAgICAgICAgcmV0dXJuICdtYWlzb25ldHRlJztcclxuICAgICAgICB9LFxyXG4gICAgICAgIFZpbGxhOiBmdW5jdGlvbiBnZXRWaWxsYUlvbigpIHtcclxuICAgICAgICAgIHJldHVybiAndmlsbGEnO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIChpY29uVHlwZVtlc3RhdGVUeXBlXSkoKTtcclxuICAgIH0sXHJcbiAgICBlc3RhdGVzOiBmdW5jdGlvbiBlc3RhdGVzKGZlYXR1cmUpIHtcclxuICAgICAgdmFyIHNyYyA9ICcuL2ltYWdlcy9waW5zL25vbmUvJyArXHJcbiAgICAgIG1hcFN0eWxlcy5pY29uVHlwZShmZWF0dXJlLmdldCgnZXN0YXRldHlwZV9lbicpKSArICctNDgucG5nJztcclxuICAgICAgcmV0dXJuIG5ldyBvbC5zdHlsZS5TdHlsZSh7XHJcbiAgICAgICAgZ2VvbWV0cnk6IGZlYXR1cmUuZ2V0R2VvbWV0cnkoKSxcclxuICAgICAgICBpbWFnZTogbmV3IG9sLnN0eWxlLkljb24oKHtcclxuICAgICAgICAgIHNyYzogc3JjLFxyXG4gICAgICAgICAgYW5jaG9yT3JpZ2luOiAnYm90dG9tLWxlZnQnLFxyXG4gICAgICAgICAgYW5jaG9yOiBbMC41LCAwXSxcclxuICAgICAgICAgIHNjYWxlOiAxXHJcbiAgICAgICAgfSkpXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHZhciBtYXBTb3VyY2VzID0ge1xyXG4gICAgYmluZzogZnVuY3Rpb24gYmluZygpIHtcclxuICAgICAgcmV0dXJuIG5ldyBvbC5zb3VyY2UuQmluZ01hcHMoe1xyXG4gICAgICAgIGtleTogJ0FrMkdxOFZVZklDc1BwdWY3TFJBTlhtWHQyc0hXbVNMUGhvaG1WTEZ0RklFd1lqc181TUN5QWhBRndSU1ZwTGonLFxyXG4gICAgICAgIGltYWdlcnlTZXQ6ICdBZXJpYWxXaXRoTGFiZWxzJ1xyXG4gICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBtYXBCb3g6IGZ1bmN0aW9uIG1hcEJveCgpIHtcclxuICAgICAgcmV0dXJuIG5ldyBvbC5zb3VyY2UuWFlaKHtcclxuICAgICAgICBhdHRyaWJ1dGlvbnM6IFtuZXcgb2wuQXR0cmlidXRpb24oe1xyXG4gICAgICAgICAgaHRtbDogJzxhIGhyZWY9XCJodHRwczovL3d3dy5tYXBib3guY29tL2Fib3V0L21hcHMvXCIgdGFyZ2V0PVwiX2JsYW5rXCI+JmNvcHk7IE1hcGJveCAmY29weTsgT3BlblN0cmVldE1hcDwvYT4nXHJcbiAgICAgICAgfSldLFxyXG4gICAgICAgIHVybDogJ2h0dHBzOi8vYXBpLm1hcGJveC5jb20vdjQvbWFwYm94LnN0cmVldHMve3p9L3t4fS97eX0ucG5nP2FjY2Vzc190b2tlbj1way5leUoxSWpvaVptbHlkbUZwYmlJc0ltRWlPaUpsT1dZeVlUTTBOVGhpTldNMFlqSmpPREpqTkRFNE9EUXpOekEyTUdReU5pSjkuLU5WRE8yN0h6dC13X25Rb3NVUGZMQSdcclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgZXN0YXRlczogZnVuY3Rpb24gZXN0YXRlcygpIHtcclxuICAgICAgcmV0dXJuIG5ldyBvbC5zb3VyY2UuVmVjdG9yKHtcclxuICAgICAgICBmb3JtYXQ6IGdlb0pTT05Gb3JtYXQsXHJcbiAgICAgICAgbG9hZGVyOiBmdW5jdGlvbiBwcm9wZXJ0eUxvYWRlcigpIHtcclxuICAgICAgICAgIHZhciB1cmwgPSAnaHR0cDovLzEyNy4wLjAuMTozMDAwL2FwaS9wcm9wZXJ0eS9hbGwvJyArIGlkO1xyXG4gICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKFxyXG4gICAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICAgIHR5cGU6ICdHRVQnLFxyXG4gICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIClcclxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIHJlc29sdmUoZGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgZmVhdHVyZXMgPSBnZW9KU09ORm9ybWF0LnJlYWRGZWF0dXJlcyhkYXRhLCB7XHJcbiAgICAgICAgICAgICAgZmVhdHVyZVByb2plY3Rpb246ICdFUFNHOjM4NTcnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBzZWxmLmFkZEZlYXR1cmVzKGZlYXR1cmVzKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAudGhlbihmdW5jdGlvbiByZXNvbHZlKCkge1xyXG4gICAgICAgICAgICBzZWxmLmdldEZlYXR1cmVzKCkuZm9yRWFjaChmdW5jdGlvbiBhZGRJZHMoZmVhdHVyZSkge1xyXG4gICAgICAgICAgICAgIGZlYXR1cmUuc2V0SWQoZmVhdHVyZS5nZXRQcm9wZXJ0aWVzKCkuZ2lkKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIGVycm9yKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgICAgIGlmIChlLnN0YXR1cyA9PT0gNDA0KSB7XHJcbiAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKCdTb3JyeSwgd2UgY2Fubm90IGZpbmQgYW55IHByb3BlcnRpZXMhJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5zdGF0dXMgPT09IDUwMykge1xyXG4gICAgICAgICAgICAgIHRvYXN0ci5lcnJvcignU2VydmljZSBVbmF2YWlsYWJsZSEnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoJ0ludGVybmFsIFNlcnZlciBFcnJvciEgUGxlYXNlIHJlbG9hZCBwYWdlIG9yIHRyeSBhZ2FpbiBsYXRlcicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHZhciBtYXBMYXllcnMgPSB7XHJcbiAgICBiaW5nOiBmdW5jdGlvbiBiaW5nKHRyYW5zKSB7XHJcbiAgICAgIHJldHVybiBuZXcgb2wubGF5ZXIuVGlsZSh7XHJcbiAgICAgICAgdmlzaWJsZTogdHJ1ZSxcclxuICAgICAgICBzb3VyY2U6IG1hcFNvdXJjZXMuYmluZygpLFxyXG4gICAgICAgIG1heFpvb206IDE5LFxyXG4gICAgICAgIGNyb3NzT3JpZ2luOiAnYW5vbnltb3VzJyxcclxuICAgICAgICBwcmVsb2FkOiBJbmZpbml0eSxcclxuICAgICAgICBpZDogJ2JpbmcnLFxyXG4gICAgICAgIG5hbWU6IHRyYW5zLmxheWVycy5iaW5nXHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIG1hcEJveDogZnVuY3Rpb24gbWFwQm94KHRyYW5zKSB7XHJcbiAgICAgIHJldHVybiBuZXcgb2wubGF5ZXIuVGlsZSh7XHJcbiAgICAgICAgc291cmNlOiBtYXBTb3VyY2VzLm1hcEJveCgpLFxyXG4gICAgICAgIGlkOiAnbWFwYm94JyxcclxuICAgICAgICBuYW1lOiB0cmFucy5sYXllcnMubWFwQm94XHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIGVzdGF0ZXM6IGZ1bmN0aW9uIGVzdGF0ZXMoKSB7XHJcbiAgICAgIHJldHVybiBuZXcgb2wubGF5ZXIuVmVjdG9yKHtcclxuICAgICAgICBzb3VyY2U6IG1hcFNvdXJjZXMuZXN0YXRlcygpLFxyXG4gICAgICAgIGlkOiAnZXN0YXRlcycsXHJcbiAgICAgICAgdmlzaWJsZTogdHJ1ZSxcclxuICAgICAgICBzdHlsZTogbWFwU3R5bGVzLmVzdGF0ZXNcclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgbmV3RXN0YXRlczogZnVuY3Rpb24gbmV3RXN0YXRlcyh0cmFucykge1xyXG4gICAgICByZXR1cm4gbmV3IG9sLmxheWVyLlZlY3Rvcih7XHJcbiAgICAgICAgc291cmNlOiBuZXcgb2wuc291cmNlLlZlY3RvcigpLFxyXG4gICAgICAgIGlkOiAnbmV3RXN0YXRlcycsXHJcbiAgICAgICAgdmlzaWJsZTogZmFsc2UsXHJcbiAgICAgICAgc3R5bGU6IG5ldyBvbC5zdHlsZS5TdHlsZSh7XHJcbiAgICAgICAgICBpbWFnZTogbmV3IG9sLnN0eWxlLkljb24oKHtcclxuICAgICAgICAgICAgc3JjOiAnLi9pbWFnZXMvcGlucy9nZW5lcmljLTQ4LnBuZycsXHJcbiAgICAgICAgICAgIGFuY2hvck9yaWdpbjogJ2JvdHRvbS1sZWZ0JyxcclxuICAgICAgICAgICAgYW5jaG9yOiBbMC41LCAwXSxcclxuICAgICAgICAgICAgc2NhbGU6IDEsXHJcbiAgICAgICAgICAgIGNvbG9yOiAncmdiKDk2LCAxMjUsIDEzOSknXHJcbiAgICAgICAgICB9KSlcclxuICAgICAgICB9KVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9O1xyXG4gIHZhciBpbml0aWFsaXplID0gZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcclxuICAgIHZhciB0cmFucyA9IEFwcC5jb25maWcuY29tbW9ucy50cmFucztcclxuICAgIHZhciBsYXllcnMgPSBPYmplY3Qua2V5cyhtYXBMYXllcnMpLm1hcChmdW5jdGlvbiBhZGRNYXBMYXllcnMoa2V5KSB7XHJcbiAgICAgIGlmIChrZXkgIT09ICdiaW5nJykgeyByZXR1cm4gbWFwTGF5ZXJzW2tleV0odHJhbnMpOyB9XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gbmV3IG9sLk1hcCh7XHJcbiAgICAgIHRhcmdldDogJ2FwcHdyYXBwZXJfX21hcCcsXHJcbiAgICAgIGxheWVyczogXy5jb21wYWN0KGxheWVycyksXHJcbiAgICAgIGxvYWRUaWxlc1doaWxlQW5pbWF0aW5nOiB0cnVlLFxyXG4gICAgICBsb2FkVGlsZXNXaGlsZUludGVyYWN0aW5nOiB0cnVlLFxyXG4gICAgICByZW5kZXJlcjogJ2NhbnZhcycsXHJcbiAgICAgIGNvbnRyb2xzOiBvbC5jb250cm9sLmRlZmF1bHRzKHtcclxuICAgICAgICBhdHRyaWJ1dGlvbk9wdGlvbnM6IHtcclxuICAgICAgICAgIGNvbGxhcHNpYmxlOiBmYWxzZSxcclxuICAgICAgICAgIGNvbGxhcHNlZDogZmFsc2VcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICAgICAuZXh0ZW5kKFtcclxuICAgICAgICAgbmV3IG9sLmNvbnRyb2wuU2NhbGVMaW5lKHtcclxuICAgICAgICAgICB1bml0czogJ21ldHJpYydcclxuICAgICAgICAgfSksIG5ldyBvbC5jb250cm9sLk92ZXJ2aWV3TWFwKHtcclxuICAgICAgICAgICBjbGFzc05hbWU6ICdvbC1vdmVydmlld21hcCBvbC1jdXN0b20tb3ZlcnZpZXdtYXAnLFxyXG4gICAgICAgICAgIGNvbGxhcHNpYmxlOiB0cnVlLFxyXG4gICAgICAgICAgIGNvbGxhcHNlZDogdHJ1ZSxcclxuICAgICAgICAgICBsYXllcnM6IFttYXBMYXllcnMuYmluZyh0cmFucyldXHJcbiAgICAgICAgIH0pLFxyXG4gICAgICAgICBuZXcgb2wuY29udHJvbC5ab29tVG9FeHRlbnQoe1xyXG4gICAgICAgICAgIGV4dGVudDogZXh0ZW50XHJcbiAgICAgICAgIH0pXHJcbiAgICAgICBdKSxcclxuICAgICAgdmlldzogbmV3IG9sLlZpZXcoe1xyXG4gICAgICAgIGNlbnRlcjogY2VudGVyLFxyXG4gICAgICAgIGV4dGVudDogZXh0ZW50LFxyXG4gICAgICAgIHByb2plY3Rpb246ICdFUFNHOjM4NTcnLFxyXG4gICAgICAgIHpvb206IDE0LFxyXG4gICAgICAgIG1heFpvb206IDE5LFxyXG4gICAgICAgIG1pblpvb206IDE0XHJcbiAgICAgIH0pXHJcbiAgICB9KTtcclxuICB9O1xyXG4gIHJldHVybiB7XHJcbiAgICBpbml0aWFsaXplOiBpbml0aWFsaXplXHJcbiAgfTtcclxufSh3aW5kb3csIGRvY3VtZW50LCBQcm9taXNlLCBvbCwgQXBwKSk7XHJcbiIsIkFwcC5jb25maWcubW9kdWxlcy5pbmZvID0gKGZ1bmN0aW9uIGluZm8od2luZG93LCBkb2N1bWVudCwgUHJvbWlzZSwgJCwgQXBwKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG4gIHZhciBsYW5nID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lmxhbmc7XHJcbiAgdmFyIGVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZWRpdCcpO1xyXG4gIHZhciBkZWxldGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGVsZXRlJyk7XHJcbiAgdmFyIGluZm9Cb3hDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FwcHdyYXBwZXJfX2luZm9ib3gtY29udGVudCcpO1xyXG4gIHZhciBkdXN0Qmx1ZWJpcmQgPSBBcHAuY29uZmlnLnByb21pc2VzLmR1c3RCbHVlYmlyZDtcclxuICB2YXIgdXRpbHMgPSBBcHAudXRpbHM7XHJcbiAgZnVuY3Rpb24gZHVzdEVzdGF0ZUluZm8oZGF0YSkge1xyXG4gICAgZHVzdEJsdWViaXJkLnJlbmRlckFzeW5jKCdlZGl0JywgZGF0YSlcclxuICAgIC50aGVuKGZ1bmN0aW9uIHJlc29sdmVEdXN0KHJlc3VsdCkge1xyXG4gICAgICB1dGlscy5yZW1vdmVDbGFzcyhpbmZvQm94Q29udGVudCwgJ3Zpc3VhbGx5aGlkZGVuJyk7XHJcbiAgICAgIGluZm9Cb3hDb250ZW50LmlubmVySFRNTCA9IHJlc3VsdDtcclxuICAgICAgZ2V0bWRsU2VsZWN0LmluaXQoJy5nZXRtZGwtc2VsZWN0Jyk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGZ1bmN0aW9uIGVycm9yKGUpIHtcclxuICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgZnVuY3Rpb24gc2VsZWN0RmVhdHVyZShldnQpIHtcclxuICAgIHZhciBtYXAgPSBldnQubWFwO1xyXG4gICAgdmFyIGNvb3JkaW5hdGVzO1xyXG4gICAgdmFyIGVzdGF0ZTtcclxuICAgIHZhciBnaWQ7XHJcbiAgICB2YXIgcmVuZGVyRGF0YSA9IF8uY2xvbmVEZWVwKEFwcC5jb25maWcuY29tbW9ucy50cmFucyk7XHJcbiAgICB2YXIgc3R5bGUgPSBuZXcgb2wuc3R5bGUuU3R5bGUoe1xyXG4gICAgICBpbWFnZTogbmV3IG9sLnN0eWxlLkljb24oKHtcclxuICAgICAgICBzcmM6ICcuL2ltYWdlcy9waW5zL2dlbmVyaWMtNDgucG5nJyxcclxuICAgICAgICBhbmNob3JPcmlnaW46ICdib3R0b20tbGVmdCcsXHJcbiAgICAgICAgYW5jaG9yOiBbMC41LCAwXSxcclxuICAgICAgICBzY2FsZTogMSxcclxuICAgICAgICBjb2xvcjogJ3JnYigyNTUsODIsODIpJ1xyXG4gICAgICB9KSlcclxuICAgIH0pO1xyXG4gICAgLy8gdmFyIGNvb3JkaW5hdGUgPSBldnQuY29vcmRpbmF0ZTtcclxuICAgIHZhciBjbGlja2VkRmVhdHVyZSA9IG1hcC5mb3JFYWNoRmVhdHVyZUF0UGl4ZWwoZXZ0LnBpeGVsLCBmdW5jdGlvbiBmaW5kRmVhdHVyZShmZWF0dXJlLCBsYXllcikge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGZlYXR1cmU6IGZlYXR1cmUsXHJcbiAgICAgICAgbGF5ZXI6IGxheWVyXHJcbiAgICAgIH07XHJcbiAgICB9LCB0aGlzLCBmdW5jdGlvbiBjbGlja2VkRmVhdHVyZUxheWVyRmlsdGVyKGxheWVyKSB7XHJcbiAgICAgIGlmIChsYXllci5nZXQoJ2lkJykgPT09ICdlc3RhdGVzJykge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0sIHRoaXMpO1xyXG4gICAgaWYgKGNsaWNrZWRGZWF0dXJlKSB7XHJcbiAgICAgIHV0aWxzLmZpbmRCeUlkKG1hcCwgJ2VzdGF0ZXMnKS5nZXRTb3VyY2UoKS5nZXRGZWF0dXJlcygpXHJcbiAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uIHJlc2V0U3R5bGUoZmVhdHVyZSkge1xyXG4gICAgICAgIGZlYXR1cmUuc2V0U3R5bGUobnVsbCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBlc3RhdGUgPSBjbGlja2VkRmVhdHVyZS5mZWF0dXJlO1xyXG4gICAgICBjb29yZGluYXRlcyA9IGVzdGF0ZS5nZXRHZW9tZXRyeSgpLmdldENvb3JkaW5hdGVzKCk7XHJcbiAgICAgIG1hcC5nZXRWaWV3KCkuc2V0Q2VudGVyKGNvb3JkaW5hdGVzKTtcclxuICAgICAgbWFwLmdldFZpZXcoKS5zZXRab29tKDE2KTtcclxuICAgICAgZ2lkID0gZXN0YXRlLmdldFByb3BlcnRpZXMoKS5naWQ7XHJcbiAgICAgIGVzdGF0ZS5zZXRTdHlsZShzdHlsZSk7XHJcbiAgICAgIHZhciBwMSA9IFByb21pc2UucmVzb2x2ZShcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgdXJsOiAnaHR0cDovLzEyNy4wLjAuMTozMDAwL2FwaS9wcm9wZXJ0eScsXHJcbiAgICAgICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgZ2lkOiBnaWRcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgIHAxLnRoZW4oZnVuY3Rpb24gcmVzb2x2ZShkYXRhKSB7XHJcbiAgICAgICAgdmFyIGZlYXR1cmUgPSBkYXRhLmZlYXR1cmVzWzBdO1xyXG4gICAgICAgIEFwcC5jb25maWcuY2FjaGUuYWN0aXZlRXN0YXRlID0gZmVhdHVyZS5wcm9wZXJ0aWVzO1xyXG4gICAgICAgIHJldHVybiBmZWF0dXJlO1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbihmdW5jdGlvbiByZXNvbHZlKGZlYXR1cmUpIHtcclxuICAgICAgICBpZiAobGFuZyA9PT0gJ2VsJykge1xyXG4gICAgICAgICAgcmVuZGVyRGF0YS52YWx1ZXMgPSB7XHJcbiAgICAgICAgICAgIGdpZDogZmVhdHVyZS5wcm9wZXJ0aWVzLmdpZCxcclxuICAgICAgICAgICAgeDogY29vcmRpbmF0ZXNbMF0sXHJcbiAgICAgICAgICAgIHk6IGNvb3JkaW5hdGVzWzFdLFxyXG4gICAgICAgICAgICBhcmVhTmFtZTogZmVhdHVyZS5wcm9wZXJ0aWVzLmFyZWFfbmFtZSxcclxuICAgICAgICAgICAgZXN0YXRlVHlwZTogZmVhdHVyZS5wcm9wZXJ0aWVzLmVzdGF0ZXR5cGUsXHJcbiAgICAgICAgICAgIGFkZHJlc3M6IGZlYXR1cmUucHJvcGVydGllcy5zdHJlZXRfZWwsXHJcbiAgICAgICAgICAgIGFkZHJlc3NOdW1iZXI6IGZlYXR1cmUucHJvcGVydGllcy5zdHJlZXRfbnVtYmVyLFxyXG4gICAgICAgICAgICBwc2NvZGU6IGZlYXR1cmUucHJvcGVydGllcy5wc19jb2RlLFxyXG4gICAgICAgICAgICBlc3RhdGVBcmVhOiBmZWF0dXJlLnByb3BlcnRpZXMuZXN0YXRlYXJlYSxcclxuICAgICAgICAgICAgYmVkcm9vbXM6IGZlYXR1cmUucHJvcGVydGllcy5iZWRyb29tcyxcclxuICAgICAgICAgICAgZmxvb3I6IGZlYXR1cmUucHJvcGVydGllcy5mbG9vcixcclxuICAgICAgICAgICAgeWVhcjogZmVhdHVyZS5wcm9wZXJ0aWVzLnllYXIsXHJcbiAgICAgICAgICAgIHBsYW5OdW1iZXI6IGZlYXR1cmUucHJvcGVydGllcy5wbGFuX251bSxcclxuICAgICAgICAgICAgcGxvdEFyZWE6IGZlYXR1cmUucHJvcGVydGllcy5wbG90YXJlYSxcclxuICAgICAgICAgICAgcGFyY2VsTnVtYmVyOiBmZWF0dXJlLnByb3BlcnRpZXMucGFyY2VsX251bSxcclxuICAgICAgICAgICAgcGFya2luZzogZmVhdHVyZS5wcm9wZXJ0aWVzLnBhcmtpbmcsXHJcbiAgICAgICAgICAgIGZ1cm5pc2hlZDogZmVhdHVyZS5wcm9wZXJ0aWVzLmZ1cm5pc2hlZCxcclxuICAgICAgICAgICAgaXNuZXc6IGZlYXR1cmUucHJvcGVydGllcy5pc25ldyxcclxuICAgICAgICAgICAgaGVhdGluZzogZmVhdHVyZS5wcm9wZXJ0aWVzLmhlYXRpbmcsXHJcbiAgICAgICAgICAgIGNvb2xpbmc6IGZlYXR1cmUucHJvcGVydGllcy5jb29saW5nLFxyXG4gICAgICAgICAgICB2aWV3OiBmZWF0dXJlLnByb3BlcnRpZXMudmlldyxcclxuICAgICAgICAgICAgdGl0bGU6IGZlYXR1cmUucHJvcGVydGllcy50aXRsZVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmVuZGVyRGF0YS52YWx1ZXMgPSB7XHJcbiAgICAgICAgICAgIGdpZDogZmVhdHVyZS5wcm9wZXJ0aWVzLmdpZCxcclxuICAgICAgICAgICAgeDogZmVhdHVyZS5nZW9tZXRyeS5jb29yZGluYXRlc1swXSxcclxuICAgICAgICAgICAgeTogZmVhdHVyZS5nZW9tZXRyeS5jb29yZGluYXRlc1sxXSxcclxuICAgICAgICAgICAgYXJlYU5hbWU6IGZlYXR1cmUucHJvcGVydGllcy5hcmVhX25hbWUsXHJcbiAgICAgICAgICAgIGVzdGF0ZVR5cGU6IGZlYXR1cmUucHJvcGVydGllcy5lc3RhdGV0eXBlX2VuLFxyXG4gICAgICAgICAgICBhZGRyZXNzOiBmZWF0dXJlLnByb3BlcnRpZXMuc3RyZWV0X2VuLFxyXG4gICAgICAgICAgICBhZGRyZXNzTnVtYmVyOiBmZWF0dXJlLnByb3BlcnRpZXMuc3RyZWV0X251bWJlcixcclxuICAgICAgICAgICAgcHNjb2RlOiBmZWF0dXJlLnByb3BlcnRpZXMucHNfY29kZSxcclxuICAgICAgICAgICAgZXN0YXRlQXJlYTogZmVhdHVyZS5wcm9wZXJ0aWVzLmVzdGF0ZWFyZWEsXHJcbiAgICAgICAgICAgIGJlZHJvb21zOiBmZWF0dXJlLnByb3BlcnRpZXMuYmVkcm9vbXMsXHJcbiAgICAgICAgICAgIGZsb29yOiBmZWF0dXJlLnByb3BlcnRpZXMuZmxvb3IsXHJcbiAgICAgICAgICAgIHllYXI6IGZlYXR1cmUucHJvcGVydGllcy55ZWFyLFxyXG4gICAgICAgICAgICBwbGFuTnVtYmVyOiBmZWF0dXJlLnByb3BlcnRpZXMucGxhbl9udW0sXHJcbiAgICAgICAgICAgIHBsb3RBcmVhOiBmZWF0dXJlLnByb3BlcnRpZXMucGxvdGFyZWEsXHJcbiAgICAgICAgICAgIHBhcmNlbE51bWJlcjogZmVhdHVyZS5wcm9wZXJ0aWVzLnBhcmNlbF9udW0sXHJcbiAgICAgICAgICAgIHBhcmtpbmc6IGZlYXR1cmUucHJvcGVydGllcy5wYXJraW5nLFxyXG4gICAgICAgICAgICBmdXJuaXNoZWQ6IGZlYXR1cmUucHJvcGVydGllcy5mdXJuaXNoZWQsXHJcbiAgICAgICAgICAgIGlzbmV3OiBmZWF0dXJlLnByb3BlcnRpZXMuaXNuZXcsXHJcbiAgICAgICAgICAgIGhlYXRpbmc6IGZlYXR1cmUucHJvcGVydGllcy5oZWF0aW5nLFxyXG4gICAgICAgICAgICBjb29saW5nOiBmZWF0dXJlLnByb3BlcnRpZXMuY29vbGluZyxcclxuICAgICAgICAgICAgdmlldzogZmVhdHVyZS5wcm9wZXJ0aWVzLnZpZXcsXHJcbiAgICAgICAgICAgIHRpdGxlOiBmZWF0dXJlLnByb3BlcnRpZXMudGl0bGVcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgcDEuY2F0Y2goZnVuY3Rpb24gZXJyb3IoZSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICB9KTtcclxuICAgICAgdmFyIHAyID0gUHJvbWlzZS5yZXNvbHZlKFxyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICB1cmw6ICdodHRwOi8vMTI3LjAuMC4xOjMwMDAvYXBpL2xpc3RpbmcnLFxyXG4gICAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgIGdpZDogZ2lkXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICApXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uIHJlc29sdmUoZGF0YSkge1xyXG4gICAgICAgIEFwcC5jb25maWcuY2FjaGUuYWN0aXZlRXN0YXRlTGlzdGluZyA9IGRhdGE7XHJcbiAgICAgICAgcmVuZGVyRGF0YS5saXN0aW5nLnZhbHVlcyA9IGRhdGE7XHJcbiAgICAgICAgcmVuZGVyRGF0YS5saXN0aW5nLnZhbHVlcy5kYXRlX3N0YXJ0ID0gdXRpbHMuaGFuZGxlRGF0ZShkYXRhLmRhdGVfc3RhcnQsIGxhbmcpO1xyXG4gICAgICAgIHJlbmRlckRhdGEubGlzdGluZy52YWx1ZXMuZGF0ZV9lbmQgPSB1dGlscy5oYW5kbGVEYXRlKGRhdGEuZGF0ZV9lbmQsIGxhbmcpO1xyXG4gICAgICAgIHJlbmRlckRhdGEubGlzdGluZy5leGlzdHMgPSB0cnVlO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZnVuY3Rpb24gZXJyb3IoZSkge1xyXG4gICAgICAgIHZhciBzbmFja2JhckNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhcHB3cmFwcGVyX19zbmFja2JhcicpO1xyXG4gICAgICAgIHZhciBkYXRhID0geyBtZXNzYWdlOiBBcHAuY29uZmlnLmNvbW1vbnMudHJhbnMuZXJyb3JzLmxpc3Rpbmc0MDQgfTtcclxuICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICBpZiAoZS5zdGF0dXMgPT09IDQwNCkge1xyXG4gICAgICAgICAgcmVuZGVyRGF0YS5saXN0aW5nLmV4aXN0cyA9IGZhbHNlO1xyXG4gICAgICAgICAgc25hY2tiYXJDb250YWluZXIuTWF0ZXJpYWxTbmFja2Jhci5zaG93U25hY2tiYXIoZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgUHJvbWlzZS5lYWNoKFtwMSwgcDJdLCBmdW5jdGlvbiBlKHJlc3VsdCkge1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbihmdW5jdGlvbiByZXNvbHZlKCkge1xyXG4gICAgICAgIGR1c3RFc3RhdGVJbmZvKHJlbmRlckRhdGEpO1xyXG4gICAgICAgIGVkaXRCdXR0b24ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XHJcblxyXG4gICAgICAgIHV0aWxzLmFkZENsYXNzKGVkaXRCdXR0b24sICdtZGwtYnV0dG9uLS1hY2NlbnQnKTtcclxuICAgICAgICB1dGlscy5hZGRDbGFzcyhkZWxldGVCdXR0b24sICdtZGwtYnV0dG9uLS1hY2NlbnQnKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGZ1bmN0aW9uIGVycm9yKGUpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpbmZvQm94Q29udGVudC5pbm5lckhUTUwgPSAnJztcclxuICAgICAgdXRpbHMuYWRkQ2xhc3MoaW5mb0JveENvbnRlbnQsICd2aXN1YWxseWhpZGRlbicpO1xyXG4gICAgICBlZGl0QnV0dG9uLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTtcclxuXHJcbiAgICAgIGRlbGV0ZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcblxyXG4gICAgICB1dGlscy5maW5kQnlJZChtYXAsICdlc3RhdGVzJykuZ2V0U291cmNlKCkuZ2V0RmVhdHVyZXMoKVxyXG4gICAgICAuZm9yRWFjaChmdW5jdGlvbiByZXNldFN0eWxlKGZlYXR1cmUpIHtcclxuICAgICAgICBmZWF0dXJlLnNldFN0eWxlKG51bGwpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgICB2YXIgbWFwID0gQXBwLmNvbmZpZy5jb21tb25zLm1hcDtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKS5kYXRhc2V0LmFjdGl2ZSA9ICdpbmZvJztcclxuICAgIG1hcC5vbignY2xpY2snLCBzZWxlY3RGZWF0dXJlKTtcclxuICB9XHJcbiAgZnVuY3Rpb24gZGlzYWJsZSgpIHtcclxuICAgIHZhciBtYXAgPSBBcHAuY29uZmlnLmNvbW1vbnMubWFwO1xyXG4gICAgbWFwLnVuKCdjbGljaycsIHNlbGVjdEZlYXR1cmUpO1xyXG4gIH1cclxuICByZXR1cm4ge1xyXG4gICAgaW5pdDogaW5pdCxcclxuICAgIGRpc2FibGU6IGRpc2FibGVcclxuICB9O1xyXG59KHdpbmRvdywgZG9jdW1lbnQsIFByb21pc2UsIGpRdWVyeSwgQXBwKSk7XHJcbiIsIkFwcC5jb25maWcubW9kdWxlcy5lZGl0ID0gKGZ1bmN0aW9uIGVkaXQod2luZG93LCBkb2N1bWVudCwgUHJvbWlzZSwgJCwgZFBpY2ssIG1vbWVudCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuICB2YXIgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhcHB3cmFwcGVyX19pbmZvYm94LWNvbnRlbnQnKTtcclxuICB2YXIgbGFuZyA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5sYW5nO1xyXG4gIHZhciBpbmZvID0gQXBwLmNvbmZpZy5tb2R1bGVzLmluZm87XHJcbiAgdmFyIHV0aWxzID0gQXBwLnV0aWxzO1xyXG4gIHZhciBlZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2VkaXQnKTtcclxuICB2YXIgZGVsZXRlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RlbGV0ZScpO1xyXG4gIHZhciBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xyXG4gIGZ1bmN0aW9uIGNsZWFyQ29udGVudCgpIHtcclxuICAgIGlmIChjb250ZW50LmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcclxuICAgICAgY29udGVudC5pbm5lckhUTUwgPSAnJztcclxuICAgIH1cclxuICB9XHJcbiAgZnVuY3Rpb24gZ2V0SW50ZXJhY3Rpb24oaWQpIHtcclxuICAgIHZhciBtYXAgPSBBcHAuY29uZmlnLmNvbW1vbnMubWFwO1xyXG4gICAgdmFyIGludGVyYWN0aW9ucyA9IG1hcC5nZXRJbnRlcmFjdGlvbnMoKTtcclxuICAgIHZhciBmb3VuZCA9IHt9O1xyXG4gICAgaW50ZXJhY3Rpb25zLmZvckVhY2goZnVuY3Rpb24gZ2V0SW50ZXJhY3Rpb25JZChpbnRlcmFjdGlvbikge1xyXG4gICAgICBpZiAoaW50ZXJhY3Rpb24uZ2V0KCdpZCcpID09PSBpZCkge1xyXG4gICAgICAgIGZvdW5kID0gaW50ZXJhY3Rpb247XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZm91bmQ7XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIGFzc2lnblZhbGlkYXRvcnMoKSB7XHJcbiAgICB2YXIgaW5wdXRzID0gY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPXRleHRdJyk7XHJcbiAgICBbXS5mb3JFYWNoLmNhbGwoaW5wdXRzLCBmdW5jdGlvbiBtYWtlUGFyc2xleUlucHV0cyhlbCkge1xyXG4gICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgZnVuY3Rpb24gc2FuaXRpemUoKSB7XHJcbiAgICAgICAgdmFyIHN0ciA9IHRoaXMudmFsdWU7XHJcbiAgICAgICAgdmFyIHNhbml0aXplZFN0cjtcclxuICAgICAgICBpZiAodGhpcy5kYXRhc2V0LnR5cGUgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICBzYW5pdGl6ZWRTdHIgPSBzdHIucmVwbGFjZSgvWy9cXEQvIF0vZ2ksICcnKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZGF0YXNldC50eXBlID09PSAnYWxwaGFudW0nKSB7XHJcbiAgICAgICAgICBzYW5pdGl6ZWRTdHIgPSBzdHIucmVwbGFjZSgvW15hLXowLTlBLVpBLXrOkS3Oqc6xLc+Jzq/Pis6Qz4zOrM6tz43Pi86wzq7PjiBdL2dpLCAnJyk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmRhdGFzZXQudHlwZSA9PT0gJ3NwZWNpYWwnKSB7XHJcbiAgICAgICAgICBzYW5pdGl6ZWRTdHIgPSBzdHIucmVwbGFjZSgvW14wLTkgXFwvXS9naSwgJycpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5kYXRhc2V0LnR5cGUgPT09ICdkYXRlJykge1xyXG4gICAgICAgICAgc2FuaXRpemVkU3RyID0gc3RyLnJlcGxhY2UoL1teMC05IFxcLV0vZ2ksICcnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IHNhbml0aXplZFN0cjtcclxuICAgICAgICB1dGlscy5yZW1vdmVDbGFzcyh0aGlzLnBhcmVudE5vZGUsICdpcy1pbnZhbGlkJyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZXRFc3RhdGVUeXBlKHR5cGUpIHtcclxuICAgIHZhciB0eXBlcztcclxuICAgIGlmIChsYW5nID09PSAnZWwnKSB7XHJcbiAgICAgIHR5cGVzID0ge1xyXG4gICAgICAgIM6UzrnOsc68zq3Pgc65z4POvM6xOiBmdW5jdGlvbiBnZXRBcGFydG1lbnQoKSB7XHJcbiAgICAgICAgICByZXR1cm4gJ0FwYXJ0bWVudCc7XHJcbiAgICAgICAgfSxcclxuICAgICAgICDOnM6/zr3Ov866zrHPhM6/zrnOus6vzrE6IGZ1bmN0aW9uIGdldERldGFjaGVkSG91c2UoKSB7XHJcbiAgICAgICAgICByZXR1cm4gJ0RldGFjaGVkIEhvdXNlJztcclxuICAgICAgICB9LFxyXG4gICAgICAgIM6czrXOts6/zr3Orc+EzrE6IGZ1bmN0aW9uIGdldE1haXNvbmV0dGUoKSB7XHJcbiAgICAgICAgICByZXR1cm4gJ01haXNvbmV0dGUnO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgzojPgM6xz4XOu863OiBmdW5jdGlvbiBnZXRWaWxsYSgpIHtcclxuICAgICAgICAgIHJldHVybiAnVmlsbGEnO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHR5cGVzID0ge1xyXG4gICAgICAgIEFwYXJ0bWVudDogZnVuY3Rpb24gZ2V0QXBhcnRtZW50KCkge1xyXG4gICAgICAgICAgcmV0dXJuICfOlM65zrHOvM6tz4HOuc+DzrzOsSc7XHJcbiAgICAgICAgfSxcclxuICAgICAgICAnRGV0YWNoZWQgSG91c2UnOiBmdW5jdGlvbiBnZXREZXRhY2hlZEhvdXNlKCkge1xyXG4gICAgICAgICAgcmV0dXJuICfOnM6/zr3Ov866zrHPhM6/zrnOus6vzrEnO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgTWFpc29uZXR0ZTogZnVuY3Rpb24gZ2V0TWFpc29uZXR0ZSgpIHtcclxuICAgICAgICAgIHJldHVybiAnzpzOtc62zr/Ovc6tz4TOsSc7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBWaWxsYTogZnVuY3Rpb24gZ2V0VmlsbGEoKSB7XHJcbiAgICAgICAgICByZXR1cm4gJ86Iz4DOsc+FzrvOtyc7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHR5cGVzW3R5cGVdKCk7XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIGNvbGxlY3RWYWx1ZXMoKSB7XHJcbiAgICB2YXIgdmFsdWVzID0ge307XHJcbiAgICB2YXIgZmlsdGVyZWRWYWx1ZXMgPSB7fTtcclxuICAgIHZhciBpbnB1dHMgPSBjb250ZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9dGV4dF0nKTtcclxuICAgIHZhciBjaGVja2JveGVzID0gY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPWNoZWNrYm94XScpO1xyXG4gICAgdmFsdWVzLmVzdGF0ZSA9IHt9O1xyXG4gICAgdmFsdWVzLmxpc3RpbmcgPSB7fTtcclxuXHJcbiAgICBbXS5mb3JFYWNoLmNhbGwoaW5wdXRzLCBmdW5jdGlvbiBjb2xsZWN0RnJvbUlucHV0cyhlbCkge1xyXG4gICAgICB2YXIgbmFtZSA9IF8ubGFzdChfLnNwbGl0KGVsLmdldEF0dHJpYnV0ZSgnaWQnKSwgJy0nLCAzKSk7XHJcbiAgICAgIHZhciB2YWx1ZSA9IGVsLnZhbHVlO1xyXG4gICAgICB2YXIgbmV3WCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNlc3RhdGUnKS5kYXRhc2V0Lm5ld3g7XHJcbiAgICAgIHZhciBuZXdZID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2VzdGF0ZScpLmRhdGFzZXQubmV3eTtcclxuICAgICAgdmFyIG9yaWdpbmFsWCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNlc3RhdGUnKS5kYXRhc2V0Lm9yaWdpbmFseDtcclxuICAgICAgdmFyIG9yaWdpbmFsWSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNlc3RhdGUnKS5kYXRhc2V0Lm9yaWdpbmFseTtcclxuXHJcbiAgICAgIGlmIChlbC5nZXRBdHRyaWJ1dGUoJ2lkJykuaW5kZXhPZignZXN0YXRlJykgPiAtMSkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgbmV3WCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgIHZhbHVlcy5lc3RhdGUueCA9IG5ld1g7XHJcbiAgICAgICAgICB2YWx1ZXMuZXN0YXRlLnkgPSBuZXdZO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB2YWx1ZXMuZXN0YXRlLnggPSBvcmlnaW5hbFg7XHJcbiAgICAgICAgICB2YWx1ZXMuZXN0YXRlLnkgPSBvcmlnaW5hbFk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsYW5nID09PSAnZWwnKSB7XHJcbiAgICAgICAgICBpZiAobmFtZSA9PT0gJ3R5cGUnKSB7XHJcbiAgICAgICAgICAgIHZhbHVlcy5lc3RhdGUuZXN0YXRldHlwZUVuID0gc2V0RXN0YXRlVHlwZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIHZhbHVlcy5lc3RhdGUuZXN0YXRldHlwZSA9IHZhbHVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKG5hbWUgPT09ICdhZGRyZXNzJykge1xyXG4gICAgICAgICAgICB2YWx1ZXMuZXN0YXRlLnN0cmVldEVuID0gdXRpbHMuZWxUb0VuKHZhbHVlKTtcclxuICAgICAgICAgICAgdmFsdWVzLmVzdGF0ZS5zdHJlZXRFbCA9IHZhbHVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpZiAobmFtZSA9PT0gJ3R5cGUnKSB7XHJcbiAgICAgICAgICAgIHZhbHVlcy5lc3RhdGUuZXN0YXRldHlwZUVuID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHZhbHVlcy5lc3RhdGUuZXN0YXRldHlwZSA9IHNldEVzdGF0ZVR5cGUodmFsdWUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKG5hbWUgPT09ICdhZGRyZXNzJykge1xyXG4gICAgICAgICAgICB2YWx1ZXMuZXN0YXRlLnN0cmVldEVuID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHZhbHVlcy5lc3RhdGUuc3RyZWV0RWwgPSB1dGlscy5lbFRvRW4odmFsdWUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobmFtZSA9PT0gJ2FkZHJlc3NOdW1iZXInKSB7XHJcbiAgICAgICAgICB2YWx1ZXMuZXN0YXRlLnN0cmVldE51bWJlciA9IHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YWx1ZXMuZXN0YXRlW25hbWVdID0gdmFsdWU7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKG5hbWUgPT09ICd0eXBlJykge1xyXG4gICAgICAgICAgaWYgKHZhbHVlID09PSAnU2FsZScgfHwgdmFsdWUgPT09ICfOoM+OzrvOt8+DzrcnKSB7XHJcbiAgICAgICAgICAgIHZhbHVlcy5saXN0aW5nLnNhbGUgPSB0cnVlO1xyXG4gICAgICAgICAgICB2YWx1ZXMubGlzdGluZy5yZW50ID0gZmFsc2U7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YWx1ZXMubGlzdGluZy5zYWxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHZhbHVlcy5saXN0aW5nLnJlbnQgPSB0cnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB2YWx1ZXMubGlzdGluZ1tuYW1lXSA9IHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBbXS5mb3JFYWNoLmNhbGwoY2hlY2tib3hlcywgZnVuY3Rpb24gY29sbGVjdEZyb21DaGVja2JveGVzKGVsKSB7XHJcbiAgICAgIHZhciBuYW1lID0gXy5sYXN0KF8uc3BsaXQoZWwuZ2V0QXR0cmlidXRlKCdpZCcpLCAnLScsIDMpKTtcclxuICAgICAgdmFyIHZhbHVlID0gZWwuY2hlY2tlZDtcclxuICAgICAgaWYgKG5hbWUgIT09ICdwZXRzJykge1xyXG4gICAgICAgIHZhbHVlcy5lc3RhdGVbbmFtZV0gPSB2YWx1ZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB2YWx1ZXMubGlzdGluZ1tuYW1lXSA9IHZhbHVlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIGZpbHRlcmVkVmFsdWVzLmVzdGF0ZSA9IF8ub21pdCh2YWx1ZXMuZXN0YXRlLCBbJ2FkZHJlc3MnLCAnYWRkcmVzc051bWJlcicsICd0eXBlJywgJ3RvZ2dsZSddKTtcclxuICAgIGZpbHRlcmVkVmFsdWVzLmxpc3RpbmcgPSB2YWx1ZXMubGlzdGluZztcclxuICAgIHJldHVybiBmaWx0ZXJlZFZhbHVlcztcclxuICB9XHJcbiAgZnVuY3Rpb24gdXBkYXRlKGRhdGEpIHtcclxuICAgIHZhciBzbmFja2JhckNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhcHB3cmFwcGVyX19zbmFja2JhcicpO1xyXG4gICAgdmFyIG1zZ0RhdGEgPSB7fTtcclxuICAgIGZ1bmN0aW9uIGFkZEdpZFRvTGlzdGluZyhpbnB1dCwgZ2lkKSB7XHJcbiAgICAgIHZhciByZXR1cm5lZERhdGEgPSBpbnB1dDtcclxuICAgICAgcmV0dXJuZWREYXRhLmdpZCA9IGdpZDtcclxuICAgICAgcmV0dXJuIHJldHVybmVkRGF0YTtcclxuICAgIH1cclxuICAgIFByb21pc2UucmVzb2x2ZShcclxuICAgICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6ICdodHRwOi8vMTI3LjAuMC4xOjMwMDAvYXBpL3Byb3BlcnR5JyxcclxuICAgICAgICB0eXBlOiAnUFVUJyxcclxuICAgICAgICBkYXRhOiBkYXRhLmVzdGF0ZVxyXG4gICAgICB9KVxyXG4gICAgICApXHJcbiAgICAudGhlbihmdW5jdGlvbiByZXNvbHZlKGVzdGF0ZVJlc3VsdCkge1xyXG4gICAgICBtc2dEYXRhLmVzdGF0ZUlkID0gZXN0YXRlUmVzdWx0LnByb3BlcnR5R2lkO1xyXG4gICAgICBpZiAoIV8uaXNFbXB0eShkYXRhLmxpc3RpbmcpKSB7XHJcbiAgICAgICAgcmV0dXJuICQuYWpheCh7XHJcbiAgICAgICAgICB1cmw6ICdodHRwOi8vMTI3LjAuMC4xOjMwMDAvYXBpL2xpc3RpbmcnLFxyXG4gICAgICAgICAgdHlwZTogJ1BVVCcsXHJcbiAgICAgICAgICBkYXRhOiBhZGRHaWRUb0xpc3RpbmcoZGF0YS5saXN0aW5nLCBlc3RhdGVSZXN1bHQucHJvcGVydHlHaWQpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9KVxyXG4gICAgLnRoZW4oZnVuY3Rpb24gcmVzb2x2ZShsaXN0aW5nUmVzdWx0KSB7XHJcbiAgICAgIHZhciBtc2c7XHJcbiAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3VsdClcclxuICAgICAgaWYgKGxpc3RpbmdSZXN1bHQgPT09IG51bGwpIHtcclxuICAgICAgICBtc2cgPSB7IG1lc3NhZ2U6ICdVcGRhdGVkIEVzdGF0ZTogJyArIG1zZ0RhdGEuZXN0YXRlSWQgfTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBtc2cgPSB7IG1lc3NhZ2U6ICdVcGRhdGVkIEVzdGF0ZUlEOiAnICsgbXNnRGF0YS5lc3RhdGVJZCArICcgYW5kIExpc3RpbmdJRDogJyArIGxpc3RpbmdSZXN1bHQubGlzdGluZ0lkIH07XHJcbiAgICAgIH1cclxuICAgICAgc25hY2tiYXJDb250YWluZXIuTWF0ZXJpYWxTbmFja2Jhci5zaG93U25hY2tiYXIobXNnKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goZnVuY3Rpb24gZXJyb3IoZSkge1xyXG4gICAgICB2YXIgbXNnID0geyBtZXNzYWdlOiBlIH07XHJcbiAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICBzbmFja2JhckNvbnRhaW5lci5NYXRlcmlhbFNuYWNrYmFyLnNob3dTbmFja2Jhcihtc2cpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KGZ1bmN0aW9uIGNsb3NlVXBkYXRlKCkge1xyXG4gICAgICB2YXIgbWFwID0gQXBwLmNvbmZpZy5jb21tb25zLm1hcDtcclxuICAgICAgY2xlYXJDb250ZW50KCk7XHJcbiAgICAgIHV0aWxzLmFkZENsYXNzKGNvbnRlbnQsICd2aXN1YWxseWhpZGRlbicpO1xyXG4gICAgICB1dGlscy5maW5kQnlJZChtYXAsICdlc3RhdGVzJykuZ2V0U291cmNlKCkuZ2V0RmVhdHVyZXMoKVxyXG4gICAgICAuZm9yRWFjaChmdW5jdGlvbiByZXNldFN0eWxlKGZlYXR1cmUpIHtcclxuICAgICAgICBmZWF0dXJlLnNldFN0eWxlKG51bGwpO1xyXG4gICAgICB9KTtcclxuICAgICAgZWRpdEJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICAgIGRlbGV0ZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICAgIGluZm8uaW5pdCgpO1xyXG4gICAgICBib2R5LmRhdGFzZXQuYWN0aXZlID0gJ2luZm8nO1xyXG4gICAgICBnZXRJbnRlcmFjdGlvbigndHJhbnNsYXRlJykuc2V0QWN0aXZlKGZhbHNlKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBmdW5jdGlvbiBkYXRlUGlja2VyKCkge1xyXG4gICAgdmFyIGZvcm1hdCA9IChsYW5nID09PSAnZWwnKSA/ICdERC1NTS1ZWVlZJyA6ICdNTS1ERC1ZWVlZJztcclxuICAgIHZhciBkYXRlU3RhcnRQaWNrZXI7XHJcbiAgICB2YXIgZGF0ZUVuZFBpY2tlcjtcclxuICAgIHZhciBkYXRlU3RhcnRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5mb2JveF9fZGF0ZS1zdGFydCcpO1xyXG4gICAgdmFyIGRhdGVFbmRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5mb2JveF9fZGF0ZS1lbmQnKTtcclxuICAgIHZhciBkYXRlU3RhcnRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaXN0aW5nX19nZW5lcmFsLWRhdGVTdGFydCcpO1xyXG4gICAgdmFyIGRhdGVFbmRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaXN0aW5nX19nZW5lcmFsLWRhdGVFbmQnKTtcclxuICAgIHZhciBkYXRlU3RhcnRQaWNrZXJJbml0O1xyXG4gICAgdmFyIGRhdGVFbmRQaWNrZXJJbml0O1xyXG4gICAgdmFyIG9ic2VydmVEYXRlUGlja2VyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24gb2JzZXJ2ZURhdGVQaWNrZXIobXV0YXRpb25zKSB7XHJcbiAgICAgIHZhciBhdHRyaWJ1dGVWYWx1ZTtcclxuICAgICAgbXV0YXRpb25zLmZvckVhY2goZnVuY3Rpb24gZm9lckVhY2hNdXRhdGlvbihtdXRhdGlvbikge1xyXG4gICAgICAgIGlmIChtdXRhdGlvbi5hdHRyaWJ1dGVOYW1lID09PSAnY2xhc3MnKSB7XHJcbiAgICAgICAgICBhdHRyaWJ1dGVWYWx1ZSA9ICQobXV0YXRpb24udGFyZ2V0KS5wcm9wKG11dGF0aW9uLmF0dHJpYnV0ZU5hbWUpO1xyXG4gICAgICAgICAgaWYgKGF0dHJpYnV0ZVZhbHVlLmluZGV4T2YoJ21kZHRwLXBpY2tlci0taW5hY3RpdmUnKSA+IC0xKSB7XHJcbiAgICAgICAgICAgIHV0aWxzLnJlbW92ZUNsYXNzKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcHB3cmFwcGVyX19pbmZvYm94JyksICd1bmNsaWNrYWJsZScpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdXRpbHMuYWRkQ2xhc3MoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FwcHdyYXBwZXJfX2luZm9ib3gnKSwgJ3VuY2xpY2thYmxlJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgaWYgKGRhdGVTdGFydElucHV0ICE9PSBudWxsKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGRhdGVTdGFydElucHV0LnZhbHVlKTtcclxuICAgICAgaWYgKGRhdGVTdGFydElucHV0LnZhbHVlICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIGRhdGVTdGFydFBpY2tlckluaXQgPSBtb21lbnQoZGF0ZVN0YXJ0SW5wdXQudmFsdWUsIGZvcm1hdCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZGF0ZVN0YXJ0UGlja2VySW5pdCA9IG1vbWVudCgpO1xyXG4gICAgICB9XHJcbiAgICAgIGRhdGVTdGFydFBpY2tlciA9IG5ldyBkUGljay5kZWZhdWx0KHtcclxuICAgICAgICB0eXBlOiAnZGF0ZScsXHJcbiAgICAgICAgaW5pdDogZGF0ZVN0YXJ0UGlja2VySW5pdCxcclxuICAgICAgICBmdXR1cmU6IG1vbWVudCgpLmFkZCg1LCAneWVhcnMnKSxcclxuICAgICAgICB0cmlnZ2VyOiBkYXRlU3RhcnRJbnB1dCxcclxuICAgICAgICBvcmllbnRhdGlvbjogJ1BPUlRSQUlUJ1xyXG4gICAgICB9KTtcclxuICAgICAgb2JzZXJ2ZURhdGVQaWNrZXIub2JzZXJ2ZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWRkdHAtcGlja2VyX19kYXRlJyksIHtcclxuICAgICAgICBhdHRyaWJ1dGVzOiB0cnVlXHJcbiAgICAgIH0pO1xyXG4gICAgICBkYXRlU3RhcnRJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdvbk9rJywgZnVuY3Rpb24gZGlzcGxheVBpY2tlZGF0ZSgpIHtcclxuICAgICAgICB1dGlscy5hZGRDbGFzcyh0aGlzLnBhcmVudE5vZGUsICdpcy1kaXJ0eScpO1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSBkYXRlU3RhcnRQaWNrZXIudGltZS5mb3JtYXQoZm9ybWF0KS50b1N0cmluZygpO1xyXG4gICAgICB9KTtcclxuICAgICAgZGF0ZVN0YXJ0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gc2hvd0RhdGVQaWNrZXIoKSB7XHJcbiAgICAgICAgZGF0ZVN0YXJ0UGlja2VyLnRvZ2dsZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChkYXRlRW5kSW5wdXQgIT09IG51bGwpIHtcclxuICAgICAgaWYgKGRhdGVFbmRJbnB1dC52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICBkYXRlRW5kUGlja2VySW5pdCA9IG1vbWVudChkYXRlU3RhcnRJbnB1dC52YWx1ZSwgZm9ybWF0KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBkYXRlRW5kUGlja2VySW5pdCA9IG1vbWVudCgpO1xyXG4gICAgICB9XHJcbiAgICAgIGRhdGVFbmRJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdvbk9rJywgZnVuY3Rpb24gZGlzcGxheVBpY2tlZGF0ZSgpIHtcclxuICAgICAgICB1dGlscy5hZGRDbGFzcyh0aGlzLnBhcmVudE5vZGUsICdpcy1kaXJ0eScpO1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSBkYXRlRW5kUGlja2VyLnRpbWUuZm9ybWF0KGZvcm1hdCkudG9TdHJpbmcoKTtcclxuICAgICAgfSk7XHJcbiAgICAgIGRhdGVFbmRQaWNrZXIgPSBuZXcgZFBpY2suZGVmYXVsdCh7XHJcbiAgICAgICAgdHlwZTogJ2RhdGUnLFxyXG4gICAgICAgIGluaXQ6IGRhdGVFbmRQaWNrZXJJbml0LFxyXG4gICAgICAgIGZ1dHVyZTogbW9tZW50KCkuYWRkKDUsICd5ZWFycycpLFxyXG4gICAgICAgIHRyaWdnZXI6IGRhdGVFbmRJbnB1dCxcclxuICAgICAgICBvcmllbnRhdGlvbjogJ1BPUlRSQUlUJ1xyXG4gICAgICB9KTtcclxuICAgICAgb2JzZXJ2ZURhdGVQaWNrZXIub2JzZXJ2ZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWRkdHAtcGlja2VyX19kYXRlJyksIHtcclxuICAgICAgICBhdHRyaWJ1dGVzOiB0cnVlXHJcbiAgICAgIH0pO1xyXG4gICAgICBkYXRlRW5kQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gc2hvd0RhdGVQaWNrZXIoKSB7XHJcbiAgICAgICAgZGF0ZUVuZFBpY2tlci50b2dnbGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIGVuYWJsZUVkaXQoKSB7XHJcbiAgICB2YXIgb2JzZXJ2ZUxpc3RpbmdJbnB1dCA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uIG9ic2VydmVMaXN0aW5nSW5wdXQobXV0YXRpb25zKSB7XHJcbiAgICAgIHZhciBhdHRyaWJ1dGVWYWx1ZTtcclxuICAgICAgbXV0YXRpb25zLmZvckVhY2goZnVuY3Rpb24gZm9lckVhY2hNdXRhdGlvbihtdXRhdGlvbikge1xyXG4gICAgICAgIGlmIChtdXRhdGlvbi5hdHRyaWJ1dGVOYW1lID09PSAnZGF0YS12YWwnKSB7XHJcbiAgICAgICAgICBhdHRyaWJ1dGVWYWx1ZSA9IG11dGF0aW9uLnRhcmdldC52YWx1ZTtcclxuICAgICAgICAgIGlmIChhdHRyaWJ1dGVWYWx1ZSA9PT0gJ1JlbnQnIHx8IGF0dHJpYnV0ZVZhbHVlID09PSAnzpXOvc6/zrnOus6vzrHPg863Jykge1xyXG4gICAgICAgICAgICB1dGlscy5yZW1vdmVDbGFzcyhkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbGlzdGluZ19fZ2VuZXJhbC1wZXRzLXdyYXBwZXInKSwgJ3Zpc3VhbGx5aGlkZGVuJyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB1dGlscy5hZGRDbGFzcyhkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbGlzdGluZ19fZ2VuZXJhbC1wZXRzLXdyYXBwZXInKSwgJ3Zpc3VhbGx5aGlkZGVuJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgdmFyIG1hcCA9IEFwcC5jb25maWcuY29tbW9ucy5tYXA7XHJcbiAgICB2YXIgaW5wdXRzID0gY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpO1xyXG4gICAgdmFyIGxhYmVscyA9IGNvbnRlbnQucXVlcnlTZWxlY3RvckFsbCgnbGFiZWwnKTtcclxuICAgIHZhciBidXR0b25zID0gY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24nKTtcclxuICAgIHZhciBlZGl0Q2xvc2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2xvc2UnKTtcclxuICAgIHZhciBlZGl0QWdyZWVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWdyZWUnKTtcclxuICAgIHZhciBsb2NhdGlvblN3aXRjaCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNlc3RhdGVfbG9jYXRpb24tdG9nZ2xlJyk7XHJcbiAgICB2YXIgZ2lkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2VzdGF0ZV9faW5mby1naWQnKS52YWx1ZTtcclxuICAgIHZhciB0cmFuc2xhdGUgPSBuZXcgb2wuaW50ZXJhY3Rpb24uVHJhbnNsYXRlKHtcclxuICAgICAgZmVhdHVyZXM6IG5ldyBvbC5Db2xsZWN0aW9uKFt1dGlscy5maW5kQnlJZChtYXAsICdlc3RhdGVzJykuZ2V0U291cmNlKCkuZ2V0RmVhdHVyZUJ5SWQoZ2lkKV0pLFxyXG4gICAgICBsYXllcnM6IFt1dGlscy5maW5kQnlJZChtYXAsICdlc3RhdGVzJyldXHJcbiAgICB9KTtcclxuXHJcbiAgICBhc3NpZ25WYWxpZGF0b3JzKCk7XHJcbiAgICB0cmFuc2xhdGUuc2V0KCdpZCcsICd0cmFuc2xhdGUnKTtcclxuICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGlzdGluZ19faWRBbmRUeXBlLXR5cGUnKSAhPT0gbnVsbCkge1xyXG4gICAgICBvYnNlcnZlTGlzdGluZ0lucHV0Lm9ic2VydmUoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpc3RpbmdfX2lkQW5kVHlwZS10eXBlJyksIHtcclxuICAgICAgICBhdHRyaWJ1dGVzOiB0cnVlLFxyXG4gICAgICAgIGNoYXJhY3RlckRhdGE6IHRydWVcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICB0cmFuc2xhdGUub24oJ3RyYW5zbGF0ZWVuZCcsIGZ1bmN0aW9uIHNldFRyYW5zbGF0ZWRDb29yZGluYXRlcyhlKSB7XHJcbiAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2VzdGF0ZScpO1xyXG4gICAgICBlbGVtZW50LmRhdGFzZXQubmV3eCA9IGUuY29vcmRpbmF0ZVswXTtcclxuICAgICAgZWxlbWVudC5kYXRhc2V0Lm5ld3kgPSBlLmNvb3JkaW5hdGVbMV07XHJcbiAgICAgIGxvY2F0aW9uU3dpdGNoLmNoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgdXRpbHMucmVtb3ZlQ2xhc3MobG9jYXRpb25Td2l0Y2gucGFyZW50Tm9kZSwgJ2lzLWNoZWNrZWQnKTtcclxuICAgICAgLy8gQXBwLmNvbmZpZy5tb2R1bGVzLmluZm8uaW5pdCgpO1xyXG4gICAgICB0cmFuc2xhdGUuc2V0QWN0aXZlKGZhbHNlKTtcclxuICAgIH0pO1xyXG4gICAgbWFwLmFkZEludGVyYWN0aW9uKHRyYW5zbGF0ZSk7XHJcbiAgICB0cmFuc2xhdGUuc2V0QWN0aXZlKGZhbHNlKTtcclxuXHJcbiAgICBsb2NhdGlvblN3aXRjaC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIHdhdGNoTG9jYXRpb25Td2l0Y2goKSB7XHJcbiAgICAgIGlmICh0aGlzLmNoZWNrZWQpIHtcclxuICAgICAgICAvLyBBcHAuY29uZmlnLm1vZHVsZXMuaW5mby5kaXNhYmxlKCk7XHJcbiAgICAgICAgdHJhbnNsYXRlLnNldEFjdGl2ZSh0cnVlKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBBcHAuY29uZmlnLm1vZHVsZXMuaW5mby5pbml0KCk7XHJcbiAgICAgICAgdHJhbnNsYXRlLnNldEFjdGl2ZShmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIFtdLmZvckVhY2guY2FsbChkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdsaXN0aW5nJyksIGZ1bmN0aW9uIHJlbW92ZURpc2FibGVkTGlzdGluZyhlbCkge1xyXG4gICAgICB1dGlscy5yZW1vdmVDbGFzcyhlbCwgJ2xpc3RpbmctZGlzYWJsZWQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIFtdLmZvckVhY2guY2FsbChpbnB1dHMsIGZ1bmN0aW9uIHJlbW92ZURpc2FibGVkSW5wdXRzKGVsKSB7XHJcbiAgICAgIGlmICghdXRpbHMuaGFzQ2xhc3MoZWwsICdub3QtZWRkaXRhYmxlJykpIHtcclxuICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIFtdLmZvckVhY2guY2FsbChsYWJlbHMsIGZ1bmN0aW9uIHJlbW92ZURpc2FibGVkTGFiZWxzKGVsKSB7XHJcbiAgICAgIHV0aWxzLnJlbW92ZUNsYXNzKGVsLCAnaXMtZGlzYWJsZWQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIFtdLmZvckVhY2guY2FsbChidXR0b25zLCBmdW5jdGlvbiByZW1vdmVEaXNhYmxlZExhYmVscyhlbCkge1xyXG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB1dGlscy5yZW1vdmVDbGFzcyhkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29uZmlybUJ0bnMnKSwgJ3Zpc3VhbGx5aGlkZGVuJyk7XHJcbiAgICBlZGl0Q2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiBjYW5jZWxFZGl0KCkge1xyXG4gICAgICBjbGVhckNvbnRlbnQoKTtcclxuICAgICAgdXRpbHMuYWRkQ2xhc3MoY29udGVudCwgJ3Zpc3VhbGx5aGlkZGVuJyk7XHJcbiAgICAgIHV0aWxzLmZpbmRCeUlkKG1hcCwgJ2VzdGF0ZXMnKS5nZXRTb3VyY2UoKS5nZXRGZWF0dXJlcygpXHJcbiAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uIHJlc2V0U3R5bGUoZmVhdHVyZSkge1xyXG4gICAgICAgIGZlYXR1cmUuc2V0U3R5bGUobnVsbCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBlZGl0QnV0dG9uLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgZGVsZXRlQnV0dG9uLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgaW5mby5pbml0KCk7XHJcbiAgICAgIGJvZHkuZGF0YXNldC5hY3RpdmUgPSAnaW5mbyc7XHJcbiAgICAgIGdldEludGVyYWN0aW9uKCd0cmFuc2xhdGUnKS5zZXRBY3RpdmUoZmFsc2UpO1xyXG4gICAgfSk7XHJcbiAgICBlZGl0QWdyZWVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiB1cGRhdGVFZGl0KCkge1xyXG4gICAgICAvLyBzYW5pdGl6ZSgpO1xyXG4gICAgICB2YXIgZGF0YSA9IGNvbGxlY3RWYWx1ZXMoKTtcclxuICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgIHVwZGF0ZShkYXRhKTtcclxuICAgIH0pO1xyXG4gICAgZGF0ZVBpY2tlcigpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gaW5pdCgpIHtcclxuICAgIGluZm8uZGlzYWJsZSgpO1xyXG4gICAgZW5hYmxlRWRpdCgpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGluaXQ6IGluaXRcclxuICB9O1xyXG59KHdpbmRvdywgZG9jdW1lbnQsIFByb21pc2UsICQsIG1kRGF0ZVRpbWVQaWNrZXIsIG1vbWVudCwgQXBwKSk7XHJcbiIsIkFwcC5jb25maWcubW9kdWxlcy5kZWxldGUgPSAoZnVuY3Rpb24gZWRpdCh3aW5kb3csIGRvY3VtZW50LCBQcm9taXNlLCAkLCBBcHAsIGRpYWxvZ1BvbHlmaWxsKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG4gIHZhciB1dGlscyA9IEFwcC51dGlscztcclxuICB2YXIgZHVzdEJsdWViaXJkID0gQXBwLmNvbmZpZy5wcm9taXNlcy5kdXN0Qmx1ZWJpcmQ7XHJcbiAgdmFyIGRlbGV0ZUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZWxldGUnKTtcclxuICB2YXIgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0Jyk7XHJcbiAgdmFyIGRpYWxvZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2RpYWxvZycpO1xyXG4gIHZhciBzbmFja2JhckNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhcHB3cmFwcGVyX19zbmFja2JhcicpO1xyXG4gIHZhciBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FwcHdyYXBwZXJfX2luZm9ib3gtY29udGVudCcpO1xyXG4gIHZhciBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xyXG4gIHZhciBpbmZvID0gQXBwLmNvbmZpZy5tb2R1bGVzLmluZm87XHJcbiAgZnVuY3Rpb24gY2xlYXJDb250ZW50KCkge1xyXG4gICAgaWYgKGNvbnRlbnQuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xyXG4gICAgICBjb250ZW50LmlubmVySFRNTCA9ICcnO1xyXG4gICAgfVxyXG4gIH1cclxuICBmdW5jdGlvbiB1cGRhdGVFc3RhdGVzKCkge1xyXG4gICAgdmFyIG1hcCA9IEFwcC5jb25maWcuY29tbW9ucy5tYXA7XHJcbiAgICB1dGlscy5maW5kQnlJZChtYXAsICdlc3RhdGVzJykuZ2V0U291cmNlKCkuY2xlYXIoKTtcclxuICB9XHJcbiAgZnVuY3Rpb24gZGVsZXRlTGlzdGluZyhkYXRhKSB7XHJcbiAgICBQcm9taXNlLnJlc29sdmUoXHJcbiAgICAgICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiAnaHR0cDovLzEyNy4wLjAuMTozMDAwL2FwaS9saXN0aW5nJyxcclxuICAgICAgICB0eXBlOiAnREVMRVRFJyxcclxuICAgICAgICBkYXRhOiB7IGlkOiBkYXRhIH1cclxuICAgICAgfSlcclxuICAgICAgKVxyXG4gICAgLnRoZW4oZnVuY3Rpb24gcmVzb2x2ZShkZWxldGVMaXN0aW5ncmVzdWx0KSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGRlbGV0ZUxpc3RpbmdyZXN1bHQpO1xyXG4gICAgICBjb250ZW50LnF1ZXJ5U2VsZWN0b3IoJyNsaXN0aW5nJykuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgIGNvbnRlbnQucXVlcnlTZWxlY3RvcignI2xpc3RpbmcnKS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGNvbnRlbnQucXVlcnlTZWxlY3RvcignI2xpc3RpbmcnKSk7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoZnVuY3Rpb24gZW5hYmxlSW5mbygpIHtcclxuICAgICAgdmFyIG1hcCA9IEFwcC5jb25maWcuY29tbW9ucy5tYXA7XHJcbiAgICAgIGNsZWFyQ29udGVudCgpO1xyXG4gICAgICBib2R5LmRhdGFzZXQuYWN0aXZlID0gJ2luZm8nO1xyXG4gICAgICBlZGl0QnV0dG9uLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgZGVsZXRlQnV0dG9uLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgaW5mby5pbml0KCk7XHJcbiAgICAgIHV0aWxzLmZpbmRCeUlkKG1hcCwgJ2VzdGF0ZXMnKS5nZXRTb3VyY2UoKS5nZXRGZWF0dXJlcygpXHJcbiAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uIHJlc2V0U3R5bGUoZmVhdHVyZSkge1xyXG4gICAgICAgIGZlYXR1cmUuc2V0U3R5bGUobnVsbCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaChmdW5jdGlvbiBlcnJvcihlKSB7XHJcbiAgICAgIHZhciBtc2cgPSB7IG1lc3NhZ2U6IGUgfTtcclxuICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgIHNuYWNrYmFyQ29udGFpbmVyLk1hdGVyaWFsU25hY2tiYXIuc2hvd1NuYWNrYmFyKG1zZyk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgZnVuY3Rpb24gZGVsZXRlRXN0YXRlQW5kTGlzdGluZyhkYXRhKSB7XHJcbiAgICBQcm9taXNlLnJlc29sdmUoXHJcbiAgICAgICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiAnaHR0cDovLzEyNy4wLjAuMTozMDAwL2FwaS9wcm9wZXJ0eScsXHJcbiAgICAgICAgdHlwZTogJ0RFTEVURScsXHJcbiAgICAgICAgZGF0YTogeyBnaWQ6IGRhdGEgfVxyXG4gICAgICB9KVxyXG4gICAgICApXHJcbiAgICAudGhlbihmdW5jdGlvbiByZXNvbHZlKCkge1xyXG4gICAgICB1cGRhdGVFc3RhdGVzKCk7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoZnVuY3Rpb24gZW5hYmxlSW5mbygpIHtcclxuICAgICAgdmFyIG1hcCA9IEFwcC5jb25maWcuY29tbW9ucy5tYXA7XHJcbiAgICAgIGNsZWFyQ29udGVudCgpO1xyXG4gICAgICBib2R5LmRhdGFzZXQuYWN0aXZlID0gJ2luZm8nO1xyXG4gICAgICBpbmZvLmluaXQoKTtcclxuICAgICAgZWRpdEJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICAgIGRlbGV0ZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICAgIHV0aWxzLmZpbmRCeUlkKG1hcCwgJ2VzdGF0ZXMnKS5nZXRTb3VyY2UoKS5nZXRGZWF0dXJlcygpXHJcbiAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uIHJlc2V0U3R5bGUoZmVhdHVyZSkge1xyXG4gICAgICAgIGZlYXR1cmUuc2V0U3R5bGUobnVsbCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaChmdW5jdGlvbiBlcnJvcihlKSB7XHJcbiAgICAgIHZhciBtc2cgPSB7IG1lc3NhZ2U6IGUgfTtcclxuICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgIHNuYWNrYmFyQ29udGFpbmVyLk1hdGVyaWFsU25hY2tiYXIuc2hvd1NuYWNrYmFyKG1zZyk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgZnVuY3Rpb24gd2hhdFRvRGVsZXRlKCkge1xyXG4gICAgdmFyIGNoZWNrYm94ZXMgPSBkaWFsb2cucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbbmFtZT1vcHRpb25zXScpO1xyXG4gICAgdmFyIHZhbHVlcyA9IHt9O1xyXG4gICAgaWYgKGNoZWNrYm94ZXMubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgIFtdLmZvckVhY2guY2FsbChjaGVja2JveGVzLCBmdW5jdGlvbiBnZXRWYWx1ZXMoZWwpIHtcclxuICAgICAgICB2YXIga2V5ID0gXy5sYXN0KF8uc3BsaXQoZWwuZ2V0QXR0cmlidXRlKCdpZCcpLCAnLScsIDMpKTtcclxuICAgICAgICB2YWx1ZXNba2V5XSA9IGVsLmNoZWNrZWQ7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZhbHVlcztcclxuICB9XHJcbiAgZnVuY3Rpb24gY2FuY2VsRGVsZXRlKCkge1xyXG4gICAgZGlhbG9nLmNsb3NlKCk7XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIGNvbmZpcm1EZWxldGUoKSB7XHJcbiAgICB2YXIgZGF0YTtcclxuICAgIHZhciBjaG9vc2VyID0gd2hhdFRvRGVsZXRlKCk7XHJcbiAgICBpZiAoXy5pc0VtcHR5KGNob29zZXIpKSB7XHJcbiAgICAgIGRhdGEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXN0YXRlX19pbmZvLWdpZCcpLnZhbHVlO1xyXG4gICAgICBkZWxldGVFc3RhdGVBbmRMaXN0aW5nKGRhdGEpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKGNob29zZXIubGlzdGluZyA9PT0gdHJ1ZSkge1xyXG4gICAgICAgIGRhdGEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGlzdGluZ19faWRBbmRUeXBlLWlkJykudmFsdWU7XHJcbiAgICAgICAgZGVsZXRlTGlzdGluZyhkYXRhKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoY2hvb3Nlci5lc3RhdGUgPT09IHRydWUpIHtcclxuICAgICAgICBkYXRhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VzdGF0ZV9faW5mby1naWQnKS52YWx1ZTtcclxuICAgICAgICBkZWxldGVFc3RhdGVBbmRMaXN0aW5nKGRhdGEpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBkaWFsb2cuY2xvc2UoKTtcclxuICB9XHJcbiAgZnVuY3Rpb24gc2hvdygpIHtcclxuICAgIHZhciBsaXN0aW5nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpc3RpbmdfX2lkQW5kVHlwZS1pZCcpO1xyXG4gICAgdmFyIGRhdGEgPSB7fTtcclxuICAgIGlmIChsaXN0aW5nID09PSBudWxsKSB7XHJcbiAgICAgIGRhdGEudGl0bGUgPSAnRGVsZXRlIEVzdGF0ZSc7XHJcbiAgICAgIGRhdGEuY2hvb3NlID0gZmFsc2U7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBkYXRhLnRpdGxlID0gJ1BsZWFzZSBjaG9vc2Ugd2hhdCB5b3Ugd2FudCB0byBkZWxldGUnO1xyXG4gICAgICBkYXRhLmNob29zZSA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBkdXN0Qmx1ZWJpcmQucmVuZGVyQXN5bmMoJ2RlbGV0ZURpYWxvZycsIGRhdGEpXHJcbiAgICAudGhlbihmdW5jdGlvbiByZXNvbHZlRHVzdChyZXN1bHQpIHtcclxuICAgICAgZGlhbG9nLmlubmVySFRNTCA9IHJlc3VsdDtcclxuICAgICAgZGlhbG9nLnNob3dNb2RhbCgpO1xyXG4gICAgfSlcclxuICAgIC50aGVuKGZ1bmN0aW9uIHJlc29sdmUoKSB7XHJcbiAgICAgIGRpYWxvZy5xdWVyeVNlbGVjdG9yKCcjY2FuY2VsRGVsZXRlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjYW5jZWxEZWxldGUpO1xyXG4gICAgICBkaWFsb2cucXVlcnlTZWxlY3RvcignI2NvbmZpcm1EZWxldGUnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNvbmZpcm1EZWxldGUpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaChmdW5jdGlvbiBlcnJvcihlKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIGluaXREaWFsb2coKSB7XHJcbiAgICBpZiAoISBkaWFsb2cuc2hvd01vZGFsKSB7XHJcbiAgICAgIGRpYWxvZ1BvbHlmaWxsLnJlZ2lzdGVyRGlhbG9nKGRpYWxvZyk7XHJcbiAgICB9XHJcbiAgICBzaG93KCk7XHJcbiAgfVxyXG4gIHJldHVybiB7XHJcbiAgICBpbml0OiBpbml0RGlhbG9nXHJcbiAgfTtcclxufSh3aW5kb3csIGRvY3VtZW50LCBQcm9taXNlLCBqUXVlcnksIEFwcCwgZGlhbG9nUG9seWZpbGwpKTtcclxuIiwiQXBwLmNvbmZpZy5tb2R1bGVzLmluc2VydCA9IChmdW5jdGlvbiBlZGl0KHdpbmRvdywgZG9jdW1lbnQsIFByb21pc2UsICQsIEFwcCwgZFBpY2ssIG1vbWVudCwgZGlhbG9nUG9seWZpbGwsIGNsb3VkaW5hcnksIGJvd3Nlcikge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuICB2YXIgbGFuZyA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5sYW5nO1xyXG4gIHZhciBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xyXG4gIHZhciB1dGlscyA9IEFwcC51dGlscztcclxuICB2YXIgZHVzdEJsdWViaXJkID0gQXBwLmNvbmZpZy5wcm9taXNlcy5kdXN0Qmx1ZWJpcmQ7XHJcbiAgdmFyIGNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXBwd3JhcHBlcl9faW5mb2JveC1jb250ZW50Jyk7XHJcbiAgLy8gdmFyIGFkZEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNlcnQnKTtcclxuICB2YXIgaW5mbyA9IEFwcC5jb25maWcubW9kdWxlcy5pbmZvO1xyXG4gIHZhciBkcmF3bkNvbGxlY3Rpb24gPSBuZXcgb2wuQ29sbGVjdGlvbigpO1xyXG4gIGZ1bmN0aW9uIGNsZWFyQ29udGVudCgpIHtcclxuICAgIGlmIChjb250ZW50LmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcclxuICAgICAgY29udGVudC5pbm5lckhUTUwgPSAnJztcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FjdGl2ZU1vZHVsZScpLmlubmVySFRNTCA9ICdJbmZvcm1hdGlvbic7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIGludmFsaWRhdGUoKSB7XHJcbiAgICB2YXIgaW5wdXRzID0gY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPXRleHRdJyk7XHJcbiAgICBBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoaW5wdXRzLCBmdW5jdGlvbiBzZXRJbnZhbGlkKG9iaikge1xyXG4gICAgICBpZiAob2JqLnZhbHVlID09PSAnJykge1xyXG4gICAgICAgIHV0aWxzLmFkZENsYXNzKG9iai5wYXJlbnROb2RlLCAnaXMtaW52YWxpZCcpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHV0aWxzLnJlbW92ZUNsYXNzKG9iai5wYXJlbnROb2RlLCAnaXMtaW52YWxpZCcpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbiAgZnVuY3Rpb24gY2hlY2tFbXB0eSgpIHtcclxuICAgIHZhciBpbnB1dHMgPSBjb250ZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9dGV4dF0nKTtcclxuICAgIHJldHVybiBfLnNvbWUoaW5wdXRzLCBmdW5jdGlvbiBpc0VtcHR5KGlucHV0KSB7XHJcbiAgICAgIGlmIChpbnB1dC52YWx1ZSA9PT0gJycpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgZnVuY3Rpb24gZ2V0SW50ZXJhY3Rpb24oaWQpIHtcclxuICAgIHZhciBtYXAgPSBBcHAuY29uZmlnLmNvbW1vbnMubWFwO1xyXG4gICAgdmFyIGludGVyYWN0aW9ucyA9IG1hcC5nZXRJbnRlcmFjdGlvbnMoKTtcclxuICAgIHZhciBmb3VuZCA9IHt9O1xyXG4gICAgaW50ZXJhY3Rpb25zLmZvckVhY2goZnVuY3Rpb24gZ2V0SW50ZXJhY3Rpb25JZChpbnRlcmFjdGlvbikge1xyXG4gICAgICBpZiAoaW50ZXJhY3Rpb24uZ2V0KCdpZCcpID09PSBpZCkge1xyXG4gICAgICAgIGZvdW5kID0gaW50ZXJhY3Rpb247XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZm91bmQ7XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIGRhdGVQaWNrZXIoKSB7XHJcbiAgICB2YXIgZm9ybWF0ID0gKGxhbmcgPT09ICdlbCcpID8gJ0RELU1NLVlZWVknIDogJ01NLURELVlZWVknO1xyXG4gICAgdmFyIGRhdGVTdGFydFBpY2tlcjtcclxuICAgIHZhciBkYXRlRW5kUGlja2VyO1xyXG4gICAgdmFyIGRhdGVTdGFydEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbmZvYm94X19kYXRlLXN0YXJ0Jyk7XHJcbiAgICB2YXIgZGF0ZUVuZEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbmZvYm94X19kYXRlLWVuZCcpO1xyXG4gICAgdmFyIGRhdGVTdGFydElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpc3RpbmdfX2dlbmVyYWwtZGF0ZVN0YXJ0Jyk7XHJcbiAgICB2YXIgZGF0ZUVuZElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpc3RpbmdfX2dlbmVyYWwtZGF0ZUVuZCcpO1xyXG4gICAgdmFyIG9ic2VydmVEYXRlUGlja2VyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24gb2JzZXJ2ZURhdGVQaWNrZXIobXV0YXRpb25zKSB7XHJcbiAgICAgIHZhciBhdHRyaWJ1dGVWYWx1ZTtcclxuICAgICAgbXV0YXRpb25zLmZvckVhY2goZnVuY3Rpb24gdG9nZ2xlVW5jbGlja2FibGVJbmZvYm94KG11dGF0aW9uKSB7XHJcbiAgICAgICAgaWYgKG11dGF0aW9uLmF0dHJpYnV0ZU5hbWUgPT09ICdjbGFzcycpIHtcclxuICAgICAgICAgIGF0dHJpYnV0ZVZhbHVlID0gJChtdXRhdGlvbi50YXJnZXQpLnByb3AobXV0YXRpb24uYXR0cmlidXRlTmFtZSk7XHJcbiAgICAgICAgICBpZiAoYXR0cmlidXRlVmFsdWUuaW5kZXhPZignbWRkdHAtcGlja2VyLS1pbmFjdGl2ZScpID4gLTEpIHtcclxuICAgICAgICAgICAgdXRpbHMucmVtb3ZlQ2xhc3MoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FwcHdyYXBwZXJfX2luZm9ib3gnKSwgJ3VuY2xpY2thYmxlJyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB1dGlscy5hZGRDbGFzcyhkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXBwd3JhcHBlcl9faW5mb2JveCcpLCAndW5jbGlja2FibGUnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKGRhdGVTdGFydElucHV0ICE9PSBudWxsKSB7XHJcbiAgICAgIGRhdGVTdGFydFBpY2tlciA9IG5ldyBkUGljay5kZWZhdWx0KHtcclxuICAgICAgICB0eXBlOiAnZGF0ZScsXHJcbiAgICAgICAgaW5pdDogbW9tZW50KCksXHJcbiAgICAgICAgZnV0dXJlOiBtb21lbnQoKS5hZGQoNSwgJ3llYXJzJyksXHJcbiAgICAgICAgdHJpZ2dlcjogZGF0ZVN0YXJ0SW5wdXQsXHJcbiAgICAgICAgb3JpZW50YXRpb246ICdQT1JUUkFJVCdcclxuICAgICAgfSk7XHJcbiAgICAgIG9ic2VydmVEYXRlUGlja2VyLm9ic2VydmUoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21kZHRwLXBpY2tlcl9fZGF0ZScpLCB7XHJcbiAgICAgICAgYXR0cmlidXRlczogdHJ1ZVxyXG4gICAgICB9KTtcclxuICAgICAgaWYgKGJvd3Nlci5uYW1lICE9PSAnQ2hyb21lJykge1xyXG4gICAgICAgIGRhdGVTdGFydElucHV0LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcclxuICAgICAgICBkYXRlU3RhcnRJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdvbk9rJywgZnVuY3Rpb24gZGlzcGxheVBpY2tlZGF0ZSgpIHtcclxuICAgICAgICAgIHV0aWxzLmFkZENsYXNzKHRoaXMucGFyZW50Tm9kZSwgJ2lzLWRpcnR5Jyk7XHJcbiAgICAgICAgICB0aGlzLnZhbHVlID0gZGF0ZVN0YXJ0UGlja2VyLnRpbWUuZm9ybWF0KGZvcm1hdCkudG9TdHJpbmcoKTtcclxuICAgICAgICAgIHRoaXMuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGRhdGVTdGFydElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ29uT2snLCBmdW5jdGlvbiBkaXNwbGF5UGlja2VkYXRlKCkge1xyXG4gICAgICAgICAgdXRpbHMuYWRkQ2xhc3ModGhpcy5wYXJlbnROb2RlLCAnaXMtZGlydHknKTtcclxuICAgICAgICAgIHRoaXMudmFsdWUgPSBkYXRlU3RhcnRQaWNrZXIudGltZS5mb3JtYXQoZm9ybWF0KS50b1N0cmluZygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIGRhdGVTdGFydEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIHNob3dEYXRlUGlja2VyKCkge1xyXG4gICAgICAgIGRhdGVTdGFydFBpY2tlci50b2dnbGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoZGF0ZUVuZElucHV0ICE9PSBudWxsKSB7XHJcbiAgICAgIGlmIChib3dzZXIubmFtZSAhPT0gJ0Nocm9tZScpIHtcclxuICAgICAgICBkYXRlRW5kSW5wdXQucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgIGRhdGVFbmRJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdvbk9rJywgZnVuY3Rpb24gZGlzcGxheVBpY2tlZGF0ZSgpIHtcclxuICAgICAgICAgIHV0aWxzLmFkZENsYXNzKHRoaXMucGFyZW50Tm9kZSwgJ2lzLWRpcnR5Jyk7XHJcbiAgICAgICAgICB0aGlzLnZhbHVlID0gZGF0ZUVuZFBpY2tlci50aW1lLmZvcm1hdChmb3JtYXQpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICB0aGlzLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBkYXRlRW5kSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignb25PaycsIGZ1bmN0aW9uIGRpc3BsYXlQaWNrZWRhdGUoKSB7XHJcbiAgICAgICAgICB1dGlscy5hZGRDbGFzcyh0aGlzLnBhcmVudE5vZGUsICdpcy1kaXJ0eScpO1xyXG4gICAgICAgICAgdGhpcy52YWx1ZSA9IGRhdGVFbmRQaWNrZXIudGltZS5mb3JtYXQoZm9ybWF0KS50b1N0cmluZygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIGRhdGVFbmRQaWNrZXIgPSBuZXcgZFBpY2suZGVmYXVsdCh7XHJcbiAgICAgICAgdHlwZTogJ2RhdGUnLFxyXG4gICAgICAgIGluaXQ6IG1vbWVudCgpLFxyXG4gICAgICAgIGZ1dHVyZTogbW9tZW50KCkuYWRkKDUsICd5ZWFycycpLFxyXG4gICAgICAgIHRyaWdnZXI6IGRhdGVFbmRJbnB1dCxcclxuICAgICAgICBvcmllbnRhdGlvbjogJ1BPUlRSQUlUJ1xyXG4gICAgICB9KTtcclxuICAgICAgb2JzZXJ2ZURhdGVQaWNrZXIub2JzZXJ2ZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWRkdHAtcGlja2VyX19kYXRlJyksIHtcclxuICAgICAgICBhdHRyaWJ1dGVzOiB0cnVlXHJcbiAgICAgIH0pO1xyXG4gICAgICBkYXRlRW5kQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gc2hvd0RhdGVQaWNrZXIoKSB7XHJcbiAgICAgICAgZGF0ZUVuZFBpY2tlci50b2dnbGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIHNldEVzdGF0ZVR5cGUodHlwZSkge1xyXG4gICAgdmFyIHR5cGVzO1xyXG4gICAgaWYgKGxhbmcgPT09ICdlbCcpIHtcclxuICAgICAgdHlwZXMgPSB7XHJcbiAgICAgICAgzpTOuc6xzrzOrc+BzrnPg868zrE6IGZ1bmN0aW9uIGdldEFwYXJ0bWVudCgpIHtcclxuICAgICAgICAgIHJldHVybiAnQXBhcnRtZW50JztcclxuICAgICAgICB9LFxyXG4gICAgICAgIM6czr/Ovc6/zrrOsc+Ezr/Ouc66zq/OsTogZnVuY3Rpb24gZ2V0RGV0YWNoZWRIb3VzZSgpIHtcclxuICAgICAgICAgIHJldHVybiAnRGV0YWNoZWQgSG91c2UnO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgzpzOtc62zr/Ovc6tz4TOsTogZnVuY3Rpb24gZ2V0TWFpc29uZXR0ZSgpIHtcclxuICAgICAgICAgIHJldHVybiAnTWFpc29uZXR0ZSc7XHJcbiAgICAgICAgfSxcclxuICAgICAgICDOiM+AzrHPhc67zrc6IGZ1bmN0aW9uIGdldFZpbGxhKCkge1xyXG4gICAgICAgICAgcmV0dXJuICdWaWxsYSc7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdHlwZXMgPSB7XHJcbiAgICAgICAgQXBhcnRtZW50OiBmdW5jdGlvbiBnZXRBcGFydG1lbnQoKSB7XHJcbiAgICAgICAgICByZXR1cm4gJ86UzrnOsc68zq3Pgc65z4POvM6xJztcclxuICAgICAgICB9LFxyXG4gICAgICAgICdEZXRhY2hlZCBIb3VzZSc6IGZ1bmN0aW9uIGdldERldGFjaGVkSG91c2UoKSB7XHJcbiAgICAgICAgICByZXR1cm4gJ86czr/Ovc6/zrrOsc+Ezr/Ouc66zq/OsSc7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBNYWlzb25ldHRlOiBmdW5jdGlvbiBnZXRNYWlzb25ldHRlKCkge1xyXG4gICAgICAgICAgcmV0dXJuICfOnM61zrbOv869zq3PhM6xJztcclxuICAgICAgICB9LFxyXG4gICAgICAgIFZpbGxhOiBmdW5jdGlvbiBnZXRWaWxsYSgpIHtcclxuICAgICAgICAgIHJldHVybiAnzojPgM6xz4XOu863JztcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHlwZXNbdHlwZV0oKTtcclxuICB9XHJcbiAgZnVuY3Rpb24gYXNzaWduVmFsaWRhdG9ycygpIHtcclxuICAgIHZhciBpbnB1dHMgPSBjb250ZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9dGV4dF0nKTtcclxuICAgIFtdLmZvckVhY2guY2FsbChpbnB1dHMsIGZ1bmN0aW9uIG1ha2VQYXJzbGV5SW5wdXRzKGVsKSB7XHJcbiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBmdW5jdGlvbiBzbml0aXplKCkge1xyXG4gICAgICAgIHZhciBzdHIgPSB0aGlzLnZhbHVlO1xyXG4gICAgICAgIHZhciBzYW5pdGl6ZWRTdHI7XHJcbiAgICAgICAgaWYgKHRoaXMuZGF0YXNldC50eXBlID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgc2FuaXRpemVkU3RyID0gc3RyLnJlcGxhY2UoL1svXFxELyBdL2dpLCAnJyk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmRhdGFzZXQudHlwZSA9PT0gJ2FscGhhbnVtJykge1xyXG4gICAgICAgICAgc2FuaXRpemVkU3RyID0gc3RyLnJlcGxhY2UoL1teYS16MC05QS1aQS16zpEtzqnOsS3Pic6vz4rOkM+MzqzOrc+Nz4vOsM6uz44gXS9naSwgJycpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5kYXRhc2V0LnR5cGUgPT09ICdzcGVjaWFsJykge1xyXG4gICAgICAgICAgc2FuaXRpemVkU3RyID0gc3RyLnJlcGxhY2UoL1teMC05IFxcL10vZ2ksICcnKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZGF0YXNldC50eXBlID09PSAnZGF0ZScpIHtcclxuICAgICAgICAgIHNhbml0aXplZFN0ciA9IHN0ci5yZXBsYWNlKC9bXjAtOSBcXC1dL2dpLCAnJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudmFsdWUgPSBzYW5pdGl6ZWRTdHI7XHJcbiAgICAgICAgdXRpbHMucmVtb3ZlQ2xhc3ModGhpcy5wYXJlbnROb2RlLCAnaXMtaW52YWxpZCcpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBmdW5jdGlvbiBjb2xsZWN0VmFsdWVzKGdldFhZKSB7XHJcbiAgICB2YXIgbWFwID0gQXBwLmNvbmZpZy5jb21tb25zLm1hcDtcclxuICAgIHZhciB2YWx1ZXMgPSB7fTtcclxuICAgIHZhciBmaWx0ZXJlZFZhbHVlcyA9IHt9O1xyXG4gICAgdmFyIGlucHV0cyA9IGNvbnRlbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT10ZXh0XScpO1xyXG4gICAgdmFyIGNoZWNrYm94ZXMgPSBjb250ZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9Y2hlY2tib3hdJyk7XHJcbiAgICB2YWx1ZXMuZXN0YXRlID0ge307XHJcbiAgICB2YWx1ZXMubGlzdGluZyA9IHt9O1xyXG4gICAgaWYgKGdldFhZKSB7XHJcbiAgICAgIHZhbHVlcy5lc3RhdGUueCA9IHV0aWxzLmZpbmRCeUlkKG1hcCwgJ25ld0VzdGF0ZXMnKVxyXG4gICAgICAuZ2V0U291cmNlKCkuZ2V0RmVhdHVyZXMoKVswXS5nZXRHZW9tZXRyeSgpLmdldENvb3JkaW5hdGVzKClbMF07XHJcbiAgICAgIHZhbHVlcy5lc3RhdGUueSA9IHV0aWxzLmZpbmRCeUlkKG1hcCwgJ25ld0VzdGF0ZXMnKVxyXG4gICAgICAuZ2V0U291cmNlKCkuZ2V0RmVhdHVyZXMoKVswXS5nZXRHZW9tZXRyeSgpLmdldENvb3JkaW5hdGVzKClbMV07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB2YWx1ZXMuZXN0YXRlLnggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXN0YXRlJykuZGF0YXNldC5vcmlnaW5hbHg7XHJcbiAgICAgIHZhbHVlcy5lc3RhdGUueSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlc3RhdGUnKS5kYXRhc2V0Lm9yaWdpbmFseTtcclxuICAgIH1cclxuICAgIFtdLmZvckVhY2guY2FsbChpbnB1dHMsIGZ1bmN0aW9uIGNvbGxlY3RGcm9tSW5wdXRzKGVsKSB7XHJcbiAgICAgIHZhciBuYW1lID0gXy5sYXN0KF8uc3BsaXQoZWwuZ2V0QXR0cmlidXRlKCdpZCcpLCAnLScsIDMpKTtcclxuICAgICAgdmFyIHZhbHVlID0gZWwudmFsdWU7XHJcbiAgICAgIGlmIChsYW5nID09PSAnZWwnKSB7XHJcbiAgICAgICAgaWYgKG5hbWUgPT09ICd0eXBlJyAmJiBlbC5pZCA9PT0gJ2VzdGF0ZV9fZ2VuZXJhbF9lc3RhdGUtdHlwZScpIHtcclxuICAgICAgICAgIHZhbHVlcy5lc3RhdGUuZXN0YXRldHlwZUVuID0gc2V0RXN0YXRlVHlwZSh2YWx1ZSk7XHJcbiAgICAgICAgICB2YWx1ZXMuZXN0YXRlLmVzdGF0ZXR5cGUgPSB2YWx1ZTtcclxuICAgICAgICB9IGVsc2UgaWYgKG5hbWUgPT09ICd0eXBlJyAmJiBlbC5pZCA9PT0gJ2xpc3RpbmdfX2lkQW5kVHlwZS10eXBlJykge1xyXG4gICAgICAgICAgaWYgKHZhbHVlID09PSAnU2FsZScgfHwgdmFsdWUgPT09ICfOoM+OzrvOt8+DzrcnKSB7XHJcbiAgICAgICAgICAgIHZhbHVlcy5saXN0aW5nLnNhbGUgPSB0cnVlO1xyXG4gICAgICAgICAgICB2YWx1ZXMubGlzdGluZy5yZW50ID0gZmFsc2U7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YWx1ZXMubGlzdGluZy5zYWxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHZhbHVlcy5saXN0aW5nLnJlbnQgPSB0cnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobmFtZSA9PT0gJ2FkZHJlc3MnKSB7XHJcbiAgICAgICAgICB2YWx1ZXMuZXN0YXRlLnN0cmVldEVuID0gdXRpbHMuZWxUb0VuKHZhbHVlKTtcclxuICAgICAgICAgIHZhbHVlcy5lc3RhdGUuc3RyZWV0RWwgPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKG5hbWUgPT09ICd0eXBlJyAmJiBlbC5pZCA9PT0gJ2VzdGF0ZV9fZ2VuZXJhbF9lc3RhdGUtdHlwZScpIHtcclxuICAgICAgICAgIHZhbHVlcy5lc3RhdGUuZXN0YXRldHlwZUVuID0gdmFsdWU7XHJcbiAgICAgICAgICB2YWx1ZXMuZXN0YXRlLmVzdGF0ZXR5cGUgPSBzZXRFc3RhdGVUeXBlKHZhbHVlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKG5hbWUgPT09ICd0eXBlJyAmJiBlbC5pZCA9PT0gJ2xpc3RpbmdfX2lkQW5kVHlwZS10eXBlJykge1xyXG4gICAgICAgICAgaWYgKHZhbHVlID09PSAnU2FsZScgfHwgdmFsdWUgPT09ICfOoM+OzrvOt8+DzrcnKSB7XHJcbiAgICAgICAgICAgIHZhbHVlcy5saXN0aW5nLnNhbGUgPSB0cnVlO1xyXG4gICAgICAgICAgICB2YWx1ZXMubGlzdGluZy5yZW50ID0gZmFsc2U7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YWx1ZXMubGlzdGluZy5zYWxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHZhbHVlcy5saXN0aW5nLnJlbnQgPSB0cnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobmFtZSA9PT0gJ2FkZHJlc3MnKSB7XHJcbiAgICAgICAgICB2YWx1ZXMuZXN0YXRlLnN0cmVldEVuID0gdmFsdWU7XHJcbiAgICAgICAgICB2YWx1ZXMuZXN0YXRlLnN0cmVldEVsID0gdXRpbHMuZWxUb0VuKHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKG5hbWUgPT09ICdhZGRyZXNzTnVtYmVyJykge1xyXG4gICAgICAgIHZhbHVlcy5lc3RhdGUuc3RyZWV0TnVtYmVyID0gdmFsdWU7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKG5hbWUgPT09ICdwcmljZScpIHtcclxuICAgICAgICB2YWx1ZXMubGlzdGluZy5wcmljZSA9IHZhbHVlO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChuYW1lID09PSAnZGF0ZVN0YXJ0JyB8fCBuYW1lID09PSAnZGF0ZUVuZCcpIHtcclxuICAgICAgICB2YWx1ZXMubGlzdGluZ1tuYW1lXSA9IHZhbHVlO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhbHVlcy5lc3RhdGVbbmFtZV0gPSB2YWx1ZTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBbXS5mb3JFYWNoLmNhbGwoY2hlY2tib3hlcywgZnVuY3Rpb24gY29sbGVjdEZyb21DaGVja2JveGVzKGVsKSB7XHJcbiAgICAgIHZhciBuYW1lID0gXy5sYXN0KF8uc3BsaXQoZWwuZ2V0QXR0cmlidXRlKCdpZCcpLCAnLScsIDMpKTtcclxuICAgICAgdmFyIHZhbHVlID0gZWwuY2hlY2tlZDtcclxuICAgICAgaWYgKG5hbWUgIT09ICdwZXRzJykge1xyXG4gICAgICAgIHZhbHVlcy5lc3RhdGVbbmFtZV0gPSB2YWx1ZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB2YWx1ZXMubGlzdGluZ1tuYW1lXSA9IHZhbHVlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIGZpbHRlcmVkVmFsdWVzLmVzdGF0ZSA9IF8ub21pdCh2YWx1ZXMuZXN0YXRlLCBbJ2FkZHJlc3MnLCAnYWRkcmVzc051bWJlcicsICd0eXBlJywgJ3RvZ2dsZSddKTtcclxuICAgIGZpbHRlcmVkVmFsdWVzLmxpc3RpbmcgPSB2YWx1ZXMubGlzdGluZztcclxuICAgIHJldHVybiBmaWx0ZXJlZFZhbHVlcztcclxuICB9XHJcbiAgZnVuY3Rpb24gYWpheEVzdGF0ZUFuZExpc3RpbmcoZGF0YSkge1xyXG4gICAgZGF0YS5lc3RhdGUuYWRtaW5JZCA9IHdpbmRvdy5pZDtcclxuICAgIFByb21pc2UucmVzb2x2ZShcclxuICAgICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6ICdodHRwOi8vMTI3LjAuMC4xOjMwMDAvYXBpL3Byb3BlcnR5JyxcclxuICAgICAgICB0eXBlOiAnUE9TVCcsXHJcbiAgICAgICAgZGF0YTogZGF0YS5lc3RhdGVcclxuICAgICAgfSlcclxuICAgICAgKVxyXG4gICAgLnRoZW4oZnVuY3Rpb24gcmVzb2x2ZShlc3RhdGVkYXRhKSB7XHJcbiAgICAgIHZhciBnaWQgPSBlc3RhdGVkYXRhLmdpZDtcclxuICAgICAgdmFyIHVwbG9hZE9wdGlvbnMgPSB7XHJcbiAgICAgICAgY2xvdWRfbmFtZTogJ2ZpcnZhaW4nLFxyXG4gICAgICAgIHVwbG9hZF9wcmVzZXQ6ICd0ZXN0dXBsb2FkJyxcclxuICAgICAgICBmb2xkZXI6IGdpZCxcclxuICAgICAgICBjbGllbnRfYWxsb3dlZF9mb3JtYXRzOiAnanBnJyxcclxuICAgICAgICB0aGVtZTogJ21pbmltYWwnLFxyXG4gICAgICAgIHRhZ3M6IGdpZFxyXG4gICAgICB9O1xyXG4gICAgICBjbG91ZGluYXJ5Lm9wZW5VcGxvYWRXaWRnZXQodXBsb2FkT3B0aW9ucywgZnVuY3Rpb24gdXBsb2FkKGVycm9yLCByZXN1bHQpIHtcclxuICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gMTtcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBnaWQ7XHJcbiAgICB9KVxyXG4gICAgLnRoZW4oZnVuY3Rpb24gcmVzb2x2ZShnaWQpIHtcclxuICAgICAgZGF0YS5saXN0aW5nLmdpZCA9IGdpZDtcclxuICAgICAgcmV0dXJuICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiAnaHR0cDovLzEyNy4wLjAuMTozMDAwL2FwaS9saXN0aW5nJyxcclxuICAgICAgICB0eXBlOiAnUE9TVCcsXHJcbiAgICAgICAgZGF0YTogZGF0YS5saXN0aW5nXHJcbiAgICAgIH0pO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KGZ1bmN0aW9uIGNsb3NlSW5zZXJ0KCkge1xyXG4gICAgICB2YXIgbWFwID0gQXBwLmNvbmZpZy5jb21tb25zLm1hcDtcclxuICAgICAgY2xlYXJDb250ZW50KCk7XHJcbiAgICAgIHV0aWxzLmFkZENsYXNzKGNvbnRlbnQsICd2aXN1YWxseWhpZGRlbicpO1xyXG4gICAgICBib2R5LmRhdGFzZXQuYWN0aXZlID0gJ2luZm8nO1xyXG4gICAgICB1dGlscy5maW5kQnlJZChtYXAsICduZXdFc3RhdGVzJykuZ2V0U291cmNlKCkuY2xlYXIoKTtcclxuICAgICAgdXRpbHMuZmluZEJ5SWQobWFwLCAnZXN0YXRlcycpLmdldFNvdXJjZSgpLmNsZWFyKCk7XHJcbiAgICAgIGluZm8uaW5pdCgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaChmdW5jdGlvbiBlcnJvcihlKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIGFqYXhMaXN0aW5nKGRhdGEpIHtcclxuICAgIFByb21pc2UucmVzb2x2ZShcclxuICAgICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6ICdodHRwOi8vMTI3LjAuMC4xOjMwMDAvYXBpL2xpc3RpbmcnLFxyXG4gICAgICAgIHR5cGU6ICdQT1NUJyxcclxuICAgICAgICBkYXRhOiBfLm1lcmdlKHsgZ2lkOiBkYXRhLmdpZCB9LCBkYXRhLmxpc3RpbmcpXHJcbiAgICAgIH0pXHJcbiAgICAgIClcclxuICAgIC50aGVuKGZ1bmN0aW9uIHJlc29sdmUocmVzdWx0KSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoZnVuY3Rpb24gY2xvc2VJbnNlcnQoKSB7XHJcbiAgICAgIGNsZWFyQ29udGVudCgpO1xyXG4gICAgICB1dGlscy5hZGRDbGFzcyhjb250ZW50LCAndmlzdWFsbHloaWRkZW4nKTtcclxuICAgICAgYm9keS5kYXRhc2V0LmFjdGl2ZSA9ICdpbmZvJztcclxuICAgICAgaW5mby5pbml0KCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGZ1bmN0aW9uIGVycm9yKGUpIHtcclxuICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgZnVuY3Rpb24gcmVuZGVyRHVzdExpc3RpbmcoKSB7XHJcbiAgICBkdXN0Qmx1ZWJpcmQucmVuZGVyQXN5bmMoJ2luc2VydExpc3RpbmcnLCBfLmNsb25lRGVlcChBcHAuY29uZmlnLmNvbW1vbnMudHJhbnMpKVxyXG4gICAgLnRoZW4oZnVuY3Rpb24gcmVzb2x2ZShkYXRhKSB7XHJcbiAgICAgIHZhciBhZ3JlZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25maXJtQnRuc19fYWdyZWUnKTtcclxuICAgICAgdmFyIGRpc2FncmVlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbmZpcm1CdG5zX19kaXNhZ3JlZScpO1xyXG4gICAgICAkKCcjZXN0YXRlJykuYWZ0ZXIoZGF0YSk7XHJcbiAgICAgIGdldG1kbFNlbGVjdC5pbml0KCcuZ2V0bWRsLXNlbGVjdCcpO1xyXG4gICAgICB1dGlscy5yZW1vdmVDbGFzcyhkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlybUJ0bnMnKSwgJ3Zpc3VhbGx5aGlkZGVuJyk7XHJcbiAgICAgIGFzc2lnblZhbGlkYXRvcnMoKTtcclxuICAgICAgZGF0ZVBpY2tlcigpO1xyXG4gICAgICBkaXNhZ3JlZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIGluc2VydEFncmVlKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBjbGVhckNvbnRlbnQoKTtcclxuICAgICAgICBjb250ZW50LmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIHV0aWxzLmFkZENsYXNzKGNvbnRlbnQsICd2aXN1YWxseWhpZGRlbicpO1xyXG4gICAgICAgIGJvZHkuZGF0YXNldC5hY3RpdmUgPSBpbmZvO1xyXG4gICAgICAgIGluZm8uaW5pdCgpO1xyXG4gICAgICB9KTtcclxuICAgICAgYWdyZWUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiBpbnNlcnRDb250aW51ZShlKSB7XHJcbiAgICAgICAgdmFyIGFqYXhEYXRhO1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIGlmIChjaGVja0VtcHR5KCkgIT09IHRydWUpIHtcclxuICAgICAgICAgIGFqYXhEYXRhID0gY29sbGVjdFZhbHVlcyhmYWxzZSk7XHJcbiAgICAgICAgICBhamF4RGF0YS5naWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXN0YXRlX19pbmZvLWdpZCcpLnZhbHVlO1xyXG4gICAgICAgICAgYWpheExpc3RpbmcoYWpheERhdGEpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpbnZhbGlkYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goZnVuY3Rpb24gZXJyb3IoZSkge1xyXG4gICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBmdW5jdGlvbiByZW5kZXJEdXN0RXNhdGVBbmRMaXN0aW5nKCkge1xyXG4gICAgdmFyIG1hcCA9IEFwcC5jb25maWcuY29tbW9ucy5tYXA7XHJcbiAgICB2YXIgZHJhdyA9IGdldEludGVyYWN0aW9uKCduZXdFc3RhdGUnKTtcclxuICAgIHZhciByZW5kZXJEYXRhID0gXy5jbG9uZURlZXAoQXBwLmNvbmZpZy5jb21tb25zLnRyYW5zKTtcclxuICAgIGR1c3RCbHVlYmlyZC5yZW5kZXJBc3luYygnaW5zZXJ0JywgcmVuZGVyRGF0YSlcclxuICAgIC50aGVuKGZ1bmN0aW9uIHJlc29sdmUoZGF0YSkge1xyXG4gICAgICBjbGVhckNvbnRlbnQoKTtcclxuICAgICAgY29udGVudC5pbm5lckhUTUwgPSBkYXRhO1xyXG4gICAgICB1dGlscy5yZW1vdmVDbGFzcyhjb250ZW50LCAndmlzdWFsbHloaWRkZW4nKTtcclxuICAgICAgZ2V0bWRsU2VsZWN0LmluaXQoJy5nZXRtZGwtc2VsZWN0Jyk7XHJcbiAgICB9KVxyXG4gICAgLnRoZW4oZnVuY3Rpb24gcmVzb2x2ZShkYXRhKSB7XHJcbiAgICAgIHZhciBhZ3JlZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25maXJtQnRuc19fYWdyZWUnKTtcclxuICAgICAgdmFyIGRpc2FncmVlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbmZpcm1CdG5zX19kaXNhZ3JlZScpO1xyXG4gICAgICB2YXIgbGlzdGluZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaXN0aW5nJyk7XHJcbiAgICAgIGFzc2lnblZhbGlkYXRvcnMoKTtcclxuICAgICAgZGF0ZVBpY2tlcigpO1xyXG4gICAgICBkaXNhZ3JlZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIGluc2VydEFncmVlKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBjbGVhckNvbnRlbnQoKTtcclxuICAgICAgICAvLyBjb250ZW50LmlubmVySFRNTCA9IGRhdGE7XHJcbiAgICAgICAgdXRpbHMuYWRkQ2xhc3MoY29udGVudCwgJ3Zpc3VhbGx5aGlkZGVuJyk7XHJcbiAgICAgICAgYm9keS5kYXRhc2V0LmFjdGl2ZSA9IGluZm87XHJcbiAgICAgICAgZHJhdy5zZXRBY3RpdmUoZmFsc2UpO1xyXG4gICAgICAgIHV0aWxzLmZpbmRCeUlkKG1hcCwgJ25ld0VzdGF0ZXMnKS5nZXRTb3VyY2UoKS5jbGVhcigpO1xyXG4gICAgICAgIGluZm8uaW5pdCgpO1xyXG4gICAgICB9KTtcclxuICAgICAgYWdyZWUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiBpbnNlcnRDb250aW51ZShlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgdXRpbHMucmVtb3ZlQ2xhc3MobGlzdGluZywgJ3Zpc3VhbGx5aGlkZGVuJyk7XHJcbiAgICAgICAgdGhpcy5pbm5lckhUTUwgPSAnQWdyZWUnO1xyXG4gICAgICAgIGUudGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoZS50eXBlLCBpbnNlcnRDb250aW51ZSk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIGluc2VydEFncmVlKGV2dCkge1xyXG4gICAgICAgICAgdmFyIGFqYXhEYXRhO1xyXG4gICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAvLyBlLnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGUudHlwZSwgaW5zZXJ0QWdyZWUpO1xyXG4gICAgICAgICAgaWYgKGNoZWNrRW1wdHkoKSAhPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBhamF4RGF0YSA9IGNvbGxlY3RWYWx1ZXModHJ1ZSk7XHJcbiAgICAgICAgICAgIGFqYXhFc3RhdGVBbmRMaXN0aW5nKGFqYXhEYXRhKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGludmFsaWRhdGUoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGZ1bmN0aW9uIGVycm9yKGUpIHtcclxuICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNyZWF0ZURyYXdJbnRlcmFjdGlvbigpIHtcclxuICAgIHZhciBtYXAgPSBBcHAuY29uZmlnLmNvbW1vbnMubWFwO1xyXG4gICAgdmFyIGRyYXcgPSBuZXcgb2wuaW50ZXJhY3Rpb24uRHJhdyh7XHJcbiAgICAgIGZlYXR1cmVzOiBkcmF3bkNvbGxlY3Rpb24sXHJcbiAgICAgIHNvdXJjZTogdXRpbHMuZmluZEJ5SWQobWFwLCAnbmV3RXN0YXRlcycpLmdldFNvdXJjZSgpLFxyXG4gICAgICB0eXBlOiAnUG9pbnQnLFxyXG4gICAgICBzdHlsZTogbmV3IG9sLnN0eWxlLlN0eWxlKHtcclxuICAgICAgICBpbWFnZTogbmV3IG9sLnN0eWxlLkljb24oKHtcclxuICAgICAgICAgIHNyYzogJy4vaW1hZ2VzL3BpbnMvZ2VuZXJpYy00OC5wbmcnLFxyXG4gICAgICAgICAgYW5jaG9yT3JpZ2luOiAnYm90dG9tLWxlZnQnLFxyXG4gICAgICAgICAgYW5jaG9yOiBbMC41LCAwXSxcclxuICAgICAgICAgIHNjYWxlOiAxLFxyXG4gICAgICAgICAgY29sb3I6ICdyZ2IoOTYsIDEyNSwgMTM5KSdcclxuICAgICAgICB9KSlcclxuICAgICAgfSlcclxuICAgIH0pO1xyXG4gICAgZHJhdy5zZXQoJ2lkJywgJ25ld0VzdGF0ZScpO1xyXG4gICAgZHJhdy5zZXRBY3RpdmUoZmFsc2UpO1xyXG4gICAgbWFwLmFkZEludGVyYWN0aW9uKGRyYXcpO1xyXG4gIH1cclxuICBmdW5jdGlvbiBjaGVja0VzdGF0ZSgpIHtcclxuICAgIGlmIChjb250ZW50LmlubmVySFRNTCA9PT0gJ3VuZGVmaW5lZCcgfHwgY29udGVudC5pbm5lckhUTUwgPT09ICcnKSB7XHJcbiAgICAgIHJldHVybiAwOyAvLyBubyBlc3RhdGUgb3IgbGlzdGluZ1xyXG4gICAgfSBlbHNlIGlmIChjb250ZW50LmlubmVySFRNTCAhPT0gJ3VuZGVmaW5lZCcgJiYgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpc3RpbmcnKSAhPT0gbnVsbCkge1xyXG4gICAgICByZXR1cm4gMTsgIC8vIHRoZXJlIGlzIGEgbGlzdGluZ1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIDI7IC8vIHRoZXJlIGlzIG5vIGxpc3RpbmdcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGluc2VydCgpIHtcclxuICAgIHZhciBtYXAgPSBBcHAuY29uZmlnLmNvbW1vbnMubWFwO1xyXG4gICAgdmFyIGRyYXcgPSBnZXRJbnRlcmFjdGlvbignbmV3RXN0YXRlJyk7XHJcbiAgICB2YXIgbmV3RXN0YXRlcyA9IHV0aWxzLmZpbmRCeUlkKG1hcCwgJ25ld0VzdGF0ZXMnKTtcclxuICAgIGluZm8uZGlzYWJsZSgpO1xyXG4gICAgaWYgKGNoZWNrRXN0YXRlKCkgPT09IDApIHtcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FjdGl2ZU1vZHVsZScpLmlubmVySFRNTCA9ICdBZGQgRXN0YXRlIEFuZCBMaXN0aW5nJztcclxuICAgICAgZHJhdy5zZXRBY3RpdmUodHJ1ZSk7XHJcbiAgICAgIHV0aWxzLmZpbmRCeUlkKG1hcCwgJ25ld0VzdGF0ZXMnKS5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgICBkcmF3bkNvbGxlY3Rpb24ub24oJ2NoYW5nZTpsZW5ndGgnLCBmdW5jdGlvbiBrZWVwT25seU9uZUVzdGF0ZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5nZXRMZW5ndGgoKSA+IDApIHtcclxuICAgICAgICAgIGRyYXcuc2V0QWN0aXZlKGZhbHNlKTtcclxuICAgICAgICAgIG5ld0VzdGF0ZXMuZ2V0U291cmNlKCkuY2xlYXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICBkcmF3Lm9uKCdkcmF3ZW5kJywgcmVuZGVyRHVzdEVzYXRlQW5kTGlzdGluZyk7XHJcbiAgICB9IGVsc2UgaWYgKGNoZWNrRXN0YXRlKCkgPT09IDIpIHtcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FjdGl2ZU1vZHVsZScpLmlubmVySFRNTCA9ICdBZGQgTGlzdGluZyc7XHJcbiAgICAgIGRyYXcuc2V0QWN0aXZlKGZhbHNlKTtcclxuICAgICAgcmVuZGVyRHVzdExpc3RpbmcoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGRyYXcuc2V0QWN0aXZlKGZhbHNlKTtcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FjdGl2ZU1vZHVsZScpLmlubmVySFRNTCA9ICdJbmZvcm1hdGlvbic7XHJcbiAgICAgIGluZm8uaW5pdCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gaW5pdCgpIHtcclxuICAgIGlmIChfLmlzRW1wdHkoZ2V0SW50ZXJhY3Rpb24oJ25ld0VzdGF0ZScpKSkge1xyXG4gICAgICBjcmVhdGVEcmF3SW50ZXJhY3Rpb24oKTtcclxuICAgIH1cclxuICAgIGluc2VydCgpO1xyXG4gIH1cclxuICByZXR1cm4ge1xyXG4gICAgaW5pdDogaW5pdFxyXG4gIH07XHJcbn0od2luZG93LCBkb2N1bWVudCwgUHJvbWlzZSwgalF1ZXJ5LCBBcHAsIG1kRGF0ZVRpbWVQaWNrZXIsIG1vbWVudCwgZGlhbG9nUG9seWZpbGwsIGNsb3VkaW5hcnksIGJvd3NlcikpO1xyXG4iLCJ2YXIgdXNlck1hcCA9IChmdW5jdGlvbiB1c2VyTWFwKHdpbmRvdywgZG9jdW1lbnQsIFByb21pc2UsICQsIEFwcCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuICB2YXIgY29udGV4dCA9ICdhZG1pbic7XHJcbiAgdmFyIGxhbmcgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQubGFuZztcclxuICB2YXIgJGxvYWRpbmcgPSAkKCcubWRsLXNwaW5uZXInKTtcclxuICAkKGRvY3VtZW50KVxyXG4gIC5hamF4U3RhcnQoZnVuY3Rpb24gc3RhcnQoKSB7XHJcbiAgICAkKCcuc3BpbmVyLXdyYXBwZXInKS5yZW1vdmVDbGFzcygndmlzdWFsbHloaWRkZW4nKTtcclxuICAgICRsb2FkaW5nLmFkZENsYXNzKCdpcy1hY3RpdmUnKTtcclxuICB9KVxyXG4gIC5hamF4U3RvcChmdW5jdGlvbiBzdG9wKCkge1xyXG4gICAgJCgnLnNwaW5lci13cmFwcGVyJykuYWRkQ2xhc3MoJ3Zpc3VhbGx5aGlkZGVuJyk7XHJcbiAgICAkbG9hZGluZy5yZW1vdmVDbGFzcygnaXMtYWN0aXZlJyk7XHJcbiAgfSk7XHJcbiAgdG9hc3RyLm9wdGlvbnMgPSB7XHJcbiAgICBjbG9zZUJ1dHRvbjogZmFsc2UsXHJcbiAgICBkZWJ1ZzogZmFsc2UsXHJcbiAgICBuZXdlc3RPblRvcDogZmFsc2UsXHJcbiAgICBwcm9ncmVzc0JhcjogZmFsc2UsXHJcbiAgICBwb3NpdGlvbkNsYXNzOiAndG9hc3QtdG9wLWNlbnRlcicsXHJcbiAgICBwcmV2ZW50RHVwbGljYXRlczogZmFsc2UsXHJcbiAgICBvbmNsaWNrOiBudWxsLFxyXG4gICAgc2hvd0R1cmF0aW9uOiAnMzAwJyxcclxuICAgIGhpZGVEdXJhdGlvbjogJzEwMDAnLFxyXG4gICAgdGltZU91dDogJzUwMDAnLFxyXG4gICAgZXh0ZW5kZWRUaW1lT3V0OiAnMTAwMCcsXHJcbiAgICBzaG93RWFzaW5nOiAnc3dpbmcnLFxyXG4gICAgaGlkZUVhc2luZzogJ2xpbmVhcicsXHJcbiAgICBzaG93TWV0aG9kOiAnZmFkZUluJyxcclxuICAgIGhpZGVNZXRob2Q6ICdmYWRlT3V0J1xyXG4gIH07XHJcbiAgZnVuY3Rpb24gaW5pdCgpIHtcclxuICAgIFByb21pc2UucmVzb2x2ZShcclxuICAgICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6ICdodHRwOi8vMTI3LjAuMC4xOjMwMDAvYXBpL2xhbmd1YWdlJyxcclxuICAgICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICB0eXBlOiBsYW5nLFxyXG4gICAgICAgICAgY29udGV4dDogY29udGV4dFxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICAgKVxyXG4gICAgLnRoZW4oZnVuY3Rpb24gcmVzb2x2ZShkYXRhKSB7XHJcbiAgICAgIEFwcC5jb25maWcuY29tbW9ucy50cmFucyA9IGRhdGE7XHJcbiAgICAgIEFwcC5jb25maWcuY29tbW9ucy5tYXAgPSBBcHAuY29uZmlnLm1vZHVsZXMubWFwLmluaXRpYWxpemUoKTtcclxuICAgIH0pXHJcbiAgICAudGhlbihmdW5jdGlvbiByZXNvbHZlKCkge1xyXG4gICAgICB2YXIgbW9kdWxlT2JzZXJ2ZXI7XHJcbiAgICAgIEFwcC5jb25maWcubW9kdWxlcy5pbmZvLmluaXQoKTtcclxuICAgICAgbW9kdWxlT2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbiBtb2R1bGVPYnNlcnZlckNob29zZXIobXV0YXRpb25zKSB7XHJcbiAgICAgICAgbXV0YXRpb25zLmZvckVhY2goZnVuY3Rpb24gZm9lckVhY2hNdXRhdGlvbihtdXRhdGlvbikge1xyXG4gICAgICAgICAgaWYgKHR5cGVvZiBtdXRhdGlvbi50YXJnZXQuZGF0YXNldCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgaWYgKG11dGF0aW9uLnRhcmdldC5kYXRhc2V0LmFjdGl2ZSA9PT0gJ2luc2VydCcpIHtcclxuICAgICAgICAgICAgICBBcHAuY29uZmlnLm1vZHVsZXMuaW5zZXJ0LmluaXQoKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChtdXRhdGlvbi50YXJnZXQuZGF0YXNldC5hY3RpdmUgPT09ICdkZWxldGUnKSB7XHJcbiAgICAgICAgICAgICAgQXBwLmNvbmZpZy5tb2R1bGVzLmRlbGV0ZS5pbml0KCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobXV0YXRpb24udGFyZ2V0LmRhdGFzZXQuYWN0aXZlID09PSAnZWRpdCcpIHtcclxuICAgICAgICAgICAgICBBcHAuY29uZmlnLm1vZHVsZXMuZWRpdC5pbml0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICAgIG1vZHVsZU9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLCB7XHJcbiAgICAgICAgYXR0cmlidXRlczogdHJ1ZVxyXG4gICAgICB9KTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goZnVuY3Rpb24gZXJyb3IoZSkge1xyXG4gICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICByZXR1cm4ge1xyXG4gICAgaW5pdDogaW5pdFxyXG4gIH07XHJcbn0od2luZG93LCBkb2N1bWVudCwgUHJvbWlzZSwgalF1ZXJ5LCBBcHApKTtcclxuXHJcbnVzZXJNYXAuaW5pdCgpO1xyXG5cclxuJChmdW5jdGlvbiBEcmVhZHkoKSB7XHJcbiAgdmFyIHV0aWxzID0gQXBwLnV0aWxzO1xyXG4gIHZhciBhZGRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zZXJ0Jyk7XHJcbiAgdmFyIGRlbGV0ZUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZWxldGUnKTtcclxuICB2YXIgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNlZGl0Jyk7XHJcbiAgJCgnI2xvZ291dCcpLmNsaWNrKGZ1bmN0aW9uIGxvZ291dCgpIHtcclxuICAgIGxvY2F0aW9uLmhyZWYgPSAnL2xvZ291dCc7XHJcbiAgfSk7XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudGVyLWZ1bGxzY3JlZW4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsXHJcbiAgICBmdW5jdGlvbiBhZGRDbGlja0V2ZW50VG9FbnRlckZ1bGxzcmVlbigpIHtcclxuICAgICAgdmFyIGVsZW0gPSBkb2N1bWVudC5ib2R5O1xyXG4gICAgICB1dGlscy5yZXF1ZXN0RnVsbFNjcmVlbihlbGVtKTtcclxuICAgICAgdXRpbHMucmVtb3ZlQ2xhc3MoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4aXQtZnVsbHNjcmVlbicpLnBhcmVudE5vZGUsICd2aXN1YWxseWhpZGRlbicpO1xyXG4gICAgICB1dGlscy5hZGRDbGFzcyh0aGlzLnBhcmVudE5vZGUsICd2aXN1YWxseWhpZGRlbicpO1xyXG4gICAgfVxyXG4gICk7XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4aXQtZnVsbHNjcmVlbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxcclxuICAgIGZ1bmN0aW9uIGFkZENsaWNrRXZlbnRUb0V4aXRGdWxsc3JlZW4oKSB7XHJcbiAgICAgIHZhciBlbGVtID0gZG9jdW1lbnQ7XHJcbiAgICAgIHV0aWxzLmV4aXRGdWxsc3JlZW4oZWxlbSk7XHJcbiAgICAgIHV0aWxzLnJlbW92ZUNsYXNzKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnRlci1mdWxsc2NyZWVuJykucGFyZW50Tm9kZSwgJ3Zpc3VhbGx5aGlkZGVuJyk7XHJcbiAgICAgIHV0aWxzLmFkZENsYXNzKHRoaXMucGFyZW50Tm9kZSwgJ3Zpc3VhbGx5aGlkZGVuJyk7XHJcbiAgICB9XHJcbiAgKTtcclxuICBhZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiBhY3RpdmF0ZUluc2VydE1vZHVsZSgpIHtcclxuICAgIHZhciBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xyXG4gICAgYm9keS5kYXRhc2V0LmFjdGl2ZSA9ICdpbnNlcnQnO1xyXG4gIH0pO1xyXG4gIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIGFjdGl2YXRlRGVsZXRlTW9kdWxlKCkge1xyXG4gICAgdmFyIGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XHJcbiAgICBib2R5LmRhdGFzZXQuYWN0aXZlID0gJ2RlbGV0ZSc7XHJcbiAgfSk7XHJcbiAgZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIGFjdGl2YXRlRWRpdE1vZHVsZSgpIHtcclxuICAgIHZhciBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xyXG4gICAgYm9keS5kYXRhc2V0LmFjdGl2ZSA9ICdlZGl0JztcclxuICB9KTtcclxuICAvLyBjb25zb2xlLmxvZyhib3dzZXIpO1xyXG59KTtcclxuIl19
